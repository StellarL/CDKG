<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637135592038752500%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dJYRJ201909007%26RESULT%3d1%26SIGN%3dx7qKNwReCX5ePOkj6%252fxk0L5wEUQ%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JYRJ201909007&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JYRJ201909007&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201909007&amp;v=MDUzMTMzenFxQnRHRnJDVVI3cWZadVp0RnluaFViektMelRaWkxHNEg5ak1wbzlGWTRRS0RIODR2UjRUNmo1NE8=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#23" data-title="&lt;b&gt;0 引 言&lt;/b&gt; "><b>0 引 言</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#29" data-title="&lt;b&gt;1 时序数据库引擎结构&lt;/b&gt; "><b>1 时序数据库引擎结构</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#36" data-title="&lt;b&gt;2 TSM文件结构设计&lt;/b&gt; "><b>2 TSM文件结构设计</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#41" data-title="&lt;b&gt;3 数据的无损压缩方法&lt;/b&gt; "><b>3 数据的无损压缩方法</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#49" data-title="&lt;b&gt;4 读写性能测试&lt;/b&gt; "><b>4 读写性能测试</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#56" data-title="&lt;b&gt;5 结 语&lt;/b&gt; "><b>5 结 语</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#27" data-title="&lt;b&gt;表1 开源时序数据库性能对比表&lt;/b&gt;"><b>表1 开源时序数据库性能对比表</b></a></li>
                                                <li><a href="#31" data-title="图1 时序数据库引擎结构示意图">图1 时序数据库引擎结构示意图</a></li>
                                                <li><a href="#33" data-title="图2 数据写入及文件压缩流程图">图2 数据写入及文件压缩流程图</a></li>
                                                <li><a href="#35" data-title="图3 数据读取流程图">图3 数据读取流程图</a></li>
                                                <li><a href="#38" data-title="图4 WAL日志文件结构图">图4 WAL日志文件结构图</a></li>
                                                <li><a href="#40" data-title="图5 TSM数据文件结构图">图5 TSM数据文件结构图</a></li>
                                                <li><a href="#43" data-title="图6 数据压缩流程图">图6 数据压缩流程图</a></li>
                                                <li><a href="#54" data-title="图7 5万点数据读取速度曲线">图7 5万点数据读取速度曲线</a></li>
                                                <li><a href="#55" data-title="图8 100万条数据读取速度曲线">图8 100万条数据读取速度曲线</a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="3">


                                    <a id="bibliography_1" title=" 肖子达,朱立谷,冯东煜,等.分布式数据库聚合计算性能优化[J].计算机应用,2017,37(5):1251-1256." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJY201705006&amp;v=MTI0NDFIODR2UjRUNmo1NE8zenFxQnRHRnJDVVI3cWZadVp0RnluaFViek5MejdCZDdHNEg5Yk1xbzlGWW9RS0Q=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[1]</b>
                                         肖子达,朱立谷,冯东煜,等.分布式数据库聚合计算性能优化[J].计算机应用,2017,37(5):1251-1256.
                                    </a>
                                </li>
                                <li id="5">


                                    <a id="bibliography_2" title=" Influxdata[OL].2018.https://www.influxdata.com/." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Influxdata[OL]">
                                        <b>[2]</b>
                                         Influxdata[OL].2018.https://www.influxdata.com/.
                                    </a>
                                </li>
                                <li id="7">


                                    <a id="bibliography_3" title=" DB-Engines[OL].2018.https://db-engines.com/en/ranking/time+series+dbms." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=DB-Engines Ranking">
                                        <b>[3]</b>
                                         DB-Engines[OL].2018.https://db-engines.com/en/ranking/time+series+dbms.
                                    </a>
                                </li>
                                <li id="9">


                                    <a id="bibliography_4" title=" O&#39;Neil P,Cheng E,Gawlick D,et al.The log-structured merge-tree(LSM-tree)[J].Acta Informatica,1996,33(4):351-385." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SSJD&amp;filename=SSJD00003499919&amp;v=MjkwOTRveGNNSDdSN3FkWitadUZpdmxVcnZLSTFzPU5qN0Jhck80SHRIUHE0Wk1iZW9HWTNrNXpCZGg0ajk5U1hxUnJ4&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[4]</b>
                                         O&#39;Neil P,Cheng E,Gawlick D,et al.The log-structured merge-tree(LSM-tree)[J].Acta Informatica,1996,33(4):351-385.
                                    </a>
                                </li>
                                <li id="11">


                                    <a id="bibliography_5" title=" Chang F,Dean J,Ghemawat S,et al.Bigtable:A distributed storage system for structured data[J].Acm Transactions on Computer Systems,2008,26(2):1-26." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SJCM&amp;filename=SJCM13091000096046&amp;v=MDU4NzY2VDRQUUgvaXJSZEdlcnFRVE1ud1plWnRGaW5sVXJ6SUlWb1dhUmM9TmlmSVk3SzdIdGpOcjQ5RlpPSUpESGcvb0JNVA==&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[5]</b>
                                         Chang F,Dean J,Ghemawat S,et al.Bigtable:A distributed storage system for structured data[J].Acm Transactions on Computer Systems,2008,26(2):1-26.
                                    </a>
                                </li>
                                <li id="13">


                                    <a id="bibliography_6" title=" Snappy[OL].2018.http://code.google.com/p/snappy/." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Snappy[OL]">
                                        <b>[6]</b>
                                         Snappy[OL].2018.http://code.google.com/p/snappy/.
                                    </a>
                                </li>
                                <li id="15">


                                    <a id="bibliography_7" title=" ZigZag[OL].2018.https://developers.google.com/protocol-buffers/docs/encoding." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=ZigZag[OL]">
                                        <b>[7]</b>
                                         ZigZag[OL].2018.https://developers.google.com/protocol-buffers/docs/encoding.
                                    </a>
                                </li>
                                <li id="17">


                                    <a id="bibliography_8" title=" Anh V N,Moffat A.Index compression using 64-bit words[J].Software Practice and Experience,2010,40(2):131-147." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SJWD&amp;filename=SJWD00001284480&amp;v=MTUxMzNqOTlTWHFScnhveGNNSDdSN3FkWitadUZpdmxVcnZLSTFzPU5pZmNhck80SHRITnJZZEJZT01QWTNrNXpCZGg0&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[8]</b>
                                         Anh V N,Moffat A.Index compression using 64-bit words[J].Software Practice and Experience,2010,40(2):131-147.
                                    </a>
                                </li>
                                <li id="19">


                                    <a id="bibliography_9" title=" Pelkonen T,Franklin S,Teller J,et al.Gorilla:A Fast,Scalable,In-Memory Time Series Database[J].Proceedings of the Vldb Endowment,2015,8(12):1816-1827." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Gorilla:A fast,scalable,in-memory time series database">
                                        <b>[9]</b>
                                         Pelkonen T,Franklin S,Teller J,et al.Gorilla:A Fast,Scalable,In-Memory Time Series Database[J].Proceedings of the Vldb Endowment,2015,8(12):1816-1827.
                                    </a>
                                </li>
                                <li id="21">


                                    <a id="bibliography_10" title=" influxDB[OL].2018.https://github.com/influxdata/influxdb." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=influxDB[OL]">
                                        <b>[10]</b>
                                         influxDB[OL].2018.https://github.com/influxdata/influxdb.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=JYRJ" target="_blank">计算机应用与软件</a>
                2019,36(09),33-36+40 DOI:10.3969/j.issn.1000-386x.2019.09.006            </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>基于influxDB的工业时序数据库引擎设计</b></span>
                                    </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%BE%90%E5%8C%96%E5%B2%A9&amp;code=17376433&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">徐化岩</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%88%9D%E5%BD%A6%E9%BE%99&amp;code=35253142&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">初彦龙</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E5%86%B6%E9%87%91%E8%87%AA%E5%8A%A8%E5%8C%96%E7%A0%94%E7%A9%B6%E8%AE%BE%E8%AE%A1%E9%99%A2%E6%B7%B7%E5%90%88%E6%B5%81%E7%A8%8B%E5%B7%A5%E4%B8%9A%E8%87%AA%E5%8A%A8%E5%8C%96%E7%B3%BB%E7%BB%9F%E5%8F%8A%E8%A3%85%E5%A4%87%E6%8A%80%E6%9C%AF%E5%9B%BD%E5%AE%B6%E9%87%8D%E7%82%B9%E5%AE%9E%E9%AA%8C%E5%AE%A4&amp;code=0408921&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">冶金自动化研究设计院混合流程工业自动化系统及装备技术国家重点实验室</a>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E8%BE%BD%E5%AE%81%E8%AD%A6%E5%AF%9F%E5%AD%A6%E9%99%A2%E6%B2%BB%E5%AE%89%E7%AE%A1%E7%90%86%E7%B3%BB&amp;code=1699525&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">辽宁警察学院治安管理系</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>工业时序数据具有测点多、采样频率快、读取性能要求高等特点。influxDB提出时间结构合并树TSM,解决了数据的读写性能优化问题,并针对整数、浮点数、布尔、字符串、时间五种数据类型采用不同的压缩算法。它在读写性能、存储空间占用方面取得了较好的效果,在开源时序数据库软件中排名第一。针对influxDB元数据结构相对于工业时序数据过于复杂的问题,提出简化后的TSM文件结构,开发工业时序数据库的引擎,并进行了读写性能测试。结果显示,该引擎一次5万点整型数据写入平均耗时约310 ms,读取1 000点共计100万条数据耗时约626 ms,并且具有很大的性能提升潜力。</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%97%B6%E5%BA%8F%E6%95%B0%E6%8D%AE%E5%BA%93&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">时序数据库;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=influxDB&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">influxDB;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=TSM&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">TSM;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%8E%8B%E7%BC%A9&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">压缩;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E7%B4%A2%E5%BC%95&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">索引;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    徐化岩,高工,主研领域:钢铁企业信息化。;
                                </span>
                                <span>
                                    初彦龙,副教授。;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2019-01-23</p>

                    <p>

                            <b>基金：</b>
                                                        <span>国家重点研发计划项目(2017YFB0304102);</span>
                    </p>
            </div>
                    <h1><b>DESIGN OF INDUSTRIAL TIME SERIES DATABASE ENGINE BASED ON INFLUXDB</b></h1>
                    <h2>
                    <span>Xu Huayan</span>
                    <span>Chu Yanlong</span>
            </h2>
                    <h2>
                    <span>State Key Laboratory of Hybrid Process Industry Automation Systems and Equipment Technology, Automation Research and Design Institute of Metallurgical Industry</span>
                    <span>Department of Public Security Management, Liaoning Police College</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>Industrial time series data have many characteristics, such as many measuring points, fast sampling frequency and high requirement of reading performance. The TSM proposed by influxDB solves the problem of data read-write performance optimization. Different compression algorithms are adopted for five data types: integer, floating point, Boolean, string and time. It has achieved good results in reading and writing performance and storage space occupancy, ranking first in open source sequential database software. Aiming at the problem that influxDB metadata structure is too complex compared with industrial time series data, this paper proposed a simplified TSM file structure, developed an engine of industrial time series database, and tested its read-write performance. The results show that the engine takes about 310 ms to write 50 000 integer data at a time, and about 626 ms to read 1 million data at 1 000 points, and has great potential for performance improvement.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Time%20series%20database&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Time series database;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=InfluxDB&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">InfluxDB;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=TSM&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">TSM;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Compression&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Compression;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Index&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Index;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2019-01-23</p>
                                    <p>
                                            </p>
            </div>


        <!--brief start-->
                        <h3 id="23" name="23" class="anchor-tag"><b>0 引 言</b></h3>
                <div class="p1">
                    <p id="24">时序数据即时间序列数据,指按照时间先后顺序变化、带时间标签的数据。时序数据主要由电力、化工、冶金等各类型实时监测、检查与分析设备所采集、产生的数据,这些数据的典型特点是:(1) 采样频率快,每秒甚至几十毫秒采样一次;(2) 测点多信息量大,一个千万吨级钢铁联合企业共有约50万个在线监测点,如果每秒采集后不压缩存储,一天需要800 GB存储空间;(3) 数据按照时间顺序产生,一经产生不再变化;(4) 一次读取的数据量大,绘制一条24小时秒级曲线需要读取86 400条数据;(5) 没有关系数据的并发写入/更改情况,没有读写共享冲突问题;(6) 单点数据价值小,对数据一致性要求没有业务数据严格。</p>
                </div>
                <div class="p1">
                    <p id="25">目前,工业领域普遍的做法是使用商业实时数据库软件,如OSIsoft PI、Wonderware Insql、GE IHistorian等,作为时序数据库的存储和读取工具。随着大数据技术的发展,近年来也有一些基于HBase、MongoDB<citation id="59" type="reference"><link href="3" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>等大数据平台的研究。</p>
                </div>
                <div class="p1">
                    <p id="26">2013年,Errplane公司将influxDB<citation id="60" type="reference"><link href="5" rel="bibliography" /><sup>[<a class="sup">2</a>]</sup></citation>开源,经过不断改进现已在开源时序数据库中排名第一<citation id="61" type="reference"><link href="7" rel="bibliography" /><sup>[<a class="sup">3</a>]</sup></citation>。influxDB参考O'Neil P等<citation id="62" type="reference"><link href="9" rel="bibliography" /><sup>[<a class="sup">4</a>]</sup></citation>提出应用于BigTable<citation id="63" type="reference"><link href="11" rel="bibliography" /><sup>[<a class="sup">5</a>]</sup></citation>的日志结构合并树(Log Structured Merge Tree,LSM),提出了时间结构合并树(Time Structured Merge Tree,TSM),针对时序数据的读写分别进行了优化设计。在写入时,将数据追加写入到日志文件(Write Ahead Log,WAL)中,并在内存中进行缓存,当内存缓存达到一定大小时创建新的日志文件,并启动压缩线程,将数据按照读取优化的方式压缩成TSM数据文件。根据官方提供的数据<citation id="64" type="reference"><link href="5" rel="bibliography" /><sup>[<a class="sup">2</a>]</sup></citation>,influxDB与其他几个时序数据库的性能比较如表1所示。</p>
                </div>
                <div class="area_img" id="27">
                    <p class="img_tit"><b>表1 开源时序数据库性能对比表</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="27" border="1"><tr><td>序号</td><td>对比数据库</td><td>写入速度</td><td>读取速度</td><td>存储空间占用</td></tr><tr><td><br />1</td><td>Cassandra</td><td>快4.5倍</td><td>快45倍</td><td>少2.1倍</td></tr><tr><td><br />2</td><td>Elasticsearch</td><td>快6.1倍</td><td>快8.2倍</td><td>少2.5倍</td></tr><tr><td><br />3</td><td>MongoDB</td><td>快2.4倍</td><td>快5.7倍</td><td>少20倍</td></tr><tr><td><br />4</td><td>OpenTSDB</td><td>快5倍</td><td>快3.65～4倍</td><td>少16.5倍</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="28">influxDB起源于对服务器运行情况进行监控这一特定领域,设计了较为复杂的元数据模型以便能够保存除测点、时间、取值之外的附加属性信息。数据存储时的键为含有测点名、属性类型、取值类型的字符串,不仅占用空间多,而且索引时需要根据字符串长度计算数据位置,增加了检索计算量,这一复杂设计对于工业时序数据而言是多余的。本文参考influxDB的引擎代码,改进了TSM文件结构,实现了工业时序数据库引擎,并进行了性能测试。</p>
                </div>
                <h3 id="29" name="29" class="anchor-tag"><b>1 时序数据库引擎结构</b></h3>
                <div class="p1">
                    <p id="30">引擎自顶而下包括数据库实例、存储策略、存储分片几个层次,如图1所示。每个数据库实例包含一个或更多存储策略,用于定义存储时长,存储策略包含多个存储分片,每个存储分片负责一段时间的数据,超过时长的过期数据会以存储分片为单位进行整体删除,以提高删除效率。每个存储分片里包含一个内存缓存区、一个或更多日志文件、多个数据文件,以及用于处理写入、压缩、读取的线程。</p>
                </div>
                <div class="area_img" id="31">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201909007_031.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 时序数据库引擎结构示意图" src="Detail/GetImg?filename=images/JYRJ201909007_031.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图1 时序数据库引擎结构示意图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201909007_031.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="32">在写入时,系统根据数据点所属数据库实例名找到数据库实例,由数据库实例找到数据点所属数据存储策略,然后由存储策略根据数据的时间范围找到命中的存储片区,如果片区不存在则创建片区,并将数据分发给片区执行写入。存储片区负责将数据同时写入到内存缓存与日志文件中,日志文件定时压缩为数据文件,数据文件再逐步压缩为更大的数据文件,直到数据文件大小达到上限不再压缩。写入流程如图2所示。</p>
                </div>
                <div class="area_img" id="33">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201909007_033.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 数据写入及文件压缩流程图" src="Detail/GetImg?filename=images/JYRJ201909007_033.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图2 数据写入及文件压缩流程图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201909007_033.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="34">在读取时,系统首先找到所有命中的存储片区,由片区判断是从其内存缓存中读取还是从其数据文件中读取。如果是从数据文件中读取,利用文件中的索引快速定位数据位置,读取后由系统将所有命中片区返回的结果按照时间先后顺序合并,返回最终查询结果。读取流程如图3所示。</p>
                </div>
                <div class="area_img" id="35">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201909007_035.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 数据读取流程图" src="Detail/GetImg?filename=images/JYRJ201909007_035.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图3 数据读取流程图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201909007_035.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="36" name="36" class="anchor-tag"><b>2 TSM文件结构设计</b></h3>
                <div class="p1">
                    <p id="37">TSM采用内存缓存和WAL日志文件来保证高效写入,内存缓存目的是代替日志文件提供对临近数据的高效读取,日志文件的目的是在数据库重启后能够重建内存缓存,日志文件不用于读取数据。由于磁盘的顺序写入速度快而随机写入速度慢(寻道和旋转延迟),而时序数据的特点是大量数据实时采集、实时写入,为了提高写入效率将一批数据(一般为5 000到10 000点)按照数据类型、点位编号、点数、时间、值、时间、值、…、数据类型等顺序编码为字节流,如图4所示,再利用snappy算法<citation id="65" type="reference"><link href="13" rel="bibliography" /><sup>[<a class="sup">6</a>]</sup></citation>压缩后写入WAL日志文件。同时,将写入日志文件的数据以点位编号、时间、值的结构存入内存缓存区,内存缓存区与日志文件保持同步。日志文件大小固定,当达到规定大小时自动生成一个新的日志文件。</p>
                </div>
                <div class="area_img" id="38">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201909007_038.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 WAL日志文件结构图" src="Detail/GetImg?filename=images/JYRJ201909007_038.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图4 WAL日志文件结构图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201909007_038.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="39">TSM数据文件中包含5字节文件头、多个数据块、一个索引块和8字节文件尾,如图5所示。文件头存放数据库引擎的幻数和版本号;数据块区由若干组4字节校验和与<i>N</i>字节数据块组成;校验和是数据块的32位循环冗余校验码;数据块为数据点的一组按时间排序后的数据经过压缩后得到的字节数组;索引块由点位编号、数据类型、数据块数量、数据块索引1、数据块索引2等构成,每个数据块索引包含数据块起始时间、数据块结束时间、数据块在文件中的起始位置、数据块字节数构成;文件尾8字节用于保存索引块在TSM数据文件中的起始字节位置。</p>
                </div>
                <div class="area_img" id="40">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201909007_040.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 TSM数据文件结构图" src="Detail/GetImg?filename=images/JYRJ201909007_040.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图5 TSM数据文件结构图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201909007_040.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="41" name="41" class="anchor-tag"><b>3 数据的无损压缩方法</b></h3>
                <div class="p1">
                    <p id="42">时序数据包含点名、时间和数值信息,写入一组时序数据时,如图6所示,压缩器遍历每个点,判断数值的数据类型是整数、浮点数、布尔值还是字符串,分别调用相应的压缩方法进行压缩,时间类型调用时间压缩方法压缩,将两者压缩得到的字节数组合并后写入到数据文件中。整数、浮点数、布尔、字符串、时间五种数据类型的压缩算法如下所述。</p>
                </div>
                <div class="area_img" id="43">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201909007_043.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 数据压缩流程图" src="Detail/GetImg?filename=images/JYRJ201909007_043.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图6 数据压缩流程图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201909007_043.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="44">整数的压缩方法为:第一个整数不压缩,从第二个整数开始计算与前一个数的差值,并对差值通过ZigZag编码<citation id="66" type="reference"><link href="15" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>将差值为负数的变为正数,然后分三种情况进行压缩:(1) 如果连续两个以上差值相等,则只存储差值及差值出现的次数;(2) 如果差值超过十六进制数值0x0800000000000000,不压缩;(3) 否则,将差值采用simple8b算法<citation id="67" type="reference"><link href="17" rel="bibliography" /><sup>[<a class="sup">8</a>]</sup></citation>进行压缩。</p>
                </div>
                <div class="p1">
                    <p id="45">浮点数的压缩方法<citation id="68" type="reference"><link href="19" rel="bibliography" /><sup>[<a class="sup">9</a>]</sup></citation>为:第一个浮点数不压缩,从第二个浮点数开始与前一个数进行异或计算,得到一个64位无符号整数作为差值,当两个浮点数数值接近时得到的差值很小。当差值为0时仅存1位0;不为零时存1位1,然后用5位存储64位中位于左端的0的数量,用6位存储居右端的0的数量,再将非零位截取出来存储。</p>
                </div>
                <div class="p1">
                    <p id="46">布尔值的压缩方法为:直接将布尔值用1位存储到字节末尾(每个字节有8位),当存满1个字节后分配一个新字节。</p>
                </div>
                <div class="p1">
                    <p id="47">字符串的压缩方法为:将字符串顺序添加到字节流后用snappy算法<citation id="69" type="reference"><link href="13" rel="bibliography" /><sup>[<a class="sup">6</a>]</sup></citation>压缩。</p>
                </div>
                <div class="p1">
                    <p id="48">时间类型的压缩方法为:第一个时间不压缩,从第二个时间开始与前一个时间进行差值计算。第一个差值不压缩,然后从第二个差值开始计算与前一个差值的差值。如果差值的差值为0(当数据的存储间隔相同时),仅存储0和0出现的次数;否则采用simple8b算法<citation id="70" type="reference"><link href="17" rel="bibliography" /><sup>[<a class="sup">8</a>]</sup></citation>存储该差值的差值。</p>
                </div>
                <h3 id="49" name="49" class="anchor-tag"><b>4 读写性能测试</b></h3>
                <div class="p1">
                    <p id="50">influxDB开源代码<citation id="71" type="reference"><link href="21" rel="bibliography" /><sup>[<a class="sup">10</a>]</sup></citation>采用GO语言实现,本文将引擎部分用.net framework 4.5重新实现,通过随机数发生器每秒生成50 000点整型随机数,进行了性能测试。测试硬件设备为一台ThinkPad T550笔记本电脑,CPU:i5 5200U 2.2 G双核,内存:8 GB,硬盘:256 GB固态硬盘。</p>
                </div>
                <div class="p1">
                    <p id="51">写入测试是每秒随机发生5万点整型数据,重复3 600次写入,写入平均耗时310毫秒。读取性能测试进行了两组,一组测试从1条/点到200条/点,分200次读取5万点的数据,读取的数据条目数从5万条到1 000万条,如图7所示,读取耗时从2.8秒到9.2秒,随着条数增加耗时呈线性增长趋势;另一组测试分50次固定读取100万条数据,点数从1 000开始以1 000点步长一直增长到5万点,得到的曲线如图8所示,随着点数增加,用时从0.6秒到3.3秒呈线性增长趋势。</p>
                </div>
                <div class="p1">
                    <p id="52">根据测试结果,引擎能够实现单实例每秒5万点的数据写入,读取相同记录数的情况下,点数越少速度越快,这主要是在TSM文件中,一段时间内相同点的数据是按时间顺序连续存储的,而不同点的数据是间隔存储的,因此点数越多文件位置的计算越多。考虑到工业时序数据库应用以单点历史曲线读取为主,TSM文件结构有利于提高读性能。</p>
                </div>
                <div class="p1">
                    <p id="53">引擎的时间消耗中,用于集合运算和比较约占1/3,五种数据类型的压缩和解压缩约占2/3。由于.net framework相较.net core集合运算性能差距较大,加上浮点数、整数压缩算法性能还有提升空间,引擎通过.net core重新编译并采用性能更高的压缩算法后,读写性能会有较大提升。</p>
                </div>
                <div class="area_img" id="54">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201909007_054.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 5万点数据读取速度曲线" src="Detail/GetImg?filename=images/JYRJ201909007_054.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图7 5万点数据读取速度曲线  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201909007_054.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="55">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201909007_055.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图8 100万条数据读取速度曲线" src="Detail/GetImg?filename=images/JYRJ201909007_055.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图8 100万条数据读取速度曲线  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201909007_055.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="56" name="56" class="anchor-tag"><b>5 结 语</b></h3>
                <div class="p1">
                    <p id="57">本文按照工业时序数据的特点,参考influxDB思想设计了工业时序数据库的引擎。引擎自顶而下包括数据库实例、存储策略、存储分片几个层次,每个存储分片里包含一个内存缓存区、一个或更多日志文件、多个数据文件,以及用于处理写入、压缩、读取的线程。本文简化了TSM文件结构,数据点位关键字由influxDB的字符型改为整型,降低了存储占用和索引计算量。最后,进行了引擎的开发和性能测试。</p>
                </div>
                <div class="p1">
                    <p id="58">未来,还需要做三个方面的改进:一是利用.net core重新编译提高性能;二是压缩解压缩部分替换为性能更高的算法库;三是增加分布式冗余机制,以便实现更大规模的数据吞吐量,并提高数据容错能力。</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="3">
                            <a id="bibliography_1" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJY201705006&amp;v=MjcxNjNVUjdxZlp1WnRGeW5oVWJ6Tkx6N0JkN0c0SDliTXFvOUZZb1FLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckM=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[1]</b> 肖子达,朱立谷,冯东煜,等.分布式数据库聚合计算性能优化[J].计算机应用,2017,37(5):1251-1256.
                            </a>
                        </p>
                        <p id="5">
                            <a id="bibliography_2" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Influxdata[OL]">

                                <b>[2]</b> Influxdata[OL].2018.https://www.influxdata.com/.
                            </a>
                        </p>
                        <p id="7">
                            <a id="bibliography_3" target="_blank" href="http://scholar.cnki.net/result.aspx?q=DB-Engines Ranking">

                                <b>[3]</b> DB-Engines[OL].2018.https://db-engines.com/en/ranking/time+series+dbms.
                            </a>
                        </p>
                        <p id="9">
                            <a id="bibliography_4" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SSJD&amp;filename=SSJD00003499919&amp;v=MTczMTd4b3hjTUg3UjdxZForWnVGaXZsVXJ2S0kxcz1OajdCYXJPNEh0SFBxNFpNYmVvR1kzazV6QmRoNGo5OVNYcVJy&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[4]</b> O'Neil P,Cheng E,Gawlick D,et al.The log-structured merge-tree(LSM-tree)[J].Acta Informatica,1996,33(4):351-385.
                            </a>
                        </p>
                        <p id="11">
                            <a id="bibliography_5" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SJCM&amp;filename=SJCM13091000096046&amp;v=MDYzMTZJVm9XYVJjPU5pZklZN0s3SHRqTnI0OUZaT0lKREhnL29CTVQ2VDRQUUgvaXJSZEdlcnFRVE1ud1plWnRGaW5sVXJ6SQ==&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[5]</b> Chang F,Dean J,Ghemawat S,et al.Bigtable:A distributed storage system for structured data[J].Acm Transactions on Computer Systems,2008,26(2):1-26.
                            </a>
                        </p>
                        <p id="13">
                            <a id="bibliography_6" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Snappy[OL]">

                                <b>[6]</b> Snappy[OL].2018.http://code.google.com/p/snappy/.
                            </a>
                        </p>
                        <p id="15">
                            <a id="bibliography_7" target="_blank" href="http://scholar.cnki.net/result.aspx?q=ZigZag[OL]">

                                <b>[7]</b> ZigZag[OL].2018.https://developers.google.com/protocol-buffers/docs/encoding.
                            </a>
                        </p>
                        <p id="17">
                            <a id="bibliography_8" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SJWD&amp;filename=SJWD00001284480&amp;v=Mjk5NzRrNXpCZGg0ajk5U1hxUnJ4b3hjTUg3UjdxZForWnVGaXZsVXJ2S0kxcz1OaWZjYXJPNEh0SE5yWWRCWU9NUFkz&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[8]</b> Anh V N,Moffat A.Index compression using 64-bit words[J].Software Practice and Experience,2010,40(2):131-147.
                            </a>
                        </p>
                        <p id="19">
                            <a id="bibliography_9" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Gorilla:A fast,scalable,in-memory time series database">

                                <b>[9]</b> Pelkonen T,Franklin S,Teller J,et al.Gorilla:A Fast,Scalable,In-Memory Time Series Database[J].Proceedings of the Vldb Endowment,2015,8(12):1816-1827.
                            </a>
                        </p>
                        <p id="21">
                            <a id="bibliography_10" target="_blank" href="http://scholar.cnki.net/result.aspx?q=influxDB[OL]">

                                <b>[10]</b> influxDB[OL].2018.https://github.com/influxdata/influxdb.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="JYRJ201909007" />
        <input id="dpi" type="hidden" value="600" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201909007&amp;v=MDUzMTMzenFxQnRHRnJDVVI3cWZadVp0RnluaFViektMelRaWkxHNEg5ak1wbzlGWTRRS0RIODR2UjRUNmo1NE8=&amp;uid=WEEvREcwSlJHSldRa1FhdkJtNEYxa3hKZG9XL1JrZXNhdGVWVEdvM0tSMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
