<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637135637452131250%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dJYRJ201906004%26RESULT%3d1%26SIGN%3dRApN13z2ONMCp%252fV9v3vSWo%252buzns%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JYRJ201906004&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JYRJ201906004&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201906004&amp;v=MjEzOTlHRnJDVVI3cWZadVp0Rnl2a1c3N0JMelRaWkxHNEg5ak1xWTlGWUlRS0RIODR2UjRUNmo1NE8zenFxQnQ=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#31" data-title="&lt;b&gt;0 引 言&lt;/b&gt; "><b>0 引 言</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#35" data-title="&lt;b&gt;1 相关技术&lt;/b&gt; "><b>1 相关技术</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#36" data-title="&lt;b&gt;1.1 Node.js环境&lt;/b&gt;"><b>1.1 Node.js环境</b></a></li>
                                                <li><a href="#39" data-title="&lt;b&gt;1.2 BLE协议简介&lt;/b&gt;"><b>1.2 BLE协议简介</b></a></li>
                                                <li><a href="#44" data-title="&lt;b&gt;1.3 WebSocket通信技术&lt;/b&gt;"><b>1.3 WebSocket通信技术</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#46" data-title="&lt;b&gt;2 中间件架构设计&lt;/b&gt; "><b>2 中间件架构设计</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#47" data-title="&lt;b&gt;2.1 体系拓扑结构&lt;/b&gt;"><b>2.1 体系拓扑结构</b></a></li>
                                                <li><a href="#50" data-title="&lt;b&gt;2.2 软件架构&lt;/b&gt;"><b>2.2 软件架构</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#53" data-title="&lt;b&gt;3 系统实现&lt;/b&gt; "><b>3 系统实现</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#55" data-title="&lt;b&gt;3.1 系统的环境准备&lt;/b&gt;"><b>3.1 系统的环境准备</b></a></li>
                                                <li><a href="#60" data-title="&lt;b&gt;3.2 可穿戴医疗设备基本操作实现&lt;/b&gt;"><b>3.2 可穿戴医疗设备基本操作实现</b></a></li>
                                                <li><a href="#81" data-title="&lt;b&gt;3.3 多设备并发实现&lt;/b&gt;"><b>3.3 多设备并发实现</b></a></li>
                                                <li><a href="#96" data-title="&lt;b&gt;3.4 可穿戴设备管理接口设计&lt;/b&gt;"><b>3.4 可穿戴设备管理接口设计</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#101" data-title="&lt;b&gt;4 中间件系统测试&lt;/b&gt; "><b>4 中间件系统测试</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#107" data-title="&lt;b&gt;4.1 可穿戴医疗设备连接测试&lt;/b&gt;"><b>4.1 可穿戴医疗设备连接测试</b></a></li>
                                                <li><a href="#110" data-title="&lt;b&gt;4.2 可穿戴医疗设备并发操作以及数据传输测试&lt;/b&gt;"><b>4.2 可穿戴医疗设备并发操作以及数据传输测试</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#114" data-title="&lt;b&gt;5 结 语&lt;/b&gt; "><b>5 结 语</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#41" data-title="图1 BLE协议栈">图1 BLE协议栈</a></li>
                                                <li><a href="#49" data-title="图2 体系结构拓扑">图2 体系结构拓扑</a></li>
                                                <li><a href="#52" data-title="图3 中间件软件架构">图3 中间件软件架构</a></li>
                                                <li><a href="#75" data-title="图4 数据处理流程">图4 数据处理流程</a></li>
                                                <li><a href="#80" data-title="&lt;b&gt;表1 血压计与心率计控制编码&lt;/b&gt;"><b>表1 血压计与心率计控制编码</b></a></li>
                                                <li><a href="#83" data-title="图5 设备调度工作流程图">图5 设备调度工作流程图</a></li>
                                                <li><a href="#98" data-title="图6 可穿戴医疗设备管理流程图">图6 可穿戴医疗设备管理流程图</a></li>
                                                <li><a href="#104" data-title="图7 设备实物图">图7 设备实物图</a></li>
                                                <li><a href="#106" data-title="图8 客户端界面设计">图8 客户端界面设计</a></li>
                                                <li><a href="#109" data-title="图9 可穿戴医疗设备连接状态图">图9 可穿戴医疗设备连接状态图</a></li>
                                                <li><a href="#112" data-title="图1 0 并发操作与数据传输测试">图1 0 并发操作与数据传输测试</a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="3">


                                    <a id="bibliography_1" title=" 樊瑜波.可穿戴医疗/健康技术——生物医学工程的机遇和挑战[J].生物医学工程学杂志, 2016, 33 (1) :1-1." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=SWGC201601002&amp;v=MjMwNjVSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1WnRGeXZrVzc3QU5qck1iYkc0SDlmTXJvOUZab1FLREg4NHY=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[1]</b>
                                         樊瑜波.可穿戴医疗/健康技术——生物医学工程的机遇和挑战[J].生物医学工程学杂志, 2016, 33 (1) :1-1.
                                    </a>
                                </li>
                                <li id="5">


                                    <a id="bibliography_2" title=" 王瑞, 吕蓉, 梁涛.可穿戴设备在疾病管理中的应用进展[J].中华护理杂志, 2018 (1) :114-116." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=ZHHL201801031&amp;v=MTEyMDJDVVI3cWZadVp0Rnl2a1c3N0FQeVhEWXJHNEg5bk1ybzlHWllRS0RIODR2UjRUNmo1NE8zenFxQnRHRnI=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[2]</b>
                                         王瑞, 吕蓉, 梁涛.可穿戴设备在疾病管理中的应用进展[J].中华护理杂志, 2018 (1) :114-116.
                                    </a>
                                </li>
                                <li id="7">


                                    <a id="bibliography_3" title=" 王启林, 李小鹏, 郁滨, 等.基于连接认证的低功耗蓝牙泛洪攻击防御方案[J].计算机应用研究, 2017, 34 (2) :499-502." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSYJ201702041&amp;v=MDI3OTh0R0ZyQ1VSN3FmWnVadEZ5dmtXNzdBTHo3U1pMRzRIOWJNclk5QlpZUUtESDg0dlI0VDZqNTRPM3pxcUI=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[3]</b>
                                         王启林, 李小鹏, 郁滨, 等.基于连接认证的低功耗蓝牙泛洪攻击防御方案[J].计算机应用研究, 2017, 34 (2) :499-502.
                                    </a>
                                </li>
                                <li id="9">


                                    <a id="bibliography_4" title=" 甘广辉, 童蕾, 陈超敏.基于低功耗蓝牙网络的家用胎儿监护系统设计[J].电子技术应用, 2015, 41 (8) :34-36." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DZJY201508012&amp;v=MDk2OTdCdEdGckNVUjdxZlp1WnRGeXZrVzc3QUlUZkJkN0c0SDlUTXA0OUVab1FLREg4NHZSNFQ2ajU0TzN6cXE=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[4]</b>
                                         甘广辉, 童蕾, 陈超敏.基于低功耗蓝牙网络的家用胎儿监护系统设计[J].电子技术应用, 2015, 41 (8) :34-36.
                                    </a>
                                </li>
                                <li id="11">


                                    <a id="bibliography_5" title=" 张金玲, 高志新.iOS平台无线健康监护系统[J].北京邮电大学学报, 2016, 39 (6) :17-21." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=BJYD201606003&amp;v=MTk2NjdmWnVadEZ5dmtXNzdBSnlmU2FyRzRIOWZNcVk5Rlo0UUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3E=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[5]</b>
                                         张金玲, 高志新.iOS平台无线健康监护系统[J].北京邮电大学学报, 2016, 39 (6) :17-21.
                                    </a>
                                </li>
                                <li id="13">


                                    <a id="bibliography_6" title=" 谢佳柏, 陈贤祥, 胡欣宇, 等.基于低功耗蓝牙和WebSocket的物联网数据网关[J].仪表技术与传感器, 2016 (1) :76-78." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YBJS201601024&amp;v=MTk3MjBGckNVUjdxZlp1WnRGeXZrVzc3QVBDL0JmYkc0SDlmTXJvOUhZSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEc=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[6]</b>
                                         谢佳柏, 陈贤祥, 胡欣宇, 等.基于低功耗蓝牙和WebSocket的物联网数据网关[J].仪表技术与传感器, 2016 (1) :76-78.
                                    </a>
                                </li>
                                <li id="15">


                                    <a id="bibliography_7" title=" Zachariah T, Klugman N, Campbell B, et al.The Internet of Things Has a Gateway Problem[C]//Proceedings of the 16th International Workshop on Mobile Computing Systems and Applications.ACM, 2015:27-32." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=The Internet of Things Has a Gateway Problem">
                                        <b>[7]</b>
                                         Zachariah T, Klugman N, Campbell B, et al.The Internet of Things Has a Gateway Problem[C]//Proceedings of the 16th International Workshop on Mobile Computing Systems and Applications.ACM, 2015:27-32.
                                    </a>
                                </li>
                                <li id="17">


                                    <a id="bibliography_8" title=" 王伶俐, 张传国.基于NodeJS+Express框架的轻应用定制平台的设计与实现[J].计算机科学, 2017, 44 (b11) :596-599." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJA2017S2129&amp;v=MDYxMzdZUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3FmWnVadEZ5dmtXNzdBTHo3QmI3RzRIOWF2clk1SGI=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[8]</b>
                                         王伶俐, 张传国.基于NodeJS+Express框架的轻应用定制平台的设计与实现[J].计算机科学, 2017, 44 (b11) :596-599.
                                    </a>
                                </li>
                                <li id="19">


                                    <a id="bibliography_9" title=" Gomez C, Oller J, Paradells J.Overview and Evaluation of Bluetooth Low Energy:An Emerging Low-Power Wireless Technology[J].Sensors, 2012, 12 (9) :11734-11753." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Overview and Evaluation of Bluetooth Low Energy: An Emerging Low-Power Wireless Technology">
                                        <b>[9]</b>
                                         Gomez C, Oller J, Paradells J.Overview and Evaluation of Bluetooth Low Energy:An Emerging Low-Power Wireless Technology[J].Sensors, 2012, 12 (9) :11734-11753.
                                    </a>
                                </li>
                                <li id="21">


                                    <a id="bibliography_10" title=" 陈炜, 苏厚勤, 柴炯.基于WebSocket技术水文资源监管系统的研究与实现[J].计算机应用与软件, 2016, 33 (3) :104-108, 113." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201603024&amp;v=MDUyMjRaTEc0SDlmTXJJOUhZSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1WnRGeXZrVzc3QUx6VFo=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[10]</b>
                                         陈炜, 苏厚勤, 柴炯.基于WebSocket技术水文资源监管系统的研究与实现[J].计算机应用与软件, 2016, 33 (3) :104-108, 113.
                                    </a>
                                </li>
                                <li id="23">


                                    <a id="bibliography_11" title=" Ma K, Sun R.Introducing WebSocket-Based Real-Time Monitoring System for Remote Intelligent Buildings[J].International Journal of Distributed Sensor Networks, 2013, 2013 (12) :867693." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Introducing WebSocket-Based Real-Time Monitoring System for Remote Intelligent Buildings">
                                        <b>[11]</b>
                                         Ma K, Sun R.Introducing WebSocket-Based Real-Time Monitoring System for Remote Intelligent Buildings[J].International Journal of Distributed Sensor Networks, 2013, 2013 (12) :867693.
                                    </a>
                                </li>
                                <li id="25">


                                    <a id="bibliography_12" title=" 王骥, 任肖丽.基于蓝牙低功耗技术的智能健康监测手表系统[J].生物医学工程学杂志, 2017 (4) :557-564." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=SWGC201704010&amp;v=MDE5MjNNYmJHNEg5Yk1xNDlFWklRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVI3cWZadVp0Rnl2a1c3N0FOanI=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[12]</b>
                                         王骥, 任肖丽.基于蓝牙低功耗技术的智能健康监测手表系统[J].生物医学工程学杂志, 2017 (4) :557-564.
                                    </a>
                                </li>
                                <li id="27">


                                    <a id="bibliography_13" title=" Zhang W, Stoll R, Stoll N, et al.An mHealth Monitoring System for Telemedicine Based on WebSocket Wireless Communication[J].Journal of Networks, 2013, 8 (4) :955-962." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SAPD&amp;filename=SAPD13102900004277&amp;v=MTM0MTZEbnMrb0JNVDZUNFBRSC9pclJkR2VycVFUTW53WmVadEZpbmxVcnpJSTE4Y2F4bz1OaXpiYXJLN0g5SE9wbzlGWk9zTA==&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[13]</b>
                                         Zhang W, Stoll R, Stoll N, et al.An mHealth Monitoring System for Telemedicine Based on WebSocket Wireless Communication[J].Journal of Networks, 2013, 8 (4) :955-962.
                                    </a>
                                </li>
                                <li id="29">


                                    <a id="bibliography_14" title=" Pimentel V, Nickerson B G.Communicating and Displaying Real-Time Data with WebSocket[J].IEEE Internet Computing, 2012, 16 (4) :45-53." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Communicating and Displaying Real-Time Data with WebSocket">
                                        <b>[14]</b>
                                         Pimentel V, Nickerson B G.Communicating and Displaying Real-Time Data with WebSocket[J].IEEE Internet Computing, 2012, 16 (4) :45-53.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=JYRJ" target="_blank">计算机应用与软件</a>
                2019,36(06),14-20 DOI:10.3969/j.issn.1000-386x.2019.06.003            </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>基于Node.js的BLE可穿戴医疗设备管理中间件研究与实现</b></span>
                                    </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E9%99%88%E5%88%9A&amp;code=15173943&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">陈刚</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E9%97%AB%E8%88%AA&amp;code=41979444&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">闫航</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%BC%A0%E4%BA%9A%E5%85%B5&amp;code=41979445&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">张亚兵</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E7%8E%8B%E4%BF%8A%E7%BA%A2&amp;code=15540473&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">王俊红</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E9%83%91%E5%B7%9E%E5%A4%A7%E5%AD%A6%E4%BA%92%E8%81%94%E7%BD%91%E5%8C%BB%E7%96%97%E4%B8%8E%E5%81%A5%E5%BA%B7%E6%9C%8D%E5%8A%A1%E5%8D%8F%E5%90%8C%E5%88%9B%E6%96%B0%E4%B8%AD%E5%BF%83&amp;code=0048752&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">郑州大学互联网医疗与健康服务协同创新中心</a>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E9%83%91%E5%B7%9E%E5%A4%A7%E5%AD%A6%E6%8A%A4%E7%90%86%E5%AD%A6%E9%99%A2&amp;code=0048752&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">郑州大学护理学院</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>为了解决可穿戴医疗设备在通用计算平台下的通信与管理问题, 更好地在智能病房系统中支持对病患的生命体征监测, 设计基于Node.js的低功耗蓝牙BLE (Bluetooth Low Energy) 可穿戴医疗设备管理中间件, 实现对BLE可穿戴医疗设备的设备连接、操作控制、数据处理等管理功能。同时还实现多设备的并发控制, 满足医疗场景下多设备协同监测的需求。未来, 各类可穿戴医疗设备借助于该系统可便捷地接入到智能病房系统中, 进一步扩展可穿戴医疗设备在智能化医疗服务中的应用。</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E4%BD%8E%E5%8A%9F%E8%80%97%E8%93%9D%E7%89%99&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">低功耗蓝牙;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%8F%AF%E7%A9%BF%E6%88%B4%E5%8C%BB%E7%96%97%E8%AE%BE%E5%A4%87&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">可穿戴医疗设备;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%81%A5%E5%BA%B7%E7%9B%91%E6%B5%8B&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">健康监测;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%99%BA%E8%83%BD%E7%97%85%E6%88%BF&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">智能病房;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    陈刚, 工程师, 主研领域:网络安全, 语义网络, 互联网与移动医疗服务。;
                                </span>
                                <span>
                                    闫航, 硕士生。;
                                </span>
                                <span>
                                    张亚兵, 硕士生。;
                                </span>
                                <span>
                                    王俊红, 硕士生。;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2018-12-14</p>

                    <p>

                            <b>基金：</b>
                                                        <span>国家重点研发计划项目 (2017YFB1401200);</span>
                                <span>河南省科技攻关项目 (182102310137);</span>
                                <span>赛尔网络下一代互联网技术创新项目 (NGII20170716);</span>
                                <span>2019年河南省高等学校重点科研项目 (19A520039);</span>
                    </p>
            </div>
                    <h1><b>RESEARCH AND IMPLEMENTATION OF BLE WEARABLE MEDICAL DEVICE MANAGEMENT MIDDLEWARE BASED ON NODE.JS</b></h1>
                    <h2>
                    <span>Chen Gang</span>
                    <span>Yan Hang</span>
                    <span>Zhang Yabing</span>
                    <span>Wang Junhong</span>
            </h2>
                    <h2>
                    <span>Internet Medical and Health Service Collaborative Innovation Center, Zhengzhou University</span>
                    <span>College of Nursing, Zhengzhou University</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>In order to solve the communication and management problems of wearable medical devices under general-purpose computing platform, and better support the vital signs monitoring for patients in the intelligent ward system, we designed a bluetooth low energy (BLE) wearable medical device management middleware based on Node.js. It realized the management functions of device connection, operation control and data processing of BLE wearable medical device. It also realized the concurrent operation of multiple devices to meet the needs of multi-device collaborative monitoring in medical scenarios. In the future, wearable medical devices can be easily accessed into the smart ward system by means of this system, which further expand the application of wearable medical devices in intelligent medical services.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Bluetooth%20low%20energy%20(BLE)%20&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Bluetooth low energy (BLE) ;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Wearable%20medical%20device&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Wearable medical device;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Health%20monitoring&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Health monitoring;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Intelligent%20ward&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Intelligent ward;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2018-12-14</p>
                                    <p>
                                            </p>
            </div>


        <!--brief start-->
                        <h3 id="31" name="31" class="anchor-tag"><b>0 引 言</b></h3>
                <div class="p1">
                    <p id="32">可穿戴医疗设备是可以直接穿在身上或作为配件穿戴并能传输监测数据的一种计算设备<citation id="116" type="reference"><link href="3" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>。各类可穿戴医疗设备在医院病房中发挥着关键的作用。首先, 可穿戴医疗设备是护士对病人进行日常健康监测的重要工具;其次, 在健康方面对特定的生命体征需要进行24 h监护<citation id="117" type="reference"><link href="5" rel="bibliography" /><sup>[<a class="sup">2</a>]</sup></citation>。由于采取有线通信方式的传统可穿戴医疗设备在治疗过程中导线会限制患者的活动, 越来越多的可穿戴医疗设备开始采用无线的通信方式。低功耗蓝牙是蓝牙4.0开始在其标准的基础上针对低功耗应用进行优化后的标准, 凭借快速连接与超低功耗的显著特点, 已经广泛应用于医疗保健、可穿戴设备等领域<citation id="118" type="reference"><link href="7" rel="bibliography" /><sup>[<a class="sup">3</a>]</sup></citation>。</p>
                </div>
                <div class="p1">
                    <p id="33">近年来绝大多数BLE可穿戴医疗设备由智能手机管理。甘广辉等<citation id="119" type="reference"><link href="9" rel="bibliography" /><sup>[<a class="sup">4</a>]</sup></citation>提出了一种基于低功耗蓝牙的家用胎儿监护系统, 实现了对胎心率、宫缩压和胎动生理信号的采集与传输, 并通过手机对数据进行显示和存储以实现胎儿的实时监护。张金玲等<citation id="120" type="reference"><link href="11" rel="bibliography" /><sup>[<a class="sup">5</a>]</sup></citation>设计了一种基于蓝牙低功耗协议的手机无线心电和血氧健康监护系统, 通过手机客户端程序实现人体心电和血氧参数的实时监控。而通用平台Windows或Linux上的开发应用较少, 谢佳柏等<citation id="121" type="reference"><link href="13" rel="bibliography" /><sup>[<a class="sup">6</a>]</sup></citation>设计了一款基于BLE与WebSocket的数据网关, 实现了低功耗蓝牙网络对手机、平板和笔记本电脑的兼容性, 但是该数据网关采用的是51内核, 处理能力较弱, 仅支持同时连接3个简单的传感器节点。在医院病房下的健康监测场景中, 多设备并发使用、健康数据处理、患者管理等操作需要强大的计算能力与通用平台编程需求。此外, 由于各个厂家的设备开发标准体系不互通, 智能手机中的一个APP只能连接同厂家的可穿戴医疗设备, 难以跨厂家、跨平台管理多种设备<citation id="122" type="reference"><link href="15" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>。</p>
                </div>
                <div class="p1">
                    <p id="34">鉴于此, 本文提出了基于Node.js的BLE可穿戴医疗设备管理系统。由于Node.js具备跨平台的特点, 本系统可以灵活部署于Windows和Linux系统上。通过该中间件系统可以集中进行多种可穿戴医疗设备的管理, 同时系统对应用程序提供调用接口, 从而应用程序无需安装专用的BLE软件。本系统实时性强, 响应速度快, 支持并发操作, 能够以一种更加高效的方式进行BLE可穿戴医疗设备的管理。</p>
                </div>
                <h3 id="35" name="35" class="anchor-tag"><b>1 相关技术</b></h3>
                <h4 class="anchor-tag" id="36" name="36"><b>1.1 Node.js环境</b></h4>
                <div class="p1">
                    <p id="37">Node.js是一个基于V8引擎的JavaScript运行环境, 采用轻量和高效的事件驱动、非阻塞I/O模型, 常用于构建快速、可扩展的网络应用程序<citation id="123" type="reference"><link href="17" rel="bibliography" /><sup>[<a class="sup">8</a>]</sup></citation>。它由Ryan Dahl于2009年设计并提出, 用异步I/O和事件驱动取代多线程, 不仅大幅度提升了性能, 还减少了多线程开发的复杂性。Node.js不但采用Chrome V8作为引擎, 还使用了高效的libev和libeio库支持事件驱动和异步I/O, 并在此基础上抽象出了层libuv, 实现了高性能的运行机制。</p>
                </div>
                <div class="p1">
                    <p id="38">Node.js基于事件触发的方式能够快速接收可穿戴医疗设备发来的监测数据, 相比于其他平台有着显著的优势, 并且能够适用于高并发的运作方式, 所以本文所设计的中间件系统选择Node作为运行支撑环境。</p>
                </div>
                <h4 class="anchor-tag" id="39" name="39"><b>1.2 BLE协议简介</b></h4>
                <div class="p1">
                    <p id="40">BLE即蓝牙低功耗技术, 是一种低成本、短距离、超低功耗的无线传输技术<citation id="124" type="reference"><link href="7" rel="bibliography" /><sup>[<a class="sup">3</a>]</sup></citation>。如图1所示为BLE协议栈, BLE应用的开发所要关注的是通用访问配置 (GAP) 子协议与通用属性配置 (GATT) 子协议。</p>
                </div>
                <div class="area_img" id="41">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201906004_041.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 BLE协议栈" src="Detail/GetImg?filename=images/JYRJ201906004_041.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图1 BLE协议栈  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201906004_041.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="42">GAP协议负责控制设备连接和广播。通常将设备分为中心设备 (Central) 与外围设备 (Peripheral) , 中心设备负责扫描并连接其他外围设备, 外围设备则将自身的设备信息对外广播<citation id="125" type="reference"><link href="19" rel="bibliography" /><sup>[<a class="sup">9</a>]</sup></citation>。本设计方案中, 可穿戴医疗设备作为外围设备, 而部署中间件系统的计算机则作为中心设备。</p>
                </div>
                <div class="p1">
                    <p id="43">GATT协议是负责双方数据传输的通用规范, 把各种属性表示为服务 (Service) 的集合, 每个服务都有一个 128 bit 的 UUID 作为这个服务的标识。为了提高传输效率, 蓝牙联盟也定义了较短的16 bit的UUID来使用。服务由若干个特征值 (Characteristic) 组成, 每一个特征值也有唯一的 UUID 作为标识符。特征值由一个value和零个或多个对value的描述组成, 相关的监测数据即存储于特征值中<citation id="126" type="reference"><link href="19" rel="bibliography" /><sup>[<a class="sup">9</a>]</sup></citation>。</p>
                </div>
                <h4 class="anchor-tag" id="44" name="44"><b>1.3 WebSocket通信技术</b></h4>
                <div class="p1">
                    <p id="45">WebSocket是基于TCP协议实现Web浏览器和服务器之间的实时双向通信技术<citation id="127" type="reference"><link href="21" rel="bibliography" /><sup>[<a class="sup">10</a>]</sup></citation>。它支持持久连接, 客户端与服务器进行一次合法的握手建立WebSocket连接后, 服务器便可以主动地向客户端发送数据<citation id="128" type="reference"><link href="23" rel="bibliography" /><sup>[<a class="sup">11</a>]</sup></citation>。本文采用WebSocket技术实现中间件系统与应用层之间的双向数据传输, 在此基础上进一步封装管理可穿戴医疗设备的通信接口。</p>
                </div>
                <h3 id="46" name="46" class="anchor-tag"><b>2 中间件架构设计</b></h3>
                <h4 class="anchor-tag" id="47" name="47"><b>2.1 体系拓扑结构</b></h4>
                <div class="p1">
                    <p id="48">本文提出的体系拓扑结构如图2所示, 该体系由BLE可穿戴医疗设备、设备管理中间件和调用方组成。可穿戴医疗设备管理中间件是核心组成部分, 一方面它通过BLE协议接入各类可穿戴医疗设备如血压计、体温计和心率计等, 实现对可穿戴设备的统一管理与数据处理, 同时协调设备资源的调度以实现多设备并发运行。另一方面, 中间件通过WebSocket通信方式响应调用方应用程序的操作请求, 调用方通过中间件封装的控制指令完成对可穿戴医疗设备的操作以及健康监测数据的实时传输。中间件能够同时响应多个Socket客户端的请求, 进一步适应了对可穿戴设备的并发操作, 而调用方只需实现Socket客户端访问中间件即可, 能够兼容各主流平台如Windows、Android以及MacOS等。</p>
                </div>
                <div class="area_img" id="49">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201906004_049.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 体系结构拓扑" src="Detail/GetImg?filename=images/JYRJ201906004_049.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图2 体系结构拓扑  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201906004_049.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="50" name="50"><b>2.2 软件架构</b></h4>
                <div class="p1">
                    <p id="51">本文设计的中间件系统软件架构如图3所示。Node环境下的程序保持单进程单线程执行, 系统由设备驱动层、任务调度层、服务接口层组成。设备驱动层主要是BLE开发程序, 通过BLE协议栈实现对低功耗可穿戴医疗设备的基本操作, 包括设备扫描、连接、控制以及获取监测数据。任务调度层由用户指令解析程序、多设备并发调度程序和监测数据处理程序组成。其中, 用户指令解析程序处理客户端发来的操作指令, 进而执行相应的操作方式。设备并发调度程序负责调度设备资源与客户端请求, 用以实现高效的设备并发操作。监测数据处理程序对设备驱动层获取的原始监测数据进行规范化处理, 将数据转换为直观可读的健康数据。服务接口层主要是WebSocket服务器程序, 用来提供中间件与调用者交互的接口, 实现两者的双向数据传输。WebSocket服务器程序一方面接收调用者发来的消息并进行json解析, 将解析后的数据传递给任务调度层;另一方面将任务调度层发来的健康数据与连接状态封装为json格式并发送给调用者。此外, 系统还包含一个全局的进程守护程序, 负责解决Node可能出现的异常进而防止崩溃, 监视全局异常的发生, 包括回调函数发生的异常, 保证中间件系统的可靠运行。</p>
                </div>
                <div class="area_img" id="52">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201906004_052.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 中间件软件架构" src="Detail/GetImg?filename=images/JYRJ201906004_052.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图3 中间件软件架构  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201906004_052.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="53" name="53" class="anchor-tag"><b>3 系统实现</b></h3>
                <div class="p1">
                    <p id="54">本系统以生活中典型的BLE血压计、BLE心率计和BLE体温计作为BLE可穿戴医疗设备进行系统的实现与演示。血压计、心率计、体温计是三种不同类型的可穿戴医疗设备, 也是进行疾病预防与诊断的重要设备。血压计与非接触式体温计由专业厂家生产, 而心率计为实验室自制, 以上设备都实现了BLE4.0协议, 具有极低的运行和待机功耗。</p>
                </div>
                <h4 class="anchor-tag" id="55" name="55"><b>3.1 系统的环境准备</b></h4>
                <div class="p1">
                    <p id="56">系统基于Node平台采用JS语言编写, 可以将Node环境部署于Windows或Linux系统上从而实现跨平台的可穿戴医疗设备接入。首先, 部署系统的平台需要通过外接蓝牙适配器来实现BLE功能, 中间件系统在BLE开发中就充当了中心设备的角色。</p>
                </div>
                <div class="p1">
                    <p id="57">近年来随着Node.js的广泛应用, Node社区也涌现了很多优秀的资源。第三方库noble是基于Node环境封装的低功耗蓝牙库, 它基于GAP协议与GATT协议对BLE蓝牙的基础功能进行了封装, 并结合C++与python语言进行了低功耗蓝牙底层协议的开发。ws库是Node环境中流行的用以实现WebSocket协议的开发包, 它具有快速、易用和稳定的特点, 并且同时实现了服务器与客户端。因此本文基于noble库进一步丰富低功耗医疗类型设备的开发工作, 实现对可穿戴医疗设备的扫描、连接、特征值发现等BLE开发基本操作, 引入ws库实现WebSocket传输协议, 示意代码如下:</p>
                </div>
                <div class="p1">
                    <p id="58">const WebSocket=require (′ws′) ;</p>
                </div>
                <div class="p1">
                    <p id="59">var noble=require (′./lib/noble′) ;</p>
                </div>
                <h4 class="anchor-tag" id="60" name="60"><b>3.2 可穿戴医疗设备基本操作实现</b></h4>
                <div class="p1">
                    <p id="61">中间件系统在低功耗设备开发中实现的基础功能依次为外围设备扫描、设备连接、发现服务、发现特征值以及数据写入与读取, 相应地就可以完成系统对可穿戴医疗设备的连接、测量控制与数据传输工作。</p>
                </div>
                <h4 class="anchor-tag" id="62" name="62"><b>3.2.1 可穿戴医疗设备开发基本流程</b></h4>
                <div class="p1">
                    <p id="63">本文借助noble库实现低功耗蓝牙的基础功能, 可穿戴医疗设备的基本操作开发主要包括以下步骤:</p>
                </div>
                <div class="p1">
                    <p id="64"> (1) 中间件系统开启蓝牙扫描。通过调用方法noble.startScanning (serviceUUID) 扫描相应的BLE设备, 参数为所要连接设备主服务的UUID号。</p>
                </div>
                <div class="p1">
                    <p id="65"> (2) 设备连接。成功扫描到所要连接的BLE可穿戴医疗设备后会触发设备发现的事件, 在事件的回调函数中通过返回的peripheral对象执行设备连接操作并停止蓝牙扫描。peripheral即是通过扫描获取到的外围设备对象, 示意代码如下所示:</p>
                </div>
                <div class="p1">
                    <p id="66">noble.on (′discover′, function (peripheral) {</p>
                </div>
                <div class="p1">
                    <p id="67">noble.stopScanning () ;  //停止扫描</p>
                </div>
                <div class="p1">
                    <p id="68">peripheral.connect (function (err) {…})  //连接BLE设备</p>
                </div>
                <div class="p1">
                    <p id="69">}) </p>
                </div>
                <div class="p1">
                    <p id="70">连接成功后才能进行后续的一系列操作, 此时可穿戴医疗设备被系统占用, 且不可被其他中心设备所连接。</p>
                </div>
                <div class="p1">
                    <p id="71"> (3) 发现服务。系统要获取的服务是与健康监测数据相关的服务, 通过方法peripheral.discoverServices (s erviceUUID) 发现服务, 参数为所要获取服务的UUID值。</p>
                </div>
                <div class="p1">
                    <p id="72"> (4) 发现特征值。在发现服务方法的回调函数中通过返回的service对象调用service.discoverCharacteris tics () 方法来发现特征值, 此方法的回调函数中返回该服务下的所有特征值, 然后遍历所有特征值来匹配到健康数据相关的特征值, 主要包括write特征值和notify特征值。write特征值用来向可穿戴医疗设备发送数据, 而notify特征值则是从可穿戴医疗设备中获取健康监测数据。</p>
                </div>
                <div class="p1">
                    <p id="73"> (5) 设备控制与数据读取。通过write特征值调用方法characteristic.write () 并传入控制指令来控制可穿戴医疗设备, 主要包括启动设备、关闭设备的命令。通过notify特征值调用characteristic.subscribe () 方法启动BLE设备特征值变化时的notify功能, 实现对监测数据的监听。如果可穿戴医疗设备有新的数据变化, notify特征值的回调函数就会触发, 系统从回调函数中读取监测数据。</p>
                </div>
                <div class="p1">
                    <p id="74">系统从可穿戴医疗设备直接收到的数据为原始的字节流数据, 必须要对数据进行解析以及规范化处理。BLE健康数据传输格式一般由起始位、数据位和结束位组成, 需要从数据位中获取健康数据<citation id="129" type="reference"><link href="25" rel="bibliography" /><sup>[<a class="sup">12</a>]</sup></citation>。然而, 不同厂家、不同类型的设备对健康数据也存在着不同的编码方式, 必须针对具体的可穿戴医疗设备采取对应的算法进行健康数据的解析与处理。通常情况下, 数据解析与处理的流程如图4所示。</p>
                </div>
                <div class="area_img" id="75">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201906004_075.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 数据处理流程" src="Detail/GetImg?filename=images/JYRJ201906004_075.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图4 数据处理流程  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201906004_075.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="76"> (6) 断开连接。完成测量之后通过write特征值向可穿戴医疗设备发送关闭设备的指令, 之后通过步骤 (2) 中的peripheral对象执行peripheral.disconnect () 方法断开连接, 解除设备占用并释放系统资源。</p>
                </div>
                <h4 class="anchor-tag" id="77" name="77"><b>3.2.2 可穿戴医疗设备的控制</b></h4>
                <div class="p1">
                    <p id="78">系统与可穿戴医疗设备建立连接并且匹配好读写相关的特征值后, 系统将控制指令写入write特征值对可穿戴医疗设备进行控制, 包括开始测量、停止测量、关闭设备等常用的操作。不同的可穿戴医疗设备对应着不同的指令编码, 写入的数据应转换为byte类型的数组。</p>
                </div>
                <div class="p1">
                    <p id="79">根据可穿戴医疗设备实际控制需求, 本文所使用的血压计和心率计的开始测量、关闭设备指令以十六进制表示的编码如表1所示。而系统对体温计只提供监测数据、关闭连接的控制指令, 开始测量、关闭设备的操作由设备自身完成。</p>
                </div>
                <div class="area_img" id="80">
                    <p class="img_tit"><b>表1 血压计与心率计控制编码</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="80" border="1"><tr><td><br />设备类型</td><td>开启测量指令</td><td>关闭设备指令</td></tr><tr><td><br />血压计</td><td>[0xFD, 0xFD, 0xFA, 0x05, <br />0X0D, 0x0A]</td><td>[0x73, 0x74, 0x61, <br />0x72, 0x74]</td></tr><tr><td><br />心率计</td><td>[0xFD, 0xFD, 0xFE, 0x06, <br />0X0D, 0x0A]</td><td>[0x73, 0x74, 0x6F, <br />0x70]</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <h4 class="anchor-tag" id="81" name="81"><b>3.3 多设备并发实现</b></h4>
                <div class="p1">
                    <p id="82">相较于大多数智能手机上的可穿戴医疗设备管理方式, 本系统实现了多用户、多设备并发使用的功能。设备并发使用包含两种场景, 一是单个用户同时使用多台可穿戴医疗设备, 二是多个用户同时使用各自的可穿戴医疗设备。在可穿戴医疗设备基本操作实现的基础上, 本文提出了以设备池为中心的调度策略来解决多用户、多设备并发使用问题。结合实际场景考虑, 一台可穿戴医疗设备同时只能服务一个用户, 当用户选择某台设备时, 分配给用户与该设备相关的资源, 直到用户使用完毕后才能释放资源, 设备调度工作流程如图5所示。</p>
                </div>
                <div class="area_img" id="83">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201906004_083.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 设备调度工作流程图" src="Detail/GetImg?filename=images/JYRJ201906004_083.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图5 设备调度工作流程图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201906004_083.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="84">本研究处理设备多连接的方法是为每一个已连接的客户端生成一个包含四个关键属性的对象, 对象包含WebSocket客户端接口、设备对象、设备write特征值和设备notify特征值, 实例化代码如下所示:</p>
                </div>
                <div class="p1">
                    <p id="85">function user_info (user_ws, peripheral, ble_notify, ble_write) {</p>
                </div>
                <div class="p1">
                    <p id="86">this.user_ws=user_ws;</p>
                </div>
                <div class="p1">
                    <p id="87">this.peripheral=peripheral;</p>
                </div>
                <div class="p1">
                    <p id="88">this.ble_notify=ble_notify;</p>
                </div>
                <div class="p1">
                    <p id="89">this.ble_write=ble_write;</p>
                </div>
                <div class="p1">
                    <p id="90">}</p>
                </div>
                <div class="p1">
                    <p id="91">此对象的作用是保存控制可穿戴设备所需要的关键资源, 并建立调用者与可穿戴设备的对应关系。多用户同时进行各自的健康监测时, 每台可穿戴医疗设备都会从自身的关联对象中进行设备控制、数据处理以及数据传输工作, 能够保证用户只与所使用的可穿戴医疗设备进行交互, 不同设备之间的操作互不影响。当一个用户同时使用多台可穿戴医疗设备时, 则建立多个user_info对象来关联多台设备, 用户同时与多台设备进行互不影响的交互, 实现多设备联动健康监测。具体方法如下:</p>
                </div>
                <div class="p1">
                    <p id="92"> (1) 客户端选择可穿戴医疗设备, 中间件系统完成设备连接、服务与特征值发现后, 调用函数user_info () 实例化一个对象实现用户与设备之间的关联。同时将该对象以key-value的形式保存在user{}列表中, key设置为可穿戴医疗设备名称, value为用户关联对象, user{}设备池中保存所有用户关联对象。</p>
                </div>
                <div class="p1">
                    <p id="93"> (2) 客户端发起测量指令后, 在user{}列表中索引对应设备的关联对象, 调用关联对象的ble_write特征值启动测量任务。中间件系统通过关联对象的ble_notify特征值监听可穿戴医疗设备发送来的血压或心率等监测数据, 同时调用关联对象的WebSocket接口发送给使用此设备的用户。</p>
                </div>
                <div class="p1">
                    <p id="94"> (3) 测量任务结束后, 中间件系统通过关联对象的peripheral属性来执行peripheral.disconnect () 函数断开所连接的健康设备, 解除设备资源占用。</p>
                </div>
                <div class="p1">
                    <p id="95"> (4) 最后将user{}列表中对应设备的关联对象清空, 该可穿戴医疗设备可重新分配给其他的客户端。</p>
                </div>
                <h4 class="anchor-tag" id="96" name="96"><b>3.4 可穿戴设备管理接口设计</b></h4>
                <div class="p1">
                    <p id="97">本文基于WebSocket通信技术为调用方提供管理设备的接口, 中间件系统在WebSocket通信中作为服务器端, 而调用方的应用程序则作为客户端。如图6所示为中间件设备管理流程图, 首先使用方法const wss=new WebSocket.Server ({port:2800}) 创建WebSocket服务器并将端口设备为2800。服务器端基于事件驱动完成客户端的请求, 主要事件函数包括′connection′、′message′、′close′, 分别对应连接建立、收到数据、连接断开的事件回调<citation id="130" type="reference"><link href="27" rel="bibliography" /><sup>[<a class="sup">13</a>]</sup></citation>。</p>
                </div>
                <div class="area_img" id="98">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201906004_098.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 可穿戴医疗设备管理流程图" src="Detail/GetImg?filename=images/JYRJ201906004_098.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图6 可穿戴医疗设备管理流程图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201906004_098.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="99">服务器实时处于监听状态, 当有客户端建立连接后触发′connection′事件并返回客户端对象ws。服务器在′message′事件回调中解析用户指令, 中间件提供的操作指令接口分别为设备连接、开始测量和关闭设备。其中, 设备连接指令用来连接用户所选择的可穿戴医疗设备, 并将连接状态发送给用户。开始测量指令则启动可穿戴医疗设备以进行生命体征测量, 中间件实时获取监测数据并进一步处理后发送给用户。关闭设备指令是将可穿戴医疗设备关闭并断开与设备之间的蓝牙连接以释放资源, 同时将设备连接状态发送给用户。服务器通过ws.send (msg) 方法向客户端发送数据, 参数msg为发送的内容并封装为JSON格式, msg的内容为设备连接状态和健康监测数据。客户端退出后触发′close′事件, 在此回调函数中首先检查用户所关联的设备是否关闭, 若存在没有关闭的设备则强制关闭以上设备, 最后进行设备资源的释放。</p>
                </div>
                <div class="p1">
                    <p id="100">客户端与服务器建立连接之后就可以进行双向通信, 双方只需要进行一次请求/响应操作, 之后每次通信传输的都为控制指令和健康数据, 加快了数据传输的速度, 进一步提高数据传输的实时性<citation id="131" type="reference"><link href="29" rel="bibliography" /><sup>[<a class="sup">14</a>]</sup></citation>。</p>
                </div>
                <h3 id="101" name="101" class="anchor-tag"><b>4 中间件系统测试</b></h3>
                <div class="p1">
                    <p id="102">本文将中间件系统部署于Windows10操作系统, 首先从Windows命令行程序中进入系统项目的根目录, 执行node healthy_central.js运行中间件程序, 中间件系统就会以后台的方式挂起并开始监听2800端口。</p>
                </div>
                <div class="p1">
                    <p id="103">本系统以接入的血压计、体温计和心率计来进行演示, 设备实物图如图7所示。BLE血压计为专业厂家深圳奥又美公司生产;BLE体温计由深圳智子云守护科技公司生产的新一代非接触式体温计;BLE心率计由团队通过心率传感器、温度传感器、电源和低功耗蓝牙RF芯片制作而成。血压计能够测量实时血压值并得出舒张压、收缩压和平均心率, 非接触式体温计能够快速、精准测量体温, 心率计能够实时进行心率和室内温度的测量。</p>
                </div>
                <div class="area_img" id="104">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201906004_104.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 设备实物图" src="Detail/GetImg?filename=images/JYRJ201906004_104.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图7 设备实物图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201906004_104.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="105">目前主流的浏览器如Chrome、Firefox等均已支持WebSocket API, 所以本文采用HTML5+JavaScript语言编写了简易的Web界面通过WebSocket客户端来访问系统接口, 从而作为调用方来进行便捷的演示。该客户端同时适应了电脑与移动端设备, 页面设计如图8所示。客户端通过浏览器访问中间件系统来管理可穿戴医疗设备, 主要实现了onopen () 、onmessage () 、onclose () 等回调函数, 触发事件分别为连接建立、接收中间件数据、连接关闭, 并通过send () 函数主动向中间件发送数据。当客户端与中间件建立连接后, 用户可发送指令来管理可穿戴医疗设备, 客户端页面会实时显示设备连接状态与健康数据。</p>
                </div>
                <div class="area_img" id="106">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201906004_106.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图8 客户端界面设计" src="Detail/GetImg?filename=images/JYRJ201906004_106.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图8 客户端界面设计  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201906004_106.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="107" name="107"><b>4.1 可穿戴医疗设备连接测试</b></h4>
                <div class="p1">
                    <p id="108">本文通过所设计的客户端分别连接BLE体温计、血压计和心率计设备, 中间件系统立即执行外围设备扫描、设备连接以及特征值发现操作。为便于观察, 采用VS Code编辑器进行输出结果的显示, 体温计与血压计连接操作的中间件系统执行结果如图9所示, 系统扫描设备后返回设备的广播信息如设备名、设备MAC地址、设备连接状态等, 测试表明中间件系统均能够快速扫描、连接可穿戴医疗设备, 并能够成功匹配操作设备所需的特征值。</p>
                </div>
                <div class="area_img" id="109">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201906004_10900.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图9 可穿戴医疗设备连接状态图" src="Detail/GetImg?filename=images/JYRJ201906004_10900.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图9 可穿戴医疗设备连接状态图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201906004_10900.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="110" name="110"><b>4.2 可穿戴医疗设备并发操作以及数据传输测试</b></h4>
                <div class="p1">
                    <p id="111">为更好地演示客户端跨平台的效果以及多设备并发操作的性能, 在Windows10平台中通过Chrome浏览器启动一个客户端连接心率计设备, 同时在两台Android7.1移动终端通过QQ浏览器启动客户端分别连接体温计与血压计设备。三个客户端在同时段进行各自的健康监测, 通过Date () 方法获取当前的时间进行对照。可穿戴医疗设备健康监测的效果如图10所示。测试表明三个客户端并发运行下均能够独立地操作可穿戴医疗设备, 中间件正确执行连接设备、开始测量和关闭设备的指令, 解析健康监测数据并实时传输到客户端。</p>
                </div>
                <div class="area_img" id="112">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201906004_11200.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 0 并发操作与数据传输测试" src="Detail/GetImg?filename=images/JYRJ201906004_11200.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图1 0 并发操作与数据传输测试  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201906004_11200.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="113">中间件系统各项测试结果表明, 基于Node.js的可穿戴医疗设备管理系统能够进行便捷有效的设备操控, 系统运行稳定, 能够正常完成可穿戴医疗设备连接、控制、数据传输等工作。相比于安卓, 在通用平台上进行可穿戴医疗设备的管理有着更强的响应速度和更快的数据处理能力, 并能够实现设备并发的操作, 非常适合有着计算需求和并发测量的应用场景。</p>
                </div>
                <h3 id="114" name="114" class="anchor-tag"><b>5 结 语</b></h3>
                <div class="p1">
                    <p id="115">本文提出并开发了一种适用于通用平台的可穿戴医疗设备管理中间件, 实现了病房场景下多传感器设备的综合管理功能, 进而扩展了可穿戴医疗设备的应用场景。基于本文工作, 后续将会进一步增强对传感器设备的管理能力, 通过定义标准化接口来兼容更多厂家、类型的可穿戴医疗设备, 设计兼顾结构化、半结构化数据的数据预处理模块来支持复杂多样的传感器数据类型, 并进一步优化支持多传感器的并发管理任务, 为可穿戴医疗设备的管理提供一种灵活易用、更趋智能化的方式。</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="3">
                            <a id="bibliography_1" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=SWGC201601002&amp;v=MDczNzN5dmtXNzdBTmpyTWJiRzRIOWZNcm85RlpvUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3FmWnVadEY=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[1]</b> 樊瑜波.可穿戴医疗/健康技术——生物医学工程的机遇和挑战[J].生物医学工程学杂志, 2016, 33 (1) :1-1.
                            </a>
                        </p>
                        <p id="5">
                            <a id="bibliography_2" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=ZHHL201801031&amp;v=MjA4MjNEWXJHNEg5bk1ybzlHWllRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVI3cWZadVp0Rnl2a1c3N0FQeVg=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[2]</b> 王瑞, 吕蓉, 梁涛.可穿戴设备在疾病管理中的应用进展[J].中华护理杂志, 2018 (1) :114-116.
                            </a>
                        </p>
                        <p id="7">
                            <a id="bibliography_3" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSYJ201702041&amp;v=MzExNjI4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1WnRGeXZrVzc3QUx6N1NaTEc0SDliTXJZOUJaWVFLREg=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[3]</b> 王启林, 李小鹏, 郁滨, 等.基于连接认证的低功耗蓝牙泛洪攻击防御方案[J].计算机应用研究, 2017, 34 (2) :499-502.
                            </a>
                        </p>
                        <p id="9">
                            <a id="bibliography_4" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DZJY201508012&amp;v=MTY2MzdvUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3FmWnVadEZ5dmtXNzdBSVRmQmQ3RzRIOVRNcDQ5RVo=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[4]</b> 甘广辉, 童蕾, 陈超敏.基于低功耗蓝牙网络的家用胎儿监护系统设计[J].电子技术应用, 2015, 41 (8) :34-36.
                            </a>
                        </p>
                        <p id="11">
                            <a id="bibliography_5" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=BJYD201606003&amp;v=MTI5NjRhckc0SDlmTXFZOUZaNFFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1WnRGeXZrVzc3QUp5ZlM=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[5]</b> 张金玲, 高志新.iOS平台无线健康监护系统[J].北京邮电大学学报, 2016, 39 (6) :17-21.
                            </a>
                        </p>
                        <p id="13">
                            <a id="bibliography_6" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YBJS201601024&amp;v=MTE1OTdJUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3FmWnVadEZ5dmtXNzdBUEMvQmZiRzRIOWZNcm85SFk=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[6]</b> 谢佳柏, 陈贤祥, 胡欣宇, 等.基于低功耗蓝牙和WebSocket的物联网数据网关[J].仪表技术与传感器, 2016 (1) :76-78.
                            </a>
                        </p>
                        <p id="15">
                            <a id="bibliography_7" target="_blank" href="http://scholar.cnki.net/result.aspx?q=The Internet of Things Has a Gateway Problem">

                                <b>[7]</b> Zachariah T, Klugman N, Campbell B, et al.The Internet of Things Has a Gateway Problem[C]//Proceedings of the 16th International Workshop on Mobile Computing Systems and Applications.ACM, 2015:27-32.
                            </a>
                        </p>
                        <p id="17">
                            <a id="bibliography_8" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJA2017S2129&amp;v=MDczMzZiWVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1WnRGeXZrVzc3QUx6N0JiN0c0SDlhdnJZNUg=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[8]</b> 王伶俐, 张传国.基于NodeJS+Express框架的轻应用定制平台的设计与实现[J].计算机科学, 2017, 44 (b11) :596-599.
                            </a>
                        </p>
                        <p id="19">
                            <a id="bibliography_9" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Overview and Evaluation of Bluetooth Low Energy: An Emerging Low-Power Wireless Technology">

                                <b>[9]</b> Gomez C, Oller J, Paradells J.Overview and Evaluation of Bluetooth Low Energy:An Emerging Low-Power Wireless Technology[J].Sensors, 2012, 12 (9) :11734-11753.
                            </a>
                        </p>
                        <p id="21">
                            <a id="bibliography_10" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201603024&amp;v=MDE1NDBGckNVUjdxZlp1WnRGeXZrVzc3QUx6VFpaTEc0SDlmTXJJOUhZSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEc=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[10]</b> 陈炜, 苏厚勤, 柴炯.基于WebSocket技术水文资源监管系统的研究与实现[J].计算机应用与软件, 2016, 33 (3) :104-108, 113.
                            </a>
                        </p>
                        <p id="23">
                            <a id="bibliography_11" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Introducing WebSocket-Based Real-Time Monitoring System for Remote Intelligent Buildings">

                                <b>[11]</b> Ma K, Sun R.Introducing WebSocket-Based Real-Time Monitoring System for Remote Intelligent Buildings[J].International Journal of Distributed Sensor Networks, 2013, 2013 (12) :867693.
                            </a>
                        </p>
                        <p id="25">
                            <a id="bibliography_12" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=SWGC201704010&amp;v=MjU0MzVrVzc3QU5qck1iYkc0SDliTXE0OUVaSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1WnRGeXY=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[12]</b> 王骥, 任肖丽.基于蓝牙低功耗技术的智能健康监测手表系统[J].生物医学工程学杂志, 2017 (4) :557-564.
                            </a>
                        </p>
                        <p id="27">
                            <a id="bibliography_13" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SAPD&amp;filename=SAPD13102900004277&amp;v=MDAwMDNiYXJLN0g5SE9wbzlGWk9zTERucytvQk1UNlQ0UFFIL2lyUmRHZXJxUVRNbndaZVp0RmlubFVyeklJMThjYXhvPU5peg==&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[13]</b> Zhang W, Stoll R, Stoll N, et al.An mHealth Monitoring System for Telemedicine Based on WebSocket Wireless Communication[J].Journal of Networks, 2013, 8 (4) :955-962.
                            </a>
                        </p>
                        <p id="29">
                            <a id="bibliography_14" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Communicating and Displaying Real-Time Data with WebSocket">

                                <b>[14]</b> Pimentel V, Nickerson B G.Communicating and Displaying Real-Time Data with WebSocket[J].IEEE Internet Computing, 2012, 16 (4) :45-53.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="JYRJ201906004" />
        <input id="dpi" type="hidden" value="300" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201906004&amp;v=MjEzOTlHRnJDVVI3cWZadVp0Rnl2a1c3N0JMelRaWkxHNEg5ak1xWTlGWUlRS0RIODR2UjRUNmo1NE8zenFxQnQ=&amp;uid=WEEvREcwSlJHSldRa1FhcTdnTnhXM3ZKQ28xeDVteFZmK0p3enVSVkNoMD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
