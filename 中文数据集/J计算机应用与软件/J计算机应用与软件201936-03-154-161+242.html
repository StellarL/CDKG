<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637136396756533750%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dJYRJ201903030%26RESULT%3d1%26SIGN%3dnTGvfbxFz1LLu0aSB9JTzHtOzas%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JYRJ201903030&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JYRJ201903030&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201903030&amp;v=MjM3OTMzenFxQnRHRnJDVVI3cWZadVpzRmlEbFZyM0lMelRaWkxHNEg5ak1ySTlHWklRS0RIODR2UjRUNmo1NE8=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#35" data-title="&lt;b&gt;0 引 言&lt;/b&gt; "><b>0 引 言</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#41" data-title="&lt;b&gt;1 基于多线程加速的大规模群体仿真方法概述&lt;/b&gt; "><b>1 基于多线程加速的大规模群体仿真方法概述</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#46" data-title="&lt;b&gt;2 基于GPU蒙皮渲染多线程加速算法&lt;/b&gt; "><b>2 基于GPU蒙皮渲染多线程加速算法</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#82" data-title="&lt;b&gt;3 基于自主性群体行为和最优互相碰撞避让的多线程加速算法&lt;/b&gt; "><b>3 基于自主性群体行为和最优互相碰撞避让的多线程加速算法</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#85" data-title="&lt;b&gt;3.1 基于自主性群体行为的速度模型算法&lt;/b&gt;"><b>3.1 基于自主性群体行为的速度模型算法</b></a></li>
                                                <li><a href="#96" data-title="&lt;b&gt;3.2 基于最优相互碰撞避让的多线程加速算法&lt;/b&gt;"><b>3.2 基于最优相互碰撞避让的多线程加速算法</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#102" data-title="&lt;b&gt;4 实验结果与分析&lt;/b&gt; "><b>4 实验结果与分析</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#103" data-title="&lt;b&gt;4.1 应用实例&lt;/b&gt;"><b>4.1 应用实例</b></a></li>
                                                <li><a href="#107" data-title="&lt;b&gt;4.2 实验环境&lt;/b&gt;"><b>4.2 实验环境</b></a></li>
                                                <li><a href="#109" data-title="&lt;b&gt;4.3 实验结果&lt;/b&gt;"><b>4.3 实验结果</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#133" data-title="&lt;b&gt;5 结 语&lt;/b&gt; "><b>5 结 语</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#43" data-title="图1 基于多线程加速的大规模群体仿真流程图">图1 基于多线程加速的大规模群体仿真流程图</a></li>
                                                <li><a href="#80" data-title="图2 基于GPU蒙皮渲染的多线程加速算法流程图">图2 基于GPU蒙皮渲染的多线程加速算法流程图</a></li>
                                                <li><a href="#84" data-title="图3 基于自主性群体行为和最优互相碰撞避让 的多线程加速算法流程图">图3 基于自主性群体行为和最优互相碰撞避让 的多线程加速算法流程图</a></li>
                                                <li><a href="#99" data-title="图4 最优互相碰撞避让的多线程加速算法流程图">图4 最优互相碰撞避让的多线程加速算法流程图</a></li>
                                                <li><a href="#105" data-title="图5 大规模虫群陷阱 (HTC Vive玩家视角) ">图5 大规模虫群陷阱 (HTC Vive玩家视角) </a></li>
                                                <li><a href="#106" data-title="图6 大规模虫群陷阱 (Unity场景视角) ">图6 大规模虫群陷阱 (Unity场景视角) </a></li>
                                                <li><a href="#113" data-title="&lt;b&gt;表1 虫群动画渲染CPU耗时统计表 ms&lt;/b&gt;"><b>表1 虫群动画渲染CPU耗时统计表 ms</b></a></li>
                                                <li><a href="#115" data-title="图7 虫群动画渲染CPU耗时折线图">图7 虫群动画渲染CPU耗时折线图</a></li>
                                                <li><a href="#116" data-title="图8 虫群动画渲染GPU耗时折线图">图8 虫群动画渲染GPU耗时折线图</a></li>
                                                <li><a href="#122" data-title="&lt;b&gt;表2 虫群行为模拟CPU耗时统计表 ms&lt;/b&gt;"><b>表2 虫群行为模拟CPU耗时统计表 ms</b></a></li>
                                                <li><a href="#124" data-title="图9 虫群行为模拟CPU耗时折线图">图9 虫群行为模拟CPU耗时折线图</a></li>
                                                <li><a href="#125" data-title="图10 虫群行为模拟碰撞发生次数折线图">图10 虫群行为模拟碰撞发生次数折线图</a></li>
                                                <li><a href="#130" data-title="图11 最优互相碰撞避让算法多线程加速前后 CPU耗时折线图">图11 最优互相碰撞避让算法多线程加速前后 CPU耗时折线图</a></li>
                                                <li><a href="#131" data-title="图12 最优互相碰撞避让算法多线程加速前后 碰撞发生次数折线图">图12 最优互相碰撞避让算法多线程加速前后 碰撞发生次数折线图</a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="3">


                                    <a id="bibliography_1" title=" Luebke D P. Level of detail for 3D graphics[M]. Morgan Kaufmann, 2003." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Level of detail for 3D graphics">
                                        <b>[1]</b>
                                         Luebke D P. Level of detail for 3D graphics[M]. Morgan Kaufmann, 2003.
                                    </a>
                                </li>
                                <li id="5">


                                    <a id="bibliography_2" title=" Beacco A, Pelechano N, And&#250;jar, C. A survey of real‐time crowd rendering[J]. Computer Graphics Forum, 2016, 35 (8) :32-50." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=A survey of real‐time crowd rendering">
                                        <b>[2]</b>
                                         Beacco A, Pelechano N, And&#250;jar, C. A survey of real‐time crowd rendering[J]. Computer Graphics Forum, 2016, 35 (8) :32-50.
                                    </a>
                                </li>
                                <li id="7">


                                    <a id="bibliography_3" title=" Toledo L, De Gyves O, Rudom&#237;n I. Hierarchical level of detail for varied animated crowds[J]. The Visual Computer, 2014, 30 (6/8) : 949-961." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SSJD&amp;filename=SSJD14061700002662&amp;v=MjgyNzZVcjNKS0Y0UmFCST1OajdCYXJLOEh0Zk5xSTlGWk9zTkNubzdvQk1UNlQ0UFFIL2lyUmRHZXJxUVRNbndaZVp0RmlubA==&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[3]</b>
                                         Toledo L, De Gyves O, Rudom&#237;n I. Hierarchical level of detail for varied animated crowds[J]. The Visual Computer, 2014, 30 (6/8) : 949-961.
                                    </a>
                                </li>
                                <li id="9">


                                    <a id="bibliography_4" title=" Dudash B.Animated crowd rendering[J].GPU Gems, 2007, 3: 39-52." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Animated Crowd Rendering">
                                        <b>[4]</b>
                                         Dudash B.Animated crowd rendering[J].GPU Gems, 2007, 3: 39-52.
                                    </a>
                                </li>
                                <li id="11">


                                    <a id="bibliography_5" title=" Hartman C, Benes B. Autonomous boids[J]. Computer Animation and Virtual Worlds, 2006, 17 (3/4) : 199-206." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SJWD&amp;filename=SJWD15103100267834&amp;v=MTA3MzlSYUJJPU5pZmNhcks5SDlIUHJvOUZadTBJQkg4OW9CTVQ2VDRQUUgvaXJSZEdlcnFRVE1ud1plWnRGaW5sVXIzSktGNA==&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[5]</b>
                                         Hartman C, Benes B. Autonomous boids[J]. Computer Animation and Virtual Worlds, 2006, 17 (3/4) : 199-206.
                                    </a>
                                </li>
                                <li id="13">


                                    <a id="bibliography_6" title=" Snape J, Guy S J, Lin M C, et al. Reciprocal collision avoidance and multi-agent navigation for video games[J]. Journal of Finance, 2012, 33 (3) :777-792." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Reciprocal collision avoidance and multi-agent navigation for video games">
                                        <b>[6]</b>
                                         Snape J, Guy S J, Lin M C, et al. Reciprocal collision avoidance and multi-agent navigation for video games[J]. Journal of Finance, 2012, 33 (3) :777-792.
                                    </a>
                                </li>
                                <li id="15">


                                    <a id="bibliography_7" title=" Van Den Berg J, Guy S J, Lin M, et al. Reciprocal n-body collision avoidance[M]//Robotics research. Springer, Berlin, Heidelberg, 2011: 3-19." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Reciprocal n-body collision avoidance">
                                        <b>[7]</b>
                                         Van Den Berg J, Guy S J, Lin M, et al. Reciprocal n-body collision avoidance[M]//Robotics research. Springer, Berlin, Heidelberg, 2011: 3-19.
                                    </a>
                                </li>
                                <li id="17">


                                    <a id="bibliography_8" title=" Narain R, Golas A, Curtis S, et al. Aggregate dynamics for dense crowd simulation[J]. ACM Transactions on Graphics (TOG) , 2009, 28 (5) : Article No. 122." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SJCM&amp;filename=SJCM13091000098856&amp;v=MzA5ODhaZVp0RmlubFVyM0pLRjRSYUJJPU5pZklZN0s3SHRqTnI0OUZaT0lIQkhrL29CTVQ2VDRQUUgvaXJSZEdlcnFRVE1udw==&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[8]</b>
                                         Narain R, Golas A, Curtis S, et al. Aggregate dynamics for dense crowd simulation[J]. ACM Transactions on Graphics (TOG) , 2009, 28 (5) : Article No. 122.
                                    </a>
                                </li>
                                <li id="19">


                                    <a id="bibliography_9" title=" Chiang H T L, HomChaudhuri B, Vinod A P, et al. Dynamic risk tolerance: Motion planning by balancing short-term and long-term stochastic dynamic predictions[C]//Robotics and Automation (ICRA) , 2017 IEEE International Conference on. IEEE, 2017: 3762-3769." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Dynamic risk tolerance: Motion planning by balancing short-term and long-term stochastic dynamic predictions">
                                        <b>[9]</b>
                                         Chiang H T L, HomChaudhuri B, Vinod A P, et al. Dynamic risk tolerance: Motion planning by balancing short-term and long-term stochastic dynamic predictions[C]//Robotics and Automation (ICRA) , 2017 IEEE International Conference on. IEEE, 2017: 3762-3769.
                                    </a>
                                </li>
                                <li id="21">


                                    <a id="bibliography_10" title=" Giese A, Latypov D, Amato N M. Reciprocally-rotating velocity obstacles[C]//Robotics and Automation (ICRA) , 2014 IEEE International Conference on. IEEE, 2014: 3234-3241." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Reciprocally-rotating velocity obstacles">
                                        <b>[10]</b>
                                         Giese A, Latypov D, Amato N M. Reciprocally-rotating velocity obstacles[C]//Robotics and Automation (ICRA) , 2014 IEEE International Conference on. IEEE, 2014: 3234-3241.
                                    </a>
                                </li>
                                <li id="23">


                                    <a id="bibliography_11" title=" Alejo D, Cobano J A, Heredia G, et al. Optimal reciprocal collision avoidance with mobile and static obstacles for multi-UAV systems[C]//Unmanned Aircraft Systems (ICUAS) , 2014 International Conference on. IEEE, 2014:1259-1266." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Optimal reciprocal collision avoidance with mobile and static obstacles for multi-UAV systems">
                                        <b>[11]</b>
                                         Alejo D, Cobano J A, Heredia G, et al. Optimal reciprocal collision avoidance with mobile and static obstacles for multi-UAV systems[C]//Unmanned Aircraft Systems (ICUAS) , 2014 International Conference on. IEEE, 2014:1259-1266.
                                    </a>
                                </li>
                                <li id="25">


                                    <a id="bibliography_12" title=" Unity Game Engine[OL]. [2018-3-24].https://www.unity3d.com." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Unity Game Engine[OL]">
                                        <b>[12]</b>
                                         Unity Game Engine[OL]. [2018-3-24].https://www.unity3d.com.
                                    </a>
                                </li>
                                <li id="27">


                                    <a id="bibliography_13" >
                                        <b>[13]</b>
                                     HTC Vive VR虚拟现实设备[OL]. [2018-3-24].https://www.vive.com/cn.</a>
                                </li>
                                <li id="29">


                                    <a id="bibliography_14" title=" Unity Mecanim Animation[OL]. [2018-3-24].https://docs.unity3d.com/Manual/AnimationSection.html." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Unity Mecanim Animation[OL]">
                                        <b>[14]</b>
                                         Unity Mecanim Animation[OL]. [2018-3-24].https://docs.unity3d.com/Manual/AnimationSection.html.
                                    </a>
                                </li>
                                <li id="31">


                                    <a id="bibliography_15" title=" Unity Physics System[OL]. [2018-3-24]. https://docs.unity3d.com/Manual/AnimationSection.html." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Unity Physics System[OL]">
                                        <b>[15]</b>
                                         Unity Physics System[OL]. [2018-3-24]. https://docs.unity3d.com/Manual/AnimationSection.html.
                                    </a>
                                </li>
                                <li id="33">


                                    <a id="bibliography_16" title=" Unity Navigation System[OL]. [2018-3-24]. https://docs.unity3d.com/Manual/nav-Overview.html." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Unity Navigation System[OL]">
                                        <b>[16]</b>
                                         Unity Navigation System[OL]. [2018-3-24]. https://docs.unity3d.com/Manual/nav-Overview.html.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=JYRJ" target="_blank">计算机应用与软件</a>
                2019,36(03),154-161+242 DOI:10.3969/j.issn.1000-386x.2019.03.029            </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>一种基于多线程加速的大规模群体仿真方法</b></span>
                                    </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%82%85%E6%AD%A3%E6%89%AC&amp;code=41287802&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">傅正扬</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%A7%9C%E5%BF%A0%E9%BC%8E&amp;code=22592596&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">姜忠鼎</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E5%A4%8D%E6%97%A6%E5%A4%A7%E5%AD%A6%E4%B8%8A%E6%B5%B7%E5%B8%82%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E9%87%8D%E7%82%B9%E5%AE%9E%E9%AA%8C%E5%AE%A4&amp;code=0075855&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">复旦大学上海市数据科学重点实验室</a>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E5%A4%8D%E6%97%A6%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%AD%A6%E9%99%A2&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">复旦大学软件学院</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>大规模群体仿真技术可以提高虚拟场景的临场感和趣味性, 在游戏娱乐、演习训练、建筑设计等领域具有重要的应用价值。然而, 常用于虚拟场景开发的游戏引擎难以实现大规模群体仿真。设计一种基于多线程加速的大规模群体仿真方法, 提升大规模群体仿真包含的群体动画渲染和群体行为模拟性能。针对大规模群体动画渲染, 在GPU蒙皮渲染算法上加入群体动画状态的多线程计算, 实现群体动画状态与蒙皮动画的加速计算;针对大规模群体行为模拟, 将自主性群体行为算法修改为速度模型, 与多线程优化后的最优互相碰撞避让算法结合, 实现群体的避让行为, 提升群体行为模拟效率。实验结果表明, 该方法可以很好地与游戏引擎结合, 实现复杂场景的大规模群体仿真, 提升大规模群体场景帧率。</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%A4%9A%E7%BA%BF%E7%A8%8B&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">多线程;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E7%BE%A4%E4%BD%93%E4%BB%BF%E7%9C%9F&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">群体仿真;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=GPU%E8%92%99%E7%9A%AE%E6%B8%B2%E6%9F%93&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">GPU蒙皮渲染;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E7%A2%B0%E6%92%9E%E9%81%BF%E8%AE%A9&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">碰撞避让;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    傅正扬, 硕士生, 主研领域:计算机图形学, 虚拟现实, 人机交互。;
                                </span>
                                <span>
                                    姜忠鼎, 副教授。;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2018-03-24</p>

                    <p>

                            <b>基金：</b>
                                                        <span>国家自然科学基金项目 (60803064);</span>
                    </p>
            </div>
                    <h1><b>CROWD SIMULATION METHOD BASED ON MULTI-THREAD ACCELERATION</b></h1>
                    <h2>
                    <span>Fu Zhengyang</span>
                    <span>Jiang Zhongding</span>
            </h2>
                    <h2>
                    <span>Shanghai Key Laboratory of Data Science, Fudan University</span>
                    <span>Software School, Fudan University</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>Crowd simulation technology can improve the vividness and interest of virtual scenes, and has important application value in the fields of entertainment, training, architectural design. However, the game engine commonly used in virtual scene development is difficult to achieve crowd simulation. We designed a crowd simulation method based on multi-thread acceleration, which improved the performance of crowd animation rendering and crowd behavior simulation included in large-scale crowd simulation. For crowd animation rendering, the multi-thread calculation of crowd animation state was added to the GPU skinning instancing to accelerate the calculation of group animation state and skinning. For crowd behavior simulation, the autonomous group behavior algorithm was modified to a speed model and was combined with the optimal collision avoidance algorithm optimized by multi-thread, so as to achieve crowd avoidance behavior and improve the efficiency of crowd behavior simulation. The experimental results show that the method can be well combined with game engine to achieve large-scale crowd simulation of complex scenes and improve the frame rate of large-scale crowd scenes.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Multi-thread&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Multi-thread;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Crowd%20simulation&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Crowd simulation;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=GPU%20skinning%20instancing&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">GPU skinning instancing;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Collision%20avoidance&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Collision avoidance;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2018-03-24</p>
                                    <p>
                                            </p>
            </div>


        <!--brief start-->
                        <h3 id="35" name="35" class="anchor-tag"><b>0 引 言</b></h3>
                <div class="p1">
                    <p id="36">近年来, 随着计算机技术和硬件水平的不断提高, 计算机可以在虚拟场景中进行规模更加庞大的群体仿真。大规模群体仿真技术可以提高虚拟场景的临场感和趣味性, 在游戏娱乐、演习训练、建筑设计等领域具有重要的应用价值。</p>
                </div>
                <div class="p1">
                    <p id="37">游戏引擎是为游戏研发设计的集成化开发工具, 包含一系列游戏开发和场景制作常用的功能模块, 开发者可以使用这些功能模块加快游戏和虚拟场景的开发速度。游戏引擎通常内置动画系统、导航系统和物理系统等功能模块, 可以实现小规模的群体仿真。但随着群体数量的不断增加, 游戏引擎内置功能模块的计算量也大幅度增加, 导致游戏引擎内置的功能模块难以高效地实现大规模群体仿真, 场景帧率难以满足应用的需求。</p>
                </div>
                <div class="p1">
                    <p id="38">大规模群体仿真技术包括群体动画渲染和群体行为模拟两个方面。对于大规模群体动画渲染, 层级细节技术 (LOD) 的研究和应用最为广泛。层级细节技术利用了观察者和显示设备的分辨极限, 根据模型占据观察者可视区域的大小, 动态更变绘制模型的复杂程度, 提升实时渲染效率<citation id="135" type="reference"><link href="3" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>。但是层级细节技术无法降低CPU计算模型蒙皮动画的消耗, 随着场景群体模型数量增多, CPU的蒙皮动画计算会成为大规模群体动画渲染的瓶颈<citation id="136" type="reference"><link href="5" rel="bibliography" /><sup>[<a class="sup">2</a>]</sup></citation>。遮挡剔除技术 (Culling) 计算场景中观察者视锥区域和模型之间的遮挡关系, 不绘制场景中完全被遮挡的模型。在游戏引擎中, 可以使用层级数据结构加速计算模型的遮挡关系<citation id="137" type="reference"><link href="7" rel="bibliography" /><sup>[<a class="sup">3</a>]</sup></citation>。如果观察者视锥区域存在大量未被完全遮挡的群体模型, 遮挡剔除技术难以有效地提升渲染效率。对于共用一套网格与动画的群体, GPU蒙皮渲染 (GPU Skinning Instancing) <citation id="138" type="reference"><link href="9" rel="bibliography" /><sup>[<a class="sup">4</a>]</sup></citation>预采样这套网格与动画的所有数据, 在实时渲染中利用着色器的系统变量 (System Variables) 为群体中的个体设置动画状态。GPU蒙皮渲染在一次Draw Call中使用GPU批处理大量个体的蒙皮动画计算和渲染, 大幅度降低了CPU在蒙皮动画计算上的消耗。</p>
                </div>
                <div class="p1">
                    <p id="39">大规模群体行为模拟一直是国内外研究的热点。自主性群体行为算法 (Autonomous boids) 是学术界和工业界应用比较广泛地群体行为算法<citation id="139" type="reference"><link href="11" rel="bibliography" /><sup>[<a class="sup">5</a>]</sup></citation>, 该方法引入了聚合性 (Cohesion) 、分离性 (Separation) 、队列性 (Alignment) 三个群体行为基准, 使用力模型表示这三个群体行为基准来模拟群体行为。自主性群体行为模拟仿真结果逼真, 但是随着群体数量增加, 群体之间发生碰撞的概率也大幅度增加。基于速度模型的最优互相碰撞避让算法 (ORCA) 可以有效地降低群体仿真中碰撞发生的次数<citation id="140" type="reference"><link href="13" rel="bibliography" /><sup>[<a class="sup">6</a>]</sup></citation>, 最优互相碰撞避让算法独立计算群体中每个个体的碰撞避让策略, 可以利用多线程并行加速计算, 当群体数量较大时, 最优互相碰撞避让算法也能在极短的时间内完成个体的碰撞避让计算<citation id="141" type="reference"><link href="15" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>。近年来, 国内外许多研究者在最优互相碰撞避让算法上不断改进, 以适应一些复杂的应用场景。文献<citation id="142" type="reference">[<a class="sup">8</a>]</citation>在最优互相碰撞避让算法基础上提出一种适用于超大规模人群碰撞避让模拟的算法, 将场景区域划分为多个矩形区域, 以矩形区域为单位进行算法计算, 牺牲局部矩形区域的碰撞避让精度, 提高了算法对于超大规模人群碰撞避让的运算速度。文献<citation id="143" type="reference">[<a class="sup">9</a>]</citation>通过动态平衡短时间和长时间内碰撞发生的概率, 提高最优互相碰撞避让算法对障碍物躲避的精准性, 但是算法耗时也有所增加。文献<citation id="144" type="reference">[<a class="sup">10</a>]</citation>在最优互相碰撞避让算法的基础上引入多边形旋转的概念, 使得改进后的RRVO算法在群体拥堵的情况下更快地摆脱群体死锁不动的僵局。文献<citation id="145" type="reference">[<a class="sup">11</a>]</citation>对三维空间下的最优互相碰撞避让算法进行改进, 将改进后的算法应用于无人机实时躲避其他无人机和静态障碍物。</p>
                </div>
                <div class="p1">
                    <p id="40">基于以上分析, 本文在GPU蒙皮渲染、自主性群体行为和最优互相碰撞避让算法上加入多线程优化, 提出一种大规模群体仿真的方法, 提升大规模群体仿真的群体动画渲染和群体行为模拟性能。针对群体动画渲染, 本文在GPU蒙皮渲染算法上加入了群体动画状态的多线程计算, 加速群体动画状态和蒙皮动画计算;针对群体行为模拟, 将自主性群体行为的力模型算法改进为速度模型算法, 计算个体的初始速度, 再将初始速度作为多线程优化后的最优互相碰撞避让算法输入, 实现群体行为的碰撞避让, 同时利用多线程提升群体行为模拟的计算速度。最后, 在一款基于Unity游戏引擎<citation id="146" type="reference"><link href="25" rel="bibliography" /><sup>[<a class="sup">12</a>]</sup></citation>和HTC Vive<citation id="147" type="reference"><link href="27" rel="bibliography" /><sup>[<a class="sup">13</a>]</sup></citation>开发的虚拟现实游戏中使用本方法进行实验, 证明本方法可以与游戏引擎结合, 应用于逻辑复杂的大规模群体仿真场景, 提升大规模群体仿真的效率。</p>
                </div>
                <h3 id="41" name="41" class="anchor-tag"><b>1 基于多线程加速的大规模群体仿真方法概述</b></h3>
                <div class="p1">
                    <p id="42">大规模群体仿真包括群体动画渲染、群体行为模拟。这两个部分的计算相互独立、互不影响, 可以分别优化。本文对已有的群体动画渲染和群体行为模拟算法分别进行改进, 提出一种基于多线程加速的大规模群体仿真方法, 用以提升大规模群体仿真的性能。基于多线程加速的大规模群体仿真方法流程如图1所示。</p>
                </div>
                <div class="area_img" id="43">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201903030_043.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 基于多线程加速的大规模群体仿真流程图" src="Detail/GetImg?filename=images/JYRJ201903030_043.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图1 基于多线程加速的大规模群体仿真流程图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201903030_043.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="44">在群体动画渲染方面, 由于群体数量庞大, 使用CPU计算群体蒙皮动画的方法会大幅度增加CPU的负荷, 导致大规模群体仿真场景帧率过低, 难以满足应用需求。本文对GPU蒙皮渲染算法<citation id="148" type="reference"><link href="9" rel="bibliography" /><sup>[<a class="sup">4</a>]</sup></citation>进行改进, 加入了多线程并行计算, 提出了基于GPU蒙皮渲染的多线程加速算法。该算法利用GPU高并行计算能力加速计算群体的蒙皮动画, 并且利用CPU多线程加速计算群体的动画状态, 提升群体动画渲染的性能。</p>
                </div>
                <div class="p1">
                    <p id="45">在群体行为模拟方面, 需要提升群体行为模拟和群体碰撞避让的计算性能。本文对基于自主性群体行为算法<citation id="149" type="reference"><link href="13" rel="bibliography" /><sup>[<a class="sup">6</a>]</sup></citation>和最优互相碰撞避让算法<citation id="150" type="reference"><link href="15" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>进行改进, 提出基于自主性群体行为和最优互相碰撞避让的多线程加速算法。该算法首先使用自主性群体行为算法模拟个体跟随群体的行为, 并且将自主性群体行为算法的力模型改为速度模型, 使得群体在运动过程中能极快地改变速度, 以避让场景中障碍物;其次, 该算法在最优互相碰撞避让算法的基础上加入了多线程加速, 使用改进后的基于多线程加速的最优互相碰撞避让算法加速计算群体之间的碰撞避让行为, 进一步提升群体碰撞避让的计算效率。</p>
                </div>
                <h3 id="46" name="46" class="anchor-tag"><b>2 基于GPU蒙皮渲染多线程加速算法</b></h3>
                <div class="p1">
                    <p id="47">在很多情况下, 大规模群体使用同一套模型网格和骨骼动画, 除了空间信息, 绘制群体中每个个体的区别仅在于它们当前播放的骨骼动画种类与帧数是不同的。GPU蒙皮渲染算法<citation id="151" type="reference"><link href="9" rel="bibliography" /><sup>[<a class="sup">4</a>]</sup></citation>可以利用GPU的高并行计算能力加速相同个体的蒙皮动画计算。本文在GPU蒙皮渲染算法的基础上, 加入了群体动画状态的多线程计算, 进一步提升群体动画渲染的效率。</p>
                </div>
                <div class="p1">
                    <p id="48">使用骨骼动画的模型包含骨骼层次框架, 模型网格的每个顶点<i>V</i>与一个或者多个骨骼<i>B</i>绑定, 每个骨骼<i>B</i>的初始姿势绑定矩阵是<i>BP</i>, 对顶点<i>V</i>的影响权重为<i>w</i>。骨骼动画每一帧都包含所有模型骨骼的变换矩阵<b><i>M</i></b>, 以变换模型骨骼<i>B</i>的方式改变模型网格的每个顶点<i>V</i>, 实现骨骼动画的播放。网格顶点<i>V</i>位置的计算公式如下:</p>
                </div>
                <div class="p1">
                    <p id="49"><mathml id="50"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>V</mi><mo>=</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>t</mi></munderover><mi>w</mi></mstyle><msub><mrow></mrow><mi>i</mi></msub><mo>×</mo><mi>B</mi><mi>Ρ</mi><msub><mrow></mrow><mi>i</mi></msub><msup><mrow></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>×</mo><mi>Μ</mi><msub><mrow></mrow><mi>i</mi></msub><msup><mrow></mrow><mrow><mi>x</mi><mo>, </mo><mi>y</mi></mrow></msup></mrow></math></mathml>      (1) </p>
                </div>
                <div class="p1">
                    <p id="51">式中:<i>V</i>表示顶点位置, <i>t</i>表示顶点<i>V</i>绑定的骨骼数量, <i>w</i><sub><i>i</i></sub>表示骨骼<i>B</i><sub><i>i</i></sub>对顶点<i>V</i>的影响权重, 且<mathml id="52"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>t</mi></munderover><mi>w</mi></mstyle><msub><mrow></mrow><mi>i</mi></msub><mo>=</mo><mn>1</mn></mrow></math></mathml>, <i>BP</i><sub><i>i</i></sub>表示骨骼<i>B</i><sub><i>i</i></sub>的初始姿势绑定矩阵, <i>M</i><mathml id="53"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><msubsup><mrow></mrow><mi>i</mi><mrow><mi>x</mi><mo>, </mo><mi>y</mi></mrow></msubsup></mrow></math></mathml>表示骨骼动画<i>x</i>第<i>y</i>帧对骨骼<i>B</i><sub><i>i</i></sub>的变换矩阵。</p>
                </div>
                <div class="p1">
                    <p id="54">根据式 (1) 可知, 模型预采样的数据包括以下几点:模型骨骼的层次框架、模型网格顶点与模型骨骼的绑定关系、模型骨骼的初始姿势绑定矩阵、以及所有骨骼动画对模型骨骼的变换矩阵。其中, 所有骨骼动画对模型骨骼的变换矩阵数据十分庞大, 需要以纹理的格式保存采样的数据结果, 方便上传至GPU并行计算蒙皮动画。骨骼动画纹理相关的数据结构如下:</p>
                </div>
                <div class="area_img" id="160">
                                <img alt="" src="Detail/GetImg?filename=images/JYRJ201903030_16000.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="160">
                                <img alt="" src="Detail/GetImg?filename=images/JYRJ201903030_16001.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="79">在虚拟场景中, 群体中每个个体会因为场景逻辑发生变化而更变播放的骨骼动画种类, 例如驻立、行走、攻击等骨骼动画, 个体播放的骨骼动画种类由逻辑线程控制。其他工作线程根据个体当前骨骼动画已经播放的时间, 计算个体当前播放的骨骼动画帧数。在大规模场景中, 群体数量十分庞大, 这里需要充分利用其他工作线程并行加速计算。在进行场景渲染时, 渲染线程将所有个体的骨骼动画状态, 以及预采样的模型和骨骼动画数据上传至GPU, 由GPU批处理完成群体的蒙皮动画计算与渲染。其中, 渲染线程为每个个体设置一个四维向量, 表示个体的骨骼动画状态, 标记个体使用的骨骼动画纹理数据片段。这个四维向量上传至GPU后作为着色器的系统变量, 为每个个体的着色器设置一个不同的参数, 表示个体当前的骨骼动画状态。基于GPU蒙皮渲染的多线程加速算法流程如图2所示。</p>
                </div>
                <div class="area_img" id="80">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201903030_080.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 基于GPU蒙皮渲染的多线程加速算法流程图" src="Detail/GetImg?filename=images/JYRJ201903030_080.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图2 基于GPU蒙皮渲染的多线程加速算法流程图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201903030_080.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="81">本文提出基于GPU蒙皮渲染的多线程加速算法, 利用GPU高并行能力完成场景中大规模群体动画的蒙皮计算和渲染, 同时加入CPU多线程技术提升群体动画状态的计算速度, 大幅度降低CPU在蒙皮动画计算上的性能消耗, 为CPU模拟大规模群体行为腾出了大量的性能空间。</p>
                </div>
                <h3 id="82" name="82" class="anchor-tag"><b>3 基于自主性群体行为和最优互相碰撞避让的多线程加速算法</b></h3>
                <div class="p1">
                    <p id="83">在场景中模拟大规模群体行为时, 首先需要根据场景的布局以及群体的目标移动位置, 使用寻路算法确定个体的初始移动速度;其次, 所有个体以一个整体运动;最后, 个体还要避免与其他个体以及场景障碍物发生碰撞。本文假设每个个体能够获取其他个体以及场景障碍物当前的位置和速度, 先将自主性群体行为算法的力模型改进为速度模型, 模拟个体跟随群体的运动, 使得个体能根据周围环境极快地改变自身运动速度, 再对个体使用多线程加速后的最优互相碰撞避让算法, 实现群体行为的碰撞避让。基于自主性群体行为和最优互相碰撞避让的多线程加速算法流程如图3所示。</p>
                </div>
                <div class="area_img" id="84">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201903030_084.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 基于自主性群体行为和最优互相碰撞避让 的多线程加速算法流程图" src="Detail/GetImg?filename=images/JYRJ201903030_084.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图3 基于自主性群体行为和最优互相碰撞避让 的多线程加速算法流程图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201903030_084.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="85" name="85"><b>3.1 基于自主性群体行为的速度模型算法</b></h4>
                <div class="p1">
                    <p id="86">群体行为模拟根据场景逻辑使用寻路算法计算个体的初始移动速度<i>v</i><sub>0</sub>后, 使用自主性群体行为算法模拟个体跟随群体移动的行为。自主性群体行为算法<citation id="152" type="reference"><link href="11" rel="bibliography" /><sup>[<a class="sup">5</a>]</sup></citation>引入了聚合性、分离性、队列性三个群体行为基准来模拟个体跟随群体移动的行为。考虑到群体行为仿真使用的最优互相碰撞避让算法需要个体拥有高灵敏的速度调节能力, 本文将基于自主性群体行为的力模型算法更改为速度模型算法, 计算得到个体跟随群体移动的速度偏量<i>v</i>′。对于每个个体<i>Agent</i><sub><i>x</i></sub>, 其跟随群体移动的速度偏量<i>v</i>′<sub><i>x</i></sub>计算公式如下所示:</p>
                </div>
                <div class="p1">
                    <p id="87"><i>v</i><sub><i>c</i></sub>=<i>P</i><sub>center</sub>-<i>P</i><sub><i>x</i></sub>      (2) </p>
                </div>
                <div class="p1">
                    <p id="88"><mathml id="89"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>v</mi><msub><mrow></mrow><mi>s</mi></msub><mo>=</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mfrac><mn>1</mn><mrow><mi>Ρ</mi><msub><mrow></mrow><mi>i</mi></msub><mo>-</mo><mi>Ρ</mi><msub><mrow></mrow><mi>x</mi></msub></mrow></mfrac></mrow></mstyle></mrow></math></mathml>      (3) </p>
                </div>
                <div class="p1">
                    <p id="90"><mathml id="91"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>v</mi><msub><mrow></mrow><mi>a</mi></msub><mo>=</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mfrac><mrow><mi>v</mi><msubsup><mrow></mrow><mi>t</mi><mi>i</mi></msubsup></mrow><mrow><mrow><mo>|</mo><mrow><mi>v</mi><msubsup><mrow></mrow><mi>t</mi><mi>i</mi></msubsup></mrow><mo>|</mo></mrow></mrow></mfrac></mrow></mstyle></mrow></math></mathml>      (4) </p>
                </div>
                <div class="p1">
                    <p id="92"><i>v</i>′<sub><i>x</i></sub>=<i>w</i><sub><i>c</i></sub>×<i>v</i><sub><i>c</i></sub>+<i>w</i><sub><i>s</i></sub>×<i>v</i><sub><i>s</i></sub>+<i>w</i><sub><i>a</i></sub>×<i>v</i><sub><i>a</i></sub>      (5) </p>
                </div>
                <div class="p1">
                    <p id="93">式 (2) 用于计算聚合速度<i>v</i><sub><i>c</i></sub>, 表示<i>Agent</i><sub><i>x</i></sub>向群体中心聚合的速度, <i>P</i><sub>center</sub>表示群体中心位置, <i>P</i><sub><i>x</i></sub>表示<i>Agent</i><sub><i>x</i></sub>的位置;式 (3) 用于计算分离速度<i>v</i><sub><i>s</i></sub>, 表示<i>Agent</i><sub><i>x</i></sub>与其他个体<i>Agent</i><sub><i>i</i></sub>保持距离的速度, 这里只考虑距离<i>Agent</i><sub><i>x</i></sub>最近的<i>n</i>个<i>Agent</i><sub><i>i</i></sub>;式 (4) 用于计算队列速度<i>v</i><sub><i>a</i></sub>, 表示<i>Agent</i><sub><i>x</i></sub>与其他个体<i>Agent</i><sub><i>i</i></sub>保持相同的移动方向, 这里只考虑距离<i>Agent</i><sub><i>x</i></sub>最近的<i>n</i>个<i>Agent</i><sub><i>i</i></sub>;式 (5) 是<i>Agent</i><sub><i>x</i></sub>跟随群体移动的速度偏量<i>v</i>′<sub><i>x</i></sub>计算公式, 由<i>v</i><sub><i>c</i></sub>、<i>v</i><sub><i>s</i></sub>、<i>v</i><sub><i>a</i></sub>加权求和计算, <i>w</i><sub><i>c</i></sub>、<i>w</i><sub><i>s</i></sub>、<i>w</i><sub><i>a</i></sub>分别表示聚合速度权重、分离速度权重以及队列速度权重, 权重值根据实际的应用场景进行调整。</p>
                </div>
                <div class="p1">
                    <p id="94">结合个体的寻路速度<i>v</i><sub>0</sub>与群体速度偏量<i>v</i>′, 考虑个体的最大移动速度<i>v</i><sub>max</sub>, 个体的理想速度<i>v</i><sub>pref</sub>的计算公式如下所示:</p>
                </div>
                <div class="area_img" id="95">
                            <div class="imgformula">
                                <img class="pFormula" alt="" src="Detail/GetImg?filename=images/JYRJ201903030_09500.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                <p class="formula_seq"></p>
                            </div>

                </div>
                <h4 class="anchor-tag" id="96" name="96"><b>3.2 基于最优相互碰撞避让的多线程加速算法</b></h4>
                <div class="p1">
                    <p id="97">在大规模群体仿真场景中, 由于群体数量非常多, 个体以<i>v</i><sub>pref</sub>作为最终速度模拟运动会造成个体之间频繁发生碰撞。若使用物理引擎利用碰撞体模拟个体的碰撞, CPU将花费大量时间模拟个体的频繁碰撞, 导致大规模群体场景帧率很低。</p>
                </div>
                <div class="p1">
                    <p id="98">为了降低CPU在碰撞模拟上的性能损耗, 本文使用最优互相碰撞避让算法代替物理引擎的碰撞模拟, 实现大规模群体的碰撞避让行为。同时, 本文在最优互相碰撞避让算法基础上加入了多线程优化, 加入了所有个体、障碍物的Kd-Tree并行计算优化。本文使用的最优互相碰撞避让算法流程如图4所示。</p>
                </div>
                <div class="area_img" id="99">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201903030_099.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 最优互相碰撞避让的多线程加速算法流程图" src="Detail/GetImg?filename=images/JYRJ201903030_099.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图4 最优互相碰撞避让的多线程加速算法流程图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201903030_099.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="100">最优互相碰撞避让算法<citation id="153" type="reference"><link href="15" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>需要设置群体中每个个体的初始移动速度作为个体避让的初始速度, 本文使用个体的理想速度<i>v</i><sub>pref</sub>作为最优互相碰撞避让算法的输入。最优互相碰撞避让算法假设每个个体都知道其他个体的当前速度和位置, 因此能够预测个体何时会发生碰撞。对于个体之间的碰撞避让, 最优互相碰撞避让算法将碰撞避让的行为平分给每对个体, 个体以最低限度的速度调整完成每对个体之间的碰撞避让。对于个体和场景中静态障碍物的碰撞避让, 最优互相碰撞避让算法将由个体完全承担碰撞避让逻辑;对于个体和场景中动态障碍物的碰撞避让, 本文将动态障碍物当作最优互相碰撞避让算法中的个体求解, 与个体之间的碰撞避让不同, 个体和动态障碍物的碰撞避让行为完全由个体来承担。</p>
                </div>
                <div class="p1">
                    <p id="101">最优互相碰撞避让算法<citation id="154" type="reference"><link href="15" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>需要先构建所有个体和障碍物的Kd-Tree, 再计算每个个体的避让速度。为了提升算法的运算速度, 本文在最优互相碰撞避让算法上加入了多线程优化, 使用一个工作线程以固定频率构建所有个体和障碍物的Kd-Tree, 其他工作线程根据最近一次构建完成的Kd-Tree计算每个个体的避让速度 (见图4) 。这种改进会略微降低最优互相碰撞避让算法的精度, 导致场景中个体碰撞发生的次数提高, 但是其他工作线程无需等待所有个体和障碍物的Kd-Tree构建完成, 即可计算所有个体的避让速度, 提高最优互相碰撞避让算法的运算效率。</p>
                </div>
                <h3 id="102" name="102" class="anchor-tag"><b>4 实验结果与分析</b></h3>
                <h4 class="anchor-tag" id="103" name="103"><b>4.1 应用实例</b></h4>
                <div class="p1">
                    <p id="104">本文在一款虚拟现实第一人称射击游戏中, 应用基于多线程加速的大规模群体仿真方法。该游戏是基于Unity游戏引擎<citation id="155" type="reference"><link href="25" rel="bibliography" /><sup>[<a class="sup">12</a>]</sup></citation>和HTC Vive<citation id="156" type="reference"><link href="27" rel="bibliography" /><sup>[<a class="sup">13</a>]</sup></citation> 头戴式虚拟现实设备开发的, 游戏场景包含大规模虫群陷阱关卡, 当玩家踏入陷阱区域, 大规模虫群从四周墙壁爬落, 汇集成一个团队, 避开场景中的障碍物向玩家移动并攻击, 当虫群靠近玩家后, 虫群会随机向玩家飞跃进行空中攻击。玩家可以使用枪械射击或者脚踩的方式攻击虫子。游戏大规模虫群陷阱的示意见图5和图6。</p>
                </div>
                <div class="area_img" id="105">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201903030_105.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 大规模虫群陷阱 (HTC Vive玩家视角)" src="Detail/GetImg?filename=images/JYRJ201903030_105.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图5 大规模虫群陷阱 (HTC Vive玩家视角)   <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201903030_105.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="106">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201903030_106.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 大规模虫群陷阱 (Unity场景视角)" src="Detail/GetImg?filename=images/JYRJ201903030_106.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图6 大规模虫群陷阱 (Unity场景视角)   <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201903030_106.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="107" name="107"><b>4.2 实验环境</b></h4>
                <div class="p1">
                    <p id="108">实验使用1台PC作为虚拟现实游戏运行的节点, 连接HTC Vive头戴式虚拟现实设备运行游戏。PC的硬件配置为Intel (R) Core (TM) i7- 6700HQ CPU @ 2.60 GHz, 16 GB内存, NVIDIA GeForce GTX 1070图形显示卡。虚拟现实游戏的开发和运行环境为Microsoft Windows 10- 64 bit操作系统, Unity 5.5.1- 64 bit版本, HTC Vive虚拟现实设备。</p>
                </div>
                <h4 class="anchor-tag" id="109" name="109"><b>4.3 实验结果</b></h4>
                <div class="p1">
                    <p id="110">本节从群体动画渲染、群体行为模拟两个方面与Unity游戏引擎进行对比实验, 验证大规模群体仿真方法的可行性。通过对比最优互相碰撞避让算法多线程加速前后的性能和碰撞次数, 验证最优互相碰撞避让多线程加速算法的有效性。</p>
                </div>
                <div class="p1">
                    <p id="111">对于群体动画渲染, 本文在实验中分别使用Unity游戏引擎的Mecanim动画系统<citation id="157" type="reference"><link href="29" rel="bibliography" /><sup>[<a class="sup">14</a>]</sup></citation>, 以及基于GPU蒙皮渲染的多线程加速算法渲染虫群, 根据虫群渲染的CPU与GPU耗时证明方法的可行性。</p>
                </div>
                <div class="p1">
                    <p id="112">表1给出虫群数量为200、400、600、800、1 000五种情况下, 使用Unity Mecanim动画系统, 以及GPU蒙皮渲染多线程加速算法实现虫群动画渲染的CPU耗时统计表。在CPU耗时统计中, Unity Mecanim动画系统比GPU蒙皮渲染的多线程加速算法多了蒙皮动画计算的步骤。</p>
                </div>
                <div class="area_img" id="113">
                    <p class="img_tit"><b>表1 虫群动画渲染CPU耗时统计表 ms</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="113" border="1"><tr><td rowspan="2"><br />渲染步骤</td><td colspan="5"><br />虫群数量/个</td></tr><tr><td><br />200</td><td>400</td><td>600</td><td>800</td><td>1 000</td></tr><tr><td><br />Unity Mecanim动画系统动画状态更新</td><td>2.51</td><td>4.35</td><td>5.88</td><td>6.72</td><td>7.79</td></tr><tr><td><br />Unity Mecanim动画系统蒙皮动画计算</td><td>1.62</td><td>2.64</td><td>2.55</td><td>2.92</td><td>3.01</td></tr><tr><td><br />GPU蒙皮渲染多线程加速算法动画状态更新</td><td>0.68</td><td>1.38</td><td>1.66</td><td>2.12</td><td>2.61</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="114">图7、图8分别给出了虫群数量为200、400、600、800、1 000五种情况下, 使用Unity Mecanim动画系统, 以及GPU蒙皮渲染多线程加速算法渲染虫群动画的CPU和GPU耗时折线图。</p>
                </div>
                <div class="area_img" id="115">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201903030_115.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 虫群动画渲染CPU耗时折线图" src="Detail/GetImg?filename=images/JYRJ201903030_115.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图7 虫群动画渲染CPU耗时折线图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201903030_115.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="116">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201903030_116.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图8 虫群动画渲染GPU耗时折线图" src="Detail/GetImg?filename=images/JYRJ201903030_116.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图8 虫群动画渲染GPU耗时折线图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201903030_116.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="117">由图7可知, GPU蒙皮渲染多线程加速算法的CPU耗时远低于Unity Mecanium动画系统。这是因为GPU蒙皮渲染多线程加速算法将虫群动画的蒙皮计算由CPU转交给GPU处理, 同时利用CPU多线程加速计算动画状态, 因此GPU蒙皮渲染多线程加速算法的CPU耗时大幅度降低, 大约只有Unity Mecanim动画系统的20%。</p>
                </div>
                <div class="p1">
                    <p id="118">由图8可知, 在虫群数量较小时, Unity Mecanim动画系统在GPU上的耗时略低于GPU蒙皮渲染多线程加速算法。这是因为GPU蒙皮渲染多线程加速算法需要在GPU完成虫群动画的蒙皮计算。随着虫群数量增多, GPU蒙皮渲染多线程加速算法充分利用GPU高并行计算的特性, GPU耗时基本不变;Unity Mecanim动画系统逐个渲染虫群, GPU耗时随着虫群数量的增加线性上升, 逐渐超过GPU蒙皮渲染多线程加速算法的GPU耗时。</p>
                </div>
                <div class="p1">
                    <p id="119">综合分析可知, 基于GPU蒙皮渲染的多线程加速算法应用于大规模群体仿真时, 可以显著降低CPU与GPU在群体动画计算和渲染上的耗时。</p>
                </div>
                <div class="p1">
                    <p id="120">对于群体行为模拟, 本文在实验中分别使用Unity游戏引擎内置的物理系统<citation id="158" type="reference"><link href="31" rel="bibliography" /><sup>[<a class="sup">15</a>]</sup></citation>、导航系统<citation id="159" type="reference"><link href="33" rel="bibliography" /><sup>[<a class="sup">16</a>]</sup></citation> , 以及基于自主性行为、最优互相碰撞避让的多线程加速算法模拟虫群行为, 根据虫群行为模拟的CPU耗时与虫群碰撞次数证明方法的可行性。</p>
                </div>
                <div class="p1">
                    <p id="121">表2给出虫群数量为200、400、600、800、1 000五种情况下, 使用Unity游戏引擎内置的物理系统、导航系统, 以及基于自主性群体行为、最优互相碰撞避让的多线程优化算法的CPU耗时统计表。其中, 前者包括Unity导航系统和Unity物理系统两个步骤:Unity导航系统完成每个个体到目标点的寻路计算;Unity物理系统完成群体之间的碰撞模拟计算。本文使用的群体行为模拟算法分为自主性群体行为的速度模型算法和最优互相碰撞避让多线程加速算法两个步骤。自主性群体行为的速度模型算法完成群体行为的模拟计算, 最优互相碰撞避让多线程加速算法完成群体避让行为的模拟计算。</p>
                </div>
                <div class="area_img" id="122">
                    <p class="img_tit"><b>表2 虫群行为模拟CPU耗时统计表 ms</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="122" border="1"><tr><td rowspan="2"><br />仿真步骤</td><td colspan="5"><br />虫群数量/个</td></tr><tr><td><br />200</td><td>400</td><td>600</td><td>800</td><td>1 000</td></tr><tr><td>Unity导航系统群体寻路计算</td><td>2.14</td><td>3.77</td><td>4.71</td><td>7.41</td><td>10.30</td></tr><tr><td><br />Unity物理系统群体碰撞模拟计算</td><td>6.11</td><td>12.57</td><td>46.16</td><td>159.80</td><td>339.20</td></tr><tr><td><br />自主性群体行为的速度模型算法</td><td>3.05</td><td>4.31</td><td>6.80</td><td>8.96</td><td>10.31</td></tr><tr><td><br />最优互相碰撞避让多线程加速算法</td><td>1.99</td><td>2.63</td><td>3.86</td><td>5.16</td><td>6.19</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="123">图9、图10分别给出虫群数量为200、400、600、800、1 000五种情况下, 使用Unity物理系统、导航系统, 以及基于自主性群体行为、最优互相碰撞避让多线程加速算法的CPU耗时和碰撞发生次数折线图。</p>
                </div>
                <div class="area_img" id="124">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201903030_124.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图9 虫群行为模拟CPU耗时折线图" src="Detail/GetImg?filename=images/JYRJ201903030_124.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图9 虫群行为模拟CPU耗时折线图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201903030_124.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="125">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201903030_125.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图10 虫群行为模拟碰撞发生次数折线图" src="Detail/GetImg?filename=images/JYRJ201903030_125.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图10 虫群行为模拟碰撞发生次数折线图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201903030_125.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="126">由图9可知, 使用Unity物理系统和导航系统模拟虫群行为的CPU耗时, 随着虫群数量的增加而大幅度增长。使用基于自主性群体行为和最优互相碰撞避让的多线程加速算法模拟虫群行为的CPU耗时, 随着虫群数量的增加而线性增长, 且远低于使用Unity物理系统和导航系统的方法, 可以在虚拟场景中高帧率模拟大规模的群体行为。</p>
                </div>
                <div class="p1">
                    <p id="127">结合图9和图10可知, 使用Unity物理引擎和导航系统的方法, 在群体数量较多的情况下, CPU耗时和碰撞发生次数都很高, 而基于自主性群体行为和最优互相碰撞避让的多线程加速算法在保证场景高帧率的前提下, 场景中群体每帧发生碰撞的次数也很少, 证明方法的高精度性和高效性。</p>
                </div>
                <div class="p1">
                    <p id="128">最后, 本文通过实验比对最优互相碰撞避让算法多线程加速前后的CPU耗时和虫群碰撞次数, 证明本文改进最优互相碰撞避让算法的可行性。图11、图12分别给出虫群数量为200、400、600、800、1 000五种情况下, 最优互相碰撞避让算法多线程加速前后CPU耗时和碰撞发生次数折线图。</p>
                </div>
                <div class="area_img" id="130">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201903030_130.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图11 最优互相碰撞避让算法多线程加速前后 CPU耗时折线图" src="Detail/GetImg?filename=images/JYRJ201903030_130.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图11 最优互相碰撞避让算法多线程加速前后 CPU耗时折线图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201903030_130.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="131">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201903030_131.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图12 最优互相碰撞避让算法多线程加速前后 碰撞发生次数折线图" src="Detail/GetImg?filename=images/JYRJ201903030_131.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图12 最优互相碰撞避让算法多线程加速前后 碰撞发生次数折线图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201903030_131.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="132">结合图11和图12可知, 本文提出的最优互相碰撞避让多线程加速算法, 以降低碰撞避让的精度为代价, 有效地提升了算法效率。最优互相碰撞避让多线程的加速算法, 无需等待所有个体和障碍物的Kd-Tree构建, 算法耗时大约为改进前的60%。虽然碰撞避让的精度有所下降, 碰撞发生次数大约是原始算法的2倍, 但是碰撞次数与虫群数量的比例仍然很低, 碰撞发生次数的增多几乎不影响群体仿真的效果。</p>
                </div>
                <h3 id="133" name="133" class="anchor-tag"><b>5 结 语</b></h3>
                <div class="p1">
                    <p id="134">面向大规模群体场景, 本文设计并实现了一种基于多线程加速的群体仿真方法, 提升大规模群体仿真中, 群体动画渲染和群体行为模拟的性能。针对群体动画渲染, 本文改进GPU蒙皮渲染算法, 在使用GPU加速群体蒙皮动画计算的基础上, 利用CPU多线程加速群体的动画状态计算, 进一步提升群体动画渲染的效率;针对群体行为模拟, 本文将自主性群体行为算法修改为速度模型, 结合多线程优化后的最优互相碰撞避让算法, 实现群体之间的碰撞避让, 提升群体行为模拟的效率。实验结果表明, 本文提出的基于多线程加速的大规模群体仿真方法可以很好地与游戏引擎结合, 在复杂场景中高效地实现大规模群体仿真。未来方法将继续优化, 以适应群体规模更大, 逻辑更加复杂的应用场景。</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="3">
                            <a id="bibliography_1" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Level of detail for 3D graphics">

                                <b>[1]</b> Luebke D P. Level of detail for 3D graphics[M]. Morgan Kaufmann, 2003.
                            </a>
                        </p>
                        <p id="5">
                            <a id="bibliography_2" target="_blank" href="http://scholar.cnki.net/result.aspx?q=A survey of real‐time crowd rendering">

                                <b>[2]</b> Beacco A, Pelechano N, Andújar, C. A survey of real‐time crowd rendering[J]. Computer Graphics Forum, 2016, 35 (8) :32-50.
                            </a>
                        </p>
                        <p id="7">
                            <a id="bibliography_3" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SSJD&amp;filename=SSJD14061700002662&amp;v=MjA5NzZRSC9pclJkR2VycVFUTW53WmVadEZpbmxVcjNKS0Y0UmFCST1OajdCYXJLOEh0Zk5xSTlGWk9zTkNubzdvQk1UNlQ0UA==&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[3]</b> Toledo L, De Gyves O, Rudomín I. Hierarchical level of detail for varied animated crowds[J]. The Visual Computer, 2014, 30 (6/8) : 949-961.
                            </a>
                        </p>
                        <p id="9">
                            <a id="bibliography_4" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Animated Crowd Rendering">

                                <b>[4]</b> Dudash B.Animated crowd rendering[J].GPU Gems, 2007, 3: 39-52.
                            </a>
                        </p>
                        <p id="11">
                            <a id="bibliography_5" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SJWD&amp;filename=SJWD15103100267834&amp;v=MjE0ODI0UmFCST1OaWZjYXJLOUg5SFBybzlGWnUwSUJIODlvQk1UNlQ0UFFIL2lyUmRHZXJxUVRNbndaZVp0RmlubFVyM0pLRg==&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[5]</b> Hartman C, Benes B. Autonomous boids[J]. Computer Animation and Virtual Worlds, 2006, 17 (3/4) : 199-206.
                            </a>
                        </p>
                        <p id="13">
                            <a id="bibliography_6" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Reciprocal collision avoidance and multi-agent navigation for video games">

                                <b>[6]</b> Snape J, Guy S J, Lin M C, et al. Reciprocal collision avoidance and multi-agent navigation for video games[J]. Journal of Finance, 2012, 33 (3) :777-792.
                            </a>
                        </p>
                        <p id="15">
                            <a id="bibliography_7" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Reciprocal n-body collision avoidance">

                                <b>[7]</b> Van Den Berg J, Guy S J, Lin M, et al. Reciprocal n-body collision avoidance[M]//Robotics research. Springer, Berlin, Heidelberg, 2011: 3-19.
                            </a>
                        </p>
                        <p id="17">
                            <a id="bibliography_8" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SJCM&amp;filename=SJCM13091000098856&amp;v=MTkwNjZNVDZUNFBRSC9pclJkR2VycVFUTW53WmVadEZpbmxVcjNKS0Y0UmFCST1OaWZJWTdLN0h0ak5yNDlGWk9JSEJIay9vQg==&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[8]</b> Narain R, Golas A, Curtis S, et al. Aggregate dynamics for dense crowd simulation[J]. ACM Transactions on Graphics (TOG) , 2009, 28 (5) : Article No. 122.
                            </a>
                        </p>
                        <p id="19">
                            <a id="bibliography_9" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Dynamic risk tolerance: Motion planning by balancing short-term and long-term stochastic dynamic predictions">

                                <b>[9]</b> Chiang H T L, HomChaudhuri B, Vinod A P, et al. Dynamic risk tolerance: Motion planning by balancing short-term and long-term stochastic dynamic predictions[C]//Robotics and Automation (ICRA) , 2017 IEEE International Conference on. IEEE, 2017: 3762-3769.
                            </a>
                        </p>
                        <p id="21">
                            <a id="bibliography_10" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Reciprocally-rotating velocity obstacles">

                                <b>[10]</b> Giese A, Latypov D, Amato N M. Reciprocally-rotating velocity obstacles[C]//Robotics and Automation (ICRA) , 2014 IEEE International Conference on. IEEE, 2014: 3234-3241.
                            </a>
                        </p>
                        <p id="23">
                            <a id="bibliography_11" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Optimal reciprocal collision avoidance with mobile and static obstacles for multi-UAV systems">

                                <b>[11]</b> Alejo D, Cobano J A, Heredia G, et al. Optimal reciprocal collision avoidance with mobile and static obstacles for multi-UAV systems[C]//Unmanned Aircraft Systems (ICUAS) , 2014 International Conference on. IEEE, 2014:1259-1266.
                            </a>
                        </p>
                        <p id="25">
                            <a id="bibliography_12" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Unity Game Engine[OL]">

                                <b>[12]</b> Unity Game Engine[OL]. [2018-3-24].https://www.unity3d.com.
                            </a>
                        </p>
                        <p id="27">
                            <a id="bibliography_13" >
                                    <b>[13]</b>
                                 HTC Vive VR虚拟现实设备[OL]. [2018-3-24].https://www.vive.com/cn.
                            </a>
                        </p>
                        <p id="29">
                            <a id="bibliography_14" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Unity Mecanim Animation[OL]">

                                <b>[14]</b> Unity Mecanim Animation[OL]. [2018-3-24].https://docs.unity3d.com/Manual/AnimationSection.html.
                            </a>
                        </p>
                        <p id="31">
                            <a id="bibliography_15" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Unity Physics System[OL]">

                                <b>[15]</b> Unity Physics System[OL]. [2018-3-24]. https://docs.unity3d.com/Manual/AnimationSection.html.
                            </a>
                        </p>
                        <p id="33">
                            <a id="bibliography_16" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Unity Navigation System[OL]">

                                <b>[16]</b> Unity Navigation System[OL]. [2018-3-24]. https://docs.unity3d.com/Manual/nav-Overview.html.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="JYRJ201903030" />
        <input id="dpi" type="hidden" value="300" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201903030&amp;v=MjM3OTMzenFxQnRHRnJDVVI3cWZadVpzRmlEbFZyM0lMelRaWkxHNEg5ak1ySTlHWklRS0RIODR2UjRUNmo1NE8=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDN5c2Q1VWdqSmZRZ2l1bjJRM2RRZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
