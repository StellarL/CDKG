<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637134082267443750%26DBCODE%3dCJFD%26TABLEName%3dCJFDTEMP%26FileName%3dJYRJ201911054%26RESULT%3d1%26SIGN%3dQKdxyJMWfYtIIYFc%252bb6I8tuwRow%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JYRJ201911054&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JYRJ201911054&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201911054&amp;v=MDE5MzZZSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplVnVGeS9oVmIvSkx6VFpaTEc0SDlqTnJvOUE=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#25" data-title="&lt;b&gt;0 引 言&lt;/b&gt; "><b>0 引 言</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#29" data-title="&lt;b&gt;1 双屏异显介绍&lt;/b&gt; "><b>1 双屏异显介绍</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#32" data-title="&lt;b&gt;2 播放器的功能总体设计&lt;/b&gt; "><b>2 播放器的功能总体设计</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#53" data-title="&lt;b&gt;3 播放器后台服务设计&lt;/b&gt; "><b>3 播放器后台服务设计</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#54" data-title="&lt;b&gt;3.1 后台服务成员对象&lt;/b&gt;"><b>3.1 后台服务成员对象</b></a></li>
                                                <li><a href="#56" data-title="&lt;b&gt;3.2 后台服务与AppWidget交互&lt;/b&gt;"><b>3.2 后台服务与AppWidget交互</b></a></li>
                                                <li><a href="#62" data-title="&lt;b&gt;3.3 后台服务与主程序界面交互&lt;/b&gt;"><b>3.3 后台服务与主程序界面交互</b></a></li>
                                                <li><a href="#69" data-title="&lt;b&gt;3.4 媒体播放器初始化和副屏绑定&lt;/b&gt;"><b>3.4 媒体播放器初始化和副屏绑定</b></a></li>
                                                <li><a href="#71" data-title="&lt;b&gt;3.5 视频播放列表获取&lt;/b&gt;"><b>3.5 视频播放列表获取</b></a></li>
                                                <li><a href="#73" data-title="&lt;b&gt;3.6 视频文件列表维护&lt;/b&gt;"><b>3.6 视频文件列表维护</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#76" data-title="&lt;b&gt;4 运行结果与分析&lt;/b&gt; "><b>4 运行结果与分析</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#85" data-title="&lt;b&gt;5 结 语&lt;/b&gt; "><b>5 结 语</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#40" data-title="图1 车载视频播放器软件总体模块">图1 车载视频播放器软件总体模块</a></li>
                                                <li><a href="#47" data-title="图2 软件运行流程">图2 软件运行流程</a></li>
                                                <li><a href="#58" data-title="图3 后台服务与AppWidget交互方式">图3 后台服务与AppWidget交互方式</a></li>
                                                <li><a href="#59" data-title="&lt;b&gt;表1 AppWidget操作指令&lt;/b&gt;"><b>表1 AppWidget操作指令</b></a></li>
                                                <li><a href="#61" data-title="&lt;b&gt;表2 桌面小部件接收广播ACTION&lt;/b&gt;"><b>表2 桌面小部件接收广播ACTION</b></a></li>
                                                <li><a href="#64" data-title="图4 后台服务与主程序界面交互方式">图4 后台服务与主程序界面交互方式</a></li>
                                                <li><a href="#66" data-title="&lt;b&gt;表3 主程序界面操作指令&lt;/b&gt;"><b>表3 主程序界面操作指令</b></a></li>
                                                <li><a href="#78" data-title="图5 系统启动时副屏欢迎界面">图5 系统启动时副屏欢迎界面</a></li>
                                                <li><a href="#80" data-title="图6 桌面小部件">图6 桌面小部件</a></li>
                                                <li><a href="#82" data-title="图7 播放视频时主屏程序界面">图7 播放视频时主屏程序界面</a></li>
                                                <li><a href="#83" data-title="图8 播放视频时副屏">图8 播放视频时副屏</a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="3">


                                    <a id="bibliography_1" title=" 康金荣,彭宏利.双屏异显在Android系统上的实现[J].软件导刊,2016,15(12):118-120." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=RJDK201612042&amp;v=MTI0NDR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVZ1RnkvaFZiL0pOeWZQWmJHNEg5Zk5yWTlCWm9RS0RIODQ=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[1]</b>
                                         康金荣,彭宏利.双屏异显在Android系统上的实现[J].软件导刊,2016,15(12):118-120.
                                    </a>
                                </li>
                                <li id="5">


                                    <a id="bibliography_2" title=" Google.Presentation[EB/OL].2015.https://developer.android.com/reference/android/app/Presentation.html." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Presentation">
                                        <b>[2]</b>
                                         Google.Presentation[EB/OL].2015.https://developer.android.com/reference/android/app/Presentation.html.
                                    </a>
                                </li>
                                <li id="7">


                                    <a id="bibliography_3" >
                                        <b>[3]</b>
                                     CSDN.Android7.1 Presentation双屏异显原理分析[EB/OL].2018.https://blog.csdn.net/fu_kevin0606/article/details/79420621.</a>
                                </li>
                                <li id="9">


                                    <a id="bibliography_4" title=" 施威铭.Android APP开发入门:使用Android Studio环境[M].北京:机械工业出版社,2016:356." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CBBD&amp;filename=9787111539582000&amp;v=MTI5NjI3bjN4RTlmYnZuS3JpZlp1OXVGQ3JsVTdqTUpsNFZYRnF6R2JLNUg5VFBwb3BOWnVzUERCTTh6eFVTbURkOVNI&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[4]</b>
                                         施威铭.Android APP开发入门:使用Android Studio环境[M].北京:机械工业出版社,2016:356.
                                    </a>
                                </li>
                                <li id="11">


                                    <a id="bibliography_5" title=" 郭霖.第一行代码-Android[M].北京:人民邮电出版社,2016:303." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CBBD&amp;filename=9787115439789000&amp;v=MjkxODNWWEZxekdiSzVHOVhQcG9oTmJlc1BEQk04enhVU21EZDlTSDduM3hFOWZidm5LcmlmWnU5dUZDcmxVN2pNSmw0&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[5]</b>
                                         郭霖.第一行代码-Android[M].北京:人民邮电出版社,2016:303.
                                    </a>
                                </li>
                                <li id="13">


                                    <a id="bibliography_6" title=" 徐艳菲,吴铁峰.基于Android的音视频播放器的研究与设计[J].微处理机,2017,38(6):74-77." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WCLJ201706017&amp;v=Mjc4NDhIOWJNcVk5RVk0UUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVWdUZ5L2hWYi9KTWk3SFpMRzQ=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[6]</b>
                                         徐艳菲,吴铁峰.基于Android的音视频播放器的研究与设计[J].微处理机,2017,38(6):74-77.
                                    </a>
                                </li>
                                <li id="15">


                                    <a id="bibliography_7" title=" 张正政,林耀荣.基于Android系统的影音播放器开发[J].现代电子技术,2011,34(2):5-8." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=XDDJ201102003&amp;v=MzAyNzR6cXFCdEdGckNVUkxPZVplVnVGeS9oVmIvSlBTblBaTEc0SDlETXJZOUZaNFFLREg4NHZSNFQ2ajU0TzM=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[7]</b>
                                         张正政,林耀荣.基于Android系统的影音播放器开发[J].现代电子技术,2011,34(2):5-8.
                                    </a>
                                </li>
                                <li id="17">


                                    <a id="bibliography_8" title=" 马建设,赵雪江,苏萍,等.基于Android系统的视频播放器开发[J].计算机应用与软件,2013,30(11):136-137,175." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201311039&amp;v=MTYxMzF1RnkvaFZiL0pMelRaWkxHNEg5TE5ybzlHYllRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVY=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[8]</b>
                                         马建设,赵雪江,苏萍,等.基于Android系统的视频播放器开发[J].计算机应用与软件,2013,30(11):136-137,175.
                                    </a>
                                </li>
                                <li id="19">


                                    <a id="bibliography_9" title=" 刘红,冯思宇.基于Android的可视化后厨系统设计[J].计算机测量与控制,2017,25(6):120-123." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JZCK201706033&amp;v=MzIwMjllVnVGeS9oVmIvSkx6ZklaYkc0SDliTXFZOUdaNFFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVo=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[9]</b>
                                         刘红,冯思宇.基于Android的可视化后厨系统设计[J].计算机测量与控制,2017,25(6):120-123.
                                    </a>
                                </li>
                                <li id="21">


                                    <a id="bibliography_10" title=" 瞿苏.基于Android的广播接收器的设计与应用[J].宁波工程学院学报,2017,29(2):34-38." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=LBGS201702007&amp;v=MjUwNjhaZVZ1RnkvaFZiL0pLUy9NZmJHNEg5Yk1yWTlGWTRRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2U=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[10]</b>
                                         瞿苏.基于Android的广播接收器的设计与应用[J].宁波工程学院学报,2017,29(2):34-38.
                                    </a>
                                </li>
                                <li id="23">


                                    <a id="bibliography_11" title=" 罗国涛,裴广.基于WebService和Android的C/S+B/S结构手机电影系统[J].计算机应用与软件,2015,32(9):328-333." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201509078&amp;v=MjM5NjY0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVWdUZ5L2hWYi9KTHpUWlpMRzRIOVRNcG85Q2JJUUtESDg0dlI=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[11]</b>
                                         罗国涛,裴广.基于WebService和Android的C/S+B/S结构手机电影系统[J].计算机应用与软件,2015,32(9):328-333.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=JYRJ" target="_blank">计算机应用与软件</a>
                2019,36(11),329-333 DOI:10.3969/j.issn.1000-386x.2019.11.053            </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>Android双屏异显车载视频播放器的设计</b></span>
                                    </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%88%98%E9%A9%AC%E9%A3%9E&amp;code=39773302&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">刘马飞</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E6%97%A0%E9%94%A1%E8%81%8C%E4%B8%9A%E6%8A%80%E6%9C%AF%E5%AD%A6%E9%99%A2%E7%89%A9%E8%81%94%E7%BD%91%E6%8A%80%E6%9C%AF%E5%AD%A6%E9%99%A2&amp;code=0042946&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">无锡职业技术学院物联网技术学院</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>大客车通常安装配备车载播放器,播放MTV和电影给乘客观赏。目前车载播放器通常采用独立的DVD播放器或移动硬盘播放机,系统成本高。基于Android的中控大屏具有丰富的娱乐功能、方便与手机和网络互联,已成为高端新能源客车的流行配置。通过利用Android系统的双屏异显功能设计相应播放器程序,使得仅需额外配备一个车载显示屏,便可低成本地实现为乘客播放视频的功能。播放器程序使用Android中控大屏作为播放器操控界面(主屏),视频播放输出在车载显示屏(副屏),操作体验良好。此外由于Android设备方便联网,使得播放器的影片可通过网络下载,使用更方便快捷。</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%8F%8C%E5%B1%8F%E5%BC%82%E6%98%BE&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">双屏异显;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Android&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Android;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E8%BD%A6%E8%BD%BD%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E5%99%A8&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">车载视频播放器;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    刘马飞，讲师，主研领域:物联网，嵌入式智能终端产品设计。;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2019-05-15</p>

                    <p>

                            <b>基金：</b>
                                                        <span>江苏省高校品牌专业项目(PPZY2015C240);</span>
                    </p>
            </div>
                    <h1><b>DESIGN OF VEHICLE VIDEO PLAYER FOR ANDROID DOUBLE SCREEN DISPLAY</b></h1>
                    <h2>
                    <span>Liu Mafei</span>
            </h2>
                    <h2>
                    <span>School of Internet of Things Technology,Wuxi Institute of Technology</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>Buses are usually equipped with vehicle video player to play MTV and movies for passengers to watch. At present, independent DVD player or mobile hard disk player is usually used in vehicle video player, which has high system cost. Because of its rich entertainment function, convenient connection with mobile phones and networks, Android-based large screen has become a popular configuration for high-end new energy buses. By using the dual-screen display function of Android system, I design the corresponding player program so that only one additional display screen is needed, and the function of playing video for passengers can be realized at lower cost. The player program used Android-based large touch screen as the player control interface(main screen), and the video was output on the additional display screen(secondary screen). The operation experience was good. And the Android device is easy to connect to the Internet, so that the video of the player can be downloaded through the Internet, making it more convenient and fast to use.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Double%20screen%20display&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Double screen display;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Android&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Android;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Vehicle%20video%20player&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Vehicle video player;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2019-05-15</p>
                                    <p>
                                            </p>
            </div>


        <!--brief start-->
                        <h3 id="25" name="25" class="anchor-tag"><b>0 引 言</b></h3>
                <div class="p1">
                    <p id="26">大客车通常需要在客车内安装车载播放器,以便在长途行车时提供娱乐节目、电影给乘客观赏。目前车载播放器通常采使用独立的DVD播放器或移动硬盘播放机,不但系统成本高,而且DVD播放器更换影片必须使用DVD影碟、移动硬盘播放机更换影片必须通过移动硬盘拷贝,使用不够方便。</p>
                </div>
                <div class="p1">
                    <p id="27">由于基于Android的中控大屏由于具有丰富的娱乐功能、方便与手机和网络互联的优点,已经成为高端新能源客车的流行配置。Android在4.2版本以后支持双屏异显<citation id="87" type="reference"><link href="3" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>功能,可以实现在两块屏幕上同时显示不同的内容。因此只需在Android中控大屏的基础上,额外配备一个车载显示屏,通过设计相应播放器程序,便可低成本地实现为乘客播放视频的功能,播放器程序使用Android中控大屏作为播放器操控界面(主屏),视频播放输出在车载显示屏(副屏),而且操作体验良好;此外由于Android设备方便联网,使得播放器的影片可通过网络下载,使用更方便快捷。</p>
                </div>
                <div class="p1">
                    <p id="28">本文介绍了利用Android双屏异显功能的车载视频播放器的设计和实现。该车载播放器可低成本地满足大客车为乘客播放视频的需要,使用操作灵活简便,有较广阔的市场应用价值。</p>
                </div>
                <h3 id="29" name="29" class="anchor-tag"><b>1 双屏异显介绍</b></h3>
                <div class="p1">
                    <p id="30">所谓双屏异显即在同一软硬件平台上实现同时驱动两块LCD屏幕,并且这两块屏幕所显示的内容可以不同<citation id="88" type="reference"><link href="3" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>。Android在4.2版本以后支持双屏异显功能,默认情况下两块屏幕显示内容一致,需要基于特定平台的双屏异显方案进行编写程序方可实现两个屏幕显示不同内容。</p>
                </div>
                <div class="p1">
                    <p id="31">Presentation 是Google在Android4.2版本以后提供的通用双屏方案,是Google官方提供的一个特殊的dialog,用来将特定内容显示到其他非主屏显示器上,从而轻松实现在两块屏幕上同时显示不同的内容。Presentation在创建时,需要绑定显示屏,并根据这个目标显示屏以及其大小来配置context和 resource。目前系统提供通过MediaRouter接口和通过DisplayManager 接口两种方式将Presentation与目标显示屏进行绑定<citation id="89" type="reference"><link href="5" rel="bibliography" /><link href="7" rel="bibliography" /><sup>[<a class="sup">2</a>,<a class="sup">3</a>]</sup></citation>。本文双屏实现时采用通过DisplayManager 接口进行显示屏绑定。</p>
                </div>
                <h3 id="32" name="32" class="anchor-tag"><b>2 播放器的功能总体设计</b></h3>
                <div class="p1">
                    <p id="33">本车载视频播放器具有以下功能:</p>
                </div>
                <div class="p1">
                    <p id="34">(1) 播放视频显示输出在副屏,视频播放操作控制在主屏进行,主屏可通过应用程序界面和桌面小部件(widget)对播放器进行播放控制。不播放视频时,副屏显示欢迎界面。</p>
                </div>
                <div class="p1">
                    <p id="35">(2) 桌面程序可显示当前播放视频名称,并可进行播放/暂停、停止、播上一部以及播下一部操作。</p>
                </div>
                <div class="p1">
                    <p id="36">(3) 应用程序界面包含播放文件列表供播放选择,并显示当前播放文件、播放时间总长以及当前播放时间,并支持通过拖动进度条对变更视频播放位置。</p>
                </div>
                <div class="p1">
                    <p id="37">(4) Android系统开机后,播放器后台启动,在副屏显示欢迎界面。</p>
                </div>
                <div class="p1">
                    <p id="38">(5) 播放器监测Android设备外存中可播放的视频文件的删除或新增操作,自动变更播放器播放视频列表。</p>
                </div>
                <div class="p1">
                    <p id="39">Android平台播放音视频通常使用自带的组件MediaPlayer,在进行视频播放时通常还需要利用SurfaceView等设置视频输出的界面控件<citation id="90" type="reference"><link href="9" rel="bibliography" /><link href="11" rel="bibliography" /><sup>[<a class="sup">4</a>,<a class="sup">5</a>]</sup></citation>。通常Android音频播放器通过Service实现后台播放的需求,当Android跳转到其他程序,播放器程序转到后台运行不显示时,音乐仍然继续播放<citation id="91" type="reference"><link href="13" rel="bibliography" /><link href="15" rel="bibliography" /><sup>[<a class="sup">6</a>,<a class="sup">7</a>]</sup></citation>。而Android视频播放器由于转到后台运行后视频画面已不可见,通常不需要支持后台播放功能<citation id="92" type="reference"><link href="17" rel="bibliography" /><link href="19" rel="bibliography" /><sup>[<a class="sup">8</a>,<a class="sup">9</a>]</sup></citation>。与一般视频播放器不一样,服务于大客车为乘客播放视频的双屏异显视频播放器的视频输出是在副屏,因此需要通过Service支持后台播放功能,当主屏操控程序转到后台运行不可见时,副屏的视频仍需持续播放,同时要求Android系统开机后便启动双屏显示功能。依据功能要求,本文设计的车载视频播放器软件总体模块如图1所示。</p>
                </div>
                <div class="area_img" id="40">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201911054_040.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 车载视频播放器软件总体模块" src="Detail/GetImg?filename=images/JYRJ201911054_040.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图1 车载视频播放器软件总体模块  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201911054_040.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="41">模块各功能如下:</p>
                </div>
                <div class="p1">
                    <p id="42">(1) 后台服务SndDisplayService为本播放器实现的核心,其包括用于播放视频的MediaPlayer和SurfaceView对象、继承于Presentation的DifferentDislay类完成副屏的显示控制、用于接收桌面程序操作的VideoWidgetReceiver、用于视频文件变动监听完成维护视频文件列表的继承于ContentObserver的VideoObserver类。</p>
                </div>
                <div class="p1">
                    <p id="43">(2) AutoStartBroadcastReceiver 继承于Android核心组件BroadcastReceiver<citation id="93" type="reference"><link href="21" rel="bibliography" /><sup>[<a class="sup">10</a>]</sup></citation>,并通过在AndroidManifest.xml中静态注册该广播接收器接收系统开机启动信号BOOT_COMPLETED,重写其onReceive方法,在该方法中通过调用startService启动后台服务SndDisplayService。</p>
                </div>
                <div class="p1">
                    <p id="44">(3) MainActivity 是主操作界面,列表显示外存所有视频文件供点击进行播放,并显示当前播放的视频文件信息,播放总时间长度和当前播放时间,通过按钮选择暂停/播放、静音/取消静音、停止播放、播上一部和播下一部等操作,并可通过拖动进度改变当前播放视频播放时间。</p>
                </div>
                <div class="p1">
                    <p id="45">(4) AppWidget为桌面小部件(widget)<citation id="94" type="reference"><link href="23" rel="bibliography" /><sup>[<a class="sup">11</a>]</sup></citation>,可显示当前正在播放视频名称,并可进行相应的暂停/播放、播上一部、播下一部和停止播放操作。</p>
                </div>
                <div class="p1">
                    <p id="46">后台服务SndDisplayService为本播放器实现的核心,AppWidget桌面程序和主程序界面MainActivity均发送操作指令到后台服务SndDisplayService实现播放控制。本双屏异显播放器总体运行流程如图2所示。</p>
                </div>
                <div class="area_img" id="47">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201911054_047.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 软件运行流程" src="Detail/GetImg?filename=images/JYRJ201911054_047.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图2 软件运行流程  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201911054_047.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="48">(1) Android系统开机启动后,静态注册的广播接收器AutoStartBroadcastReceiver接收开机启动信号,通过startService开启后台服务SndDisplayService。</p>
                </div>
                <div class="p1">
                    <p id="49">(2) 后台服务在onCreate操作中完成初始化媒体播放器初始化,同时通过动态两个内建广播接收器对象。广播接收器对象VideoWidgetReceiver用于接收Widget桌面程序的操作指令,广播接收器对象VideoObserver监测外部存储视频媒体库文件变动维护播放视频文件列表。后台服务启动关闭时,注销相应的广播接收器。</p>
                </div>
                <div class="p1">
                    <p id="50">后台服务启动后,便可通过MainActivity主程序界面和AppWidget桌面程序进行播放器操控。</p>
                </div>
                <div class="p1">
                    <p id="51">(3) 播放器主程序界面MainActivity在前台运行时,通过bindService与后台服务进行绑定后,主界面通过使用startService对后台服务进行播放操控,而后台服务通过绑定操作获得的回调接口将播放状态反馈回MainActivity。</p>
                </div>
                <div class="p1">
                    <p id="52">(4) AppWidget和后台服务通过发送广播方式,进行视频播放操控以及播放状态更新。</p>
                </div>
                <h3 id="53" name="53" class="anchor-tag"><b>3 播放器后台服务设计</b></h3>
                <h4 class="anchor-tag" id="54" name="54"><b>3.1 后台服务成员对象</b></h4>
                <div class="p1">
                    <p id="55">为了支持视频后台播放,因此后台服务 SndDisplayService类需要包含MediaPlayer和SurfaceView对象、双屏异显中完成副屏的显示控制DifferentDislay类、用于接收桌面程序操作的VideoWidgetReceiver类对象、用于视频文件变动监听完成维护视频文件列表的VideoObserver类、用于记录播放器状态的相应变量以及用于向应用程序界面返回相应状态的回调接口。</p>
                </div>
                <h4 class="anchor-tag" id="56" name="56"><b>3.2 后台服务与AppWidget交互</b></h4>
                <div class="p1">
                    <p id="57">后台服务与AppWidget交互方式如图3所示。AppWidget桌面程序通过发送广播的方式发送相应操作指令,如表1所示。后台服务SndDisplayService内部VideoWidgetReceiver广播接收器对象的onReceive方法接收操作指令后,对MediaPlayer对象进行相应操作控制。因此需要服务启动时动态注册广播接收器VideoWidgetReceiver对象,接收上述操作指令。</p>
                </div>
                <div class="area_img" id="58">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201911054_058.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 后台服务与AppWidget交互方式" src="Detail/GetImg?filename=images/JYRJ201911054_058.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图3 后台服务与AppWidget交互方式  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201911054_058.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="59">
                    <p class="img_tit"><b>表1 AppWidget操作指令</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="59" border="1"><tr><td><br />指令标记op</td><td>功能</td></tr><tr><td><br />VIDEO_PLAY</td><td>开始/继续播放</td></tr><tr><td><br />VIDEO_PAUSE</td><td>播放暂停</td></tr><tr><td><br />VIDEO_STOP</td><td>停止播放</td></tr><tr><td><br />VIDEO_NEXT</td><td>播下一部</td></tr><tr><td><br />VIDEO_PREV</td><td>播上一部</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="60">MediaPlayer播放器状态发生变更后,通过发送广播方式告知AppWidget桌面程序进行状态变更以及当前播放视频,相应广播动作如表2所示。因此桌面小部件AppWidget需要静态注册接收上述广播动作,并在onReceive方法中进行相应显示状态更新。</p>
                </div>
                <div class="area_img" id="61">
                    <p class="img_tit"><b>表2 桌面小部件接收广播ACTION</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="61" border="1"><tr><td><br />广播动作</td><td> 功能</td></tr><tr><td><br />STATE_PLAY</td><td>后台服务当前处在播放状态</td></tr><tr><td><br />STATE_PAUSE</td><td>后台服务当前处在暂停状态</td></tr><tr><td><br />STATE_STOP</td><td>后台服务当前处在停止状态</td></tr><tr><td><br />STATE_CURR</td><td>附带名为title字符串参数表明当前播放视频文件名</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <h4 class="anchor-tag" id="62" name="62"><b>3.3 后台服务与主程序界面交互</b></h4>
                <div class="p1">
                    <p id="63">后台服务与主程序界面交互设计如图4所示。主程序界面MainActivity通过附带操作指令调用startService实现主界面传递后台服务到进行播放器控制。后台服务通过重写onStartCommand方法,接收操作指令并操作MediaPlayer组件完成相应处理。</p>
                </div>
                <div class="area_img" id="64">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201911054_064.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 后台服务与主程序界面交互方式" src="Detail/GetImg?filename=images/JYRJ201911054_064.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图4 后台服务与主程序界面交互方式  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201911054_064.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="65">主程序界面提供播放器全部操作,相应操作指令如表3所示。</p>
                </div>
                <div class="area_img" id="66">
                    <p class="img_tit"><b>表3 主程序界面操作指令</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="66" border="1"><tr><td><br />指令标记op</td><td> 功能</td></tr><tr><td><br />VIDEO_START</td><td>选择视频播放,附带文件索引position</td></tr><tr><td><br />VIDEO_SEEK</td><td>视频拖动进度,附带进度参数progress</td></tr><tr><td><br />VIDEO_PLAY</td><td>开始/继续播放</td></tr><tr><td><br />VIDEO_PAUSE</td><td>播放暂停</td></tr><tr><td><br />VIDEO_STOP</td><td>停止播放</td></tr><tr><td><br />VIDEO_NEXT</td><td>播下一部</td></tr><tr><td><br />VIDEO_PREV</td><td>播上一部</td></tr><tr><td><br />VIDEO_MUTE</td><td>开启静音模式</td></tr><tr><td><br />VIDEO_UMUTE</td><td>关闭静音模式</td></tr><tr><td><br />VIDEO_SYNC</td><td>播放器状态和当前播放视频同步到主界面</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="67">双屏异显播放器播需要支持后台播放功能,当主程序界面转回前台显示时,需要获知后台播放器当前的播放状态和播放视频,因此必需将后台播放器的状态信息同步到主程序界面。为了方便后台播放服务SndDisplayService发回状态信息,在主程序界面onResume中通过bindService对已经启动的后台服务进行捆绑服务操作。后台服务定义回调接口,主程序界面在服务绑定完成时实现回调接口,在后台服务中调用该接口,便可实现发回信息给主程序界面。</p>
                </div>
                <div class="p1">
                    <p id="68">后台服务定义PlayStateCallback回调接口用于向主程序界面返回当前播放状态和播放视频,PlayTimeCallback回调接口用于返回当前播放时间,以及VideoListCallback回调接口用于对主界面显示的视频列表进行更新同步。</p>
                </div>
                <h4 class="anchor-tag" id="69" name="69"><b>3.4 媒体播放器初始化和副屏绑定</b></h4>
                <div class="p1">
                    <p id="70">后台服务SndDisplayService启动时,需要初始化MediaPlayer组件的输出与副屏进行绑定。首先通过DisplayManager获取当前显示屏映射数组,在该映射数组中下标序号0为主屏,序号1为副屏;然后以副屏为参数创建DifferentDislay类对象;最后设置媒体播放器的输出为副屏的surfaceView控件。</p>
                </div>
                <h4 class="anchor-tag" id="71" name="71"><b>3.5 视频播放列表获取</b></h4>
                <div class="p1">
                    <p id="72">程序定义EntityVideo类记录每个视频文件的文件名、播放、文件路径等信息。Android系统为多媒体类型的文件(图片、音频、视频等)建立了媒体库,从而完成多媒体数据的维护工作,并可通过ContentProvider提供给其他程序使用。后台服务SndDisplayService需要在服务启动时,通过getContentResolver来查询系统媒体库中外部存储所有支持格式的视频文件,从而构建视频文件列表。</p>
                </div>
                <h4 class="anchor-tag" id="73" name="73"><b>3.6 视频文件列表维护</b></h4>
                <div class="p1">
                    <p id="74">由于播放文件列表是在后台服务启动时通过getContentResolver获取,当播放器主界面后台运行时用户可能新增或删除了视频媒体文件,因此需要对视频文件列表进行维护,避免用户点击播放下一部视频时,视频文件已经删除导致播放器异常操作情况。因此需要服务启动时动态注册广播接收器VideoObserver监听外部存储中视频文件的变动情况。</p>
                </div>
                <div class="p1">
                    <p id="75">当外部存储中出现新增或删除视频文件时,广播接收器VideoObserver将可获知该变动,重写其onChange方法,在该方法中重新获取视频文件列表。如果程序界面正在前台运行时,通过VideoListcallback回调接口进行界面视频文件列表更新。</p>
                </div>
                <h3 id="76" name="76" class="anchor-tag"><b>4 运行结果与分析</b></h3>
                <div class="p1">
                    <p id="77">设计程序安装到RK3288平台(Android 5.1)上运行,RK3288通过VGA和HDMI连接两个显示器,其中VGA连接主显示屏,HDMI连接副显示屏。系统开机启动完成后,将自动完成车载播放器后台服务初始化工作,开启双屏异显模式,副屏显示欢迎画面,如图5所示。</p>
                </div>
                <div class="area_img" id="78">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201911054_078.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 系统启动时副屏欢迎界面" src="Detail/GetImg?filename=images/JYRJ201911054_078.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图5 系统启动时副屏欢迎界面  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201911054_078.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="79">初始化完成后,主屏便可以通过桌面小部件和程序主界面进行播放控制。桌面小部件可进行播放/暂停、上一首、下一首以及停止播放的简单控制操作以及显示当前正在播放的视频名称,如图6所示。</p>
                </div>
                <div class="area_img" id="80">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201911054_08000.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 桌面小部件" src="Detail/GetImg?filename=images/JYRJ201911054_08000.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图6 桌面小部件  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201911054_08000.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="81">程序主界面提供车载播放器的全部控制功能,如图7所示,副屏显示当前正在播放视频输出画面如图8所示。程序主界面以列表方式显示外部存储上所有可播放的视频文件,供用户进行点击播放。当开始播放视频后,程序主界面显示当前播放影片名称、当前播放时间,并可通过拖动进度条对调整当前播放影片的播放播放时间。</p>
                </div>
                <div class="area_img" id="82">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201911054_082.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 播放视频时主屏程序界面" src="Detail/GetImg?filename=images/JYRJ201911054_082.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图7 播放视频时主屏程序界面  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201911054_082.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="83">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JYRJ201911054_083.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图8 播放视频时副屏" src="Detail/GetImg?filename=images/JYRJ201911054_083.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图8 播放视频时副屏  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JYRJ201911054_083.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="84">通过程序运行结果分析表明,本设计成功实现了双屏异显模式下,车载视频播放器的相应功能。</p>
                </div>
                <h3 id="85" name="85" class="anchor-tag"><b>5 结 语</b></h3>
                <div class="p1">
                    <p id="86">本文介绍了利用Android双屏异显功能的车载视频播放器的设计和实现。该车载播放器视频输出在副屏,主屏通过主程序界面或桌面小部件进行播放控制,可低成本地满足大客车为乘客播放视频的需要。当然如果要将该车载视频播放器进行实际商用部署,还应该解决以下两个问题:(1) 由于一般Android应用程序可强行停止,会导致车载播放器程序重启并初始化为未播放状态,因此还需要获得系统权限升级为系统应用,避免异屏双显播放器被强行停止。(2) 一般Android系统硬件平台仅仅包含一路音频输出,因此主屏其他程序使用音频会对副屏视频播放的音频造成干扰。因此需要设计含两条音频输出的硬件平台,方可实现副屏视频播放音频不受主屏操作的影响。</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="3">
                            <a id="bibliography_1" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=RJDK201612042&amp;v=MDU1OTVCWm9RS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVZ1RnkvaFZiL0pOeWZQWmJHNEg5Zk5yWTk=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[1]</b> 康金荣,彭宏利.双屏异显在Android系统上的实现[J].软件导刊,2016,15(12):118-120.
                            </a>
                        </p>
                        <p id="5">
                            <a id="bibliography_2" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Presentation">

                                <b>[2]</b> Google.Presentation[EB/OL].2015.https://developer.android.com/reference/android/app/Presentation.html.
                            </a>
                        </p>
                        <p id="7">
                            <a id="bibliography_3" >
                                    <b>[3]</b>
                                 CSDN.Android7.1 Presentation双屏异显原理分析[EB/OL].2018.https://blog.csdn.net/fu_kevin0606/article/details/79420621.
                            </a>
                        </p>
                        <p id="9">
                            <a id="bibliography_4" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CBBD&amp;filename=9787111539582000&amp;v=MTE4MDF4VVNtRGQ5U0g3bjN4RTlmYnZuS3JpZlp1OXVGQ3JsVTdqTUpsNFZYRnF6R2JLNUg5VFBwb3BOWnVzUERCTTh6&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[4]</b> 施威铭.Android APP开发入门:使用Android Studio环境[M].北京:机械工业出版社,2016:356.
                            </a>
                        </p>
                        <p id="11">
                            <a id="bibliography_5" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CBBD&amp;filename=9787115439789000&amp;v=MDY1Nzl1RkNybFU3ak1KbDRWWEZxekdiSzVHOVhQcG9oTmJlc1BEQk04enhVU21EZDlTSDduM3hFOWZidm5LcmlmWnU5&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[5]</b> 郭霖.第一行代码-Android[M].北京:人民邮电出版社,2016:303.
                            </a>
                        </p>
                        <p id="13">
                            <a id="bibliography_6" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WCLJ201706017&amp;v=MDUyMDllVnVGeS9oVmIvSk1pN0haTEc0SDliTXFZOUVZNFFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVo=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[6]</b> 徐艳菲,吴铁峰.基于Android的音视频播放器的研究与设计[J].微处理机,2017,38(6):74-77.
                            </a>
                        </p>
                        <p id="15">
                            <a id="bibliography_7" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=XDDJ201102003&amp;v=MDczNTMzenFxQnRHRnJDVVJMT2VaZVZ1RnkvaFZiL0pQU25QWkxHNEg5RE1yWTlGWjRRS0RIODR2UjRUNmo1NE8=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[7]</b> 张正政,林耀荣.基于Android系统的影音播放器开发[J].现代电子技术,2011,34(2):5-8.
                            </a>
                        </p>
                        <p id="17">
                            <a id="bibliography_8" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201311039&amp;v=MTg1NzZxQnRHRnJDVVJMT2VaZVZ1RnkvaFZiL0pMelRaWkxHNEg5TE5ybzlHYllRS0RIODR2UjRUNmo1NE8zenE=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[8]</b> 马建设,赵雪江,苏萍,等.基于Android系统的视频播放器开发[J].计算机应用与软件,2013,30(11):136-137,175.
                            </a>
                        </p>
                        <p id="19">
                            <a id="bibliography_9" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JZCK201706033&amp;v=MTEzNDk5Yk1xWTlHWjRRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVZ1RnkvaFZiL0pMemZJWmJHNEg=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[9]</b> 刘红,冯思宇.基于Android的可视化后厨系统设计[J].计算机测量与控制,2017,25(6):120-123.
                            </a>
                        </p>
                        <p id="21">
                            <a id="bibliography_10" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=LBGS201702007&amp;v=MjY3ODFIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVZ1RnkvaFZiL0pLUy9NZmJHNEg5Yk1yWTlGWTRRS0Q=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[10]</b> 瞿苏.基于Android的广播接收器的设计与应用[J].宁波工程学院学报,2017,29(2):34-38.
                            </a>
                        </p>
                        <p id="23">
                            <a id="bibliography_11" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201509078&amp;v=MjU3Nzh0R0ZyQ1VSTE9lWmVWdUZ5L2hWYi9KTHpUWlpMRzRIOVRNcG85Q2JJUUtESDg0dlI0VDZqNTRPM3pxcUI=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[11]</b> 罗国涛,裴广.基于WebService和Android的C/S+B/S结构手机电影系统[J].计算机应用与软件,2015,32(9):328-333.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="JYRJ201911054" />
        <input id="dpi" type="hidden" value="96" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201911054&amp;v=MDE5MzZZSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplVnVGeS9oVmIvSkx6VFpaTEc0SDlqTnJvOUE=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFVsZkNHV25tS3FjcGR3SzhBTGdXQT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="0" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
