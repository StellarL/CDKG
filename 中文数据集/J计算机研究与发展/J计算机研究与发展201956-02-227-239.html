<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637133243301377500%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dJFYZ201902001%26RESULT%3d1%26SIGN%3dpBFAlAkoY%252bnYJkqIv1bBSSpRwoQ%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JFYZ201902001&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JFYZ201902001&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JFYZ201902001&amp;v=MDM3NTMzenFxQnRHRnJDVVJMT2VaZVZ2Rnk3bldyckFMeXZTZExHNEg5ak1yWTlGWllRS0RIODR2UjRUNmo1NE8=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#276" data-title="&lt;b&gt;1&lt;/b&gt;&lt;b&gt;背景介绍&lt;/b&gt; "><b>1</b><b>背景介绍</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#285" data-title="&lt;b&gt;2&lt;/b&gt;&lt;b&gt;RDMA与硬件管理&lt;/b&gt; "><b>2</b><b>RDMA与硬件管理</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#287" data-title="&lt;b&gt;2.1&lt;/b&gt;&lt;b&gt;缓存管理&lt;/b&gt;"><b>2.1</b><b>缓存管理</b></a></li>
                                                <li><a href="#298" data-title="&lt;b&gt;2.2&lt;/b&gt;&lt;b&gt;CPU调度&lt;/b&gt;"><b>2.2</b><b>CPU调度</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#305" data-title="&lt;b&gt;3&lt;/b&gt;&lt;b&gt;RDMA与软件重构&lt;/b&gt; "><b>3</b><b>RDMA与软件重构</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#307" data-title="&lt;b&gt;3.1&lt;/b&gt;&lt;b&gt;RDMA在Key-Value系统中的应用&lt;/b&gt;"><b>3.1</b><b>RDMA在Key-Value系统中的应用</b></a></li>
                                                <li><a href="#317" data-title="&lt;b&gt;3.2&lt;/b&gt;&lt;b&gt;RDMA在文件系统中的应用&lt;/b&gt;"><b>3.2</b><b>RDMA在文件系统中的应用</b></a></li>
                                                <li><a href="#405" data-title="3.3 RDMA在分布式事务中的应用">3.3 RDMA在分布式事务中的应用</a></li>
                                                <li><a href="#332" data-title="&lt;b&gt;3.4&lt;/b&gt;&lt;b&gt;RDMA的通用性优化&lt;/b&gt;"><b>3.4</b><b>RDMA的通用性优化</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#342" data-title="&lt;b&gt;4&lt;/b&gt;&lt;b&gt;总结与展望&lt;/b&gt; "><b>4</b><b>总结与展望</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#279" data-title="图1 RDMA网络数据收发过程">图1 RDMA网络数据收发过程</a></li>
                                                <li><a href="#282" data-title="&lt;b&gt;表1&lt;/b&gt;&lt;b&gt;不同模式下的RDMA原语和最大传输单元 (MTU&lt;/b&gt;) "><b>表1</b><b>不同模式下的RDMA原语和最大传输单元 (MTU</b>) </a></li>
                                                <li><a href="#292" data-title="图2 RDMA在不同链路模式下的扩展性问题">图2 RDMA在不同链路模式下的扩展性问题</a></li>
                                                <li><a href="#294" data-title="图3 RC Write操作对应网卡缓存缺失率">图3 RC Write操作对应网卡缓存缺失率</a></li>
                                                <li><a href="#295" data-title="图4 因特尔数据直访I/O技术下网卡写操作流程">图4 因特尔数据直访I/O技术下网卡写操作流程</a></li>
                                                <li><a href="#302" data-title="图5 不同QP数量或CPU核对吞吐的影响">图5 不同QP数量或CPU核对吞吐的影响</a></li>
                                                <li><a href="#303" data-title="图6 QP共享模式下Read请求的单线程吞吐率">图6 QP共享模式下Read请求的单线程吞吐率</a></li>
                                                <li><a href="#310" data-title="图7 Pilaf的总体架构">图7 Pilaf的总体架构</a></li>
                                                <li><a href="#313" data-title="图8 自校验散列表数据结构">图8 自校验散列表数据结构</a></li>
                                                <li><a href="#316" data-title="&lt;b&gt;表2&lt;/b&gt;&lt;b&gt;不同键值存储系统实现细节对比&lt;/b&gt;"><b>表2</b><b>不同键值存储系统实现细节对比</b></a></li>
                                                <li><a href="#319" data-title="图9 Octopus整体架构">图9 Octopus整体架构</a></li>
                                                <li><a href="#329" data-title="图10 本地和分布式事务之间的冲突情形">图10 本地和分布式事务之间的冲突情形</a></li>
                                                <li><a href="#330" data-title="图11 FaRM的事务提交协议">图11 FaRM的事务提交协议</a></li>
                                                <li><a href="#338" data-title="图12 Mojim的系统架构">图12 Mojim的系统架构</a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>
                                    <dd class="subnode">
                                        <h6>
                                            <a href="#a_footnote">注释</a>

                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="412">


                                    <a id="bibliography_1" title="Zaharia M, Chowdhury M, Franklin M J, et al.Spark:Cluster computing with working sets[C]Proc of the 10th USENIX Workshop on Hot Topics in Cloud Computing.Berkeley, CA:USENIX Association, 2010:No.10" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Spark:cluster computing with working sets">
                                        <b>[1]</b>
                                        Zaharia M, Chowdhury M, Franklin M J, et al.Spark:Cluster computing with working sets[C]Proc of the 10th USENIX Workshop on Hot Topics in Cloud Computing.Berkeley, CA:USENIX Association, 2010:No.10
                                    </a>
                                </li>
                                <li id="414">


                                    <a id="bibliography_2" title="Frber F, Sang K C, Primsch J, et al.SAP HANAdatabase:Data management for modern business applications[C]Proc of the 31st ACM SIGMOD Int Conf on Management of Data.New York:ACM, 2012:45-51" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=SAP HANAdatabase:Data management for modern business applications">
                                        <b>[2]</b>
                                        Frber F, Sang K C, Primsch J, et al.SAP HANAdatabase:Data management for modern business applications[C]Proc of the 31st ACM SIGMOD Int Conf on Management of Data.New York:ACM, 2012:45-51
                                    </a>
                                </li>
                                <li id="416">


                                    <a id="bibliography_3" title="Wikipedia.RDMA[OL].[2018-04-14].https:en.wikipedia.org/wiki/Remote direct memory access" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=RDMA[OL]">
                                        <b>[3]</b>
                                        Wikipedia.RDMA[OL].[2018-04-14].https:en.wikipedia.org/wiki/Remote direct memory access
                                    </a>
                                </li>
                                <li id="418">


                                    <a id="bibliography_4" title="Decandia G, Hastorun D, Jampani M, et al.Dynamo:Amazon’s highly available key-value store[C]Proc of the21st ACM SIGOPS Symp on Operating Systems Principles.New York:ACM, 2007:205-220" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Dynamo:Amazon s highly available key-value store">
                                        <b>[4]</b>
                                        Decandia G, Hastorun D, Jampani M, et al.Dynamo:Amazon’s highly available key-value store[C]Proc of the21st ACM SIGOPS Symp on Operating Systems Principles.New York:ACM, 2007:205-220
                                    </a>
                                </li>
                                <li id="420">


                                    <a id="bibliography_5" title="Stuedi P, Trivedi A, Pfefferle J, et al.Crail:A highperformance I/O architecture for distributed data processing[J].IEEE Data Engineering Bulletin, 2017, 40 (1) :38-49" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Crail:A highperformance I/O architecture for distributed data processing">
                                        <b>[5]</b>
                                        Stuedi P, Trivedi A, Pfefferle J, et al.Crail:A highperformance I/O architecture for distributed data processing[J].IEEE Data Engineering Bulletin, 2017, 40 (1) :38-49
                                    </a>
                                </li>
                                <li id="422">


                                    <a id="bibliography_6" title="Song W, Gkountouvas T, Birman K, et al.The freeze-frame file system[C]Proc of the 7th ACM Symp on Cloud Computing.New York:ACM, 2016:307-320" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=The freeze-frame file system">
                                        <b>[6]</b>
                                        Song W, Gkountouvas T, Birman K, et al.The freeze-frame file system[C]Proc of the 7th ACM Symp on Cloud Computing.New York:ACM, 2016:307-320
                                    </a>
                                </li>
                                <li id="424">


                                    <a id="bibliography_7" title="Islam N S, Wasi-ur-Rahman M, Lu Xiaoyi, et al.High performance design for HDFS with byte-addressability of NVM and RDMA[C]Proc of the 30th Int Conf on Supercomputing.New York:ACM, 2016:No.8" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=High performance design for HDFS with byte-addressability of NVM and RDMA">
                                        <b>[7]</b>
                                        Islam N S, Wasi-ur-Rahman M, Lu Xiaoyi, et al.High performance design for HDFS with byte-addressability of NVM and RDMA[C]Proc of the 30th Int Conf on Supercomputing.New York:ACM, 2016:No.8
                                    </a>
                                </li>
                                <li id="426">


                                    <a id="bibliography_8" title="Mitchell C, Geng Yifeng, Li Jinyang.Using one-sided RDMA reads to build a fast, CPU-efficient key-value store[C]Proc of the 22nd USENIX Annual Technical Conf.Berkeley, CA:USENIX Association, 2013:103-114" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Using one-sided RDMA reads to build a fast,CPU-efficient key-value store">
                                        <b>[8]</b>
                                        Mitchell C, Geng Yifeng, Li Jinyang.Using one-sided RDMA reads to build a fast, CPU-efficient key-value store[C]Proc of the 22nd USENIX Annual Technical Conf.Berkeley, CA:USENIX Association, 2013:103-114
                                    </a>
                                </li>
                                <li id="428">


                                    <a id="bibliography_9" title="Kalia A, Kaminsky M, Andersen D G.Using RDMAefficiently for key-value services[C]Proc of the 38th ACMConf on SIGCOMM.New York:ACM, 2014:295-306" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Using rdma efficiently for key-value services">
                                        <b>[9]</b>
                                        Kalia A, Kaminsky M, Andersen D G.Using RDMAefficiently for key-value services[C]Proc of the 38th ACMConf on SIGCOMM.New York:ACM, 2014:295-306
                                    </a>
                                </li>
                                <li id="430">


                                    <a id="bibliography_10" title="Wang Yandong, Zhang Li, Tan Jian, et al.Hydradb:Aresilient RDMA-driven key-value middleware for in-memory cluster computing[C]Proc of the 17th Int Conf for High Performance Computing, Networking, Storage and Analysis.New York:ACM, 2015:No.22" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Hydradb:Aresilient RDMA-driven key-value middleware for in-memory cluster computing">
                                        <b>[10]</b>
                                        Wang Yandong, Zhang Li, Tan Jian, et al.Hydradb:Aresilient RDMA-driven key-value middleware for in-memory cluster computing[C]Proc of the 17th Int Conf for High Performance Computing, Networking, Storage and Analysis.New York:ACM, 2015:No.22
                                    </a>
                                </li>
                                <li id="432">


                                    <a id="bibliography_11" title="Su Maomeng, Zhang Mingxing, Chen Kang, et al.RFP:When RPC is faster than server-bypass with RDMA[C]Proc of the 12th European Conf on Computer Systems.New York:ACM, 2017:No.1" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=RFP:When RPC is faster than server-bypass with RDMA">
                                        <b>[11]</b>
                                        Su Maomeng, Zhang Mingxing, Chen Kang, et al.RFP:When RPC is faster than server-bypass with RDMA[C]Proc of the 12th European Conf on Computer Systems.New York:ACM, 2017:No.1
                                    </a>
                                </li>
                                <li id="434">


                                    <a id="bibliography_12" title="Wang Yandong, Meng Xiaoqiao, Zhang Li, et al.C-hint:An effective and reliable cache management for RDMA-accelerated key-value stores[C]Proc of the ACM Symp on Cloud Computing.New York:ACM, 2014:No.23" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=C-hint:An effective and reliable cache management for RDMA-accelerated key-value stores">
                                        <b>[12]</b>
                                        Wang Yandong, Meng Xiaoqiao, Zhang Li, et al.C-hint:An effective and reliable cache management for RDMA-accelerated key-value stores[C]Proc of the ACM Symp on Cloud Computing.New York:ACM, 2014:No.23
                                    </a>
                                </li>
                                <li id="436">


                                    <a id="bibliography_13" title="Dragojevi A, Narayanan D, Hodson O, et al.FaRM:Fast remote memory[C]Proc of the 11th USENIX Conf on Networked Systems Design and Implementation.Berkeley, CA:USENIX Association, 2014:401-414" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=FaRM:Fast remote memory">
                                        <b>[13]</b>
                                        Dragojevi A, Narayanan D, Hodson O, et al.FaRM:Fast remote memory[C]Proc of the 11th USENIX Conf on Networked Systems Design and Implementation.Berkeley, CA:USENIX Association, 2014:401-414
                                    </a>
                                </li>
                                <li id="438">


                                    <a id="bibliography_14" title="Cassell B, Szepesi T, Wong B, et al.Nessie:A decoupled, client-driven key-value store using RDMA[J].IEEETransactions on Parallel&amp;amp;Distributed Systems, 2017, 28 (12) :3537-3552" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Nessie:A Decoupled Client-Driven Key-Value Store Using RDMA">
                                        <b>[14]</b>
                                        Cassell B, Szepesi T, Wong B, et al.Nessie:A decoupled, client-driven key-value store using RDMA[J].IEEETransactions on Parallel&amp;amp;Distributed Systems, 2017, 28 (12) :3537-3552
                                    </a>
                                </li>
                                <li id="440">


                                    <a id="bibliography_15" title="Dragojevi A, Narayanan D, Nightingale E B, et al.No compromises:Distributed transactions with consistency, availability, and performance[C]Proc of the 25th Symp on Operating Systems Principles.New York:ACM, 2015:54-70" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=No compromises:Distributed transactions with consistency,availability,and performance">
                                        <b>[15]</b>
                                        Dragojevi A, Narayanan D, Nightingale E B, et al.No compromises:Distributed transactions with consistency, availability, and performance[C]Proc of the 25th Symp on Operating Systems Principles.New York:ACM, 2015:54-70
                                    </a>
                                </li>
                                <li id="442">


                                    <a id="bibliography_16" title="Kalia A, Kaminsky M, Andersen D G.FaSST:Fast, scalable and simple distributed transactions with two-sided (RDMA) datagram RPCs[C]Proc of the 12th USENIXSymp on Operating Systems Design and Implementation.Berkeley, CA:USENIX Association, 2016:185-201" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=FaSST:Fast,scalable and simple distributed transactions with two-sided (RDMA)datagram RPCs">
                                        <b>[16]</b>
                                        Kalia A, Kaminsky M, Andersen D G.FaSST:Fast, scalable and simple distributed transactions with two-sided (RDMA) datagram RPCs[C]Proc of the 12th USENIXSymp on Operating Systems Design and Implementation.Berkeley, CA:USENIX Association, 2016:185-201
                                    </a>
                                </li>
                                <li id="444">


                                    <a id="bibliography_17" title="Wei Xingda, Shi Jiaxin, Chen Yanzhe, et al.Fast in-memory transaction processing using RDMA and HTM[C]Proc of the 25th Symp on Operating Systems Principles.New York:ACM, 2015:87-104" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Fast in-memory transaction processing using RDMA and HTM">
                                        <b>[17]</b>
                                        Wei Xingda, Shi Jiaxin, Chen Yanzhe, et al.Fast in-memory transaction processing using RDMA and HTM[C]Proc of the 25th Symp on Operating Systems Principles.New York:ACM, 2015:87-104
                                    </a>
                                </li>
                                <li id="446">


                                    <a id="bibliography_18" title="Chen Yanzhe, Wei Xingda, Shi Jjaixin, et al.Fast and general distributed transactions using RDMA and HTM[C]Proc of the 7th European Conf on Computer Systems.New York:ACM, 2016:No.26" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Fast and general distributed transactions using RDMA and HTM">
                                        <b>[18]</b>
                                        Chen Yanzhe, Wei Xingda, Shi Jjaixin, et al.Fast and general distributed transactions using RDMA and HTM[C]Proc of the 7th European Conf on Computer Systems.New York:ACM, 2016:No.26
                                    </a>
                                </li>
                                <li id="448">


                                    <a id="bibliography_19" title="Dragojevic A, Narayanan D, Castro M.RDMA reads:To use or not to use/[J].IEEE Data Engineering, 2017, 40 (1) :3-14" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=RDMA reads:To use or not to use">
                                        <b>[19]</b>
                                        Dragojevic A, Narayanan D, Castro M.RDMA reads:To use or not to use/[J].IEEE Data Engineering, 2017, 40 (1) :3-14
                                    </a>
                                </li>
                                <li id="450">


                                    <a id="bibliography_20" title="Kaminsky A K M, Andersen D G.Design guidelines for high performance RDMA systems[C]Proc of the 25th USENIXAnnual Technical Conf.Berkeley, CA:USENIXAssociation, 2016:437-450" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Design guidelines for high performance RDMA systems">
                                        <b>[20]</b>
                                        Kaminsky A K M, Andersen D G.Design guidelines for high performance RDMA systems[C]Proc of the 25th USENIXAnnual Technical Conf.Berkeley, CA:USENIXAssociation, 2016:437-450
                                    </a>
                                </li>
                                <li id="452">


                                    <a id="bibliography_21" title="Stuedi P, Trivedi A, Metzler B, et al.DaRPC:Data center RPC[C]Proc of the 5th ACM Symp on Cloud Computing.New York:ACM, 2014:No.15" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=DaRPC:Data center RPC">
                                        <b>[21]</b>
                                        Stuedi P, Trivedi A, Metzler B, et al.DaRPC:Data center RPC[C]Proc of the 5th ACM Symp on Cloud Computing.New York:ACM, 2014:No.15
                                    </a>
                                </li>
                                <li id="454">


                                    <a id="bibliography_22" title="An Zhongqi, Du Hao, Li Qiang, et al.Memcached optimization on high performance I/O technology[J].Journal of Computer Research and Development, 2018, 55 (4) :864-874 (in Chinese) (安仲奇, 杜昊, 李强, 等.基于高性能I/O技术的Memcached优化研究[J].计算机研究与发展, 2018, 55 (4) :864-874) " target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JFYZ201804019&amp;v=MTYxMzlBTHl2U2RMRzRIOW5NcTQ5RWJZUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVWdkZ5N25XcnI=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[22]</b>
                                        An Zhongqi, Du Hao, Li Qiang, et al.Memcached optimization on high performance I/O technology[J].Journal of Computer Research and Development, 2018, 55 (4) :864-874 (in Chinese) (安仲奇, 杜昊, 李强, 等.基于高性能I/O技术的Memcached优化研究[J].计算机研究与发展, 2018, 55 (4) :864-874) 
                                    </a>
                                </li>
                                <li id="456">


                                    <a id="bibliography_23" title="Lu Youyou, Shu Jiwu, Chen Youmin, et al.Octopus:An RDMA-enabled distributed persistent memory file system[C]Proc of the 26th USENIX Annual Technical Conf.Berkeley, CA:USENIX Association, 2017:773-785" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Octopus:An RDMA-enabled distributed persistent memory file system">
                                        <b>[23]</b>
                                        Lu Youyou, Shu Jiwu, Chen Youmin, et al.Octopus:An RDMA-enabled distributed persistent memory file system[C]Proc of the 26th USENIX Annual Technical Conf.Berkeley, CA:USENIX Association, 2017:773-785
                                    </a>
                                </li>
                                <li id="458">


                                    <a id="bibliography_24" title="Lee B C, Ipek E, Mutlu O, et al.Architecting phase change memory as a scalable dram alternative[J].ACM SIGARCHComputer Architecture News, 2009, 37 (3) :2-13" target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SJCM&amp;filename=SJCM13091000044894&amp;v=MTI0MjN3WmVadUh5am1VYjdJSmx3ZGJ4bz1OaWZJWTdLN0h0ak5yNDlGWk84TEJIVTlvQk1UNlQ0UFFIL2lyUmRHZXJxUVRNbg==&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[24]</b>
                                        Lee B C, Ipek E, Mutlu O, et al.Architecting phase change memory as a scalable dram alternative[J].ACM SIGARCHComputer Architecture News, 2009, 37 (3) :2-13
                                    </a>
                                </li>
                                <li id="460">


                                    <a id="bibliography_25" title="Qureshi M K, Srinivasan V, Rivers J A.Scalable high performance main memory system using phase-change memory technology[J].ACM SIGARCH Computer Architecture News, 2009, 37 (3) :24-33" target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SJCM&amp;filename=SJCM13091000044896&amp;v=MTYyNzlUNlQ0UFFIL2lyUmRHZXJxUVRNbndaZVp1SHlqbVViN0lKbHdkYnhvPU5pZklZN0s3SHRqTnI0OUZaTzhMQkhVL29CTQ==&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[25]</b>
                                        Qureshi M K, Srinivasan V, Rivers J A.Scalable high performance main memory system using phase-change memory technology[J].ACM SIGARCH Computer Architecture News, 2009, 37 (3) :24-33
                                    </a>
                                </li>
                                <li id="462">


                                    <a id="bibliography_26" title="Strukov D B, Snider G S, Stewart D R, et al.The missing memristor found[J].Nature, 2008, 453 (7191) :80-83" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=The missing memristor found">
                                        <b>[26]</b>
                                        Strukov D B, Snider G S, Stewart D R, et al.The missing memristor found[J].Nature, 2008, 453 (7191) :80-83
                                    </a>
                                </li>
                                <li id="464">


                                    <a id="bibliography_27" title="Lu Youyou, Shu Jiwu, Sun Long.Blurred persistence in transactional persistent memory[C]Proc of the 31st Symp on Mass Storage Systems and Technologies.Piscataway, NJ:IEEE, 2015:No.13" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Blurred persistence in transactional persistent memory">
                                        <b>[27]</b>
                                        Lu Youyou, Shu Jiwu, Sun Long.Blurred persistence in transactional persistent memory[C]Proc of the 31st Symp on Mass Storage Systems and Technologies.Piscataway, NJ:IEEE, 2015:No.13
                                    </a>
                                </li>
                                <li id="466">


                                    <a id="bibliography_28" title="Zhang Yiying, Yang Jian, Memaripour A, et al.Mojim:Areliable and highly-available non-volatile memory system[C]Proc of the 20th Int Conf on Architectural Support for Programming Languages and Operating Systems.New York:ACM, 2015:3-18" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Mojim:Areliable and highly- available non-volatile memory system">
                                        <b>[28]</b>
                                        Zhang Yiying, Yang Jian, Memaripour A, et al.Mojim:Areliable and highly-available non-volatile memory system[C]Proc of the 20th Int Conf on Architectural Support for Programming Languages and Operating Systems.New York:ACM, 2015:3-18
                                    </a>
                                </li>
                                <li id="468">


                                    <a id="bibliography_29" title="Talpey T.Remote persistent memory access-workload scenarios and RDMA semantics[OL].[2017-03-31].https:www.openfabrics.org/images/eventpresos/2017presentations/405_RemotePM_TTalpey.pdf" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Remote persistent memory access-workload scenarios and RDMA semantics[OL]">
                                        <b>[29]</b>
                                        Talpey T.Remote persistent memory access-workload scenarios and RDMA semantics[OL].[2017-03-31].https:www.openfabrics.org/images/eventpresos/2017presentations/405_RemotePM_TTalpey.pdf
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">

    <div class="head-tag">   
            <p>
               <b> 网络首发时间: 2019-01-29 13:16</b>
            </p>     
    </div>


        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=JFYZ" target="_blank">计算机研究与发展</a>
                2019,56(02),227-239 DOI:10.7544/issn1000-1239.2019.20170849            </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>基于RDMA的分布式存储系统研究综述</b></span>
                                    </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E9%99%88%E6%B8%B8%E6%97%BB&amp;code=37353586&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">陈游旻</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E9%99%86%E6%B8%B8%E6%B8%B8&amp;code=27236214&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">陆游游</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E7%BD%97%E5%9C%A3%E7%BE%8E&amp;code=22190000&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">罗圣美</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E8%88%92%E7%BB%A7%E6%AD%A6&amp;code=08179569&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">舒继武</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF%E7%B3%BB&amp;code=0187103&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">清华大学计算机科学与技术系</a>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E4%B8%AD%E5%85%B4%E9%80%9A%E8%AE%AF%E8%82%A1%E4%BB%BD%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8&amp;code=0688192&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">中兴通讯股份有限公司</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>远程直接内存访问 (remote direct memory access, RDMA) 技术正在大数据领域被越来越广泛地应用, 它支持在对方主机CPU不参与的情况下远程读写异地内存, 并提供高带宽、高吞吐和低延迟的数据传输特性, 从而大幅提升分布式存储系统的性能, 因此基于RDMA的分布式存储系统将为满足大数据高时效处理和存储带来新的机遇.首先分析了基于RDMA的分布式存储系统简单替换网络传输模块并不能充分发挥RDMA在语义和性能上的优势的原因, 并指出存储系统架构需要变革的因素.然后阐述了高效运用RDMA技术主要取决于2个方面:第1方面是硬件资源的高效管理, 包括网卡缓存和CPU缓存的合理利用、多核CPU的并行加速以及内存资源管理等;第2方面是软硬件的紧耦合设计, 借助RDMA在语义和性能上的特性, 重构新型数据组织和索引方式、优化分布式协议等.同时, 以分布式文件系统、分布式键值存储和分布式事务系统为典型应用场景, 分别阐述了它们在硬件资源管理和软件重构这2个方面的相关研究.最后, 给出了总结和展望.</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E8%BF%9C%E7%A8%8B%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98%E8%AE%BF%E9%97%AE&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">远程直接内存访问;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">分布式存储;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E9%94%AE%E5%80%BC%E5%AD%98%E5%82%A8&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">键值存储;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">文件系统;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">分布式事务;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    *舒继武 (shujw@tsinghua.edu.cn) ;
                                </span>
                                <span>
                                    陈游旻 chenym16@mails.tsinghua.edu.cn;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2017-11-08</p>

                    <p>

                            <b>基金：</b>
                                                        <span>国家自然科学基金项目 (61433008);</span>
                                <span>北京市科委重大项目 (D151100000815003);</span>
                                <span>中兴通讯股份有限公司研究项目 (PJ160628142014);</span>
                                <span>深圳市科技创新委员会科技应用示范基金项目 (SF20170036);</span>
                    </p>
            </div>
                    <h1><b>Survey on RDMA-Based Distributed Storage Systems</b></h1>
                    <h2>
                    <span>Chen Youmin</span>
                    <span>Lu Youyou</span>
                    <span>Luo Shengmei</span>
                    <span>Shu Jiwu</span>
            </h2>
                    <h2>
                    <span>Department of Computer Science and Technology, Tsinghua University</span>
                    <span>ZTE Corporation</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>RDMA (remote direct memory access) is being widely used in big data area, which allows local host to access the remote memory without the involvements of remote CPUs, and provides extremely high bandwidth, high throughput and low latency, thus helping to boost the performance of distributed storage systems dramatically. As a whole, the RDMA-enabled distributed storage systems bring new opportunity to the big data processing. In this paper, we firstly point out that simply replacing the network module in distributed systems cannot fully exploit the advantages of RDMA in both semantics and efficiency, and revolutions of storage system design are urgently needed. Then, two key aspects of efficiently using RDMA are illustrated: One is the efficient management of hardware resources, including the careful utilization of NIC an CPU cache, parallel acceleration of multicore CPUs and memory management, and the other is the reformation of the software by closely coupling the software design and RDMA semantics, which uses the new features of RDMA to redesign the data placement schemes, data indexing and distributed protocols. Relative research works of distributed file systems, distributed key-value stores, and distributed transactional systems are introduced to illustrate the above two aspects. Summarizes of the paper, and suggestions for future research are also given at the end of this paper.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=remote%20direct%20memory%20access&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">remote direct memory access;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=distributed%20storage&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">distributed storage;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=key-value%20store&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">key-value store;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=file%20system&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">file system;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=distributed%20transaction&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">distributed transaction;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                            <b>Author：</b>
                                                        <span>
                                    Chen Youmin, born in 1993.PhD candidate.His main research interests include distributed systems and storage systems.<image id="398" type="formula" href="images/JFYZ201902001_39800.jpg" display="inline" placement="inline"><alt></alt></image>;
                                </span>
                                <span>
                                    Lu Youyou, born in 1987.PhD, assistant professor.Member of CCF.His main research interests include non-volatile memories and file systems.<image id="400" type="formula" href="images/JFYZ201902001_40000.jpg" display="inline" placement="inline"><alt></alt></image>;
                                </span>
                                <span>
                                    Luo Shengmei, born in 1971.PhD.Member of CCF.His main research interests include cloud storage, cloud computing, and big data.<image id="402" type="formula" href="images/JFYZ201902001_40200.jpg" display="inline" placement="inline"><alt></alt></image>;
                                </span>
                                <span>
                                    Shu Jiwu, born in 1968.Professor and PhD supervisor.Outstanding member of CCF.His main research interests include nonvolatile memory systems and technologies, network (cloud/big data) storage systems, storage security and reliability, and parallel and distributed computing.<image id="404" type="formula" href="images/JFYZ201902001_40400.jpg" display="inline" placement="inline"><alt></alt></image>;
                                </span>
                    </p>
                                    <p><b>Received：</b> 2017-11-08</p>
                                    <p>
                            <b>Fund：</b>
                                                        <span>supported by the National Natural Science Foundation of China (61433008);</span>
                                <span>the Beijing Municipal Science and Technology Commission of China (D151100000815003);</span>
                                <span>the Project of ZTE (PJ160628142014);</span>
                                <span>the Shenzhen Commission on Innovation and Technology (SF20170036);</span>
                    </p>
            </div>


        <!--brief start-->
                        <div class="p1">
                    <p id="269">在后摩尔时代, 多核CPU已经成为发展趋势, 同时, 内存日益廉价, 这使得构建内存存储系统变为可能;在大数据计算领域, 数据规模大, 数据维度高, 数据种类多是其典型特征, 内存计算技术逐渐开始发挥重要作用.加州大学伯克利分校开发的Apache Spark<sup><a class="sup">[1]</a></sup>以及SAP公司在2012年推出的HANA内存计算<sup><a class="sup">[2]</a></sup>已经得到工业界的广泛关注.</p>
                </div>
                <div class="p1">
                    <p id="270">DRAM相比于磁盘在带宽和延迟上均有几个数量级的优势, 能极大地提升本地数据存储性能, 然而, DRAM也面临集成度低等问题, 单节点内存最大只能达到几百GB, 很难满足大型应用的存储需求.构建分布式大内存系统是一种有效途径, 但传统以太网带宽和延迟与DRAM性能具有明显差异, 网络性能将成为制约系统性能的最重要因素.近年来, 远程内存直接访问 (remote direct memory access, RDMA) <sup><a class="sup">[3]</a></sup>作为一种新兴的跨网数据传输技术逐渐从高性能计算走进大数据领域, 并开始受到广泛关注.RDMA技术能够在远端CPU不参与的情况下, 绕过内核直接访问远端内存, 实现零拷贝的数据传输.近年来, 200 Gbps的高速网卡已经走向市场, 这与DRAM的带宽进一步靠近.</p>
                </div>
                <div class="p1">
                    <p id="271">然而, 简单地将现有的分布式存储系统中的网络模块替换为RDMA通信模式, 而不优化上层软件逻辑的策略, 并不能充分发挥RDMA网络的硬件优势, 这主要由3个方面导致:</p>
                </div>
                <div class="p1">
                    <p id="272">1) 硬件管理缺失.一方面, RDMA网卡和处理器均具有独立的缓存系统, 并且RDMA网卡的缓存空间尤为有限, 因此缓存空间的管理高效与否将直接影响系统整体性能;另一方面, RDMA网卡具有良好的并行性, 多核处理器环境下数据传输并行化具有较大空间.然而, 简单兼容RDMA的软件系统很少从硬件角度考虑RDMA通信的效率问题, 从而忽视了缓存管理、多核并行、资源共享等方面的重要性, 导致系统性能低下.</p>
                </div>
                <div class="p1">
                    <p id="273">2) 软件逻辑冗余.传统软件大多采用模块化设计, 软件层次分工明确.在兼容新型硬件时, 如果依旧沿用了传统的软件层次, 将会导致软件逻辑冗余, 效率低下.例如, 传统的分布式文件系统需要部署在本地文件系统之上, 通过本地文件系统管理本地数据, 并依靠分布式软件层构建跨节点统一视图.基于上述软件架构, 客户端通过RDMA网络读取数据时, 数据块分别经过本地文件系统镜像、页缓存、用户态缓冲区等位置, 将出现多层冗余拷贝.在慢速磁盘和传统以太网环境下, 内存级冗余拷贝对系统整体性能影响甚微, 但是, 在构建基于RDMA的内存级分布式文件系统时, 多层数据拷贝将明显降低系统整体性能, 因此, 软件逻辑重构将尤为重要.</p>
                </div>
                <div class="p1">
                    <p id="274">3) 分布式协议低效.在分布式系统中, 多客户端并发访问数据时, 往往依靠2阶段锁或乐观并发处理进行并发控制, 避免客户端间的访问干扰;而跨节点数据一致性、系统崩溃一致性则由分布式一致性提交协议 (2阶段提交) 保证.上述协议往往牵涉多个节点协同工作, 流程复杂, 性能低下.为此, 基于传统以太网的分布式系统中, 往往通过特定的数据放置策略和处理方式避免使用分布式事务<sup><a class="sup">[4]</a></sup>.然而, RDMA工作模式具有强一致性, 其单向原语和原子操作可以被利用起来, 从而设计新型分布式协议, 满足系统高效可扩展的需求.</p>
                </div>
                <div class="p1">
                    <p id="275">RDMA技术在通信模式、网络性能等方面呈现出与传统以太网完全不同的特点.对现有模块化的软件架构进行简单的网络替换将无法充分发挥RDMA网络性能.为此, 需要结合RDMA网络的硬件特性, 调整软硬件结构, 从原语使用、数据流优化、协议设计等方面重新设计软件逻辑, 从而充分发挥RDMA网络的硬件优势.</p>
                </div>
                <h3 id="276" name="276" class="anchor-tag"><b>1</b><b>背景介绍</b></h3>
                <div class="p1">
                    <p id="277">目前有3类网络架构支持RDMA技术, 分别是IB (InfiniBand) , RoCE (RDMA over converged eth-ernet) , iWARP (internet wide area RDMA protocol) .其中RoCE和IB具有相同的上层协议栈, 而前者在数据链路层则完全兼容以太网, iWARP保留了TCP/IP的完整协议栈.</p>
                </div>
                <div class="p1">
                    <p id="278">RDMA允许本地CPU绕过操作系统, 直接读写远端节点内存, 该过程无需远端CPU的参与.以远程写操作为例 (如图1) , 本地CPU直接以MMIO (memory mapped I/O) 的方式向网卡发起远程写命令, 并传递相应参数, 包括待写入数据块基地址、远端内存地址、写入数据块大小、远端注册内存密钥等信息;本地网卡收到命令之后, 立即根据本地数据块基地址将数据块从主存以DMA Read的方式读取到网卡缓存, 并发送到远端;远端网卡接收到数据块之后, 以DMA Write的方式直接将数据写入内存对应地址.此过程中, RDMA无需像传统以太网一样穿越内核中的多层网络协议栈, 因此实现了跨节点数据传输过程中的数据零拷贝.</p>
                </div>
                <div class="area_img" id="279">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JFYZ201902001_279.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 RDMA网络数据收发过程" src="Detail/GetImg?filename=images/JFYZ201902001_279.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图1 RDMA网络数据收发过程  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JFYZ201902001_279.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Fig. 1 Dataflow in RDMA network</p>

                </div>
                <div class="p1">
                    <p id="280">RDMA通信链路可以被配置为3种模式, 分别是可靠连接 (reliable connection, RC) 、不可靠连接 (unreliable connection, UC) 和不可靠数据报 (un-reliable datagram, UD) .其中, UD采用面向无连接的数据报发送方式, 支持点对点和点对多的数据传输, 而RC和UC模式仅支持点对点的面向连接的数据传输.另外, UD模式支持的最大数据传输单元为4 KB, 而RC和UD模式支持多达2 GB的单次数据传输.</p>
                </div>
                <div class="p1">
                    <p id="281">RDMA访问远端内存依靠2类原语:1) 消息语义, 其中Send和Recv是其典型的1组原语, 它们类似于套接字编程中的Send和Recv, 在发送消息之前, 接收方需提前调用Recv原语, 用于指定接收消息的存放地址.这类原语也被称作双向原语.2) 内存语义, 该类原语包含Read, Write以及相应的变种 (Write-with-imm和原子操作) .这类原语能在远端CPU不介入的情况下直接读取或更新远端内存, 它们亦被称作单向原语.不同语义在不同的通信链路模式下具有不用的支持程度, 如表1所示:</p>
                </div>
                <div class="area_img" id="282">
                    <p class="img_tit"><b>表1</b><b>不同模式下的RDMA原语和最大传输单元 (MTU</b>)  <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"><b>Table 1</b><b>RDMA Verbs and MTU Sizes in Different Modes</b></p>
                    <p class="img_note"></p>
                    <table id="282" border="1"><tr><td>Type</td><td>Send/Recv</td><td>Write[imm]</td><td>Read/Atomic</td><td>MTU</td></tr><tr><td><br />RC</td><td>✓</td><td>✓</td><td>✓</td><td>2 GB</td></tr><tr><td><br />UC</td><td>✓</td><td>✓</td><td>×</td><td>2 GB</td></tr><tr><td><br />UD</td><td>✓</td><td>×</td><td>×</td><td>4 KB</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="283">在RDMA编程中, 网卡驱动分别提供了内核态和用户态编程接口, 它们被称作Verbs.以RC模式下的点对点链路建立过程为例, 应用程序需分别经历打开设备、创建保护域 (protection domain, PD) 、申请并注册内存、创建完成队列 (completion queue, CQ) 、创建收发队列 (queue pair, QP) 、初始化QP等过程.其中, 申请的内存用于收发和存储远端消息或被远端网卡直接访问.内存在被远程访问之前需注册到网卡, 注册过程包含:1) 建立内存虚拟地址到物理地址的映射表, 并存储到网卡缓存;2) 生成密钥对, 用于本地或远端内存访问控制.收发队列包含发送队列 (send queue) 和接收队列 (receive queue) , 用于存放CPU发起的网络请求, 网卡从队列中依次处理原语, 当原语处理完毕, 将相应的完成信息存放到绑定的完成队列中.创建的QP、CQ和注册内存均需绑定到相同PD中才能正常通信.</p>
                </div>
                <div class="p1">
                    <p id="284">RDMA绕过内核实现数据零拷贝, 并借助硬件执行数据包的派送和解析, 从而提供了高带宽、低延迟的通信特性.但是, 将RDMA技术应用到分布式系统中时, 也存在原语漏用、冗余拷贝、协议低效等问题急需解决.为此, 本文将结合实际系统, 从以下2个方面分别进行阐述:1) 硬件资源的高效管理, 在大规模集群中, 高并发的数据传输将导致CPU缓存、网卡缓存发生剧烈竞争, 影响系统性能, 另外, CPU的多核架构为并行处理提供了机遇, 如何高效调度CPU核、提升网络数据并行处理性能同样重要.2) RDMA提供了远程直接读写的新型通信原语, 这打破了传统分布式系统中的跨节点数据传输模型, 促使一些系统, 例如分布式文件系统<sup>[<a class="sup">5</a>,<a class="sup">6</a>,<a class="sup">7</a>]</sup>、分布式键值存储系统<sup>[<a class="sup">8</a>,<a class="sup">9</a>,<a class="sup">10</a>,<a class="sup">11</a>,<a class="sup">12</a>,<a class="sup">13</a>,<a class="sup">14</a>]</sup>、分布式事务系统<sup>[<a class="sup">15</a>,<a class="sup">16</a>,<a class="sup">17</a>,<a class="sup">18</a>]</sup>等选择通过软件重构来充分发挥RDMA的硬件特性.</p>
                </div>
                <h3 id="285" name="285" class="anchor-tag"><b>2</b><b>RDMA与硬件管理</b></h3>
                <div class="p1">
                    <p id="286">RDMA技术通过硬件解析并处理网络数据包降低延迟的同时, 能有效提升数据传输的并行能力.另外, 网卡将链路状态信息等核心数据缓存到网卡的缓存空间, 用户程序绕过内核直接与硬件交互.因此, 构建高效的基于RDMA的存储系统的关键因素在于结合RDMA的硬件特性, 与系统软件层进行紧耦合设计.本节将主要从网卡缓存、CPU缓存以及多核调度等硬件层次阐述如何设计高效的系统软件.</p>
                </div>
                <h4 class="anchor-tag" id="287" name="287"><b>2.1</b><b>缓存管理</b></h4>
                <div class="p1">
                    <p id="288">缓存系统是计算机体系结构中的重要组成部分, 它将访问频繁的数据暂存到高速缓存器以加速应用, 因此, 缓存系统对局部性较好的应用加速效果显著.在RDMA网络通信中, CPU和网卡均存在独立的缓存系统, 缓存使用的好坏将直接影响着节点间数据通信性能.</p>
                </div>
                <div class="p1">
                    <p id="289">网卡缓存用于暂存CPU发起的网络请求和相应的网络状态信息, 其主要缓存3类数据:1) 注册内存从逻辑地址到物理地址的映射表, 当网卡发送数据或接收到数据时, 将依据映射表查询相应物理地址;2) QP状态, 存放QP对应的元数据信息;3) 由CPU发起的网络请求条目, 网卡根据请求条目执行相应处理.在特定场景下, 这3类数据都会增加网卡缓存缺失率, 导致系统性能下降.</p>
                </div>
                <div class="p1">
                    <p id="290">第1方面, 内存注册后以页为单位生成映射表, 默认情况页的大小为4 KB, 假设每个映射条目为12 B, 则注册10 GB内存需要的映射表大小为30 MB, 这将很难全部存放到网卡缓存中.FaRM<sup>[<a class="sup">13</a>,<a class="sup">15</a>]</sup>引入内核驱动PhyCo, 它在系统启动时分配2 GB对齐 (网卡最大支持2 GB的页大小) 的物理连续的内存区域, 并将其映射到FaRM进程的逻辑地址空间.通过这种方式, 映射表大小将缩小为60 B.</p>
                </div>
                <div class="p1">
                    <p id="291">第2方面, RDMA的扩展性问题还源于连接数量的增加.图2展示了RDMA网络在不同链路模式下的吞吐, 我们选取1个节点作为Server, 启动多个线程并行地向多个节点发送 (接收) 32 B的消息.其中向外发送消息称作Outbound-Message, 反之则为Inbound-Message.如图2所示, 在RC模式下, 总吞吐随着连接数量的增大而减小, 而Outbound相比于Inbound下降更为明显.相反, UD模式下总吞吐不受到连接数量的影响.这主要是因为在RC模式下, Server端需要与每个客户端创建QP并建立连接, 当连接数量过多后, QP状态信息无法全部存放到网卡缓存, 导致数据频繁在网卡缓存和主存间换入换出, 影响性能.而UD模式下, Server端只需创建固定数量的QP, 便能与所有的客户端进行通信, 因此服务端总吞吐不受到客户端数量的影响.FaSST RPC<sup><a class="sup">[16]</a></sup>是基于UD的RPC系统, 得益于UD的无连接通信模式, FaSST能够线性扩展到数百个节点.然而, UD同样也存在其他缺陷, 例如不支持远程直接读写, 单次最大传输数据量不能超过4 KB, 底层无拥塞控制逻辑, 且有丢包或乱序风险.因此需要额外的软件控制来保障UD在真实应用中的可靠数据传输, 但软件控制又将引入新的开销<sup><a class="sup">[19]</a></sup>.</p>
                </div>
                <div class="area_img" id="292">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JFYZ201902001_292.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 RDMA在不同链路模式下的扩展性问题" src="Detail/GetImg?filename=images/JFYZ201902001_292.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图2 RDMA在不同链路模式下的扩展性问题  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JFYZ201902001_292.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Fig. 2 Scalability issue in different transport modes of RDMA</p>

                </div>
                <div class="p1">
                    <p id="293">第3方面, CPU发起网络请求时, 使用MMIO向网卡发送命令, 这些命令将被临时缓存到网卡缓存, 并由网卡依次处理.然而, 当CPU发送命令过快时, 网卡缓存不足以存放新的请求, 因此之前发送的未处理的请求将被换出到主存, 等到被处理时再换回到网卡缓存.频繁的换入换出操作将引入大量的PCIe流量, 这是制约网络吞吐的关键因素.图3源于文献[20]中的图13 (b) , 展示了单节点向外发起写请求时的缓存缺失情况.CPU以批量请求的方式向网卡发起RC Write请求, 通过控制每次批量请求包含的请求数量来调节CPU发起请求的速度 (横坐标) .其中CX3和CIB为2类网卡型号, 且CIB性能强于CX3.图3中CX3 WR和CIB WR分别表示在CIB和CX3环境下RC Write请求的速率.而PCIeRd则表示网卡发起的PCIe Read的速率, PCIe Read速率越高, 代表额外的PCIe流量越高, 对性能影响越大.从图3中我们可以发现, CX3环境下, 当每次批量请求的数量达到16后, RC Write的吞吐有一定下降, 而此时PCIeRd的速率明显上升, 表明此时CPU发送请求速度过快, 已经存在明显的缓存缺失现象.CIB环境下PCIeRd速率一直保持较低水平, 且RC Write吞吐几乎线性提升, 这说明CIB网卡能够支撑CPU发起的最快请求速度, 而不发生缓存缺失现象.因此, 当网卡处理能力不及CPU时, 需控制CPU请求速率, 避免网络吞吐下降.</p>
                </div>
                <div class="area_img" id="294">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JFYZ201902001_294.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 RC Write操作对应网卡缓存缺失率[20]" src="Detail/GetImg?filename=images/JFYZ201902001_294.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图3 RC Write操作对应网卡缓存缺失率<sup><a class="sup">[20]</a></sup><sup></sup>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JFYZ201902001_294.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Fig. 3 NIC cache misses for RC Write operations<sup>[20]</sup><sup></sup></p>

                </div>
                <div class="area_img" id="295">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JFYZ201902001_295.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 因特尔数据直访I/O技术下网卡写操作流程" src="Detail/GetImg?filename=images/JFYZ201902001_295.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图4 因特尔数据直访I/O技术下网卡写操作流程  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JFYZ201902001_295.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Fig. 4 NIC writes with Intel data direct I/O</p>

                </div>
                <div class="p1">
                    <p id="296">CPU缓存在网络数据收发过程中扮演重要角色.因特尔至强E5系列处理器提供了独有的数据直访I/O (data direct I/O, DDIO) 技术, 它允许PCIe外设直接读写CPU的末级缓存 (LLC, 通常为第3级缓存) 而绕过对主存的访问, 从而降低I/O适配器到内存以及内存到CPU之间的延迟 (如图4) .PCIe外设以Write Update或Write Allocate的方更新CPU的LLC.当访问数据已经缓存到LLC时使用前者进行更新, 而当访问数据不在缓存中时, 则使用后者.Write Allocate操作需先分配缓存空间, 然后写入数据, 其开销大于Write Update.通常情况下, 用于DDIO的缓存区域占整个LLC的10%左右, 以防止外设I/O干扰CPU运行应用程序的性能.因此, 基于RDMA建立的通信模型下, 构建过大的通信消息池将不能被完全映射到LLC中, 从而引入大量的Write Allocate操作, 影响系统的整体性能.</p>
                </div>
                <div class="p1">
                    <p id="297">文献[9]构建的HERD RPC系统中, 服务端静态分配固定大小的消息池, 并划分为连续的内存块, 用于存放远端客户端写入的新消息.客户端通过UC Write将请求远程写入到消息池中, 服务端处理之后则使用UD Send返回响应信息.为避免客户端在写入消息时互相干扰, 不同客户端被映射到消息池的不同区域.在HERD中, 每个消息块大小为1 KB, 最大支持的客户端数量为200, 消息池的大小为6 MB, 能完全存放到LLC.但这种静态映射方式限制了最大支持的客户端数量, 同时每个请求的数据量也不能超过1 KB.FaSST<sup><a class="sup">[16]</a></sup>使用UD Send传递请求, 数据存放地址由接收方决定, 因此客户端之间可共享同一个消息池, 消息池大小不会因为客户端总数量变化而发生改变.</p>
                </div>
                <h4 class="anchor-tag" id="298" name="298"><b>2.2</b><b>CPU调度</b></h4>
                <div class="p1">
                    <p id="299">基于RDMA设计高效的系统软件, 在CPU调度层面需要考虑以下3个方面的问题.</p>
                </div>
                <div class="p1">
                    <p id="300">1) 多核并发.RDMA网络具有良好的并行性, 单条链路上的网络负载很难达到网卡的峰值处理能力.另一方面, 使用单个CPU核不足以处理多条链路上的网络请求, CPU多核并行同样重要.如图5 (a) 所示, 服务端与客户端创建多个QP连接, 通过变化QP数量, 展现了RDMA不同原语的最大吞吐.我们发现, 在QP数量少于4时, 所有原语均不能达到网卡处理峰值.同样, 图5 (b) 展现了不同RPC系统的吞吐率, 横坐标表示改变服务端CPU核的数量, 并启动40个客户端发送RPC请求, 纵坐标表示不同RPC系统的吞吐率, 发现CPU核的数量超过4时才能达到网卡处理峰值.由此可见, 合理增加并发度, 能较大提升RDMA的网络性能.DaRPC<sup><a class="sup">[21]</a></sup>是一个基于RDMA的RPC系统, 它在服务端采用了精细化的并行架构:初始化阶段, 服务端启动多个线程, 并行处理远端请求, 每个客户端均与服务端建立独立的QP链路, 这些链路被映射到不同的服务端线程, 用于并行消息处理.另外, 在NUMA架构下, 网卡、主存等相对于CPU具有非对称访问特性, 近端CPU访问网卡和主存能有效降低延迟、提升吞吐.文献[21]表明, NUMA友好的近端绑定策略能有效提升系统性能达20%左右.</p>
                </div>
                <div class="p1">
                    <p id="301">2) 负载均衡.服务端线程静态映射的方式能提升并行度, 但每个客户端负载具有差异性, 且相应的远程调用开销不尽相同, 因此有可能导致个别CPU核处理繁忙, 而其他CPU核空闲等待的现象.文献[21]提出了一种“Work Stealing and Load Balancing”的管理方法, 在服务端引入监控器, 用于实时统计各CPU核的工作负载状态, 当某CPU核的工作负载超过某阈值, 则将新来的部分请求放入到1个全局队列中, 而其他CPU核在不繁忙时查看全局队列, 并及时处理相应请求.这种方式有效解决了各CPU核负载不均衡的问题, 但同时也引入了时序问题, 导致早到达的RPC请求在晚到的请求之后被处理.这种乱序响应需要在客户端处理逻辑中被谨慎考虑.</p>
                </div>
                <div class="area_img" id="302">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JFYZ201902001_302.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 不同QP数量或CPU核对吞吐的影响" src="Detail/GetImg?filename=images/JFYZ201902001_302.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图5 不同QP数量或CPU核对吞吐的影响  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JFYZ201902001_302.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Fig. 5 Throughput with different QPs and CPU cores</p>

                </div>
                <div class="area_img" id="303">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JFYZ201902001_303.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 QP共享模式下Read请求的单线程吞吐率[16]" src="Detail/GetImg?filename=images/JFYZ201902001_303.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图6 QP共享模式下Read请求的单线程吞吐率<sup><a class="sup">[16]</a></sup><sup></sup>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JFYZ201902001_303.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Fig. 6 Per-thread Read throughput with QP sharing<sup>[16]</sup><sup></sup></p>

                </div>
                <div class="p1">
                    <p id="304">3) QP共享.基于RDMA的对称系统架构<sup>[<a class="sup">13</a>,<a class="sup">15</a>,<a class="sup">16</a>]</sup>中, 各节点同时启动服务端进程和客户端进程, 并启动多个CPU核并行处理远端请求或发起请求.假定集群规模为<i>N</i><sub>s</sub>, 每个节点启动<i>N</i><sub>c</sub>个CPU核, 集群中的各CPU核之间建立全相连的拓扑结构, 则每个节点需创建QP的数量为 (<i>N</i><sub>s</sub>-1) ×<i>N</i><sup>2</sup><sub>c</sub>, 这在大规模集群中将存在严重的扩展性问题, QP需要在CPU核间共享.一种途径是任意2个节点之间仅创建一条链路, 则每个节点间需创建的QP数量为<i>N</i><sub>s</sub>-1, 使得QP数量保持在较低水平.但是, 这种QP共享方式迫使多个CPU核并发向同1个节点发送网络请求时使用同1条QP链路, 从而导致严重的资源竞争.图6展示了Read请求在不同程度的QP共享下的单线程吞吐率, 横坐标代表总共创建的QP数量.从图6可以发现, 在不共享情况下, 即单个线程处理所有QP中的请求, 性能 (10.9 MOPS) 远高于多个线程的共享处理模式 (2 MOPS) .因此QP共享模式导致CPU利用率极低.一种折中的方法是允许各节点间具有相同ID的CPU核之间进行通信, 即每个节点建立<i>N</i><sub>s</sub>×<i>N</i><sub>c</sub>个QP, 这样CPU核之间不存在资源竞争, QP数量也保持在较低水平.</p>
                </div>
                <h3 id="305" name="305" class="anchor-tag"><b>3</b><b>RDMA与软件重构</b></h3>
                <div class="p1">
                    <p id="306">RDMA提供了不同于套接字编程的通讯接口, 它允许在远端CPU不参与的情况下直接访问远端内存, 实现数据的零拷贝传输, 这在一定程度上颠覆了传统的系统架构思想, 从而促使了分布式键值存储系统、文件系统以及事务系统等在软件层的变革.软件层次的变化可基本总结为以下3类:分布式协议的重构、网络负载的分派均衡和数据的远程索引等方面.本节将从多类分布式存储系统展开, 并阐述软件层如何从以上3个方面使用和优化RDMA网络.</p>
                </div>
                <h4 class="anchor-tag" id="307" name="307"><b>3.1</b><b>RDMA在Key-Value系统中的应用</b></h4>
                <div class="p1">
                    <p id="308">在传统存储系统中, 数据的组织和索引由服务端本地执行.一般地, 客户端读取或更新服务端数据时, 首先向服务端发送RPC (remote procedure call) 请求, 服务端接收到请求后, 迭代式地查询以树状或散列组织的数据, 然后将查询或更新结果返回给客户端.Key-Value系统采用平铺式的数据存储管理模式, 仅提供类似Get, Put等接口, 系统结构简单.同时, RDMA可以直接访问远端内存数据, 这使得分布式键值存储系统中的数据索引模式发生改变.近年, 结合RDMA和Key-Value存储的分布式键值存储系统<sup>[<a class="sup">8</a>,<a class="sup">9</a>,<a class="sup">10</a>,<a class="sup">11</a>,<a class="sup">12</a>,<a class="sup">13</a>,<a class="sup">14</a>]</sup>被广泛研究, 本节将着重介绍Pilaf<sup><a class="sup">[5]</a></sup>.</p>
                </div>
                <div class="p1">
                    <p id="309">Pilaf是纽约大学于2013年提出的一个内存级分布式键值存储系统, 借助RDMA原语实现了极高的系统性能, 同时有效降低了服务端CPU开销.Pilaf在处理GET请求时, 利用RDMA内存语义低延迟的特性, 通过客户端发起多次Read请求完成键值查询, 将数据索引任务由服务端转移到客户端 (见图7) .</p>
                </div>
                <div class="area_img" id="310">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JFYZ201902001_310.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 Pilaf的总体架构[8]" src="Detail/GetImg?filename=images/JFYZ201902001_310.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图7 Pilaf的总体架构<sup><a class="sup">[8]</a></sup><sup></sup>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JFYZ201902001_310.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Fig. 7 Overall architecture of Pilaf<sup>[8]</sup><sup></sup></p>

                </div>
                <div class="p1">
                    <p id="311">如图7所示, Pilaf的键值对通过散列表索引, 散列表和键值对统一存放在内存区域中, 散列表中的各表项存放键值对的内存地址, 用于索引真实的键值对.存放上述内容的内存空间在系统初始化时分配, 并注册到网卡, 使得客户端可远程直接访问, 客户端在接入时获取服务端注册内存的虚拟地址.客户端在执行Get操作时, 首先计算出Key相应散列值, 并根据散列值确定对应表项在散列表中的偏移;然后执行RDMA Read读取散列表在该偏移下的内容, 如果表项包含1个有效地址, 则根据该地址执行第2次Read操作获取键值内容.如果获取的键值对匹配, 则成功返回;如果散列表项为空, 或者键值对不匹配, 则线性查找下1个表项, 直到查询成功.</p>
                </div>
                <div class="p1">
                    <p id="312">Put操作需要更新散列表和键值对, 在多客户端并行访问场景下, 会出现数据冲突访问, 因此将Put操作的逻辑完全交由客户端并不现实.在Pilaf中, 所有的更新操作 (包括Put, Del等) 将按照传统方式转交给服务端执行.具体方式为:客户端向服务端发起相应更新操作的RPC请求, 服务端收到请求之后, 在本地执行查询更新, 然后返回更新结果.在读写并发场景下, 以上工作流程会引入脏读.例如, 在服务端更新某一键值对的时候, 客户端同时使用Read读取正在更新的键值对, 则有可能读取到1个中间状态的值.Pilaf引入自校验方法来解决脏读问题.如图8所示.</p>
                </div>
                <div class="area_img" id="313">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JFYZ201902001_313.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图8 自校验散列表数据结构[8]" src="Detail/GetImg?filename=images/JFYZ201902001_313.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图8 自校验散列表数据结构<sup><a class="sup">[8]</a></sup><sup></sup>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JFYZ201902001_313.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Fig. 8 Self-verifying Hash table structure<sup>[8]</sup><sup></sup></p>

                </div>
                <div class="p1">
                    <p id="314">在散列表的每一个表项中, 添加2层校验码, 服务端在处理更新请求时, 首先更新键值对内容, 然后根据键值对内容计算校验码, 并更新散列表对应表项的第1个校验值, 然后根据表项更新第2个校验值.当客户端执行Get操作时, 通过2次匹配校验码来判断是否发生脏读.如果匹配失败, 则等待随机时间, 再次获取键值内容, 直至匹配成功.Pilaf借助多次Read请求将Get处理逻辑转移到客户端, 这种远端索引方式一定程度降低了服务端的处理开销.同时, 依靠RDMA的硬件优势, 系统处理请求的能力相比于传统方式提升显著.</p>
                </div>
                <div class="p1">
                    <p id="315">表2详细描述了多种KV存储系统的实现差异.HERD<sup><a class="sup">[9]</a></sup>广泛地测试了RDMA各类原语的性能差异, 总结出Pilaf在读取操作中将引入多次RDMA Read操作, 效率低下.为此, HERD设计基于RDMA的高性能RPC系统, 所有的操作依旧通过服务端处理, 从而每次远程请求将只引入1次往返网络交互.HERD同时还考虑到RDMA网络的扩展性问题, 采用 UC Write和UD Send分别作为客户端发送请求和服务端发送反馈信息的原语.HERD能同时保证Get/Put请求的高性能, 且客户端数量能轻松扩展到数百个.HydraDB<sup><a class="sup">[10]</a></sup>则面向通用性中间件, 可作为系统缓存层或独立的存储层, 并提供数据复制功能, 保障数据容错, 同时结合NUMA架构进行性能优化.HydraDB也使用RDMA Read执行Get请求, 并增加客户端缓存提升性能.在KV缓存系统中, 引入RDMA单向原语将导致服务端对客户端访问特性无法感知, 为解决上述问题, C-Hint<sup><a class="sup">[12]</a></sup>通过客户端与服务端的协同设计, 以提升KV缓存系统的命中率.RFP<sup><a class="sup">[11]</a></sup>针对RDMA的InBound和OutBound原语性能不对称问题, 提出客户端主动执行发送和接收的新型I/O机制.Nessie<sup><a class="sup">[14]</a></sup>则配合使用Read、Write以及原子操作 (CAS) 原语, 将KV访问逻辑完全转交到客户端, 从而避免服务端CPU参与存储服务.FaRM<sup><a class="sup">[13]</a></sup>将KV存储系统构建在具有事务接口的分布式共享内存处理平台上, 该系统将会在后文进行进一步介绍.目前国内针对KV存储系统的研究也已经相应展开, 但大多基于现有系统进行改造, 性能方面局限性较大<sup><a class="sup">[22]</a></sup>.</p>
                </div>
                <div class="area_img" id="316">
                    <p class="img_tit"><b>表2</b><b>不同键值存储系统实现细节对比</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"><b>Table 2</b><b>Comparison of Implementation Details Between Different KVStores</b></p>
                    <p class="img_note"></p>
                    <table id="316" border="1"><tr><td><br />KVStore</td><td>Get Forward</td><td>Get Back</td><td>Put Forward</td><td>Put Back</td><td>Cache</td><td>Replication</td><td>Transaction</td></tr><tr><td><br />Pilaf<sup>[8]</sup></td><td>Read</td><td>Read</td><td>Send</td><td>Recv</td><td>No</td><td>No</td><td>No</td></tr><tr><td><br />HERD<sup>[9]</sup></td><td>UC Write</td><td>UD Send</td><td>UC Write</td><td>UD Send</td><td>No</td><td>No</td><td>No</td></tr><tr><td><br />HydraDB<sup>[10]</sup></td><td>Read</td><td>Read</td><td>Write</td><td>Write</td><td>No</td><td>Yes</td><td>No</td></tr><tr><td><br />RFP<sup>[11]</sup></td><td>Write</td><td>Read</td><td>Write</td><td>Write</td><td>No</td><td>No</td><td>No</td></tr><tr><td><br />C-Hint<sup>[12]</sup></td><td>Read</td><td>Read</td><td>Write</td><td>Write</td><td>Yes</td><td>No</td><td>No</td></tr><tr><td><br />FaRM<sup>[13]</sup></td><td>Read</td><td>Read</td><td>Write</td><td>Write</td><td>No</td><td>Yes</td><td>Yes</td></tr><tr><td><br />Nessie<sup>[14]</sup></td><td>Read</td><td>Read</td><td>Write +CAS</td><td>Write +CAS</td><td>No</td><td>No</td><td>No</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <h4 class="anchor-tag" id="317" name="317"><b>3.2</b><b>RDMA在文件系统中的应用</b></h4>
                <div class="p1">
                    <p id="318">总体上, RDMA更多地被应用到键值存储和分布式事务系统, 而分布式文件系统由于结构复杂, 很难充分发挥出RDMA的硬件特性.目前, 也有部分分布式文件系统开始尝试支持RDMA网络, 以提供更高的性能<sup>[<a class="sup">6</a>,<a class="sup">7</a>]</sup>.但是, 这些系统大多采用了模块化的软件设计, 将网络传输、文件存储和控制逻辑严格分离, 而在引入RDMA网络的时候, 仅仅采用了简单的网络通讯模块替换, 而不是选择重构文件系统的内部逻辑, 因此取得的效果甚微.</p>
                </div>
                <div class="area_img" id="319">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JFYZ201902001_319.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图9 Octopus整体架构[23]" src="Detail/GetImg?filename=images/JFYZ201902001_319.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图9 Octopus整体架构<sup><a class="sup">[23]</a></sup><sup></sup>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JFYZ201902001_319.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Fig. 9 The overall architecture of Octopus<sup>[23]</sup><sup></sup></p>

                </div>
                <div class="p1">
                    <p id="320">清华大学于2017年提出的分布式持久性内存文件系统Octopus<sup><a class="sup">[23]</a></sup>, 通过紧密结合RDMA特性, 重新设计了文件系统软件逻辑.具体地, 各个节点将数据存储区注册到内存, 并共享到集群使之可被远程直接访问, 进而构建持久性共享内存, 而元数据区域则由服务节点进行本地管理 (如图9) .Octopus通过引入持久性共享内存以降低数据冗余拷贝, 进而提供接近硬件的读写带宽;引入客户端主动式数据传输来重新均摊客户端和服务端之间的网络负载;引入自识别远程过程调用协议以提供低延迟元数据访问性能.</p>
                </div>
                <h4 class="anchor-tag" id="321" name="321">1) 持久性共享内存</h4>
                <div class="p1">
                    <p id="322">现有的分布式文件系统构建在本地文件系统之上, 因而存在大量的数据冗余拷贝.以文件读写为例, 数据块需要逐层拷贝到TCP/IP协议栈中的mbuf、用户态缓冲区、内核态页缓存、文件系统镜像等位置, 最终统计到1次文件读写将引入7次数据拷贝, 这种低效的系统设计模式严重限制了RDMA网络的硬件特性.Octopus则提出了持久性共享内存, 用于直接管理文件系统数据.这种设计移除了本地文件系统层, 同时让客户端远程直接访问, 成功将数据拷贝次数降低到4次.</p>
                </div>
                <h4 class="anchor-tag" id="323" name="323">2) 客户端主动式数据传输</h4>
                <div class="p1">
                    <p id="324">通常情况下, 文件读写将引入1次网络往返请求, 以文件读取为例, 客户端主动发起文件读请求, 服务端收到请求之后, 查询并装填数据, 然后将数据返回给客户端.我们称这种传输模式为服务端主动式数据传输, 这种工作模式在传统以太网下工作高效, 但是当转移到RDMA网络上后CPU占用率极高, 成为了系统瓶颈.为此提出一种客户端主动式数据传输机制, 它具有以下3个步骤: ①客户端向服务端发起文件读写请求;②服务端查询文件元数据信息, 并将元数据直接返回给客户端;③客户端根据元数据信息提供的远程地址, 直接执行RDMARead?Write.其中步骤 (1) (2) 通过发起RPC请求完成, 而步骤 (3) 由客户端主动执行, 服务端CPU不参与文件数据的传输, 这种设计引入了更多的网络往返次数, 但是将服务端CPU负载转移到客户端, 从而提升了并发文件读写性能.</p>
                </div>
                <h4 class="anchor-tag" id="406" name="406">3) 自识别远程过程调用</h4>
                <div class="p1">
                    <p id="407">RDMA提供了微秒级别的网络延迟, 为充分利用RDMA低延迟的特性, Octopus设计并实现了高效的RPC系统.RPC主要用于文件元数据访问和分布式事务的协调提交.RDMA的2类原语均可用于设计RPC系统, 基于Send?Recv的RPC实现简单, 但其性能不如内存语义, UD模式具有良好的扩展性和高性能, 但其诸多缺陷导致并不适合应用到基于可靠传输的文件系统场景.内存语义具有极低延迟, 在构建RPC系统时, 由于其单向性, 服务端必须开启线程轮询扫描内存来检测新消息, 这会导致较高的CPU开销, 且客户端数量上升后, CPU需扫描更大范围的内存空间, 这也会影响RPC延迟.Octopus选择了Write-with-imm作为远程请求的原语, 它可在报头携带32b立即数, 用于存放客户端元数据信息, 指导服务端快速定位新消息;同时, 该原语将消耗服务端提前发起的Recv请求, 因此是双向原语;基于Write-with-imm的RPC系统能帮助服务端快速检测到完成信息, 根据立即数快速定位到新消息, 保证RPC性能的同时提供稳定的传输延迟.</p>
                </div>
                <div class="p1">
                    <p id="408">俄亥俄州立大学提出的NVFS<sup><a class="sup">[7]</a></sup>将非易失内存和RDMA结合起来, 用于加速HDFS.但由于HDFS本身软件设计厚重, NVFS很难充分发挥NVM和RDMA的硬件特性.IBM最近提出的Crail<sup><a class="sup">[5]</a></sup>, 其元数据跨节点访问基于DaRPC<sup><a class="sup">[21]</a></sup>, 其中, DaRPC是一个基于RDMA的RPC系统, 它将消息处理和网络传输紧密结合, 并提供高吞吐、低延迟的跨网传输性能.Crail相比于Octopus多1次冗余拷贝, 因此其带宽不如Octopus;Crail同时也无法保证数据的一致性和持久性, 为此, Crail引入多级存储架构, 并通过后端存储进行数据持久化.</p>
                </div>
                <h4 class="anchor-tag" id="405" name="405">3.3 RDMA在分布式事务中的应用</h4>
                <div class="p1">
                    <p id="325">RDMA具有cache强一致性, 这意味着, RDMA网卡写入的最新数据能及时被CPU读取, 同时, 网卡总是发送CPU最新更新的数据; RDMA还具有原子性, 它提供2种原子操作原语:CAS和FAA<sup>①</sup>, 它们可以并发更新同一个内存地址上的64 b值而保证1次操作的原子性.RDMA的上述特性将促使分布式协议的重构.</p>
                </div>
                <div class="p1">
                    <p id="326">DrTM<sup>[<a class="sup">17</a>,<a class="sup">18</a>]</sup>是上海交通大学2015年提出的一种分布式事务系统, 它巧妙地结合了RDMA和硬件事务内存 (hardware transactional memory, HTM) , 利用它们之间的强一致性设计并实现了一套高效的分布式事务协议.事务内存提供了XBEGIN, XEND和XABORT接口, 能够在硬件层面控制对内存的冲突访问, 一旦冲突发生, 只有1个线程成功修改, 而其他线程均无条件终止.事实上, RDMA的远程冲突访问也将导致本地的事务性内存访问终止, 因此, DrTM利用这种强一致性重新设计了事务协议.</p>
                </div>
                <div class="p1">
                    <p id="327">DrTM在执行事务逻辑时, 首先通过RDMA Read将存储在远端的读集和写集搜集到本地, 然后依靠HTM在本地执行数据更新, 最后使用RDMA Write将更新过的数据写回到远端 (如图10中Case1) .其中, 图10中Case2～Case5展示了本地和分布式事务执行冲突的不同场景:图10中Case2场景中, M1搜集远端数据时, M2正在执行本地更新, HTM将强制终止执行, 2个冲突事务之间实现了序列化.而图10中Case2和Case3场景下, M1开始搜集远端数据时, M2还未开始本地执行, 因此M2事务不会终止, 之后M2也访问并修改了相同的数据项, 冲突事务之间没实现严格的序列化.为解决上述问题, DrTM借助RDMA原子操作实现了一套分布式锁, 并强制在搜集远端数据之前首先进行数据项加锁.这样在图10中Case3～Case5场景中, M2的本地/远程读写阶段将被阻塞, 从而实现事务间的序列化.DrTM借助RDMA的强一致性和HTM的原子性, 重新构造了分布式事务协议, 同时基于RDMA提供的原子操作原语设计了高效的独占锁和共享锁, 用于细粒度的事务并发控制.因此, RDMA提供的一致性以及原子性的特点将促使相应的分布式协议发生重大变化.</p>
                </div>
                <div class="p1">
                    <p id="328">FaRM<sup>[<a class="sup">13</a>,<a class="sup">15</a>]</sup>是Microsoft Research在2014年提出的一个基于RDMA的分布式内存计算平台.FaRM提供基于分布式事务的共享内存读写接口, 通过乐观锁和2阶段提交协议来保证事务执行的原子性和可序列化.如图11是FaRM的事务执行逻辑, 其中包含1个协调者 (C) 和3个参与者 (<i>P</i><sub>1</sub>, <i>P</i><sub>2</sub>, <i>P</i><sub>3</sub>) 以及他们的备份节点 (<i>B</i><sub>1</sub>, <i>B</i><sub>2</sub>, <i>B</i><sub>3</sub>) .事务分为执行阶段和提交阶段, 图11中虚线箭头代表Read, 实线箭头代表Write.在执行阶段, 协调者首先查询内存区标识符, 通过散列函数计算相应远端地址, 发起Read请求, 远程读取事务涉及的读集和写集, 然后根据读取的数据在本地执行事务逻辑.在提交阶段, 首先要对写集对应数据项加锁, 协调者以RPC的方式将加锁请求写到参与者的消息区, 参与者接收到消息后, 对数据项加锁, 如果加锁失败或数据项版本发生变化, 则返回失败, 事务终止.加锁阶段完成后, 需再次核对读集对应版本.若以上2步均成功执行, 则先后对备份节点和参与者执行数据提交.为提高事务读写的并发性能, FaRM通过增加cache line粒度的版本控制实现无锁读, 在不加锁的情况下执行事务读取, 并感知事务的一致性, 判断是否发生脏读.不同于DrTM的是, FaRM无需CPU支持HTM功能, 而是通过乐观锁进行并发控制, 仅在事务提交时进行冲突检查;另一方面, FaRM在事务执行过程中进行数据备份, 从而提高了数据可用性.</p>
                </div>
                <div class="area_img" id="329">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JFYZ201902001_329.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图10 本地和分布式事务之间的冲突情形[14]" src="Detail/GetImg?filename=images/JFYZ201902001_329.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图10 本地和分布式事务之间的冲突情形<sup><a class="sup">[14]</a></sup><sup></sup>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JFYZ201902001_329.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Fig. 10 The cases of conflicts between local and remote txs<sup>[17]</sup><sup></sup></p>

                </div>
                <div class="area_img" id="330">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JFYZ201902001_330.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图11 FaRM的事务提交协议[15]" src="Detail/GetImg?filename=images/JFYZ201902001_330.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图11 FaRM的事务提交协议<sup><a class="sup">[15]</a></sup><sup></sup>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JFYZ201902001_330.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Fig. 11 FaRM commit protocol<sup>[15]</sup><sup></sup></p>

                </div>
                <div class="p1">
                    <p id="331">CMU于2016年提出的分布式事务协议FaSST<sup><a class="sup">[16]</a></sup>, 则侧重于考虑RDMA网络的高性能和可扩展, 他们发现UD Send在实际通信场景中根本不出现丢包情况, 且表现出极高的性能和扩展性, 为此, 他们借用FaRM的分布式事务协议模型, 设计并实现了新型分布式事务, 其性能远高于DrTM和FaRM.</p>
                </div>
                <h4 class="anchor-tag" id="332" name="332"><b>3.4</b><b>RDMA的通用性优化</b></h4>
                <div class="p1">
                    <p id="333">RDMA在上述3类系统中得到了广泛的研究与应用.此外, RDMA还在I/O负载分派、数据远程备份等方面提供了新的方式, 本节将着重介绍与RDMA相关的通用性优化技术.</p>
                </div>
                <h4 class="anchor-tag" id="334" name="334">1) 网络负载重分派</h4>
                <div class="p1">
                    <p id="335">RDMA单向原语在执行过程中仅需发送方CPU参与, 这区别于传统套接字的收发模式.因此从CPU执行I/O负载角度来看, RDMA单向原语为网络负载的重分派提供了机遇.从3.3节事务提交协议中可以看到, FaRM在事务执行阶段、版本核对阶段、备份节点/参与者提交阶段以及无锁读阶段均使用了单向原语, 参与者或备份节点CPU完全不参与事务执行逻辑.通过网络负载的重新分派, 协调者组织执行事务的大部分逻辑, 而参与者较少参与事务提交, 将CPU资源更多的应用在本地执行逻辑上.实验表明, 90节点的FaRM系统运行TATP测试集, 可提供140 MTPS的事务执行速度.另外, 3.1节提到的Pilaf, HydraDB等键值存储系统将Get请求的网络负载从服务端重新分派到客户端, 一定程度上减轻了服务端CPU开销, 同时提升了系统吞吐.而Octopus则进一步改变数据I/O通路, 将传统的服务端主动返回文件数据的设计模式改为“服务端仅返回文件数据地址, 客户端主动通过RDMA Read或Write执行文件I/O”的新型I/O机制, 从而大幅降低文件服务器CPU开销, 并提升了数据并发存取吞吐.</p>
                </div>
                <h4 class="anchor-tag" id="336" name="336">2) 数据备份与持久化</h4>
                <div class="p1">
                    <p id="337">新型非易失存储器<sup>[<a class="sup">24</a>,<a class="sup">25</a>,<a class="sup">26</a>]</sup>提供接近内存的访问速度以及字节寻址的访问方式, 同时还能像磁盘一样提供持久性存储.持久性内存的出现改变了计算机体系结构中存储金字塔的持久性和易失性边界, 数据持久化由传统的软件控制方式变为执行CPU刷写指令的硬件控制方式<sup><a class="sup">[27]</a></sup>.因此, 存储系统在组织数据时需要精细化执行数据持久化操作或异地备份, 以保障数据存储可靠性和故障可恢复.然而, CPU持久化刷写指令代价高, 异地备份则引入额外的网络开销, 上述原因都将成为制约非易失内存性能的重要因素.RDMA提供极低的网络延迟 (～1 μs) , 这与非易失内存的访问延迟几乎在同一个数量级, 因此, Mojim<sup><a class="sup">[28]</a></sup>提出一种基于RDMA的新型数据布局和备份方案, 并提供了高可靠、高性能的存储服务.</p>
                </div>
                <div class="area_img" id="338">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JFYZ201902001_338.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图12 Mojim的系统架构[28]" src="Detail/GetImg?filename=images/JFYZ201902001_338.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图12 Mojim的系统架构<sup><a class="sup">[28]</a></sup><sup></sup>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JFYZ201902001_338.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Fig. 12 Mojim architecture<sup>[28]</sup><sup></sup></p>

                </div>
                <div class="p1">
                    <p id="339">Mojim是一个构建在NVMM上的内核态系统, 图12描述了Mojim的系统架构.它可以向上层提供基础的数据读写接口和不同级别的持久化接口.Mojim采用了包含主层和辅层的双层架构, 其中主层包括1个主节点和1个镜像节点, 辅层包含一到多个备份节点.根据不同的持久化级别, 写入Mojim的数据同步或异步地流入到主节点、镜像节点和备份节点.Mojim包含的持久化级别主要包括M-sync, M-async和M-syncsec.其中, 以M-sync模式写入时, Mojim将数据首先写入到本地 (不执行CPU缓存数据刷写) , 然后将数据传输到镜像节点, 等待对方网卡反馈确认信息后成功返回.而镜像节点异步将数据传递到备份节点.以M-async模式写入时, 主节点首先刷写缓存数据, 然后将数据传输到镜像节点, 在不等待确认信息时直接成功返回.M-syncsec则同步等待数据写入到备份节点之后才成功返回.以上3类持久写方式具有不同级别的可靠性、可用性和一致性.</p>
                </div>
                <div class="p1">
                    <p id="340">实验显示, 基于RDMA的异地备份方案性能强于基于本地缓存刷写的持久化方案, 这主要是因为CPU刷写缓存数据以cache line为粒度, 且并发的数据持久写被CPU强制顺序性执行, 并行度严重受到限制.因此, RDMA网络为分布式持久性内存系统中的数据持久化和远程备份提供了新的机遇.另一方面, 基于远程刷写的原语<sup><a class="sup">[29]</a></sup>也有望出现.</p>
                </div>
                <div class="p1">
                    <p id="341">RDMA区别于传统的以太网通信方式, 它能提供Read, Write等远程直接访问的单向原语, 在数据传输过程中无需远端CPU的参与, 这促使系统设计时重新考虑数据的组织和索引方式, 以及网络负载的均衡分派;RDMA的低延迟访问特性彻底改变了传统分布式系统设计中对“本地”和“异地”的性能权衡, 为数据的多机备份和持久化提供了新的思路;RDMA还能保证缓存数据的强一致性, 处理器总能够读取最新数据, 同时还提供2种原子操作, 用于数据项的原子性更新, 这为设计新型分布式协议提供了新的机遇.</p>
                </div>
                <h3 id="342" name="342" class="anchor-tag"><b>4</b><b>总结与展望</b></h3>
                <div class="p1">
                    <p id="343">本文分别从硬件管理和软件重构2个方面阐述了对RDMA的相关研究, 详细分析了RDMA的内在硬件特性、系统软件设计的变革以及当前RDMA的典型应用场景.从硬件角度来看, RDMA网络并行数据传输会受到多处硬件资源的制约, 例如网卡缓存、CPU缓存等, 因此在系统架构上要同时要兼顾其硬件特性, 在系统扩展性、可靠性和高性能中权衡, 在CPU资源开销与网络资源共享之间合理取舍.从软件重塑角度看, RDMA区别于传统网络的数据传输接口和其极低的网络延迟改变了现有的软件设计方式, 为数据组织与索引、网络传输重分派和分布式协议的重构等方面提供了新的方法, 合理的软件重构更能充分发挥RDMA网络的优势, 提升系统的整体性能.</p>
                </div>
                <div class="p1">
                    <p id="344">迈洛斯公司目前已经提供超过200 Gbps的传输速率的RDMA网卡, 传输延迟早已突破1μs, 其迅速提升的网络传输性能, 正促使RDMA技术被逐渐应用到数据中心.针对其扩展性问题, 迈洛斯引入动态链接传输机制 (dynamically connected trans-port, DCT) 实现动态创建/销毁QP链接, 以保证QP数量维持稳定;Oracle提出的Sonoma处理器则将网卡和FPGA集成到片上, 能轻松支持数千个QP链路.为增强RDMA网卡设备的灵活性, 迈洛斯还提供了可编程式RDMA网卡, 用于协助用户进行应用数据传输加速、数据压缩/解压缩和其他功能性优化, 为上层系统设计提供了更强的灵活性.RDMA具有独特的数据传输模式和极高的数据传输性能, 与此同时, 其引入的扩展性等问题正在逐步解决.与RDMA紧耦合的分布式系统软件设计将为大数据处理和存储带来新的机遇.</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="412">
                            <a id="bibliography_1" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Spark:cluster computing with working sets">

                                <b>[1]</b>Zaharia M, Chowdhury M, Franklin M J, et al.Spark:Cluster computing with working sets[C]Proc of the 10th USENIX Workshop on Hot Topics in Cloud Computing.Berkeley, CA:USENIX Association, 2010:No.10
                            </a>
                        </p>
                        <p id="414">
                            <a id="bibliography_2" target="_blank" href="http://scholar.cnki.net/result.aspx?q=SAP HANAdatabase:Data management for modern business applications">

                                <b>[2]</b>Frber F, Sang K C, Primsch J, et al.SAP HANAdatabase:Data management for modern business applications[C]Proc of the 31st ACM SIGMOD Int Conf on Management of Data.New York:ACM, 2012:45-51
                            </a>
                        </p>
                        <p id="416">
                            <a id="bibliography_3" target="_blank" href="http://scholar.cnki.net/result.aspx?q=RDMA[OL]">

                                <b>[3]</b>Wikipedia.RDMA[OL].[2018-04-14].https:en.wikipedia.org/wiki/Remote direct memory access
                            </a>
                        </p>
                        <p id="418">
                            <a id="bibliography_4" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Dynamo:Amazon s highly available key-value store">

                                <b>[4]</b>Decandia G, Hastorun D, Jampani M, et al.Dynamo:Amazon’s highly available key-value store[C]Proc of the21st ACM SIGOPS Symp on Operating Systems Principles.New York:ACM, 2007:205-220
                            </a>
                        </p>
                        <p id="420">
                            <a id="bibliography_5" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Crail:A highperformance I/O architecture for distributed data processing">

                                <b>[5]</b>Stuedi P, Trivedi A, Pfefferle J, et al.Crail:A highperformance I/O architecture for distributed data processing[J].IEEE Data Engineering Bulletin, 2017, 40 (1) :38-49
                            </a>
                        </p>
                        <p id="422">
                            <a id="bibliography_6" target="_blank" href="http://scholar.cnki.net/result.aspx?q=The freeze-frame file system">

                                <b>[6]</b>Song W, Gkountouvas T, Birman K, et al.The freeze-frame file system[C]Proc of the 7th ACM Symp on Cloud Computing.New York:ACM, 2016:307-320
                            </a>
                        </p>
                        <p id="424">
                            <a id="bibliography_7" target="_blank" href="http://scholar.cnki.net/result.aspx?q=High performance design for HDFS with byte-addressability of NVM and RDMA">

                                <b>[7]</b>Islam N S, Wasi-ur-Rahman M, Lu Xiaoyi, et al.High performance design for HDFS with byte-addressability of NVM and RDMA[C]Proc of the 30th Int Conf on Supercomputing.New York:ACM, 2016:No.8
                            </a>
                        </p>
                        <p id="426">
                            <a id="bibliography_8" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Using one-sided RDMA reads to build a fast,CPU-efficient key-value store">

                                <b>[8]</b>Mitchell C, Geng Yifeng, Li Jinyang.Using one-sided RDMA reads to build a fast, CPU-efficient key-value store[C]Proc of the 22nd USENIX Annual Technical Conf.Berkeley, CA:USENIX Association, 2013:103-114
                            </a>
                        </p>
                        <p id="428">
                            <a id="bibliography_9" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Using rdma efficiently for key-value services">

                                <b>[9]</b>Kalia A, Kaminsky M, Andersen D G.Using RDMAefficiently for key-value services[C]Proc of the 38th ACMConf on SIGCOMM.New York:ACM, 2014:295-306
                            </a>
                        </p>
                        <p id="430">
                            <a id="bibliography_10" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Hydradb:Aresilient RDMA-driven key-value middleware for in-memory cluster computing">

                                <b>[10]</b>Wang Yandong, Zhang Li, Tan Jian, et al.Hydradb:Aresilient RDMA-driven key-value middleware for in-memory cluster computing[C]Proc of the 17th Int Conf for High Performance Computing, Networking, Storage and Analysis.New York:ACM, 2015:No.22
                            </a>
                        </p>
                        <p id="432">
                            <a id="bibliography_11" target="_blank" href="http://scholar.cnki.net/result.aspx?q=RFP:When RPC is faster than server-bypass with RDMA">

                                <b>[11]</b>Su Maomeng, Zhang Mingxing, Chen Kang, et al.RFP:When RPC is faster than server-bypass with RDMA[C]Proc of the 12th European Conf on Computer Systems.New York:ACM, 2017:No.1
                            </a>
                        </p>
                        <p id="434">
                            <a id="bibliography_12" target="_blank" href="http://scholar.cnki.net/result.aspx?q=C-hint:An effective and reliable cache management for RDMA-accelerated key-value stores">

                                <b>[12]</b>Wang Yandong, Meng Xiaoqiao, Zhang Li, et al.C-hint:An effective and reliable cache management for RDMA-accelerated key-value stores[C]Proc of the ACM Symp on Cloud Computing.New York:ACM, 2014:No.23
                            </a>
                        </p>
                        <p id="436">
                            <a id="bibliography_13" target="_blank" href="http://scholar.cnki.net/result.aspx?q=FaRM:Fast remote memory">

                                <b>[13]</b>Dragojevi A, Narayanan D, Hodson O, et al.FaRM:Fast remote memory[C]Proc of the 11th USENIX Conf on Networked Systems Design and Implementation.Berkeley, CA:USENIX Association, 2014:401-414
                            </a>
                        </p>
                        <p id="438">
                            <a id="bibliography_14" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Nessie:A Decoupled Client-Driven Key-Value Store Using RDMA">

                                <b>[14]</b>Cassell B, Szepesi T, Wong B, et al.Nessie:A decoupled, client-driven key-value store using RDMA[J].IEEETransactions on Parallel&amp;Distributed Systems, 2017, 28 (12) :3537-3552
                            </a>
                        </p>
                        <p id="440">
                            <a id="bibliography_15" target="_blank" href="http://scholar.cnki.net/result.aspx?q=No compromises:Distributed transactions with consistency,availability,and performance">

                                <b>[15]</b>Dragojevi A, Narayanan D, Nightingale E B, et al.No compromises:Distributed transactions with consistency, availability, and performance[C]Proc of the 25th Symp on Operating Systems Principles.New York:ACM, 2015:54-70
                            </a>
                        </p>
                        <p id="442">
                            <a id="bibliography_16" target="_blank" href="http://scholar.cnki.net/result.aspx?q=FaSST:Fast,scalable and simple distributed transactions with two-sided (RDMA)datagram RPCs">

                                <b>[16]</b>Kalia A, Kaminsky M, Andersen D G.FaSST:Fast, scalable and simple distributed transactions with two-sided (RDMA) datagram RPCs[C]Proc of the 12th USENIXSymp on Operating Systems Design and Implementation.Berkeley, CA:USENIX Association, 2016:185-201
                            </a>
                        </p>
                        <p id="444">
                            <a id="bibliography_17" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Fast in-memory transaction processing using RDMA and HTM">

                                <b>[17]</b>Wei Xingda, Shi Jiaxin, Chen Yanzhe, et al.Fast in-memory transaction processing using RDMA and HTM[C]Proc of the 25th Symp on Operating Systems Principles.New York:ACM, 2015:87-104
                            </a>
                        </p>
                        <p id="446">
                            <a id="bibliography_18" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Fast and general distributed transactions using RDMA and HTM">

                                <b>[18]</b>Chen Yanzhe, Wei Xingda, Shi Jjaixin, et al.Fast and general distributed transactions using RDMA and HTM[C]Proc of the 7th European Conf on Computer Systems.New York:ACM, 2016:No.26
                            </a>
                        </p>
                        <p id="448">
                            <a id="bibliography_19" target="_blank" href="http://scholar.cnki.net/result.aspx?q=RDMA reads:To use or not to use">

                                <b>[19]</b>Dragojevic A, Narayanan D, Castro M.RDMA reads:To use or not to use/[J].IEEE Data Engineering, 2017, 40 (1) :3-14
                            </a>
                        </p>
                        <p id="450">
                            <a id="bibliography_20" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Design guidelines for high performance RDMA systems">

                                <b>[20]</b>Kaminsky A K M, Andersen D G.Design guidelines for high performance RDMA systems[C]Proc of the 25th USENIXAnnual Technical Conf.Berkeley, CA:USENIXAssociation, 2016:437-450
                            </a>
                        </p>
                        <p id="452">
                            <a id="bibliography_21" target="_blank" href="http://scholar.cnki.net/result.aspx?q=DaRPC:Data center RPC">

                                <b>[21]</b>Stuedi P, Trivedi A, Metzler B, et al.DaRPC:Data center RPC[C]Proc of the 5th ACM Symp on Cloud Computing.New York:ACM, 2014:No.15
                            </a>
                        </p>
                        <p id="454">
                            <a id="bibliography_22" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JFYZ201804019&amp;v=MjU5OTZiWVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplVnZGeTduV3JyQUx5dlNkTEc0SDluTXE0OUU=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[22]</b>An Zhongqi, Du Hao, Li Qiang, et al.Memcached optimization on high performance I/O technology[J].Journal of Computer Research and Development, 2018, 55 (4) :864-874 (in Chinese) (安仲奇, 杜昊, 李强, 等.基于高性能I/O技术的Memcached优化研究[J].计算机研究与发展, 2018, 55 (4) :864-874) 
                            </a>
                        </p>
                        <p id="456">
                            <a id="bibliography_23" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Octopus:An RDMA-enabled distributed persistent memory file system">

                                <b>[23]</b>Lu Youyou, Shu Jiwu, Chen Youmin, et al.Octopus:An RDMA-enabled distributed persistent memory file system[C]Proc of the 26th USENIX Annual Technical Conf.Berkeley, CA:USENIX Association, 2017:773-785
                            </a>
                        </p>
                        <p id="458">
                            <a id="bibliography_24" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SJCM&amp;filename=SJCM13091000044894&amp;v=MTY2ODdUNlQ0UFFIL2lyUmRHZXJxUVRNbndaZVp1SHlqbVViN0lKbHdkYnhvPU5pZklZN0s3SHRqTnI0OUZaTzhMQkhVOW9CTQ==&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[24]</b>Lee B C, Ipek E, Mutlu O, et al.Architecting phase change memory as a scalable dram alternative[J].ACM SIGARCHComputer Architecture News, 2009, 37 (3) :2-13
                            </a>
                        </p>
                        <p id="460">
                            <a id="bibliography_25" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SJCM&amp;filename=SJCM13091000044896&amp;v=MTI1MjlPOExCSFUvb0JNVDZUNFBRSC9pclJkR2VycVFUTW53WmVadUh5am1VYjdJSmx3ZGJ4bz1OaWZJWTdLN0h0ak5yNDlGWg==&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[25]</b>Qureshi M K, Srinivasan V, Rivers J A.Scalable high performance main memory system using phase-change memory technology[J].ACM SIGARCH Computer Architecture News, 2009, 37 (3) :24-33
                            </a>
                        </p>
                        <p id="462">
                            <a id="bibliography_26" target="_blank" href="http://scholar.cnki.net/result.aspx?q=The missing memristor found">

                                <b>[26]</b>Strukov D B, Snider G S, Stewart D R, et al.The missing memristor found[J].Nature, 2008, 453 (7191) :80-83
                            </a>
                        </p>
                        <p id="464">
                            <a id="bibliography_27" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Blurred persistence in transactional persistent memory">

                                <b>[27]</b>Lu Youyou, Shu Jiwu, Sun Long.Blurred persistence in transactional persistent memory[C]Proc of the 31st Symp on Mass Storage Systems and Technologies.Piscataway, NJ:IEEE, 2015:No.13
                            </a>
                        </p>
                        <p id="466">
                            <a id="bibliography_28" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Mojim:Areliable and highly- available non-volatile memory system">

                                <b>[28]</b>Zhang Yiying, Yang Jian, Memaripour A, et al.Mojim:Areliable and highly-available non-volatile memory system[C]Proc of the 20th Int Conf on Architectural Support for Programming Languages and Operating Systems.New York:ACM, 2015:3-18
                            </a>
                        </p>
                        <p id="468">
                            <a id="bibliography_29" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Remote persistent memory access-workload scenarios and RDMA semantics[OL]">

                                <b>[29]</b>Talpey T.Remote persistent memory access-workload scenarios and RDMA semantics[OL].[2017-03-31].https:www.openfabrics.org/images/eventpresos/2017presentations/405_RemotePM_TTalpey.pdf
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
            <div class="reference anchor-tag" id="a_footnote">
 <h3>注释</h3>
                    <p>
                        <span id="524" href="javascript:void(0)">
                            <b>1</b> COMP_AND_SWAP和FETCH_AND_ADD缩写为CAS和FAA.
                        </span>
                    </p>
            </div>
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="JFYZ201902001" />
        <input id="dpi" type="hidden" value="300" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JFYZ201902001&amp;v=MDM3NTMzenFxQnRHRnJDVVJMT2VaZVZ2Rnk3bldyckFMeXZTZExHNEg5ak1yWTlGWllRS0RIODR2UjRUNmo1NE8=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR01QWmh5WWp6SmI1Z2pYeEdIOD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="1" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
