<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637132348194717500%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dJSJK201910004%26RESULT%3d1%26SIGN%3dAqWkYAnheFN53%252fhxQ0pqWtKxmuQ%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JSJK201910004&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JSJK201910004&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJK201910004&amp;v=MTkwOThRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVJtRnkvZ1ZMdkFMejdCWmJHNEg5ak5yNDlGWUk=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#29" data-title="&lt;b&gt;1 引言&lt;/b&gt; "><b>1 引言</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#38" data-title="&lt;b&gt;2 系统结构&lt;/b&gt; "><b>2 系统结构</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#39" data-title="&lt;b&gt;2.1 全交换网络的VPX标准模块&lt;/b&gt;"><b>2.1 全交换网络的VPX标准模块</b></a></li>
                                                <li><a href="#46" data-title="&lt;b&gt;2.2 系统拓扑结构&lt;/b&gt;"><b>2.2 系统拓扑结构</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#53" data-title="&lt;b&gt;3 开发调试&lt;/b&gt; "><b>3 开发调试</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#58" data-title="&lt;b&gt;3.1 自适应硬件诊断&lt;/b&gt;"><b>3.1 自适应硬件诊断</b></a></li>
                                                <li><a href="#77" data-title="&lt;b&gt;3.2 阵列软件加载&lt;/b&gt;"><b>3.2 阵列软件加载</b></a></li>
                                                <li><a href="#104" data-title="&lt;b&gt;3.3 系统级软件调试&lt;/b&gt;"><b>3.3 系统级软件调试</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#120" data-title="&lt;b&gt;4 软件环境&lt;/b&gt; "><b>4 软件环境</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#133" data-title="&lt;b&gt;5 结束语&lt;/b&gt; "><b>5 结束语</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#44" data-title="图1 4-DSP COTS标准板模块">图1 4-DSP COTS标准板模块</a></li>
                                                <li><a href="#48" data-title="图2 全以太网连接方式">图2 全以太网连接方式</a></li>
                                                <li><a href="#49" data-title="图3 以太网+PCIe连接方式">图3 以太网+PCIe连接方式</a></li>
                                                <li><a href="#67" data-title="图4 二级交换的PCIe节点遍历">图4 二级交换的PCIe节点遍历</a></li>
                                                <li><a href="#89" data-title="图5 BootP+UDP的软件加载方式">图5 BootP+UDP的软件加载方式</a></li>
                                                <li><a href="#93" data-title="图6 TFTP软件加载方式">图6 TFTP软件加载方式</a></li>
                                                <li><a href="#122" data-title="图7 软件开发环境">图7 软件开发环境</a></li>
                                                <li><a href="#132" data-title="&lt;b&gt;表1 与其它方法的对比&lt;/b&gt;"><b>表1 与其它方法的对比</b></a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="3">


                                    <a id="bibliography_1" title=" Zhang Xiang-yu.Developing software for multiprocessor network of TigerSHARC DSPs [J].Measurement &amp;amp; Control Technology,2004,23(S0):274-276.(in Chinese)" target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Developing software for multiprocessor network of TigerSHARC DSPs">
                                        <b>[1]</b>
                                         Zhang Xiang-yu.Developing software for multiprocessor network of TigerSHARC DSPs [J].Measurement &amp;amp; Control Technology,2004,23(S0):274-276.(in Chinese)
                                    </a>
                                </li>
                                <li id="5">


                                    <a id="bibliography_2" title=" Zhang Xiang-yu,Zhou Jie-min.Monitor software for large scale distributed multiprocessor networks of TigerSHARC DSPs[J].Measurement &amp;amp; Control Technology,2007,26(12):51-53.(in Chinese)" target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=IKJS200712017&amp;v=MzAzNzhRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVJtRnkvZ1ZMdkFMQ2JCZmJHNEh0Yk5yWTlFWTQ=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[2]</b>
                                         Zhang Xiang-yu,Zhou Jie-min.Monitor software for large scale distributed multiprocessor networks of TigerSHARC DSPs[J].Measurement &amp;amp; Control Technology,2007,26(12):51-53.(in Chinese)
                                    </a>
                                </li>
                                <li id="7">


                                    <a id="bibliography_3" >
                                        <b>[3]</b>
                                     Wu Qiong-zhi,Nan Fang,Zhang Feng.Implementation of a parallel DSP system debugger[J].Transactions of Beijing Institute of Technology,2011,31(7):855-858.(in Chinese)</a>
                                </li>
                                <li id="9">


                                    <a id="bibliography_4" title=" Li Man,Tan Qing-qing,Jin Ye,et al.Research on parallel debugger in bus-based multi-DSP system in radar data processing [C]//Proc of IET International Radar Conference,2013:1." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Research on parallel debugger in bus-based multi-DSP system in radar data processing">
                                        <b>[4]</b>
                                         Li Man,Tan Qing-qing,Jin Ye,et al.Research on parallel debugger in bus-based multi-DSP system in radar data processing [C]//Proc of IET International Radar Conference,2013:1.
                                    </a>
                                </li>
                                <li id="11">


                                    <a id="bibliography_5" title=" Wu Qin-wen.Study and realization of boot procedure of multi-core DSP C6678[J].Modern Radar,2016,38(11):35-39.(in Chinese)" target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=XDLD201611008&amp;v=MDcyODM0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVSbUZ5L2dWTHZBUFNuSGFyRzRIOWZOcm85RmJJUUtESDg=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[5]</b>
                                         Wu Qin-wen.Study and realization of boot procedure of multi-core DSP C6678[J].Modern Radar,2016,38(11):35-39.(in Chinese)
                                    </a>
                                </li>
                                <li id="13">


                                    <a id="bibliography_6" title=" Texas Instruments.Key stone architecture DSP bootloader user guide [EB/OL].[2013-07-15].http://www.ti.com/lit/ug/sprugy5c/sprugy5c.pdf." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=KeyStone Architecture DSP Bootloader User Guide">
                                        <b>[6]</b>
                                         Texas Instruments.Key stone architecture DSP bootloader user guide [EB/OL].[2013-07-15].http://www.ti.com/lit/ug/sprugy5c/sprugy5c.pdf.
                                    </a>
                                </li>
                                <li id="15">


                                    <a id="bibliography_7" title=" Texas Instruments.Key stone architecture peripheral component interconnect express (PCIe) user guide[EB/OL].[2013-09-30].http://www.ti.com/lit/ug/sprugs6d/sprugs6d.pdf." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=KeyStone Architecture Peripheral Component Interconnect Express (PCIe)">
                                        <b>[7]</b>
                                         Texas Instruments.Key stone architecture peripheral component interconnect express (PCIe) user guide[EB/OL].[2013-09-30].http://www.ti.com/lit/ug/sprugs6d/sprugs6d.pdf.
                                    </a>
                                </li>
                                <li id="17">


                                    <a id="bibliography_8" >
                                        <b>[8]</b>
                                     Hu Xiao,Wang Yao-hua,Chen Shu-ming.Analyzing and optimizing embedded multi-core programs with on-chip trace [J].Computer Engineering &amp;amp; Science,2009,31(1):113-116.(in Chinese)</a>
                                </li>
                                <li id="19">


                                    <a id="bibliography_1" >
                                        <b>[1]</b>
                                     张象羽.基于TigerSHARC的多处理器阵列软件开发[J].测控技术,2004,23(S0):274-276.</a>
                                </li>
                                <li id="21">


                                    <a id="bibliography_2" >
                                        <b>[2]</b>
                                     张象羽,周洁敏.大规模分布式多TigerSHARC阵列监控软件[J].测控技术,2007,26(12):51-53.</a>
                                </li>
                                <li id="23">


                                    <a id="bibliography_3" title=" 吴琼之,南方,张峰.并行DSP系统软件调试器设计与实现[J].北京理工大学学报,2011,31(7):855-858." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=BJLG201107024&amp;v=MTc0MzZxQnRHRnJDVVJMT2VaZVJtRnkvZ1ZMdkFKeWZIYWJHNEg5RE1xSTlIWUlRS0RIODR2UjRUNmo1NE8zenE=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[3]</b>
                                         吴琼之,南方,张峰.并行DSP系统软件调试器设计与实现[J].北京理工大学学报,2011,31(7):855-858.
                                    </a>
                                </li>
                                <li id="25">


                                    <a id="bibliography_5" >
                                        <b>[5]</b>
                                     吴沁文.多核DSP 芯片C6678 引导过程的研究与实现[J].现代雷达,2016,38(11):35-39.</a>
                                </li>
                                <li id="27">


                                    <a id="bibliography_8" title=" 扈啸,王耀华,陈书明.片上Trace辅助的嵌入式多核程序分析与调优[J].计算机工程与科学,2009,31(1):113-116." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJK200901032&amp;v=MzIwNjdUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVJtRnkvZ1ZMdkFMejdCWmJHNEh0ak1ybzlHWm9RS0RIODR2UjQ=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[8]</b>
                                         扈啸,王耀华,陈书明.片上Trace辅助的嵌入式多核程序分析与调优[J].计算机工程与科学,2009,31(1):113-116.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=JSJK" target="_blank">计算机工程与科学</a>
                2019,41(10),1731-1737 DOI:10.3969/j.issn.1007-130X.2019.10.003            </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>基于以太网和PCIe的多核DSP开发平台</b></span>
                                    </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%BC%A0%E8%B1%A1%E7%BE%BD&amp;code=38231135&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">张象羽</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E6%96%BD%E6%85%A7%E8%8E%89&amp;code=43026332&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">施慧莉</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E4%B8%AD%E5%9B%BD%E8%88%AA%E7%A9%BA%E5%B7%A5%E4%B8%9A%E9%9B%86%E5%9B%A2%E5%85%AC%E5%8F%B8%E9%9B%B7%E5%8D%8E%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6%E6%89%80&amp;code=0238795&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">中国航空工业集团公司雷华电子技术研究所</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>多核数字信号处理器(DSP)在航空、航天等领域的信号处理系统中应用较广泛,在实际工程应用时,由于JTAG接口的性能限制,存在速度慢、不稳定、难操作等问题,导致开发效率低下并严重影响项目进度。建立了一种以千兆以太网和PCIe作为加载和调试接口的多核DSP软硬件开发平台,包括标准化的硬件模块和软件开发环境,具有易重构、易扩展、不再依赖JTAG接口、兼容多个软件操作系统、资源占用低等优点。以多核DSP TMS320C 6678为例,描述了多片DSP组成的信号处理系统开发中的关键技术,包括商用标准(COTS)模块、系统架构、硬件诊断、软件加载、软件调试等。用该平台可以显著降低使用门槛,大幅度提高开发效率。</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">信号处理;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%A4%9A%E6%A0%B8DSP&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">多核DSP;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">开发平台;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E4%BB%A5%E5%A4%AA%E7%BD%91&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">以太网;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=PCIe&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">PCIe;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    张象羽（1978-），男，云南昭通人，硕士，高级工程师，研究方向为信号处理。E-mail:zxy670@163.com，通信地址：214063江苏省无锡市滨湖区梁溪路796号中国航空工业集团公司雷华电子技术研究所&lt;image id="146" type="formula" href="images/JSJK201910004_14600.jpg" display="inline" placement="inline"&gt;&lt;alt&gt;&lt;/alt&gt;&lt;/image&gt;;
                                </span>
                                <span>
                                    施慧莉（1971-），女，福建泉州人，硕士，研究员，研究方向为信号处理。E-mail:shi0212@sina.com，通信地址：214063江苏省无锡市滨湖区梁溪路796号中国航空工业集团公司雷华电子技术研究所&lt;image id="148" type="formula" href="images/JSJK201910004_14800.jpg" display="inline" placement="inline"&gt;&lt;alt&gt;&lt;/alt&gt;&lt;/image&gt;;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2019-03-19</p>

            </div>
                    <h1><b>A multi-core DSP development platform based on Ethernet and PCIe</b></h1>
                    <h2>
                    <span>ZHANG Xiang-yu</span>
                    <span>SHI Hui-li</span>
            </h2>
                    <h2>
                    <span>AVIC Leihua Electronic Technology Research Institute</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>Multi-core Digital Signal Processor(DSP) is widely used in signal processing systems in aviation, aerospace and other fields. In practical engineering applications, due to the performance limitation of JTAG interface, there are some problems such as slow speed, instability and difficult operation, which lead to low development efficiency and seriously affect the progress of the project. This paper proposes a multi-core DSP software and hardware development platform with Gigabit Ethernet and PCIe as loading and debugging interfaces, including standardized hardware modules and software development environment. It has the advantages of easy reconfiguration, easy expansion, no longer relying on JTAG interface, compatibility with multiple software operating systems, and low resource occupation.Taking the multi-core DSP TMS320C 6678 as an example, this paper describes the key techniques in the development of the signal processing system composed of multi-chip DSPs, including COTS module, system architecture, hardware diagnoising, software loading, software debugging and so on. This platform can significantly reduce the application threshold and greatly improve the development efficiency.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=signal%20processing&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">signal processing;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=multi-core%20DSP&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">multi-core DSP;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=development%20platform&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">development platform;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Ethernet&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Ethernet;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=PCIe&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">PCIe;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                            <b>Author：</b>
                                                        <span>
                                    ZHANG Xiang-yu,born in 1978,MS, senior engineer,his research interest includes signal processing.Address:AVIC Leihua Electronic Technology Research Institute,796Liangxi Road,Binhu District,Wuxi 214063,Jiangsu,P.R.China;
                                </span>
                                <span>
                                    SHI Hui-li,born in 1971,MS,research fellow,her research interest includes signal processing.Address:AVIC Leihua Electronic Technology Research Institute,796Liangxi Road,Binhu District,Wuxi 214063,Jiangsu,P.R.China;
                                </span>
                    </p>
                                    <p><b>Received：</b> 2019-03-19</p>
                            </div>


        <!--brief start-->
                        <h3 id="29" name="29" class="anchor-tag"><b>1 引言</b></h3>
                <div class="p1">
                    <p id="30">多核数字信号处理DSP(Digital Signal Processing)芯片在航空、航天、船舶、通信、软件无线电等领域需要高性能信号处理的场合有较多应用。典型的多核DSP有德州仪器TI(Texas Instruments)公司的TMS320C 6678(8核)、TMS320C 6657(2核)等,国内也有一些多核DSP产品,比如飞腾DSP。</p>
                </div>
                <div class="p1">
                    <p id="31">系统开发平台是应用开发的基础,平台的易用性和稳定性是影响项目进展的关键因素。芯片厂商提供的工具多采用联合测试行动组JTAG(Joint Test Action Group)接口仿真器的方式作为调试手段。但是,当用多个DSP时JTAG方法存在严重的效率低下问题。文献<citation id="140" type="reference">[<a class="sup">1</a>,<a class="sup">2</a>,<a class="sup">3</a>,<a class="sup">4</a>,<a class="sup">1</a>,<a class="sup">2</a>,<a class="sup">3</a>]</citation>描述了多个单核DSP组成阵列的并行调试方法。随着DSP由单核发展到多核,高速总线、核间通信、多任务实时操作系统等技术的应用,使系统复杂度显著上升,由此产生的门槛令用户难以适应而徘徊不前。对多核DSP开发平台的研究是近年来的热点问题之一。国内外有较多的板卡制造厂商,但绝大多数仅提供硬件板卡,调试手段仍基于JTAG,鲜有配套的开发软件。部分研究所和院校有相关的技术研究,有用以太网进行软件加载和调试的产品,但存在与操作系统高度耦合、资源占用率高、缺少系统调试功能、程序死锁后网络断开导致无法进行死机后调试等问题。</p>
                </div>
                <div class="p1">
                    <p id="32">本文研究的内容是建立包含标准模块、硬件检测、软件加载、调试和烧录的一整套多核DSP软硬件开发平台,为不同应用场景提供规模可变的信号处理系统架构和高效的系统级软件开发调试环境,主要思路有:</p>
                </div>
                <div class="p1">
                    <p id="33">(1)设计商用标准COTS(Commercial Off-The-Shelf)模块,通过组合形成适用于不同场合的信号处理系统;</p>
                </div>
                <div class="p1">
                    <p id="34">(2)采用自适应硬件诊断方式,实现阵列的快速故障定位;</p>
                </div>
                <div class="p1">
                    <p id="35">(3)采用高速千兆以太网和PCIe替代低速的JTAG,实现大规模阵列的快速加载和调试,支持死机后调试;</p>
                </div>
                <div class="p1">
                    <p id="36">(4)采用实时在线方式,实现软件程序的系统级调试;</p>
                </div>
                <div class="p1">
                    <p id="37">(5)适配不同实时操作系统,也支持没有操作系统的裸程序调试。</p>
                </div>
                <h3 id="38" name="38" class="anchor-tag"><b>2 系统结构</b></h3>
                <h4 class="anchor-tag" id="39" name="39"><b>2.1 全交换网络的VPX标准模块</b></h4>
                <div class="p1">
                    <p id="40">VPX是国际贸易协会VITA(VME International Trade Association)组织于2007年在其VME总线基础上提出的新一代高速串行总线标准。设计不同规格的商用COTS标准模块,以4片DSP的6U大小板卡为例,如图1所示。DSP间通过串行高速输入/输出SRIO(Serial Rapid I/O)、PCIe、千兆以太网3种总线构成全交换网络:</p>
                </div>
                <div class="p1">
                    <p id="41">(1)SRIO用于DSP间以及与其它系统的数据传输,1路4×提供20 Gbps的传输带宽,提供6路4×对外连接;</p>
                </div>
                <div class="p1">
                    <p id="42">(2)PCIe主要用于加载和调试,也可兼顾DSP间的应用数据传输,1路2×提供10 Gbps的传输带宽,提供4路4×对外连接;</p>
                </div>
                <div class="p1">
                    <p id="43">(3)千兆以太网主要用于加载和调试,也可兼顾与上位机间的应用数据传输。</p>
                </div>
                <div class="area_img" id="44">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJK201910004_044.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 4-DSP COTS标准板模块" src="Detail/GetImg?filename=images/JSJK201910004_044.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图1 4-DSP COTS标准板模块  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJK201910004_044.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Figure 1 4-DSP COTS standard board module</p>

                </div>
                <div class="p1">
                    <p id="45">根据具体的应用需求,VPX背板的拓扑结构可以是网络型、星型、菊花链型等。各模块之间通过板上的交换机以SRIO、PCIe、以太网等总线实现互连,优点是没有单独的交换板占用槽位,最大化地利用了机箱空间,模块之间可以直接进行点对点通信,具有结构紧凑、设计灵活等特点。</p>
                </div>
                <h4 class="anchor-tag" id="46" name="46"><b>2.2 系统拓扑结构</b></h4>
                <div class="p1">
                    <p id="47">以3块4 DSP板组成的信号处理系统为例,与上位机的连接框图如图2和图3所示。</p>
                </div>
                <div class="area_img" id="48">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJK201910004_048.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 全以太网连接方式" src="Detail/GetImg?filename=images/JSJK201910004_048.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图2 全以太网连接方式  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJK201910004_048.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Figure 2 Full Ethernet connection</p>

                </div>
                <div class="area_img" id="49">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJK201910004_049.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 以太网+PCIe连接方式" src="Detail/GetImg?filename=images/JSJK201910004_049.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图3 以太网+PCIe连接方式  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJK201910004_049.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Figure 3 Ethernet &amp; PCIe connection</p>

                </div>
                <div class="p1">
                    <p id="50">图2是全以太网的连接方式,阵列中所有DSP都通过板载以太网交换器连接到上位机。每个DSP分配独立的IP地址,上位机通过以太网为每个DSP加载软件并访问其存储空间。</p>
                </div>
                <div class="p1">
                    <p id="51">图3是以太网+PCIe的连接方式,阵列中仅一个DSP通过以太网与上位机连接,DSP间通过板载PCIe交换器连接,形成菊花链式的拓扑结构。</p>
                </div>
                <div class="p1">
                    <p id="52">这2种连接方式也可以混合使用,随应用场合不同自由搭配。</p>
                </div>
                <h3 id="53" name="53" class="anchor-tag"><b>3 开发调试</b></h3>
                <div class="p1">
                    <p id="54">采用商用标准模块、VPX背板和全交换网络带来的好处显而易见,可以实现不同规模的系统以适应不同的应用场合。但是,与此同时也带来了一些挑战,比如如何快速确定硬件的健康状态,如何方便地开发和调试应用软件。这些工作涉及以下几个方面:</p>
                </div>
                <div class="p1">
                    <p id="55">(1)硬件诊断:确认处理器时钟、外存容量、通信总线连接关系和数据传输稳定性等;</p>
                </div>
                <div class="p1">
                    <p id="56">(2)软件加载:配置各处理器的软件程序,并通过高速总线加载;</p>
                </div>
                <div class="p1">
                    <p id="57">(3)软件调试:检查应用软件的运行状态,排除出现的异常问题,确认输出结果并优化性能。</p>
                </div>
                <h4 class="anchor-tag" id="58" name="58"><b>3.1 自适应硬件诊断</b></h4>
                <div class="p1">
                    <p id="59">要适应不同规模的系统,不能采用传统的定制自动测试设备ATE(Automatic Test Equipment)的方法,必须用通用化的自适应硬件诊断方法。自适应硬件诊断是把系统看作一个封起来的黑盒子,用逐步探测的方式一层层地去发现里面装着什么,再用对比验证的手段一个个地去确认健康情况,然后用高强度的负载一次次地去考验工作稳定性。</p>
                </div>
                <h4 class="anchor-tag" id="60" name="60">3.1.1 节点遍历</h4>
                <div class="p1">
                    <p id="61">多核DSP阵列中有很多处理器、存储器、交换器等,各种外围器件和高低速数据接口结构复杂。从图论的角度出发,把每个处理器视为一个节点,把整个阵列视为一个图,就可以把对阵列中各处理器探测发现的过程归结为对有向图的节点遍历过程。</p>
                </div>
                <div class="p1">
                    <p id="62">对不同的总线可采用不同节点遍历的方法:</p>
                </div>
                <div class="p1">
                    <p id="63">(1)以太网:采用解析加载请求包或IP地址穷举的方法;</p>
                </div>
                <div class="p1">
                    <p id="64">(2)PCIe:采用枚举过程的深度优先搜索和地址空间分配的方法;</p>
                </div>
                <div class="p1">
                    <p id="65">(3)SRIO:采用枚举过程深度优先搜索和最短路径路由的方法。</p>
                </div>
                <div class="p1">
                    <p id="66">通过节点遍历,探索并识别出多核DSP阵列中的所有处理器。以二级交换的PCIe节点遍历为例,如图4所示。图4中RC(Root Complex)表示根联合体,EP(End Point)表示终端。</p>
                </div>
                <div class="area_img" id="67">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJK201910004_067.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 二级交换的PCIe节点遍历" src="Detail/GetImg?filename=images/JSJK201910004_067.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图4 二级交换的PCIe节点遍历  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJK201910004_067.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Figure 4 PCIe node traversal with 2 level switcher</p>

                </div>
                <div class="p1">
                    <p id="68">枚举过程如下:先搜索到PCIe交换器0的up端口,设置二级总线号为1;搜索到位于总线1、设备1(以下用“总线号∶设备号”表示)的端口,设置二级总线号为2;搜索到位于2∶0的DSP;继续搜索到位于1∶2的端口,设置二级总线号为3;以此类推,直到所有设备搜索完毕。</p>
                </div>
                <h4 class="anchor-tag" id="69" name="69">3.1.2 多核DSP阵列诊断</h4>
                <div class="p1">
                    <p id="70">在实际应用多核DSP阵列时,硬件诊断方法体现为在设备不开箱的前提下通过一根网线来确认系统状态并实现快速故障定位,具体功能包括:</p>
                </div>
                <div class="p1">
                    <p id="71">(1)遍历并识别以太网或PCIe总线中存在的DSP,定位各DSP的位置;</p>
                </div>
                <div class="p1">
                    <p id="72">(2)检测以太网连接的(如TCP、UDP)传输速度和稳定性;</p>
                </div>
                <div class="p1">
                    <p id="73">(3)检测存储器(如DDR3)的工作情况,如容量、速度和稳定性;</p>
                </div>
                <div class="p1">
                    <p id="74">(4)检测通信总线(如RapidIO、PCIe等)传输速度和稳定性。</p>
                </div>
                <div class="p1">
                    <p id="75">随着项目进展,硬件诊断方法的应用场合包括:调试时确认硬件状态;试验时考验工作强度;验收时作为合格判据;生产时确认装配结果;维护时确认更换组件。</p>
                </div>
                <div class="p1">
                    <p id="76">另外,采用硬件诊断方法形成的快速故障定位能力,也是系统重构功能的先决条件。先发现故障,才能进一步制定规避策略,经资源重组后完成任务动态分配,从而实现系统重构。</p>
                </div>
                <h4 class="anchor-tag" id="77" name="77"><b>3.2 阵列软件加载</b></h4>
                <div class="p1">
                    <p id="78">处理器在复位后处于休眠状态,需要把程序代码和数据通过各种接口搬移到处理器的存储器中,最后唤醒处理器,这个程序从休眠到开始运行应用程序的过程,称之为软件加载。</p>
                </div>
                <div class="p1">
                    <p id="79">软件加载过程开始时是由一段被称为加载核(BootLoader)的程序控制。TMS320C 6678的Bootloader在芯片出厂时即烧录在基地址为0x20B00000的内部ROM中,所以又称为RBL(ROM Boot Loader)<citation id="141" type="reference"><link href="11" rel="bibliography" /><link href="25" rel="bibliography" /><sup>[<a class="sup">5</a>,<a class="sup">5</a>]</sup></citation>。</p>
                </div>
                <div class="p1">
                    <p id="80">TMS320C 6678的RBL支持2大类加载模式<citation id="142" type="reference"><link href="13" rel="bibliography" /><sup>[<a class="sup">6</a>]</sup></citation>:</p>
                </div>
                <div class="p1">
                    <p id="81">(1)存储器加载。应用程序代码存储在外部的慢速设备中(如串行外设接口SPI(Serial Peripheval Interface)总线Flash、I<sup>2</sup>C总线EEPROM),DSP作为主控主导整个加载过程。这种模式常用于设备的上电自启动。</p>
                </div>
                <div class="p1">
                    <p id="82">(2)主机加载。DSP作为从属设备,由其它主机通过某种接口(如以太网、PCIe、SRIO等)为DSP加载代码和数据。这种模式常用于调试、在线升级。</p>
                </div>
                <div class="p1">
                    <p id="83">有时候因为板卡参数设置需要先在RBL后做一些初始化操作,然后再继续代码、数据搬移等加载过程,这段用来初始化的代码称之为二次加载核IBL(Initial Boot Loader),一般烧录在EERPOM中。</p>
                </div>
                <h4 class="anchor-tag" id="84" name="84">3.2.1 以太网加载</h4>
                <div class="p1">
                    <p id="85">通过以太网加载DSP,属于主机加载模式。</p>
                </div>
                <div class="p1">
                    <p id="86">TMS320C 6678的软件开发包提供了2种以太网加载方式:</p>
                </div>
                <div class="p1">
                    <p id="87">(1)引导程序协议BootP(Bootstrap Protocol)包+用户数据报协议UDP加载包的方式。</p>
                </div>
                <div class="p1">
                    <p id="88">以太网加载方式可以直接用RBL。加载过程如图5所示,步骤有:DSP的加载模式(bootmode)设置为以太网加载;在复位后DSP每隔3 s在网络上广播一个BootP包;上位机收到后,把应用程序转换成.eth文件通过UDP包送给DSP。</p>
                </div>
                <div class="area_img" id="89">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJK201910004_089.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 BootP+UDP的软件加载方式" src="Detail/GetImg?filename=images/JSJK201910004_089.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图5 BootP+UDP的软件加载方式  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJK201910004_089.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Figure 5 Software loading based on BootP &amp; UDP</p>

                </div>
                <div class="p1">
                    <p id="90">这种方式的优点是加载速度较快,IP地址可以灵活设置,易于实现系统的动态扩展;缺点是UDP包存在数据丢失的可能性,对网络环境稳定性有一定要求。</p>
                </div>
                <div class="p1">
                    <p id="91">需要注意的是,虽然RBL可以用加载参数表对DDR3进行初始化,但在实际应用中发现,RBL中缺少自动电平参数设置,如果DDR3颗粒与官方评估板不一致,有可能无法正确初始化DDR3,导致加载失败。解决方法有2种:①强制要求所有加载数据只能写到内存,即不能把代码和需要初始化的变量放到DDR3;②采用二次加载,在二次加载核中初始化DDR3。</p>
                </div>
                <div class="p1">
                    <p id="92">(2)普通文件传输协议TFTP(Trivial File Transfer Protocol)方式。</p>
                </div>
                <div class="area_img" id="93">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJK201910004_093.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 TFTP软件加载方式" src="Detail/GetImg?filename=images/JSJK201910004_093.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图6 TFTP软件加载方式  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJK201910004_093.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Figure 6 Software loading based on TFTP</p>

                </div>
                <div class="p1">
                    <p id="94">TFTP方式必须使用二次加载核。加载过程如图6所示,步骤有:DSP的bootmode设置为I<sup>2</sup>C加载;上位机运行TFTP服务;在复位后DSP运行EEPROM中的二级加载核,按照设定IP地址发送TFTP请求;上位机收到请求后,把相应的文件下载到DSP中。</p>
                </div>
                <div class="p1">
                    <p id="95">这种方式的优点是传输可靠性高;缺点是IP地址固定,不利于动态扩展,且二级加载造成一定延迟。</p>
                </div>
                <h4 class="anchor-tag" id="96" name="96">3.2.2 PCIe总线加载</h4>
                <div class="p1">
                    <p id="97">通过PCIe总线加载DSP,属于主机加载模式。</p>
                </div>
                <div class="p1">
                    <p id="98">在图3所示的以太网+PCIe连接方式中,DSP间采用PCIe总线互连,一片DSP作为根联合体RC,其它DSP作为终端EP。上位机要访问EP DSP,需要经过RC DSP进行中转。</p>
                </div>
                <div class="p1">
                    <p id="99">PCIe是一种基于地址映射的数据传输总线,在经过枚举和配置后,RC可以通过PCIe地址来访问EP的存储空间<citation id="143" type="reference"><link href="15" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>。软件编译产生的.out文件,需要先转换成加载表格式,即仅包括在指定地址填入指定长度的指定数据的内容。RC DSP解析加载表数据,通过PCIe总线写入到EP的相应地址中,最后通过中断激活EP,即可实现PCIe总线加载。</p>
                </div>
                <div class="p1">
                    <p id="100">用PCIe总线作为EP的加载和调试总线,有以下好处:</p>
                </div>
                <div class="p1">
                    <p id="101">(1)在EP的软件发生死锁后,仍可通过PCIe读取EP中的数据,实现死机现场分析,方便排除故障;</p>
                </div>
                <div class="p1">
                    <p id="102">(2)在EP的应用软件中无需驻留程序,不占用任何资源;</p>
                </div>
                <div class="p1">
                    <p id="103">(3)对EP的软件操作系统无限制。</p>
                </div>
                <h4 class="anchor-tag" id="104" name="104"><b>3.3 系统级软件调试</b></h4>
                <h4 class="anchor-tag" id="105" name="105">3.3.1 断点单步式的单元级调试</h4>
                <div class="p1">
                    <p id="106">通常意义上的软件调试,是单元级别的,是在程序中设置断点、通过单步执行来检查程序各个单元的执行情况。单元级调试,关注的是单个函数执行过程和输出结果,面向的对象主要是单片单核单线程,通常是在软件编码阶段进行。</p>
                </div>
                <div class="p1">
                    <p id="107">DSP内部有JTAG调试接口模块,可连接硬件仿真器实现单元级调试。JTAG可以访问内部寄存器,比如运算单元的状态寄存器等;也可以访问一些挂在总线上的设备,比如片内L1、L2等;还可以访问内置模块的寄存器,比如PCIe模块的控制寄存器等。</p>
                </div>
                <div class="p1">
                    <p id="108">在做底层软件开发时,JTAG调试方法是必不可少的,可以很方便地判断参数设置步骤和执行结果的正确性。在调试算法时,JTAG方法也便于逐语句检查中间过程。</p>
                </div>
                <div class="p1">
                    <p id="109">但是,在实际工程应用中,当系统规模较大时用JTAG调试方法会存在严重的效率低下问题:</p>
                </div>
                <div class="p1">
                    <p id="110">(1)加载6片TMS320C 6678(共48核)的板卡时,JTAG连接一次消耗的时间长达数分钟;</p>
                </div>
                <div class="p1">
                    <p id="111">(2)一个JTAG仿真器只能调试一块板卡,有多块板卡就需多个仿真器,操作不便;</p>
                </div>
                <div class="p1">
                    <p id="112">(3)每次程序重加载存在现场残留,影响每次程序运行结果,导致程序不可信;</p>
                </div>
                <div class="p1">
                    <p id="113">(4)JTAG连接不稳定,有较大几率出现连接错误、丢失等故障。</p>
                </div>
                <div class="p1">
                    <p id="114">综上,JTAG接口方式仅提供模块级调试功能,适用于单板调试,而对于复杂系统如雷达中动辄需要3块板卡12片DSP以上的大规模信号处理机来说,缺少重要的系统级调试功能。</p>
                </div>
                <h4 class="anchor-tag" id="115" name="115">3.3.2 实时在线式的系统级调试</h4>
                <div class="p1">
                    <p id="116">随着项目的推进,要调试各个DSP之间、各个板卡之间的数据通信,系统级调试手段是必须的。系统级调试,关注的是部件和系统的功能实现和性能表现,面向的对象是多片多核多进程的集合,通常是在部件集成和系统集成阶段进行。</p>
                </div>
                <div class="p1">
                    <p id="117">由于涉及到核间、片间通信和对外接口,无法保证所有DSP所有核与外部设备的同步性,断点单步式的单元级调试方法已难以用于系统级调试。当中断某一DSP中某一线程时,会引起与之通信的其它线程或其它核或其它DSP出现超时或堵塞,造成时序混乱。开发人员经常遇到一些难以排除的问题,比如单板调试正确的软件放到系统中运行却出现异常情况,造成这种问题的重要原因,往往就是采用了不恰当的调试方法。</p>
                </div>
                <div class="p1">
                    <p id="118">所以,当项目进入到部件集成和系统集成阶段时,就应该采用实时在线式的系统级调试方法。实时,指的是调试过程中DSP软件能不受打扰地正常运行,调试设备能够监测系统当前时刻的实际运行状况和一段时间的变化情况,比如形成运动目标航迹、天线方位俯仰曲线等。在线,指的是调试设备与目标系统保持连接,甚至能够接入网络,网络中的任何计算机都可以进行调试,且可以多机同时操作。</p>
                </div>
                <div class="p1">
                    <p id="119">实时在线式的系统级调试方法,不影响运行时序,可以显著提升软件在调试环境和实际环境中运行结果的一致性,降低项目后期成本。</p>
                </div>
                <h3 id="120" name="120" class="anchor-tag"><b>4 软件环境</b></h3>
                <div class="p1">
                    <p id="121">我们将自适应硬件诊断、阵列软件加载和系统级软件调试等方法应用于雷达信号处理系统的研制,开发了一套软件开发环境,软件主界面如图7所示。</p>
                </div>
                <div class="area_img" id="122">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJK201910004_122.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 软件开发环境" src="Detail/GetImg?filename=images/JSJK201910004_122.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图7 软件开发环境  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJK201910004_122.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Figure 7 Software development environment</p>

                </div>
                <div class="p1">
                    <p id="123">图7中多核DSP阵列由4块板卡16片TMS320C 6678共128个核组成,也就是说,有128个软件程序在同时运行。这种规模的阵列,如果用JTAG方式调试,需要用到4个仿真器,同步操作困难,速度慢、效率低。在应用本文的软件开发环境后,开发效率得到了大幅度提升。</p>
                </div>
                <div class="p1">
                    <p id="124">软件具备的主要功能和性能包括:</p>
                </div>
                <div class="p1">
                    <p id="125">(1)硬件诊断。探测系统拓扑结构和资源分布情况,检测高速总线数据传输的稳定性等。</p>
                </div>
                <div class="p1">
                    <p id="126">(2)一键加载。配置各片各核运行程序,自动进行文件转换;加载16片DSP共128核,耗时不到10 s,比JTAG方式耗时数分钟的速度要快近百倍。</p>
                </div>
                <div class="p1">
                    <p id="127">(3)一键烧录。程序调试完成后,一次性把所有程序烧录到Flash中;调试过程中对程序运行流程不进行干预,可以保证Flash自举模式下的软件运行状态和调试模式下一致,避免调试和自举时序不同造成的问题。</p>
                </div>
                <div class="p1">
                    <p id="128">(4)实时监测。把软件中的变量、数组等用曲线、字符、灰度图像、RGB图像、三维图形等方式显示,可定时刷新形成动画,如运动目标航迹、合成孔径图像随载机飞行而产生变化、红外图像逐帧显示等。</p>
                </div>
                <div class="p1">
                    <p id="129">(5)事件跟踪。类似于文献<citation id="144" type="reference">[<a class="sup">8</a>,<a class="sup">8</a>]</citation>用可视化方式显示软件运行时序,包括函数耗时、DSP间的输入/输出时间间隔等;检查程序运行流程是否正常,时间余量是否充足等。</p>
                </div>
                <div class="p1">
                    <p id="130">(6)数据的导入/导出。把DSP中的数据读出存储为磁盘文件,方便用Matlab等软件进行分析;把磁盘文件存储到DSP的内外存中,方便为处理提供输入数据;可定时存储,即实现简单的记录功能。</p>
                </div>
                <div class="p1">
                    <p id="131">从功能、性能上与传统的JTAG方法、市面上采用全以太网方法的产品对比,如表1所示。</p>
                </div>
                <div class="area_img" id="132">
                    <p class="img_tit"><b>表1 与其它方法的对比</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"><b>Table 1 Comparison with other methods</b></p>
                    <p class="img_note"></p>
                    <table id="132" border="1"><tr><td><br /></td><td>JTAG方法</td><td>全以太网方法</td><td>本文所述方法</td></tr><tr><td>系统规模</td><td>单板</td><td>多板</td><td>多板</td></tr><tr><td><br />调试级别</td><td>单元级调试</td><td>系统级调试</td><td>系统级调试</td></tr><tr><td><br />加载方式</td><td>JTAG</td><td>以太网(TFTP)</td><td>以太网(UDP)+PCIe</td></tr><tr><td><br />软件加载速度</td><td>加载4片DSP需数分钟</td><td>加载16片DSP需数十秒</td><td>加载16片DSP仅需不到10 s</td></tr><tr><td><br />DSP的IP地址</td><td>代码内设置</td><td>烧死在EEPROM中</td><td>可通过上位机灵活设置</td></tr><tr><td><br />系统调试功能</td><td>无</td><td>有</td><td>定时刷新、事件跟踪、运行状态等</td></tr><tr><td><br />硬件检测功能</td><td>无</td><td>无</td><td>自适应硬件诊断实现快速故障定位</td></tr><tr><td><br />资源占用率</td><td>无</td><td>高,每个DSP都有驻留程序</td><td>低,整个系统中仅1片DSP的1个核有驻留程序</td></tr><tr><td><br />支持裸程序</td><td>支持</td><td>不支持</td><td>支持</td></tr><tr><td><br />操作系统</td><td>支持</td><td>与操作系统高度耦合</td><td>支持OSEck、SYS/BIOS、ReWorks DSP、SylixOS等</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <h3 id="133" name="133" class="anchor-tag"><b>5 结束语</b></h3>
                <div class="p1">
                    <p id="134">本文提出一种以千兆以太网和PCIe作为加载和调试接口的多核DSP软硬件开发平台,包括标准化的硬件模块和软件开发环境,具备以下几个关键特性:</p>
                </div>
                <div class="p1">
                    <p id="135">(1)完全的去JTAG化,应用软件开发方无需再使用JTAG仿真器;</p>
                </div>
                <div class="p1">
                    <p id="136">(2)对DSP上运行的操作系统没有限制,也支持裸程序;</p>
                </div>
                <div class="p1">
                    <p id="137">(3)可通过网络和PCIe进行DSP的死机后分析,方便查找故障原因;</p>
                </div>
                <div class="p1">
                    <p id="138">(4)在DSP应用程序中没有驻留,不占用存储空间。</p>
                </div>
                <div class="p1">
                    <p id="139">综上,本平台可以显著降低多核DSP应用的门槛,大幅度提升开发效率。对航空、航天、船舶、通信、软件无线电、人工智能等领域,本平台提供稳定的标准化硬件模块和高效率软件开发环境,为信号处理系统应用多核DSP提供完整软硬件解决方案。</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="3">
                            <a id="bibliography_1" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Developing software for multiprocessor network of TigerSHARC DSPs">

                                <b>[1]</b> Zhang Xiang-yu.Developing software for multiprocessor network of TigerSHARC DSPs [J].Measurement &amp; Control Technology,2004,23(S0):274-276.(in Chinese)
                            </a>
                        </p>
                        <p id="5">
                            <a id="bibliography_2" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=IKJS200712017&amp;v=MDQwNTh0R0ZyQ1VSTE9lWmVSbUZ5L2dWTHZBTENiQmZiRzRIdGJOclk5RVk0UUtESDg0dlI0VDZqNTRPM3pxcUI=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[2]</b> Zhang Xiang-yu,Zhou Jie-min.Monitor software for large scale distributed multiprocessor networks of TigerSHARC DSPs[J].Measurement &amp; Control Technology,2007,26(12):51-53.(in Chinese)
                            </a>
                        </p>
                        <p id="7">
                            <a id="bibliography_3" >
                                    <b>[3]</b>
                                 Wu Qiong-zhi,Nan Fang,Zhang Feng.Implementation of a parallel DSP system debugger[J].Transactions of Beijing Institute of Technology,2011,31(7):855-858.(in Chinese)
                            </a>
                        </p>
                        <p id="9">
                            <a id="bibliography_4" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Research on parallel debugger in bus-based multi-DSP system in radar data processing">

                                <b>[4]</b> Li Man,Tan Qing-qing,Jin Ye,et al.Research on parallel debugger in bus-based multi-DSP system in radar data processing [C]//Proc of IET International Radar Conference,2013:1.
                            </a>
                        </p>
                        <p id="11">
                            <a id="bibliography_5" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=XDLD201611008&amp;v=MjkzNDFTbkhhckc0SDlmTnJvOUZiSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUm1GeS9nVkx2QVA=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[5]</b> Wu Qin-wen.Study and realization of boot procedure of multi-core DSP C6678[J].Modern Radar,2016,38(11):35-39.(in Chinese)
                            </a>
                        </p>
                        <p id="13">
                            <a id="bibliography_6" target="_blank" href="http://scholar.cnki.net/result.aspx?q=KeyStone Architecture DSP Bootloader User Guide">

                                <b>[6]</b> Texas Instruments.Key stone architecture DSP bootloader user guide [EB/OL].[2013-07-15].http://www.ti.com/lit/ug/sprugy5c/sprugy5c.pdf.
                            </a>
                        </p>
                        <p id="15">
                            <a id="bibliography_7" target="_blank" href="http://scholar.cnki.net/result.aspx?q=KeyStone Architecture Peripheral Component Interconnect Express (PCIe)">

                                <b>[7]</b> Texas Instruments.Key stone architecture peripheral component interconnect express (PCIe) user guide[EB/OL].[2013-09-30].http://www.ti.com/lit/ug/sprugs6d/sprugs6d.pdf.
                            </a>
                        </p>
                        <p id="17">
                            <a id="bibliography_8" >
                                    <b>[8]</b>
                                 Hu Xiao,Wang Yao-hua,Chen Shu-ming.Analyzing and optimizing embedded multi-core programs with on-chip trace [J].Computer Engineering &amp; Science,2009,31(1):113-116.(in Chinese)
                            </a>
                        </p>
                        <p id="19">
                            <a id="bibliography_1" >
                                    <b>[1]</b>
                                 张象羽.基于TigerSHARC的多处理器阵列软件开发[J].测控技术,2004,23(S0):274-276.
                            </a>
                        </p>
                        <p id="21">
                            <a id="bibliography_2" >
                                    <b>[2]</b>
                                 张象羽,周洁敏.大规模分布式多TigerSHARC阵列监控软件[J].测控技术,2007,26(12):51-53.
                            </a>
                        </p>
                        <p id="23">
                            <a id="bibliography_3" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=BJLG201107024&amp;v=MTU1MzVnVkx2QUp5ZkhhYkc0SDlETXFJOUhZSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUm1GeS8=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[3]</b> 吴琼之,南方,张峰.并行DSP系统软件调试器设计与实现[J].北京理工大学学报,2011,31(7):855-858.
                            </a>
                        </p>
                        <p id="25">
                            <a id="bibliography_5" >
                                    <b>[5]</b>
                                 吴沁文.多核DSP 芯片C6678 引导过程的研究与实现[J].现代雷达,2016,38(11):35-39.
                            </a>
                        </p>
                        <p id="27">
                            <a id="bibliography_8" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJK200901032&amp;v=MDA0MTQvZ1ZMdkFMejdCWmJHNEh0ak1ybzlHWm9RS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVJtRnk=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[8]</b> 扈啸,王耀华,陈书明.片上Trace辅助的嵌入式多核程序分析与调优[J].计算机工程与科学,2009,31(1):113-116.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="JSJK201910004" />
        <input id="dpi" type="hidden" value="300" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJK201910004&amp;v=MTkwOThRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVJtRnkvZ1ZMdkFMejdCWmJHNEg5ak5yNDlGWUk=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQ3cmEvcXIxT0wrTHhvaVdCNFNyZz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
