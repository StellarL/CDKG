<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637132370798623750%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dJSJK201907002%26RESULT%3d1%26SIGN%3d4mNpVb26hWZQCxMSLF7%252fXFw%252fEuc%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JSJK201907002&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JSJK201907002&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJK201907002&amp;v=MDUxMjY0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVSbUZ5N21WcjNBTHo3QlpiRzRIOWpNcUk5RlpvUUtESDg0dlI=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#21" data-title="&lt;b&gt;1 引言&lt;/b&gt; "><b>1 引言</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#28" data-title="&lt;b&gt;2 公共云上HPC集群的实现&lt;/b&gt; "><b>2 公共云上HPC集群的实现</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#32" data-title="&lt;b&gt;3 HPC低成本计算策略&lt;/b&gt; "><b>3 HPC低成本计算策略</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#33" data-title="&lt;b&gt;3.1 HPC服务云平台设计&lt;/b&gt;"><b>3.1 HPC服务云平台设计</b></a></li>
                                                <li><a href="#44" data-title="&lt;b&gt;3.2 闲时计算自动伸缩模型&lt;/b&gt;"><b>3.2 闲时计算自动伸缩模型</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#52" data-title="&lt;b&gt;4 测试及性价比对比&lt;/b&gt; "><b>4 测试及性价比对比</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#54" data-title="&lt;b&gt;4.1 LAMMPS作业测试&lt;/b&gt;"><b>4.1 LAMMPS作业测试</b></a></li>
                                                <li><a href="#75" data-title="&lt;b&gt;4.2 GROMACS作业测试&lt;/b&gt;"><b>4.2 GROMACS作业测试</b></a></li>
                                                <li><a href="#91" data-title="&lt;b&gt;4.3 计算时间和成本对比&lt;/b&gt;"><b>4.3 计算时间和成本对比</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#96" data-title="&lt;b&gt;5 结束语&lt;/b&gt; "><b>5 结束语</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#30" data-title="图1 HPCaaS和自动伸缩服务">图1 HPCaaS和自动伸缩服务</a></li>
                                                <li><a href="#35" data-title="图2 公共云上HPC服务云平台设计">图2 公共云上HPC服务云平台设计</a></li>
                                                <li><a href="#51" data-title="图3 HPC作业低成本计算流程">图3 HPC作业低成本计算流程</a></li>
                                                <li><a href="#57" data-title="&lt;b&gt;表1 正常LAMMPS作业计算结果&lt;/b&gt;"><b>表1 正常LAMMPS作业计算结果</b></a></li>
                                                <li><a href="#64" data-title="&lt;b&gt;表2 LAMMPS作业被中断&lt;/b&gt;"><b>表2 LAMMPS作业被中断</b></a></li>
                                                <li><a href="#67" data-title="&lt;b&gt;表3 LAMMPS作业中断后继续执行&lt;/b&gt;"><b>表3 LAMMPS作业中断后继续执行</b></a></li>
                                                <li><a href="#69" data-title="&lt;b&gt;表4 LAMMPS作业运行时长对比&lt;/b&gt;"><b>表4 LAMMPS作业运行时长对比</b></a></li>
                                                <li><a href="#74" data-title="&lt;b&gt;表5 LAMMPS作业成本对比&lt;/b&gt;"><b>表5 LAMMPS作业成本对比</b></a></li>
                                                <li><a href="#78" data-title="&lt;b&gt;表6 GROMACS作业执行结果&lt;/b&gt;"><b>表6 GROMACS作业执行结果</b></a></li>
                                                <li><a href="#86" data-title="&lt;b&gt;表7 GROMACS作业被中断&lt;/b&gt;"><b>表7 GROMACS作业被中断</b></a></li>
                                                <li><a href="#88" data-title="&lt;b&gt;表8 GROMACS作业被中断&lt;/b&gt;"><b>表8 GROMACS作业被中断</b></a></li>
                                                <li><a href="#90" data-title="&lt;b&gt;表9 GROMACS作业成本对比&lt;/b&gt;"><b>表9 GROMACS作业成本对比</b></a></li>
                                                <li><a href="#93" data-title="图4 HPC作业运行时间对比">图4 HPC作业运行时间对比</a></li>
                                                <li><a href="#94" data-title="图5 LAMMPS作业计算成本对比">图5 LAMMPS作业计算成本对比</a></li>
                                                <li><a href="#95" data-title="图6 GROMACS作业计算成本对比">图6 GROMACS作业计算成本对比</a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="3">


                                    <a id="bibliography_1" title=" Li Yun-chun, Xia Yu-meng.Auto-scaling web applications in hybrid cloud based on Docker[C]//Proc of 2016 5th International Conference on Computer Science and Network Technology (ICCSNT) , 2016:75-79." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Auto-Scaling web application in hybrid cloud based on Docker">
                                        <b>[1]</b>
                                         Li Yun-chun, Xia Yu-meng.Auto-scaling web applications in hybrid cloud based on Docker[C]//Proc of 2016 5th International Conference on Computer Science and Network Technology (ICCSNT) , 2016:75-79.
                                    </a>
                                </li>
                                <li id="5">


                                    <a id="bibliography_2" title=" Evangelidis A, Parker D, Bahsoon R.Performance modelling and verification of cloud-based auto-scaling policies[C]//Proc of 2017 17th IEEE/ACM International Symposium on Cluster, Cloud and Grid Computing, 2017:355-364." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Performance modelling and verification of cloud-based auto-scaling policies">
                                        <b>[2]</b>
                                         Evangelidis A, Parker D, Bahsoon R.Performance modelling and verification of cloud-based auto-scaling policies[C]//Proc of 2017 17th IEEE/ACM International Symposium on Cluster, Cloud and Grid Computing, 2017:355-364.
                                    </a>
                                </li>
                                <li id="7">


                                    <a id="bibliography_3" title=" Engelmann C, Geist A.A diskless checkpoint algorithm for super-scale architectures applied to the fast Fourier transform[C]//Proc of the 1st International Workshop on Challenges of Large Applications in Distributed Environments, 2003:47-52." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=A diskless checkpointing algorithm for super-scale architectures applied to the fast Fourier transform">
                                        <b>[3]</b>
                                         Engelmann C, Geist A.A diskless checkpoint algorithm for super-scale architectures applied to the fast Fourier transform[C]//Proc of the 1st International Workshop on Challenges of Large Applications in Distributed Environments, 2003:47-52.
                                    </a>
                                </li>
                                <li id="9">


                                    <a id="bibliography_4" title=" Boh&#243;rquez E, Rosales E, Castro H.Running MPI applications over an opportunistic infrastructure[C]//Proc of 2015 9th International Conference on Complex, Intelligent, and Software Intensive Systems, 2015:446-453." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Running MPI applications over an opportunistic infrastructure">
                                        <b>[4]</b>
                                         Boh&#243;rquez E, Rosales E, Castro H.Running MPI applications over an opportunistic infrastructure[C]//Proc of 2015 9th International Conference on Complex, Intelligent, and Software Intensive Systems, 2015:446-453.
                                    </a>
                                </li>
                                <li id="11">


                                    <a id="bibliography_5" title=" Gong Yi-fan, He Bing-sheng, Zhou A C.Monetary cost optimizations for MPI-based HPC applications on Amazon clouds:Checkpoints and replicated execution[C]//Proc of the International Conference for High Performance Computing, Networking, Storage and Analysis, 2015:1-12." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Monetary cost optimizations for MPI-based HPC applications on Amazon clouds:Checkpoints and replicated execution">
                                        <b>[5]</b>
                                         Gong Yi-fan, He Bing-sheng, Zhou A C.Monetary cost optimizations for MPI-based HPC applications on Amazon clouds:Checkpoints and replicated execution[C]//Proc of the International Conference for High Performance Computing, Networking, Storage and Analysis, 2015:1-12.
                                    </a>
                                </li>
                                <li id="13">


                                    <a id="bibliography_6" title=" El-Sayed N, Schroeder B.To checkpoint or not to checkpoint:Understanding energy-performance-I/O tradeoffs in HPC ch- eck pointing[C]//Proc of 2014 IEEE International Conference on Cluster Computing, 2014:93-102." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=To checkpoint or not to checkpoint:Understanding energy-performance-I/O tradeoffs in HPC ch- eck pointing">
                                        <b>[6]</b>
                                         El-Sayed N, Schroeder B.To checkpoint or not to checkpoint:Understanding energy-performance-I/O tradeoffs in HPC ch- eck pointing[C]//Proc of 2014 IEEE International Conference on Cluster Computing, 2014:93-102.
                                    </a>
                                </li>
                                <li id="15">


                                    <a id="bibliography_7" title=" BLCR[EB/OL].[2018-08-09].http://crd.lbl.gov/departments/computer-science/CLaSS/research/BLCR/." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=BLCR">
                                        <b>[7]</b>
                                         BLCR[EB/OL].[2018-08-09].http://crd.lbl.gov/departments/computer-science/CLaSS/research/BLCR/.
                                    </a>
                                </li>
                                <li id="17">


                                    <a id="bibliography_8" title=" SCR checkpoint system[EB/OL].[2018-08-09].https://computation.llnl.gov/projects/scalable-checkpoint-restart-for-mpi." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=SCR checkpoint system">
                                        <b>[8]</b>
                                         SCR checkpoint system[EB/OL].[2018-08-09].https://computation.llnl.gov/projects/scalable-checkpoint-restart-for-mpi.
                                    </a>
                                </li>
                                <li id="19">


                                    <a id="bibliography_9" title=" Slurm checkpoint[EB/OL].[2018-08-09].https://slurm.schedmd.com/checkpoint_blcr.html." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Slurm checkpoint">
                                        <b>[9]</b>
                                         Slurm checkpoint[EB/OL].[2018-08-09].https://slurm.schedmd.com/checkpoint_blcr.html.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=JSJK" target="_blank">计算机工程与科学</a>
                2019,41(07),1155-1160 DOI:10.3969/j.issn.1007-130X.2019.07.002            </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm">基于公共云的HPC集群实现及自动伸缩闲时计算研究</span>
                                    </h1>

            </div>
                        <h2>
                                <a href="javascript:;">田永军</a>
                                <a href="javascript:;">何万青</a>
                                <a href="javascript:;">孙相征</a>
                                <a href="javascript:;">余洋</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E9%98%BF%E9%87%8C%E4%BA%91%E8%AE%A1%E7%AE%97%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">阿里云计算有限公司</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>对于HPC用户来说, 计算成本是迁云所考虑的重要因素之一, 阿里云上提供的抢占式实例, 是一种按需实例, 旨在降低使用公共云计算资源成本, 抢占式实例市场价格是波动的, 通常远低于正常的按需实例, 甚至达到正常按需实例的一折。抢占式实例一般会在创建时为用户保留一段最短时间, 过后有可能会被释放, 所以一般适用于无状态的应用场景。提出在公共云上的自动伸缩策略, 其面向通用的HPC集群调度器, 基于用户的应用软件类型、提交作业规律以及用户对性能和成本等多方面需求, 自动在云上部署扩容计算资源, 控制成本。对用户来说, 可以做到”only pay for what you want and what you use”。基于公共云上丰富的资源规格类型和售卖方式, 利用自动伸缩服务, 抢占式实例, 断点续算等技术可以配置低成本的公共云上HPC自动伸缩方案:用户提交作业的同时可以指定成本上限, 自动伸缩服务自动在低于此成本的前提下寻找和扩容抢占式计算资源, 同时利用断点续算功能保证作业在计算资源切换的时候可以继续运算。最后, 通过LAMMPS和GROMACS两个高性能应用实例验证了该策略的可行性和有效性。</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">高性能计算;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%85%AC%E5%85%B1%E4%BA%91&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">公共云;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E8%87%AA%E5%8A%A8%E4%BC%B8%E7%BC%A9&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">自动伸缩;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%96%AD%E7%82%B9%E7%BB%AD%E7%AE%97&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">断点续算;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E9%97%B2%E6%97%B6%E8%AE%A1%E7%AE%97%E4%BC%B8%E7%BC%A9%E6%A8%A1%E5%9E%8B&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">闲时计算伸缩模型;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    田永军 (1982-) , 男, 江苏六合人, 硕士, 工程师, 研究方向为高性能计算和并行计算。E-mail:yongjun.tyj@alibaba-inc.com通信地址:310024浙江省杭州市西湖区阿里巴巴飞天园区3号楼;
                                </span>
                                <span>
                                    何万青 (1972-) , 男, 广东兴宁人, 博士, 资深技术专家, CCF会员 (E200016210M) , 研究方向为高性能计算和云计算。E-mail:wanqing.hwq@alibaba-inc.com通信地址:310024浙江省杭州市西湖区阿里巴巴飞天园区3号楼;
                                </span>
                                <span>
                                    孙相征 (1983-) , 男, 山东枣庄人, 博士, 工程师, 研究方向为高性能计算和并行计算。E-mail:xiangzheng.sxz@alibaba-inc.com通信地址:310024浙江省杭州市西湖区阿里巴巴飞天园区3号楼;
                                </span>
                                <span>
                                    余洋 (1995-) , 男, 安徽阜阳人, 硕士, 工程师, 研究方向为高性能计算和云计算。E-mail:mudi.yy@alibaba-inc.com通信地址:310024浙江省杭州市西湖区阿里巴巴飞天园区3号楼;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2018-10-17</p>

            </div>
                    <h1><b>HPC cluster and low cost auto scaling model based on public cloud</b></h1>
                    <h2>
                    <span>TIAN Yong-jun</span>
                    <span>HE Wan-qing</span>
                    <span>SUN Xiang-zheng</span>
                    <span>YU Yang</span>
            </h2>
                    <h2>
                    <span>Alibaba Cloud Computing Co.Ltd.</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>For many HPC users, computing cost is one important factor for whether moving workloads to the public cloud. Alibaba cloud provides “preemptible instance”. It is an on-demand instance to reduce the cost of using public cloud computing resources. The market price of “preemptible instance” fluctuates and it can be as low as 10% of “pay as you go instance”. And “preemptible instance” cannot be kept as long as users' requirement, and be released due to datacenter scheduler or some other reasons, so it can be used in some stateless scenarios. On the public cloud, based on users' application types, job submission patterns, performance requirements, timing and cost, we propose an auto scaling strategy on the public cloud for general HPC cluster schedulers, which can automatically deploy computing resources and control cost. HPC users only pay for what they want and what they use. Due to abundant resource types and resource rent models, and taking advantages of auto scaling service, “preemptible instance” and application checkpoint/restart, we can supply a low cost auto scaling model. When users submit jobs, they can set their expectation cost, and the auto scaling service will find the “preemptible instance” under this cost setting, and use checkpoint/restart technique to keep job running during computing resource exchanging. Finally, we verify the feasibility and effectiveness of our solution through LAMMPS and GROMACS applications.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=high%20performance%20computing&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">high performance computing;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=public%20cloud&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">public cloud;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=auto%20scaling&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">auto scaling;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=checkpoint%2Frestart&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">checkpoint/restart;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=low%20cost%20scaling%20model&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">low cost scaling model;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                            <b>Author：</b>
                                                        <span>
                                    TIAN Yong-jun, born in 1982, MS, en-gineer, his research interests include high performance computing, and parallel computing.Address:Building 3, Alibaba Apsara Park, Xihu District, Hangzhou 310024, Zhejiang, P.R.China;
                                </span>
                                <span>
                                    HE Wan-qing, born in 1972, PhD, senior technical expert, CCF member (E200016210M) , his research interests include high performance computing, and cloud computing.Address:Building 3, Alibaba Apsara Park, Xihu District, Hangzhou 310024, Zhejiang, P.R.China;
                                </span>
                                <span>
                                    SUN Xiang-zheng, born in 1983, PhD, engineer, his research interests include high performance computing, and parallel computing.Address:Building 3, Alibaba Apsara Park, Xihu District, Hangzhou 310024, Zhejiang, P.R.China;
                                </span>
                                <span>
                                    YU Yang, born in 1995, MS, engineer, his research interests include high perform-ance computing, and cloud computing.Address:Building 3, Alibaba Apsara Park, Xihu District, Hangzhou 310024, Zhejiang, P.R.China;
                                </span>
                    </p>
                                    <p><b>Received：</b> 2018-10-17</p>
                            </div>


        <!--brief start-->
                        <h3 id="21" name="21" class="anchor-tag"><b>1 引言</b></h3>
                <div class="p1">
                    <p id="22">高性能计算HPC (High Performance Computing) 是利用高速网络连接的并行计算集群和并行存储完成大规模数值计算模拟的科研和工程计算的统称, 其应用覆盖了相当广泛的行业, 包括且不限于制造业CAE/CAD仿真、生命科学、石油勘探、气候气象、天体物理、计算金融、影视渲染、机器学习、电磁模拟和数字电路仿真等几乎一切技术计算领域。高性能计算通常在大规模的高吞吐、高硬件配置的超算集群上, 解决前沿、复杂、大规模的研究型或生产型任务。同时, 也存在大量小任务的高性能计算需求, 计算规模在2～4个结点左右, 对计算资源配置要求不苛刻, 但对价格敏感。</p>
                </div>
                <div class="p1">
                    <p id="23">随着云计算和人工智能的崛起, HPC集群在各个领域使用云计算的需求越来越多, 单个集群的规模也越来越大, 更重要的是, HPC用户希望根据集群的负载自动向云上扩容资源, 做到自动伸缩, 而不需要自己申请和释放资源, 用户只需完全关注在自己的应用上。云计算作为基于互联网的技术, 对外提供多样、易扩展的计算资源, 对这部分计算需求有很高的匹配度。</p>
                </div>
                <div class="p1">
                    <p id="24">HPC用户对云的需求是不一样的, 有的用户追求极致性能, 期望作业在越短时间内完成越好, 但愿意为极致的性能买单;也有用户对成本相对敏感, 但作业完成时间并不是很紧迫, 期望在宽松的时间下能获取尽量低成本的计算资源。</p>
                </div>
                <div class="p1">
                    <p id="25">本文重点研究如何使用公共云计算进行高性能计算, 如何在公共云上快速部署和管理 HPC集群, 以及如何有效利用云计算本身特性进行性能和成本控制。公共云上的 HPC 集群在计算资源选型上, 可以利用公共云的计算资源弹性和多样性等优势, 还可以定制计算模型。本文就用户的应用软件类型、提交作业规律以及用户对性能和成本等多方面需求, 利用阿里云的抢占式实例 (也称作竞价实例) , 提出了闲时计算自动伸缩模型。</p>
                </div>
                <div class="p1">
                    <p id="26">抢占式实例是一种按需实例, 旨在降低部分场景下使用云计算资源的成本。抢占式实例市场价格是波动的, 通常远低于正常的按需实例, 例如当前阿里云上甚至能以1分钱每核小时的价格买到抢占式实例。抢占式实例一般会在创建时为用户保留一段最短时间, 过后有可能随时会被释放, 所以一般适用于无状态的应用场景。</p>
                </div>
                <div class="p1">
                    <p id="27">HPC 应用都是有状态的, 所以若要使用低成本的抢占式实例, 就需要协同断点续算技术, 保证作业被中断之后, 还可以续算。本文先讨论基于公共云的HPC集群实现, 再详细讨论自动伸缩模型的原理和实现, 最后使用常用的高性能应用对该模型进行测试和验证。</p>
                </div>
                <h3 id="28" name="28" class="anchor-tag"><b>2 公共云上HPC集群的实现</b></h3>
                <div class="p1">
                    <p id="29">由于HPC用户来自不同的应用领域, 使用的HPC集群调度器类型多种多样, 例如 PBSPro、Slurm、Sun Grid Engine和IBM LSF (Load Sharing Facility) 等并行调度, 计算作业类型差异很大, 因此对计算资源的需求差异也很大:有些 MPI (Message Passing Interface) 作业对集群内结点间带宽要求很高, 有些batch作业属于CPU密集型, 另外现在异构计算在很多应用上也越来越普及。本文提出在公共云上为用户提供一站式的高性能计算服务的云平台, 即HPCaaS (HPC as a Service) 公共云服务, 如图1所示, 并且提供自动伸缩服务<citation id="99" type="reference"><link href="3" rel="bibliography" /><link href="5" rel="bibliography" /><sup>[<a class="sup">1</a>,<a class="sup">2</a>]</sup></citation>, 用户只需定制自动伸缩策略, 例如设定自动伸缩的资源类型、集群伸缩规模、扩容缩容时间间隔和扩容资源比例等, 云服务可以实时监控集群作业负载, 自动扩容计算资源运行作业或者释放空闲资源, 做到对HPC集群的自动管理。</p>
                </div>
                <div class="area_img" id="30">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJK201907002_030.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 HPCaaS和自动伸缩服务" src="Detail/GetImg?filename=images/JSJK201907002_030.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图1 HPCaaS和自动伸缩服务  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJK201907002_030.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Figure 1 HPCaaS and auto scaling service</p>

                </div>
                <div class="p1">
                    <p id="31">阿里云弹性高性能计算平台E-HPC (Elastic High Performance Computing) 就是一种HPCaaS公共云服务, 本文的性能测试和设计都是在阿里云E-HPC弹性高性能计算平台上实现的。E-HPC支持高性能CPU、异构计算GPU实例的IaaS (Infrastructure as a Service) 服务, 提供高性能计算软件栈的PaaS (Platform as a Service) 服务, 以及根据应用模版定制的SaaS (Software as a Service) 服务。</p>
                </div>
                <h3 id="32" name="32" class="anchor-tag"><b>3 HPC低成本计算策略</b></h3>
                <h4 class="anchor-tag" id="33" name="33"><b>3.1 HPC服务云平台设计</b></h4>
                <div class="p1">
                    <p id="34">图2是本文提出的公共云上的HPC服务云平台的设计流程图, 用户在提交作业的时候可以选择计算模型, 系统自动推荐计算资源的规格、网络资源和存储资源等。</p>
                </div>
                <div class="area_img" id="35">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJK201907002_035.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 公共云上HPC服务云平台设计" src="Detail/GetImg?filename=images/JSJK201907002_035.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图2 公共云上HPC服务云平台设计  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJK201907002_035.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Figure 2 Design of HPC platform on public cloud</p>

                </div>
                <div class="p1">
                    <p id="36"> (1) 用户首先在公共云上创建HPC集群, 只需要指定基本信息, 比如头结点规格、登录结点规格和需要安装的应用列表等。</p>
                </div>
                <div class="p1">
                    <p id="37"> (2) 用户选择应用类型, 提交作业。</p>
                </div>
                <div class="p1">
                    <p id="38"> (3) 提交作业之后, 用户根据成本期望值和作业紧迫程度选择计算模型类型 (自动伸缩闲时计算) 。</p>
                </div>
                <div class="p1">
                    <p id="39"> (4) HPCaaS通过分析统计的历史数据和抢占式实例当前价格区间建立推荐模型, 自动选择一种资源规模或者推荐几种资源规模供用户选择。</p>
                </div>
                <div class="p1">
                    <p id="40"> (5) 自动伸缩服务自动扩容推荐的抢占式计算资源, 并将其加入用户HPC集群。</p>
                </div>
                <div class="p1">
                    <p id="41"> (6) 集群调度器分发作业、运行作业、定点缓存checkpoint文件到本地存储或者共享存储中。</p>
                </div>
                <div class="p1">
                    <p id="42"> (7) 运行过程中, HPCaaS系统一旦监控到计算资源被释放, 将继续扩容抢占式资源, 从最近的一次断点继续运行作业, 直到作业运行结束。</p>
                </div>
                <div class="p1">
                    <p id="43"> (8) 计算资源进入空闲状态, 自动伸缩服务自动释放资源。</p>
                </div>
                <h4 class="anchor-tag" id="44" name="44"><b>3.2 闲时计算自动伸缩模型</b></h4>
                <div class="p1">
                    <p id="45">闲时计算自动伸缩策略适用于对成本相对敏感的HPC用户, 并且提交的作业完成时间不紧迫, 不要求在最短的时间内完成运算。该伸缩策略具有如下几个特性:</p>
                </div>
                <div class="p1">
                    <p id="46"> (1) 抢占式实例保证用户的计算资源是低成本的, 根据我们在阿里云E-HPC产品上的测试, 从用户角度看, 抢占式实例价格相当于同等规模正常实例的1～4折。</p>
                </div>
                <div class="p1">
                    <p id="47"> (2) 自动伸缩可以帮助用户自动扩容, 无需用户干预, 用户只需要提交作业, 设定抢占式实例的竞价策略:设定抢占式实例规格、最高出价和扩容缩容时间间隔等。如果抢占式实例当前价格高于用户设定的最高出价, 则扩容失败或者已有实例会被释放, 设定最高出价是为了控制成本在用户可接受范围之内。</p>
                </div>
                <div class="p1">
                    <p id="48"> (3) 断点续算可以保证作业被中断之后, 当有新的竞价实例扩容成功之后, 作业可以继续运算, 而不是重新开始运算。</p>
                </div>
                <div class="p1">
                    <p id="49">目前在HPC领域, 有很多关于MPI支持断点续算 (checkpoint/restart) 技术的研究<citation id="102" type="reference"><link href="7" rel="bibliography" /><link href="9" rel="bibliography" /><link href="11" rel="bibliography" /><link href="13" rel="bibliography" /><sup>[<a class="sup">3</a>,<a class="sup">4</a>,<a class="sup">5</a>,<a class="sup">6</a>]</sup></citation>, MVAPICH2 (虚拟应用程序接口VAPI (Virtual Application Programming Interface) 层上InfiniBand的MPI) 基于BLCR (Berkeley Lab Checkpoint/Restart for LINUX) 实现checkpoint/restart, 并提供checkpoint文件管理<citation id="100" type="reference"><link href="15" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>;OpenMPI设计了模块化的checkpoint/restart机制, 并有基于BLCR的实现;可扩展断点续算SCR (Scalable Checkpoint/Restart) <citation id="101" type="reference"><link href="17" rel="bibliography" /><sup>[<a class="sup">8</a>]</sup></citation>是LLNL (Lawrence Livermore National Laboratory) 开发的一套针对MPI程序的checkpoint/restart库, 提供一套完整的API供用户程序调用, 用户自己决定何时何地触发checkpoint, 适合用户自己开发的MPI程序使用。</p>
                </div>
                <div class="p1">
                    <p id="50">有些HPC领域的应用本身是支持断点续算的, 例如分子动力学领域的应用大尺度原子/分子并行模拟工具LAMMPS (Large-scale Atomic/Molecular Massively Parallel Simulator) 和格罗宁根华讯模拟体系GROMACS (GROningen MAchine for Chemical Simulations) , 渲染应用里的V-Ray也支持断点续算。HPC常用的集群调度器也对断点续算有集成支持, 例如Slurm支持与BLCR集成<citation id="103" type="reference"><link href="19" rel="bibliography" /><sup>[<a class="sup">9</a>]</sup></citation>, 也可以直接使用SCR等checkpoint程序库对作业进行断点续算;LSF支持作业检查点和恢复执行。图3以运行LAMMPS作业为例说明在公共云上闲时计算的过程。</p>
                </div>
                <div class="area_img" id="51">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJK201907002_051.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 HPC作业低成本计算流程" src="Detail/GetImg?filename=images/JSJK201907002_051.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图3 HPC作业低成本计算流程  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJK201907002_051.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Figure 3 Running HPC job using low cost computing model</p>

                </div>
                <h3 id="52" name="52" class="anchor-tag"><b>4 测试及性价比对比</b></h3>
                <div class="p1">
                    <p id="53">以下测试都是在阿里云E-HPC弹性高性能计算平台上进行的。</p>
                </div>
                <h4 class="anchor-tag" id="54" name="54"><b>4.1 LAMMPS作业测试</b></h4>
                <div class="p1">
                    <p id="55">计算结点选用2个1核、1 GiB内存的小规格实例, 算例采用LAMMPS 3d Lennard-Jones melt。</p>
                </div>
                <div class="p1">
                    <p id="56">在正常的按需收费的实例上, 算例运行的信息如表1所示, 总的CPU使用时长为2 h 24 min 49 s。</p>
                </div>
                <div class="area_img" id="57">
                    <p class="img_tit"><b>表1 正常LAMMPS作业计算结果</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"><b>Table 1 Results of normal LAMMPS job</b></p>
                    <p class="img_note"></p>
                    <table id="57" border="1"><tr><td><br />项目</td><td>值</td></tr><tr><td><br />CPU时长</td><td>2 h 24 min 39 s</td></tr><tr><td><br />CPU核数</td><td>2</td></tr><tr><td><br />mem</td><td>52 596 kb</td></tr><tr><td><br />vmem</td><td>669 116 kb</td></tr><tr><td><br />queue</td><td>workq</td></tr><tr><td><br />Job_state</td><td>finished</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="58"> (1) 用户提交作业, 云上HPC服务会进行断点续算设置, 类似于如下的设置, 每迭代1 000步, 写一次checkpoint到文件中:</p>
                </div>
                <div class="p1">
                    <p id="59">run 200000 every 1000 "write_restart/home/testuser1/lennard.restart"</p>
                </div>
                <div class="p1">
                    <p id="60"> (2) 云服务会尝试扩容可抢占式实例, 成功扩容之后, 集群调度器会分发作业开始运行, 可以看到生成了checkpoint文件lennard.restart。</p>
                </div>
                <div class="p1">
                    <p id="61">-rw-r--r--1 testuser1 users 2.7M Jun 26 11:26 lennard.restart</p>
                </div>
                <div class="p1">
                    <p id="62"> (3) 运行过程中若计算结点被抢占, 作业自动释放该计算结点, 作业运行信息如表2所示, 作业已经运行1 h 2 min 4 s, 并且作业会被重新队列, 等待可用计算资源。</p>
                </div>
                <div class="p1">
                    <p id="63"> (4) 自动伸缩服务会不断尝试在公共云上继续扩容抢占式实例, 直到扩容成功, 抢占式实例可用数量是动态变化的, 但是扩容成功之后一般会保留一定的时间。</p>
                </div>
                <div class="area_img" id="64">
                    <p class="img_tit"><b>表2 LAMMPS作业被中断</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"><b>Table 2 LAMMPS job is interrupted</b></p>
                    <p class="img_note"></p>
                    <table id="64" border="1"><tr><td><br />项目</td><td>值</td></tr><tr><td><br />CPU时长</td><td>1 h 2 min 4 s</td></tr><tr><td><br />CPU核数</td><td>2</td></tr><tr><td><br />mem</td><td>55 804 kb</td></tr><tr><td><br />vmem</td><td>670 496 kb</td></tr><tr><td><br />queue</td><td>workq</td></tr><tr><td><br />job_state</td><td>running</td></tr><tr><td><br />exec_vnode</td><td>Compute14, Compute15</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="66"> (5) 作业从最近一次断点继续执行, 直到运行结束。作业信息如表3所示, 从表中可以看出, 作业执行了1 h 41 min 59 s。</p>
                </div>
                <div class="area_img" id="67">
                    <p class="img_tit"><b>表3 LAMMPS作业中断后继续执行</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"><b>Table 3 LAMMPS job restarts</b></p>
                    <p class="img_note"></p>
                    <table id="67" border="1"><tr><td><br />项目</td><td>值</td></tr><tr><td><br />CPU时长</td><td>1 h 41 min 59 s</td></tr><tr><td><br />CPU核数</td><td>2</td></tr><tr><td><br />mem</td><td>49 048 kb</td></tr><tr><td><br />vmem</td><td>666 468 kb</td></tr><tr><td><br />queue</td><td>workq</td></tr><tr><td><br />job_state</td><td>finished</td></tr><tr><td><br />exec_vnode</td><td>Compute16, Compute17</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="68"> (6) 对比是否使用断点续算的相同算例运行时间如表4所示。</p>
                </div>
                <div class="area_img" id="69">
                    <p class="img_tit"><b>表4 LAMMPS作业运行时长对比</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"><b>Table 4 Run time comparison of LAMMPS job</b></p>
                    <p class="img_note"></p>
                    <table id="69" border="1"><tr><td><br />运行方式</td><td>运行总时长</td></tr><tr><td><br />常规LAMMPS作业</td><td>2 h 24 min 49 s</td></tr><tr><td><br />断点续算LAMMPS作业</td><td>2 h 44 min 3 s</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="70">支持断点续算作业总运行时间长的原因是:</p>
                </div>
                <div class="p1">
                    <p id="71">①作业运行过程中是每隔一段时间执行一次checkpoint, 此次测试是每隔7 min执行一次checkpoint, 所以在抢占式实例被释放的时候, 可能最多会增加7 min的计算时间。</p>
                </div>
                <div class="p1">
                    <p id="72">②执行checkpoint, 存储作业信息到文件的过程也要消耗CPU核的时间。</p>
                </div>
                <div class="p1">
                    <p id="73"> (7) 比较两者最终的计算成本, 如表5所示。</p>
                </div>
                <div class="area_img" id="74">
                    <p class="img_tit"><b>表5 LAMMPS作业成本对比</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"><b>Table 5 Cost comparison of LAMMPS job</b></p>
                    <p class="img_note"></p>
                    <table id="74" border="1"><tr><td><br />运行方式</td><td>实例价格<br />/ (元/时) </td><td>作业时长</td><td>作业成本<br />/元</td></tr><tr><td><br />常规LAMMPS作业</td><td>0.143</td><td>2 h 24 min 49 s</td><td>0.343</td></tr><tr><td><br />断点续算LAMMPS作业</td><td>0.016</td><td>2 h 44 min 3 s</td><td>0.044</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <h4 class="anchor-tag" id="75" name="75"><b>4.2 GROMACS作业测试</b></h4>
                <div class="p1">
                    <p id="76">计算结点选用的实例规格包含4个物理核、30 GiB内存和1块NVIDIA P100 GPU卡, 算例采用水分子运动算例。</p>
                </div>
                <div class="p1">
                    <p id="77">在正常的按需收费的实例上, 算例运行的信息如表6所示, 总的CPU使用时长为3 h 2 min 39 s。</p>
                </div>
                <div class="area_img" id="78">
                    <p class="img_tit"><b>表6 GROMACS作业执行结果</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"><b>Table 6 Results of GROMACS job</b></p>
                    <p class="img_note"></p>
                    <table id="78" border="1"><tr><td><br />项目</td><td>值</td></tr><tr><td><br />CPU时长</td><td>3 h 2 min 39 s</td></tr><tr><td><br />CPU核数</td><td>4</td></tr><tr><td><br />GPU</td><td>1</td></tr><tr><td><br />mem</td><td>3 030 168 kb</td></tr><tr><td><br />vmem</td><td>20 118 444 kb</td></tr><tr><td><br />queue</td><td>workq</td></tr><tr><td><br />job_state</td><td>finished</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="79">下面测试断点续算的结果, 首先GROMACS续算需要注意的地方有:</p>
                </div>
                <div class="p1">
                    <p id="80"> (1) 在输入文件pme.mdp里指定迭代步长<i>nsteps</i>。</p>
                </div>
                <div class="p1">
                    <p id="81"> (2) 在提交作业的mpirun命令里指定相关参数:</p>
                </div>
                <div class="p1">
                    <p id="82">-cpi 指定checkpoint文件, 默认为state.cpt;</p>
                </div>
                <div class="p1">
                    <p id="83">-cpt 指定checkpoint文件生成和更新间隔时间, 本次测试设定为10 min;</p>
                </div>
                <div class="p1">
                    <p id="84">-append 指定续算的结果会继续写入先前的输出文件。</p>
                </div>
                <div class="p1">
                    <p id="85">在作业运行一段时间之后, 抢占式实例被释放 (测试过程中可以用主动释放实例来模拟) , 作业进入queued状态, 此时作业信息如表7所示。</p>
                </div>
                <div class="area_img" id="86">
                    <p class="img_tit"><b>表7 GROMACS作业被中断</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"><b>Table 7 GROMACS job is interrupted</b></p>
                    <p class="img_note"></p>
                    <table id="86" border="1"><tr><td><br />项目</td><td>值</td></tr><tr><td><br />CPU时长</td><td>1 h 18 min 31 s</td></tr><tr><td><br />CPU核数</td><td>4</td></tr><tr><td><br />GPU</td><td>1</td></tr><tr><td><br />mem</td><td>2 954 372 kb</td></tr><tr><td><br />vmem</td><td>20 123 224 kb</td></tr><tr><td><br />queue</td><td>workq</td></tr><tr><td><br />job_state</td><td>queued</td></tr><tr><td><br />exec_vnode</td><td>compute6</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="87">在自动伸缩服务又扩容抢占式资源成功之后, 继续运行作业, 直到运行结束, 此时的作业信息如表8所示。</p>
                </div>
                <div class="area_img" id="88">
                    <p class="img_tit"><b>表8 GROMACS作业被中断</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"><b>Table 8 GROMACS job is interrupted</b></p>
                    <p class="img_note"></p>
                    <table id="88" border="1"><tr><td><br />项目</td><td>值</td></tr><tr><td><br />CPU时长</td><td>1 h 52 min 58s</td></tr><tr><td><br />CPU核数</td><td>4</td></tr><tr><td><br />GPU</td><td>1</td></tr><tr><td><br />mem</td><td>300 814 kb</td></tr><tr><td><br />vmem</td><td>20 114 312 kb</td></tr><tr><td><br />queue</td><td>workq</td></tr><tr><td><br />job_state</td><td>finished</td></tr><tr><td><br />exec_vnode</td><td>compute7</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="89">GROMACS在两种运行方式下的最终计算成本如表9所示。</p>
                </div>
                <div class="area_img" id="90">
                    <p class="img_tit"><b>表9 GROMACS作业成本对比</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"><b>Table 9 Cost comparison of GROMACS job</b></p>
                    <p class="img_note"></p>
                    <table id="90" border="1"><tr><td><br />运行方式</td><td>实例价格<br />/ (元/时) </td><td>作业时长</td><td>作业成本/元</td></tr><tr><td><br />常规GROMACS作业</td><td>12.141</td><td>3 h 2 min 39 s</td><td>36.959</td></tr><tr><td><br />断点续算GROMACS作业</td><td>4.97</td><td>3 h 11 min 29 s</td><td>15.861</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <h4 class="anchor-tag" id="91" name="91"><b>4.3 计算时间和成本对比</b></h4>
                <div class="p1">
                    <p id="92">图4比较了LAMMPS和GROMACS在闲时计算和常规计算两种运行模式下的总运行时间, 图5和图6分别对比了LAMMPS和GROMACS在两种运行模式下的计算成本。可以看出在计算时间小幅增加的前提下, 作业计算成本有了大幅的降低。</p>
                </div>
                <div class="area_img" id="93">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJK201907002_093.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 HPC作业运行时间对比" src="Detail/GetImg?filename=images/JSJK201907002_093.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图4 HPC作业运行时间对比  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJK201907002_093.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Figure 4 Computation time comparison of HPC job</p>

                </div>
                <div class="area_img" id="94">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJK201907002_094.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 LAMMPS作业计算成本对比" src="Detail/GetImg?filename=images/JSJK201907002_094.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图5 LAMMPS作业计算成本对比  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJK201907002_094.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Figure 5 Computation cost comparison of LAMMPS job</p>

                </div>
                <div class="area_img" id="95">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJK201907002_095.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 GROMACS作业计算成本对比" src="Detail/GetImg?filename=images/JSJK201907002_095.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图6 GROMACS作业计算成本对比  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJK201907002_095.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit">Figure 6 Computation cost comparison of GROMACS job</p>

                </div>
                <h3 id="96" name="96" class="anchor-tag"><b>5 结束语</b></h3>
                <div class="p1">
                    <p id="97">本文提出在公共云上快速部署和管理HPC集群, 并且自动扩容缩容计算资源, 然后重点阐述利用公共云计算的弹性、资源丰富等优势进行HPC闲时计算的自动伸缩模型。针对通用的HPC集群, 用户可以设定自动伸缩模型, 自动选择计算资源类型, 设定计算成本上限, 从而严格控制计算成本, HPCaaS系统自动推荐和扩容公共云上的抢占式实例, 将其加入集群并运行作业, 用户可以完全聚焦在自己的应用作业上。</p>
                </div>
                <div class="p1">
                    <p id="98">除了闲时计算自动伸缩模型, 将来我们会陆续阐述其他的模型, 比如追求极致性能模型。</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
                        <h3 class="anchor-tag">作者图片</h3>
                <div class="anchor-wrap">
                        <p>
                                    <div class="anchor-box">
                                        <span class="anchor-a"><image id="105" type="formula" href="images/JSJK201907002_10500.jpg" display="inline" placement="inline"><alt></alt></image></span>
                                        <span class="anchor-a">田永军</span>
                                    </div>
                                    <div class="anchor-box">
                                        <span class="anchor-a"><image id="107" type="formula" href="images/JSJK201907002_10700.jpg" display="inline" placement="inline"><alt></alt></image></span>
                                        <span class="anchor-a">何万青</span>
                                    </div>
                                    <div class="anchor-box">
                                        <span class="anchor-a"><image id="109" type="formula" href="images/JSJK201907002_10900.jpg" display="inline" placement="inline"><alt></alt></image></span>
                                        <span class="anchor-a">孙相征</span>
                                    </div>
                                    <div class="anchor-box">
                                        <span class="anchor-a"><image id="111" type="formula" href="images/JSJK201907002_11100.jpg" display="inline" placement="inline"><alt></alt></image></span>
                                        <span class="anchor-a">余洋</span>
                                    </div>
                        </p>
                </div>


        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="3">
                            <a id="bibliography_1" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Auto-Scaling web application in hybrid cloud based on Docker">

                                <b>[1]</b> Li Yun-chun, Xia Yu-meng.Auto-scaling web applications in hybrid cloud based on Docker[C]//Proc of 2016 5th International Conference on Computer Science and Network Technology (ICCSNT) , 2016:75-79.
                            </a>
                        </p>
                        <p id="5">
                            <a id="bibliography_2" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Performance modelling and verification of cloud-based auto-scaling policies">

                                <b>[2]</b> Evangelidis A, Parker D, Bahsoon R.Performance modelling and verification of cloud-based auto-scaling policies[C]//Proc of 2017 17th IEEE/ACM International Symposium on Cluster, Cloud and Grid Computing, 2017:355-364.
                            </a>
                        </p>
                        <p id="7">
                            <a id="bibliography_3" target="_blank" href="http://scholar.cnki.net/result.aspx?q=A diskless checkpointing algorithm for super-scale architectures applied to the fast Fourier transform">

                                <b>[3]</b> Engelmann C, Geist A.A diskless checkpoint algorithm for super-scale architectures applied to the fast Fourier transform[C]//Proc of the 1st International Workshop on Challenges of Large Applications in Distributed Environments, 2003:47-52.
                            </a>
                        </p>
                        <p id="9">
                            <a id="bibliography_4" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Running MPI applications over an opportunistic infrastructure">

                                <b>[4]</b> Bohórquez E, Rosales E, Castro H.Running MPI applications over an opportunistic infrastructure[C]//Proc of 2015 9th International Conference on Complex, Intelligent, and Software Intensive Systems, 2015:446-453.
                            </a>
                        </p>
                        <p id="11">
                            <a id="bibliography_5" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Monetary cost optimizations for MPI-based HPC applications on Amazon clouds:Checkpoints and replicated execution">

                                <b>[5]</b> Gong Yi-fan, He Bing-sheng, Zhou A C.Monetary cost optimizations for MPI-based HPC applications on Amazon clouds:Checkpoints and replicated execution[C]//Proc of the International Conference for High Performance Computing, Networking, Storage and Analysis, 2015:1-12.
                            </a>
                        </p>
                        <p id="13">
                            <a id="bibliography_6" target="_blank" href="http://scholar.cnki.net/result.aspx?q=To checkpoint or not to checkpoint:Understanding energy-performance-I/O tradeoffs in HPC ch- eck pointing">

                                <b>[6]</b> El-Sayed N, Schroeder B.To checkpoint or not to checkpoint:Understanding energy-performance-I/O tradeoffs in HPC ch- eck pointing[C]//Proc of 2014 IEEE International Conference on Cluster Computing, 2014:93-102.
                            </a>
                        </p>
                        <p id="15">
                            <a id="bibliography_7" target="_blank" href="http://scholar.cnki.net/result.aspx?q=BLCR">

                                <b>[7]</b> BLCR[EB/OL].[2018-08-09].http://crd.lbl.gov/departments/computer-science/CLaSS/research/BLCR/.
                            </a>
                        </p>
                        <p id="17">
                            <a id="bibliography_8" target="_blank" href="http://scholar.cnki.net/result.aspx?q=SCR checkpoint system">

                                <b>[8]</b> SCR checkpoint system[EB/OL].[2018-08-09].https://computation.llnl.gov/projects/scalable-checkpoint-restart-for-mpi.
                            </a>
                        </p>
                        <p id="19">
                            <a id="bibliography_9" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Slurm checkpoint">

                                <b>[9]</b> Slurm checkpoint[EB/OL].[2018-08-09].https://slurm.schedmd.com/checkpoint_blcr.html.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="JSJK201907002" />
        <input id="dpi" type="hidden" value="300" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJK201907002&amp;v=MDUxMjY0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVSbUZ5N21WcjNBTHo3QlpiRzRIOWpNcUk5RlpvUUtESDg0dlI=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVDY2UXI4RUJreUIrY05aSWZBQVJmWT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
