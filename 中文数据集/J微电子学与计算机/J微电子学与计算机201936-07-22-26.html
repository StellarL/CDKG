<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637133864145725000%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dWXYJ201907005%26RESULT%3d1%26SIGN%3dPHyU7yQernGlbsExNrnE0LS1lGs%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=WXYJ201907005&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=WXYJ201907005&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WXYJ201907005&amp;v=MDAxNDM0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVWdUZ5bmhVYjNNTWpYU1pMRzRIOWpNcUk5RllZUUtESDg=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#1" data-title="1 引言 ">1 引言</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#3" data-title="2 导向滤波算法 ">2 导向滤波算法</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#18" data-title="3 硬件设计 ">3 硬件设计</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#19" data-title="3.1 数据处理流程">3.1 数据处理流程</a></li>
                                                <li><a href="#35" data-title="3.2 数据运算单元">3.2 数据运算单元</a></li>
                                                <li><a href="#40" data-title="3.3 运算精度的提升">3.3 运算精度的提升</a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#54" data-title="4 模块实现与结果对比 ">4 模块实现与结果对比</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#63" data-title="5 结束语 ">5 结束语</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#21" data-title="图1 数据模式 (RGB normal模式) ">图1 数据模式 (RGB normal模式) </a></li>
                                                <li><a href="#24" data-title="图2 8通道数据流">图2 8通道数据流</a></li>
                                                <li><a href="#26" data-title="图3 同类型数据">图3 同类型数据</a></li>
                                                <li><a href="#29" data-title="图4 数据存储">图4 数据存储</a></li>
                                                <li><a href="#30" data-title="表1 单个SRAM参数">表1 单个SRAM参数</a></li>
                                                <li><a href="#32" data-title="图5 行开头的数据处理">图5 行开头的数据处理</a></li>
                                                <li><a href="#33" data-title="图6 中间数据处理">图6 中间数据处理</a></li>
                                                <li><a href="#38" data-title="图7 DCU的运算设计">图7 DCU的运算设计</a></li>
                                                <li><a href="#39" data-title="表2 单元运算次数统计">表2 单元运算次数统计</a></li>
                                                <li><a href="#51" data-title="图8 均值模块的设计">图8 均值模块的设计</a></li>
                                                <li><a href="#52" data-title="表3 RTL结果与C代码结果比对">表3 RTL结果与C代码结果比对</a></li>
                                                <li><a href="#56" data-title="图9 验证平台">图9 验证平台</a></li>
                                                <li><a href="#59" data-title="图1 0 图像经过导向滤波处理后的效果图">图1 0 图像经过导向滤波处理后的效果图</a></li>
                                                <li><a href="#61" data-title="表4 不同导向滤波算法实现的比较">表4 不同导向滤波算法实现的比较</a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="65">


                                    <a id="bibliography_1" title="冈萨雷斯.数字图像处理[M].3版.北京:电子工业出版社, 2010." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CBBD&amp;filename=9787121110085001&amp;v=MTQ5NjI5dUZDcmxVNzdNSWx3VFhGcXpHYks2SDlETnI0OU5ZZXNQRFJNOHp4VVNtRGQ5U0g3bjN4RTlmYnZuS3JpZlp1&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[1]</b>
                                        冈萨雷斯.数字图像处理[M].3版.北京:电子工业出版社, 2010.
                                    </a>
                                </li>
                                <li id="67">


                                    <a id="bibliography_2" title="LEE J E, CHUNG M K, ALEX A L.Evaluation of anisotropic filters for diffusion tensor imaging[C]//3rd IEEE International Symposium on Biomedical Imaging:Nano to Macro, 2006.Arlington, VA, USA, 2006." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Evaluation of anisotropic filters for diffusion tensor imaging">
                                        <b>[2]</b>
                                        LEE J E, CHUNG M K, ALEX A L.Evaluation of anisotropic filters for diffusion tensor imaging[C]//3rd IEEE International Symposium on Biomedical Imaging:Nano to Macro, 2006.Arlington, VA, USA, 2006.
                                    </a>
                                </li>
                                <li id="69">


                                    <a id="bibliography_3" title="HE K, SUN J, TANG X.Guided image filtering[C]//European Conference on Computer Vision.Berlin, Springer-Verlag, 2010:1-14." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Guided image filtering">
                                        <b>[3]</b>
                                        HE K, SUN J, TANG X.Guided image filtering[C]//European Conference on Computer Vision.Berlin, Springer-Verlag, 2010:1-14.
                                    </a>
                                </li>
                                <li id="71">


                                    <a id="bibliography_4" title="KCU105Board User Guide[EB/OL].https://www.xilinx.com/support/docume ntation/boards_and_kits/kcu105/ug917-kcu105-eval-bd.pdf." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=KCU105Board User Guide">
                                        <b>[4]</b>
                                        KCU105Board User Guide[EB/OL].https://www.xilinx.com/support/docume ntation/boards_and_kits/kcu105/ug917-kcu105-eval-bd.pdf.
                                    </a>
                                </li>
                                <li id="73">


                                    <a id="bibliography_5" title="HOSNI A, RHEMANN C, BLEYER M, et al.Fast cost-volume filtering for visual correspondence and beyond.[J].IEEE Trans Pattern Anal Mach Intell.2013, 35 (2) :504-511." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Fast Cost-Volume Filtering for Visual Correspondence and Beyond">
                                        <b>[5]</b>
                                        HOSNI A, RHEMANN C, BLEYER M, et al.Fast cost-volume filtering for visual correspondence and beyond.[J].IEEE Trans Pattern Anal Mach Intell.2013, 35 (2) :504-511.
                                    </a>
                                </li>
                                <li id="75">


                                    <a id="bibliography_6" title="CHIEH-CHI KAO, JUI-HSIN LAI, SHAO-YICHIEN.VLSI architecture design of guided filter for30frames/s full-HD Video.[J].IEEE Transactions on Circuits and Systems for Video Technology, 2014, 24 (3) :513-524." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=VLSI architecture design of guided filter for30frames/s full-HD Video.">
                                        <b>[6]</b>
                                        CHIEH-CHI KAO, JUI-HSIN LAI, SHAO-YICHIEN.VLSI architecture design of guided filter for30frames/s full-HD Video.[J].IEEE Transactions on Circuits and Systems for Video Technology, 2014, 24 (3) :513-524.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=WXYJ" target="_blank">微电子学与计算机</a>
                2019,36(07),22-26             </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm">基于图像去噪的导向滤波算法的硬件实现</span>
                                    </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E8%AE%B8%E5%8D%9A%E9%97%BB&amp;code=42157094&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">许博闻</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E7%8E%8B%E6%95%8F&amp;code=09601144&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">王敏</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E6%9D%8E%E7%90%9B&amp;code=28370005&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">李琛</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E7%8E%8B%E9%B9%8F%E9%A3%9E&amp;code=41682462&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">王鹏飞</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E7%8E%8B%E5%9B%BD%E5%85%B4&amp;code=29258947&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">王国兴</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E4%B8%8A%E6%B5%B7%E4%BA%A4%E9%80%9A%E5%A4%A7%E5%AD%A6%E7%94%B5%E5%AD%90%E4%BF%A1%E6%81%AF%E4%B8%8E%E7%94%B5%E6%B0%94%E5%AD%A6%E9%99%A2&amp;code=0054402&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">上海交通大学电子信息与电气学院</a>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E4%B8%8A%E6%B5%B7%E9%9B%86%E6%88%90%E7%94%B5%E8%B7%AF%E7%A0%94%E5%8F%91%E4%B8%AD%E5%BF%83%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8&amp;code=0959401&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">上海集成电路研发中心有限公司</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>在图像去噪算法领域, 导向滤波算法在去噪的同时能够保持更多的图像细节, 起到很好的边缘保持效应.相比于其他边缘保持算法, 导向滤波算法运算速度更快, 在CMOS图像传感器领域, 能更快更有效的对图像进行去噪处理.本文在导向滤波原有的算法公式上, 提出一种改进的硬件实现方法, 并应用于图像传感器芯片中, 像素分8通道进入模块进行处理, 采用RGB色彩模式, 算法模块最高时钟频率为100 MHz, 每行最大处理4 800个像素, 一共占用46.875kB片上存储, 以及XCRU040的13%的LUTS资源.</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%AF%BC%E5%90%91%E6%BB%A4%E6%B3%A2&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">导向滤波;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E8%BE%B9%E7%BC%98%E4%BF%9D%E6%8C%81%E7%AE%97%E6%B3%95&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">边缘保持算法;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=CMOS%E5%9B%BE%E5%83%8F%E4%BC%A0%E6%84%9F%E5%99%A8&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">CMOS图像传感器;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E7%A1%AC%E4%BB%B6%E5%AE%9E%E7%8E%B0&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">硬件实现;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    许博闻 男, (1993-) , 硕士, 硕士研究生.研究方向为图像处理算法.E-mail:369920495@qq.com.;
                                </span>
                                <span>
                                    王敏 男, (1993-) , 硕士, 助理工程师.研究方向为生物系统电路集成.;
                                </span>
                                <span>
                                    李琛 男, (1982-) , 博士, 高级工程师.研究方向为人工智能算法与应用.;
                                </span>
                                <span>
                                    王鹏飞 男, (1985-) , 硕士, 高级工程师.研究方向为算法研究与软件工程.;
                                </span>
                                <span>
                                    王国兴 男, (1975-) , 博士, 副教授.研究方向为集成电路设计.;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2018-10-20</p>

                    <p>

                            <b>基金：</b>
                                                        <span>国家重点研发计划支持项目 (2016YFC0105502);</span>
                    </p>
            </div>
                    <h1>Hardware design for image denoising using guided filter</h1>
                    <h2>
                    <span>XU Bo-wen</span>
                    <span>WANG Min</span>
                    <span>LI Chen</span>
                    <span>WANG Peng-fei</span>
                    <span>WANG Guo-xing</span>
            </h2>
                    <h2>
                    <span>School of Electronic Information and Elatrical Engineering, Shanghai Jiao Tong University</span>
                    <span>Shanghai IC R&D Center</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>In the field of image denoising, the guided filter can reserve more image details and has a good edgepreserving effect.Comparing with other edge-preserving algorithm, the guided filter presents a higher efficiency.As a result, in the field of CMOS Image Process (CIS) , the hardware design of the guided filter is able to process image denoising quickly and effectively.In this paper, based on the original algorithm of guided filtering, a hardware implementation method is proposed and used in the CIS.The pixels are divided into 8 channels to enter module for processing.Color mode is RGB.The highest clock frequency is 120 MHz and the pixels number processed per line by the module can reach 4 800.The total amount of the on-chip memory occupied by this module is 46.875 kB.Total LUTS occupy 13%resource of XCKU040.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=guided%20filter&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">guided filter;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=edge-preserving%20algorithm&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">edge-preserving algorithm;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=CMOS%20image%20process&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">CMOS image process;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=hardware%20implementation&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">hardware implementation;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2018-10-20</p>
                                    <p>
                                            </p>
            </div>


        <!--brief start-->
                        <h3 id="1" name="1" class="anchor-tag">1 引言</h3>
                <div class="p1">
                    <p id="2">图像噪声是指存在于图像数据中的不必要的或多余的干扰信息.图像在生成和传输过程中, 会因为这些噪声的而降低图像质量, 为后续的图像处理和图像视觉效应产生不利的影响.因此, 为了抑制噪声, 改善图像质量, 必须对图像进行噪声去除处理.在图像去噪领域, 基本的滤波算法例如中值滤波, 高斯低通滤波<citation id="77" type="reference"><link href="65" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>等属于各向同性滤波, 在处理噪声的同时, 会导致边缘被磨平, 影响图像质量.导向滤波算法是何恺明提出的一个保边滤波的算法, 作为各向异性滤波<citation id="78" type="reference"><link href="67" rel="bibliography" /><sup>[<a class="sup">2</a>]</sup></citation>, 在去噪的同时更好的保存原图像的细节, 特别是边缘纹理部分.在此基础上, 出于图像传感器项目的需求, 本文将导向滤波算法通过硬件实现, 充分利用硬件并行化, 流水线的特点, 提高运算速度, 为整个图像传感器项目不可或缺的一个组成部分.</p>
                </div>
                <h3 id="3" name="3" class="anchor-tag">2 导向滤波算法</h3>
                <div class="p1">
                    <p id="4">这里先简单介绍一下导向滤波的模型<citation id="79" type="reference"><link href="69" rel="bibliography" /><sup>[<a class="sup">3</a>]</sup></citation>.首先, 导向滤波模型认为, 某函数上的一点与邻近部分的点成线性关系, 因此可以用多个局部线性函数表达特定的函数, 当求特定函数上某一点的值时, 对所有线性函数的值做平均即可.在图像方面, 可以认为图像是一个二维函数, 假设输出和输入在一个二维窗口内满足线性关系:</p>
                </div>
                <div class="area_img" id="5">
                            <div class="imgformula">
                                <img class="pFormula" alt="" src="Detail/GetImg?filename=images/WXYJ201907005_00500.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                <p class="formula_seq"></p>
                            </div>

                </div>
                <div class="p1">
                    <p id="6">式中, q<sub>i</sub>是输出图像的值;I是输入图像的值; (a<sub>k</sub>, b<sub>k</sub>) 为窗口位于k时的系数;I既可以是待滤波图像, 也可以是引导图像, 这就是被称为引导滤波的原因.</p>
                </div>
                <div class="p1">
                    <p id="7">为了最小化输出图像q和输入图像p的差值, 下面公式的值最小:</p>
                </div>
                <div class="area_img" id="8">
                            <div class="imgformula">
                                <img class="pFormula" alt="" src="Detail/GetImg?filename=images/WXYJ201907005_00800.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                <p class="formula_seq"></p>
                            </div>

                </div>
                <div class="p1">
                    <p id="9">式中, 输入图像p只能是待滤波图像;∈为正则化参数, 用于防止a<sub>k</sub>过大.根据公式 (2) , 得到系数a<sub>k</sub>, b<sub>k</sub>的表达式.</p>
                </div>
                <div class="area_img" id="10">
                            <div class="imgformula">
                                <img class="pFormula" alt="" src="Detail/GetImg?filename=images/WXYJ201907005_01000.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                <p class="formula_seq"></p>
                            </div>

                </div>
                <div class="p1">
                    <p id="11">式中, μ<sub>k</sub>和σ<sub>k</sub>2为输入图像I在窗口位于k时的均值和方差;|w|为窗口位于k时的像素数量<image id="81" type="formula" href="images/WXYJ201907005_08100.jpg" display="inline" placement="inline"><alt></alt></image>为输入图像p的均值.</p>
                </div>
                <div class="p1">
                    <p id="12">上述公式是针对单个窗口的, 当我们求某一个像素的值时候, 该像素由多个窗口包围, 因此采取的策略是对所有包含该像素的窗口求平均值, 如公式 (5) 所示.</p>
                </div>
                <div class="area_img" id="13">
                            <div class="imgformula">
                                <img class="pFormula" alt="" src="Detail/GetImg?filename=images/WXYJ201907005_01300.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                <p class="formula_seq"></p>
                            </div>

                </div>
                <div class="p1">
                    <p id="14">式中<image id="82" type="formula" href="images/WXYJ201907005_08200.jpg" display="inline" placement="inline"><alt></alt></image>为所有包含像素i的系数的均值.</p>
                </div>
                <div class="p1">
                    <p id="15">当该模型应用于图像去噪时, 引导图像I为输入图像p本身, 因此我们对公式 (3) , (4) 进行简化:</p>
                </div>
                <div class="area_img" id="16">
                            <div class="imgformula">
                                <img class="pFormula" alt="" src="Detail/GetImg?filename=images/WXYJ201907005_01600.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                <p class="formula_seq"></p>
                            </div>

                </div>
                <div class="p1">
                    <p id="17">由公式 (6) 和 (7) 可以看出, 当∈=0时, a=1, b=0, 输出图像为q=I;当∈&gt;0时, 在像素变化很小的区域 (σ<sub>k</sub><sup>2</sup>值很小) , a近似为0, b近似为<image id="83" type="formula" href="images/WXYJ201907005_08300.jpg" display="inline" placement="inline"><alt></alt></image>即对该像素做了一个加权均值滤波处理;在像素变化大的区域 (σ<sub>k</sub><sup>2</sup>值很大) , a近似为1, b近似为0, 对图像的滤波效果很弱, 输出图像近似于输入图像, 有助于保持边缘.这里可以看出?的作用, 用于界定像素的变化范围, ∈越大, 滤波效果越明显.</p>
                </div>
                <h3 id="18" name="18" class="anchor-tag">3 硬件设计</h3>
                <h4 class="anchor-tag" id="19" name="19">3.1 数据处理流程</h4>
                <div class="p1">
                    <p id="20">算法处理单元为5×5的单色通道数据, 处理的图像数据模式为RGB的正常模式, 如图1所示, 用9×9的数据模板从左到右, 从上到下移动, 并从9×9数据的数据中选择其中标写数据具体坐标的5×5数据作为后续算法处理的单元.</p>
                </div>
                <div class="area_img" id="21">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_02100.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 数据模式 (RGB normal模式)" src="Detail/GetImg?filename=images/WXYJ201907005_02100.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图1 数据模式 (RGB normal模式)   <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_02100.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="22">具体硬件实现为, 数据分8通道进入算法处理模块, 通道0～7对应图1中括号中的0～7, 方向同样是先从左到右, 从上到下, 两个通道对应单像素的一行, Ch0和Ch4对应一行中的一类像素, 同样的, (Ch1, Ch5) , (Ch2, Ch6) , (Ch3, Ch7) 分别对应一行中的一类像素, 这样每行的像素, 都是通过两个通道并行进入的, 这大大提高了数据的传输速度.</p>
                </div>
                <div class="p1">
                    <p id="23">由于数据顺序进入, 通过控制模块, 将两个通道的同类数据进行合并, 在实际处理中, 单通道数据位宽为10比特, 合并完的数据为20比特, 从图2可以看出, 8通道的数据进入算法模块后, 组合成4通道20比特的数据进行处理.</p>
                </div>
                <div class="area_img" id="24">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_02400.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 8通道数据流" src="Detail/GetImg?filename=images/WXYJ201907005_02400.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图2 8通道数据流  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_02400.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="25">每一个单色数据对应4个SRAM (300×80) , 数据一共需要缓存4行, 通过控制片选信号 (cs0, cs1, cs2, cs3) 将数据分别存储在4块SRAM中, 如图3所示.同时, 第五行数据进入模块后, 将会有两个功能, 一个是与之前存入的四行, 构成8×5大小的基本模块, 送入到后续运算模块中;二是存入到用于存储第一行数据的SRAM中, 替换老的数据, 最终第五行的数据会完全覆盖第一行数据.</p>
                </div>
                <div class="area_img" id="26">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_02600.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 同类型数据" src="Detail/GetImg?filename=images/WXYJ201907005_02600.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图3 同类型数据  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_02600.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="27">对于四行SRAM的数据刷新采取行卷绕的方式, 并引入mask标志, 用来标志行的顺序, 例如, 开始时, SRAM0-3存储的行数为1, 2, 3, 4, 当第五行的数据完全覆盖第一行时, SRAM0-3存储的行数为4, 1, 2, 3, 同理, 当第二行刷新完时, 变为3, 4, 1, 2, 依次类推.8×5的运算模块一直采用1, 2, 3, 4的四行再加入新的五个像素来计算.mask的刷新是在每行结束时刷新, 关于mask[2:0]定义:0:第一行;1:第二行;2:第三行;3:第四行.</p>
                </div>
                <div class="p1">
                    <p id="28">对于单个SRAM, 一次写8个像素, 即一次在SRAM一个地址写入80比特数据.一次读8个像素, 即在对应的SRAM地址读出80比特数据如表1所示.如图4所示, 将0和4通道的数据合并后, 缓存三个时钟周期, 最终将四组共80比特的数据一并写入SRAM, 因此在物理上, 四个是时钟周期发起一次读写操作, 这样的情况下, 就不需要每时每刻对SRAM进行访问, 减小了一半的访存带宽.</p>
                </div>
                <div class="area_img" id="29">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_02900.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 数据存储" src="Detail/GetImg?filename=images/WXYJ201907005_02900.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图4 数据存储  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_02900.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="30">
                                            <p class="img_tit">
                                                表1 单个SRAM参数
                                                
                                                &nbsp;&nbsp;
                                                <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_03000.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a>
                                                <a class="table downimg" data-tablename="Detail/GetImg?filename=images/WXYJ201907005_03000.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">下载原表</a>
                                            </p>
                                    <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_03000.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <img alt="表1 单个SRAM参数" src="Detail/GetImg?filename=images/WXYJ201907005_03000.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                    </a>

                </div>
                <div class="p1">
                    <p id="31">由于SRAM一次能读出8个像素, 因此, 每次处理的数据模块大小为8×5, 分两个数据运算单元 (DCU) 进行处理, 如图5所示, 对于行开头8个列像素, 0-4列, 1-5列像素分别进入上下两个DCU, 进行运算, 在下一个时钟周期, 2-6列, 3-7列进入.处理完毕后, 下一组8×5数据进入, 同时缓存之前一组8×5中的后4列, 如图6显示, 其中灰色部分为数据缓存部分, 此时, 针对新的数据, 两个DCU需要四个时钟周期将处理数据依次处理, 具体为列 (4-8、5-9) , (6-10、7-11) , (8-12、9-13) , (10-14、11-13) .以此类推, 后面来的数据都按四个时钟周期处理, 缓存上一组数据的后四列, 与新来的数据合起来, 在四个时钟周期内依次处理完, 并缓存新数据的后四列, 等待下一组数据.</p>
                </div>
                <div class="area_img" id="32">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_03200.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 行开头的数据处理" src="Detail/GetImg?filename=images/WXYJ201907005_03200.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图5 行开头的数据处理  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_03200.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="33">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_03300.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 中间数据处理" src="Detail/GetImg?filename=images/WXYJ201907005_03300.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图6 中间数据处理  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_03300.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="34">由于前8列数据处理, 只需要两个时钟周期, 为保持数据连贯性, 前8列数据延迟两个时钟周期进入到DCU模块.这样数据的处理 (4个时钟周期处理完) 与数据的读出 (4个时钟周期发起一次读操作) 便保持了一致性, 这也充分体现出硬件处理流水线的特点.</p>
                </div>
                <h4 class="anchor-tag" id="35" name="35">3.2 数据运算单元</h4>
                <div class="p1">
                    <p id="36">导向滤波模块中的基本运算单元由加法器、减法器、乘法器、除法器构成, 针对5×5单元模块, 每一个数据的输出, 一共需要经过258次运算, 如图7所示, 其中mean模块为均值模块, 用与求矩阵的均值.</p>
                </div>
                <div class="p1">
                    <p id="37">p<sub>5×5</sub>为5×5单色通道数据, 分别求每个点的平方, 并以中心3×3每个点的周围3×3个点的数值来计算平方值的均值, 同时求5×5中心3×3区域每个点的均值以及均值的平方, 通过相减得到方差.根据求得的方差, 得出系数a<sub>k</sub>和b<sub>k</sub>的值, 并根据输入像素得到最终的输出像素.运算单元的所需的计算次数统计如表2.</p>
                </div>
                <div class="area_img" id="38">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_03800.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 DCU的运算设计" src="Detail/GetImg?filename=images/WXYJ201907005_03800.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图7 DCU的运算设计  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_03800.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="39">
                                            <p class="img_tit">
                                                表2 单元运算次数统计
                                                
                                                &nbsp;&nbsp;
                                                <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_03900.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a>
                                                <a class="table downimg" data-tablename="Detail/GetImg?filename=images/WXYJ201907005_03900.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">下载原表</a>
                                            </p>
                                    <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_03900.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <img alt="表2 单元运算次数统计" src="Detail/GetImg?filename=images/WXYJ201907005_03900.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                    </a>

                </div>
                <h4 class="anchor-tag" id="40" name="40">3.3 运算精度的提升</h4>
                <h4 class="anchor-tag" id="41" name="41">3.3.1 a<sub>k</sub>和b<sub>k</sub>小数处理</h4>
                <div class="p1">
                    <p id="42">为了提升算法中间数据精度, a<sub>3×3</sub>和b<sub>3×3</sub>的元素为 (0, 1) 之间的小数, 经过多张图像多组∈参数测试, a<sub>3×3</sub>和b<sub>3×3</sub>放大1 024倍之后, 对最后结果的影响是, 像素灰度值最大差距小于2个灰度LEVEL, 对于10bit的图像数据, 是可以接受的, 因此将数据放大1 024倍, 如公式 (8) 和 (9) 所示:</p>
                </div>
                <div class="area_img" id="43">
                            <div class="imgformula">
                                <img class="pFormula" alt="" src="Detail/GetImg?filename=images/WXYJ201907005_04300.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                <p class="formula_seq"></p>
                            </div>

                </div>
                <div class="p1">
                    <p id="44">相应的, 最终结果如公式 (10) 所示, 需要缩小1 024倍, 在硬件实现中, 我们将它右移10位即可.</p>
                </div>
                <div class="area_img" id="45">
                            <div class="imgformula">
                                <img class="pFormula" alt="" src="Detail/GetImg?filename=images/WXYJ201907005_04500.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                <p class="formula_seq"></p>
                            </div>

                </div>
                <h4 class="anchor-tag" id="46" name="46">3.3.2 均值模块的精度提升</h4>
                <div class="p1">
                    <p id="47">一个数据运算单元一共使用了20次均值子模块, 为其最主要的运算, 作为整个设计而言, 8通道数据的同时刻输出, 一共使用了160次mean模块, 因此对于mean的均值子模块, 为了减少运算数据位宽, 采用图8所示的硬件设计, 将九个数据分4层相加, 这样相比输入数据, 第四层的数据位宽提升4位, 减少了硬件资源的利用, 并采用乘法和移位的方式代替除法器, 缩短运算周期.</p>
                </div>
                <div class="p1">
                    <p id="48">由于去噪模块会对每一个像素都进行多次运算, 因此对精度要求很高, 四舍五入的处理不同, 导致误差传递, 放大, 最终导致数据比对失败.a/9采用了小数点后30位的精度.具体的推导过程如下:</p>
                </div>
                <div class="area_img" id="49">
                            <div class="imgformula">
                                <img class="pFormula" alt="" src="Detail/GetImg?filename=images/WXYJ201907005_04900.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                <p class="formula_seq"></p>
                            </div>

                </div>
                <div class="p1">
                    <p id="50">选取小数后30位, 主要是根据C代码与RTL代码结果比对的结果一步一步修改的, 验证平台在第四节介绍.从表3可以看出, 当精度从26位调整到30位, 未出现差值大于等于1的情况.</p>
                </div>
                <div class="area_img" id="51">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_05100.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图8 均值模块的设计" src="Detail/GetImg?filename=images/WXYJ201907005_05100.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图8 均值模块的设计  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_05100.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="52">
                                            <p class="img_tit">
                                                表3 RTL结果与C代码结果比对
                                                
                                                &nbsp;&nbsp;
                                                <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_05200.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a>
                                                <a class="table downimg" data-tablename="Detail/GetImg?filename=images/WXYJ201907005_05200.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">下载原表</a>
                                            </p>
                                    <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_05200.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <img alt="表3 RTL结果与C代码结果比对" src="Detail/GetImg?filename=images/WXYJ201907005_05200.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                    </a>

                </div>
                <div class="p1">
                    <p id="53">在本节的最后申明一下, 本模块所有涉及到移位或者除法的部分都是采用四舍五入的方式, 而非截位的方式.移位的做法为, 若是向左移10位, 则结果在加上第10位的值即可, 关于除法的做法, 将余数和除数的一半进行对比, 若大于的话, 结果加1, 否则结果不变.</p>
                </div>
                <h3 id="54" name="54" class="anchor-tag">4 模块实现与结果对比</h3>
                <div class="p1">
                    <p id="55">对于算法模块的设计, 仿真验证采用如图9所示, stimulus为激励端, 将激励信号传递给DUT算法设计模块, 产生输出信号给monitor模块, 然后将monitor的数据与C代码产生的数据进行对比, 通过scoreboard展示出来.</p>
                </div>
                <div class="area_img" id="56">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_05600.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图9 验证平台" src="Detail/GetImg?filename=images/WXYJ201907005_05600.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图9 验证平台  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_05600.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="57">对算法进行验证时, 采用基于FPGA的验证测试, 选取型号为XCKU040<citation id="80" type="reference"><link href="71" rel="bibliography" /><sup>[<a class="sup">4</a>]</sup></citation>的Xilinx的FPGA板卡, 采用Synplify工具综合后, 最高时序为100MHz, 其中LUT占用率为13%, DSP利用率为31%.存储采用单端SRAM, 单块宽度80bit, 深度为300, 一共使用了18块SRAM, 总的存储器大小为46.875kB.</p>
                </div>
                <div class="p1">
                    <p id="58">图10为含有噪声的图像进过导向滤波处理后的图像, 可以明显的看出高斯噪声得到了去除.同样的, 我们也针对C代码图像和RTL代码产生的图像进行了对比, C代码与RTL处理效果几乎一样, 看不出任何区别.</p>
                </div>
                <div class="area_img" id="59">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_05900.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 0 图像经过导向滤波处理后的效果图" src="Detail/GetImg?filename=images/WXYJ201907005_05900.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图1 0 图像经过导向滤波处理后的效果图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_05900.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="60">表4总结了之前一些提出的关于导向滤波实现的成果, 同时就处理的图像尺寸、类型和处理效率进行对比.</p>
                </div>
                <div class="area_img" id="61">
                                            <p class="img_tit">
                                                表4 不同导向滤波算法实现的比较
                                                
                                                &nbsp;&nbsp;
                                                <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201907005_06100.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a>
                                                <a class="table downimg" data-tablename="Detail/GetImg?filename=images/WXYJ201907005_06100.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">下载原表</a>
                                            </p>
                                    <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201907005_06100.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <img alt="表4 不同导向滤波算法实现的比较" src="Detail/GetImg?filename=images/WXYJ201907005_06100.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                    </a>

                </div>
                <div class="p1">
                    <p id="62">相比之前文献中的有关CPU, GPU和ASIC的设计, 我们提出的设计的输出, 每秒处理的图像要提升很多, 模块处理的像素大小为3 504×4 672, 比起1M的像素大小, 提升16倍, 同等像素下, 每秒处理速度同样提升16倍, 而跟2.07M的像素相比, 速度提升约为8倍.由此可见, 本设计对于像素的处理效率要比之前的设计高很多.</p>
                </div>
                <h3 id="63" name="63" class="anchor-tag">5 结束语</h3>
                <div class="p1">
                    <p id="64">本论文提出基于图像去噪的导向滤波算法的硬件设计, 处理的最大像素为3 505×4 672, 处理图像格式为RGB模式, 基于XCKU040的FPGA板卡, 最高时序为100 MHz, 占用LUT6%, 并占用了总大小为46.875kB片上存储.相比之前的设计而言, 占用存储率更低, 处理效率更高.本算法作为16M像素CMOS图像传感器项目的一部分, 在FPGA上验证完成后, 会参与后续的整体项目流片, 后续的工作是在流片回来后验证算法的功能和处理效果.</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="65">
                            <a id="bibliography_1" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CBBD&amp;filename=9787121110085001&amp;v=MjMwOTRybFU3N01JbHdUWEZxekdiSzZIOUROcjQ5Tlllc1BEUk04enhVU21EZDlTSDduM3hFOWZidm5LcmlmWnU5dUZD&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[1]</b>冈萨雷斯.数字图像处理[M].3版.北京:电子工业出版社, 2010.
                            </a>
                        </p>
                        <p id="67">
                            <a id="bibliography_2" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Evaluation of anisotropic filters for diffusion tensor imaging">

                                <b>[2]</b>LEE J E, CHUNG M K, ALEX A L.Evaluation of anisotropic filters for diffusion tensor imaging[C]//3rd IEEE International Symposium on Biomedical Imaging:Nano to Macro, 2006.Arlington, VA, USA, 2006.
                            </a>
                        </p>
                        <p id="69">
                            <a id="bibliography_3" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Guided image filtering">

                                <b>[3]</b>HE K, SUN J, TANG X.Guided image filtering[C]//European Conference on Computer Vision.Berlin, Springer-Verlag, 2010:1-14.
                            </a>
                        </p>
                        <p id="71">
                            <a id="bibliography_4" target="_blank" href="http://scholar.cnki.net/result.aspx?q=KCU105Board User Guide">

                                <b>[4]</b>KCU105Board User Guide[EB/OL].https://www.xilinx.com/support/docume ntation/boards_and_kits/kcu105/ug917-kcu105-eval-bd.pdf.
                            </a>
                        </p>
                        <p id="73">
                            <a id="bibliography_5" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Fast Cost-Volume Filtering for Visual Correspondence and Beyond">

                                <b>[5]</b>HOSNI A, RHEMANN C, BLEYER M, et al.Fast cost-volume filtering for visual correspondence and beyond.[J].IEEE Trans Pattern Anal Mach Intell.2013, 35 (2) :504-511.
                            </a>
                        </p>
                        <p id="75">
                            <a id="bibliography_6" target="_blank" href="http://scholar.cnki.net/result.aspx?q=VLSI architecture design of guided filter for30frames/s full-HD Video.">

                                <b>[6]</b>CHIEH-CHI KAO, JUI-HSIN LAI, SHAO-YICHIEN.VLSI architecture design of guided filter for30frames/s full-HD Video.[J].IEEE Transactions on Circuits and Systems for Video Technology, 2014, 24 (3) :513-524.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="WXYJ201907005" />
        <input id="dpi" type="hidden" value="300" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WXYJ201907005&amp;v=MDAxNDM0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVWdUZ5bmhVYjNNTWpYU1pMRzRIOWpNcUk5RllZUUtESDg=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
