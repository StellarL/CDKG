<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637133312624971250%26DBCODE%3dCJFD%26TABLEName%3dCJFDTEMP%26FileName%3dWXYJ201912001%26RESULT%3d1%26SIGN%3dlSSYl9EFYfa22oTVoB5RUTWfssU%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=WXYJ201912001&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=WXYJ201912001&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WXYJ201912001&amp;v=MDU4NDI4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplVnZGeURuVnJ6SU1qWFNaTEc0SDlqTnJZOUZaWVFLREg=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#19" data-title="1 &lt;b&gt;引言&lt;/b&gt; ">1 <b>引言</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#22" data-title="2 &lt;b&gt;时间感知整形技术&lt;/b&gt; ">2 <b>时间感知整形技术</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#25" data-title="3 &lt;b&gt;带宽量化为时隙&lt;/b&gt; ">3 <b>带宽量化为时隙</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#33" data-title="4 TAS&lt;b&gt;机制设计与实现&lt;/b&gt; ">4 TAS<b>机制设计与实现</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#34" data-title="4.1 Cavium &lt;b&gt;多核网络处理器&lt;/b&gt;">4.1 Cavium <b>多核网络处理器</b></a></li>
                                                <li><a href="#36" data-title="4.2 &lt;b&gt;架构设计&lt;/b&gt;">4.2 <b>架构设计</b></a></li>
                                                <li><a href="#45" data-title="4.3 TAS&lt;b&gt;引擎&lt;/b&gt;">4.3 TAS<b>引擎</b></a></li>
                                                <li><a href="#50" data-title="4.4 CS&lt;b&gt;自计数法&lt;/b&gt;">4.4 CS<b>自计数法</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#58" data-title="5 &lt;b&gt;实验评估&lt;/b&gt; ">5 <b>实验评估</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#59" data-title="5.1 TAS&lt;b&gt;整形测试&lt;/b&gt;">5.1 TAS<b>整形测试</b></a></li>
                                                <li><a href="#68" data-title="5.2 &lt;b&gt;保护时隙校准&lt;/b&gt;">5.2 <b>保护时隙校准</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#74" data-title="6 &lt;b&gt;结束语&lt;/b&gt; ">6 <b>结束语</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#29" data-title="&lt;b&gt;图&lt;/b&gt;1 CS&lt;b&gt;与&lt;/b&gt;PS&lt;b&gt;映射方法示意图&lt;/b&gt;"><b>图</b>1 CS<b>与</b>PS<b>映射方法示意图</b></a></li>
                                                <li><a href="#37" data-title="&lt;b&gt;图&lt;/b&gt;2 &lt;b&gt;基于多核网络处理器的&lt;/b&gt;TAS&lt;b&gt;机制功能模块图&lt;/b&gt;"><b>图</b>2 <b>基于多核网络处理器的</b>TAS<b>机制功能模块图</b></a></li>
                                                <li><a href="#54" data-title="&lt;b&gt;图&lt;/b&gt;3 &lt;b&gt;保护时隙调整算法流程图&lt;/b&gt;"><b>图</b>3 <b>保护时隙调整算法流程图</b></a></li>
                                                <li><a href="#61" data-title="&lt;b&gt;表&lt;/b&gt;1 &lt;b&gt;多核网络处理器系统参数描述&lt;/b&gt;"><b>表</b>1 <b>多核网络处理器系统参数描述</b></a></li>
                                                <li><a href="#62" data-title="&lt;b&gt;图&lt;/b&gt;4 TAS&lt;b&gt;机制测试环境示意图&lt;/b&gt;"><b>图</b>4 TAS<b>机制测试环境示意图</b></a></li>
                                                <li><a href="#65" data-title="&lt;b&gt;表&lt;/b&gt;2 TAS&lt;b&gt;时隙配置&lt;/b&gt;"><b>表</b>2 TAS<b>时隙配置</b></a></li>
                                                <li><a href="#67" data-title="&lt;b&gt;图&lt;/b&gt;5 TAS &lt;b&gt;机制功能测试结果&lt;/b&gt;"><b>图</b>5 TAS <b>机制功能测试结果</b></a></li>
                                                <li><a href="#71" data-title="&lt;b&gt;表&lt;/b&gt;3 &lt;b&gt;使能&lt;/b&gt;PB&lt;b&gt;调整前/后接收时间采集&lt;/b&gt;"><b>表</b>3 <b>使能</b>PB<b>调整前/后接收时间采集</b></a></li>
                                                <li><a href="#72" data-title="&lt;b&gt;图&lt;/b&gt;6 &lt;b&gt;保护时隙调整算法效果评估&lt;/b&gt;"><b>图</b>6 <b>保护时隙调整算法效果评估</b></a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="3">


                                    <a id="bibliography_1" >
                                        <b>[1]</b>
                                     MESSENGER J L.Time-Sensitive Networking:An Introduction [J].IEEE Communications Standards Magazine,2018,2 (2):29-33.</a>
                                </li>
                                <li id="5">


                                    <a id="bibliography_2" title=" 朱明.5G中网络切片研究的现状与挑战 [J].网络新媒体技术,2018,7 (1):1-6." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WJSY201801001&amp;v=MTY1NjhIOW5Ncm85RlpZUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVWdkZ5RG5WcnpJTWlmWWQ3RzQ=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[2]</b>
                                         朱明.5G中网络切片研究的现状与挑战 [J].网络新媒体技术,2018,7 (1):1-6.
                                    </a>
                                </li>
                                <li id="7">


                                    <a id="bibliography_3" >
                                        <b>[3]</b>
                                     D&#252;RR F,NAYAK N G.No-wait packet scheduling for IEEE time-sensitive networks (TSN)[C]//Proceedings of the 24th International Conference on Real-Time Networks and Systems.Brest,France:ACM,2016:203-212.</a>
                                </li>
                                <li id="9">


                                    <a id="bibliography_4" >
                                        <b>[4]</b>
                                     NAYAK N G,D&#252;RR F,ROTHERMEL K.Time-sensitive Software-defined Network (TSSDN) for Real-time Applications[C]// Proceedings of the 24th International Conference on Real-Time Networks and Systems.Brest,France:ACM,2016:193-202.</a>
                                </li>
                                <li id="11">


                                    <a id="bibliography_5" title=" 杨吉喆,王玲玲,陆建德.基于Octeon多核网络处理器的IPv6联动IPS研究与设计 [J].微电子学与计算机,2011,28 (12):79-83." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WXYJ201112020&amp;v=MTg2NzNZOUhaSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplVnZGeURuVnJ6SU1qWFNaTEc0SDlETnI=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[5]</b>
                                         杨吉喆,王玲玲,陆建德.基于Octeon多核网络处理器的IPv6联动IPS研究与设计 [J].微电子学与计算机,2011,28 (12):79-83.
                                    </a>
                                </li>
                                <li id="13">


                                    <a id="bibliography_6" title=" 吴霖.基于多核网络处理器的P2P高速流量识别系统的设计与实现 [D].苏州:苏州大学,2010." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CMFD&amp;filename=2010153098.nh&amp;v=MDY3MTBWdkZ5RG5WcnpJVjEyNkhySzlIZEhGcDVFYlBJUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmU=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[6]</b>
                                         吴霖.基于多核网络处理器的P2P高速流量识别系统的设计与实现 [D].苏州:苏州大学,2010.
                                    </a>
                                </li>
                                <li id="15">


                                    <a id="bibliography_7" >
                                        <b>[7]</b>
                                     基于多核网络处理器的流控技术研究 [D].北京:北京邮电大学,2014.</a>
                                </li>
                                <li id="17">


                                    <a id="bibliography_8" >
                                        <b>[8]</b>
                                     IEEE.802.1Qbv-2015.IEEE Standard for Local and metropolitan area networks -Bridges and Bridged Networks-Amendment 25:Enhancements for Scheduled Traffic [S].New York,NY,USA:IEEE,2016.</a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=WXYJ" target="_blank">微电子学与计算机</a>
                2019,36(12),1-5+10             </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>基于多核网络处理器的时间感知整形技术研究与实现</b></span>
                                    </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E8%B4%BE%E6%AD%A3%E4%B9%89&amp;code=36908625&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">贾正义</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E9%99%88%E6%99%93&amp;code=09682411&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">陈晓</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E7%8E%8B%E5%8A%B2%E6%9E%97&amp;code=09591101&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">王劲林</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%8F%B6%E6%99%93%E8%88%9F&amp;code=28941123&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">叶晓舟</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E4%B8%AD%E5%9B%BD%E7%A7%91%E5%AD%A6%E9%99%A2%E5%A3%B0%E5%AD%A6%E7%A0%94%E7%A9%B6%E6%89%80&amp;code=0177578&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">中国科学院声学研究所</a>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E4%B8%AD%E5%9B%BD%E7%A7%91%E5%AD%A6%E9%99%A2%E5%A4%A7%E5%AD%A6%E7%94%B5%E5%AD%90%E7%94%B5%E6%B0%94%E4%B8%8E%E9%80%9A%E4%BF%A1%E5%B7%A5%E7%A8%8B%E5%AD%A6%E9%99%A2&amp;code=1698842&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">中国科学院大学电子电气与通信工程学院</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>时间感知整形(Time Aware Shaper,TAS)是时间敏感网络(Time-Sensitive Network,TSN)的关键机制,对于TAS的研究与实现具有重要意义.基于多核网络处理器设计了TAS机制功能模块结构和TAS引擎处理流程,针对由于内核时钟与PTP(Precision Time Protocol)时钟存在误差而导致的时隙长度偏差问题,提出了调整保护时隙算法来校正时隙.最后,基于Cavium多核网络处理器实现了TAS机制,实验结果表明:TAS机制可以按照预配置时隙发包;增加保护时隙调整,可以有效的校正时隙误差,增加TAS机制的鲁棒性.</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%97%B6%E9%97%B4%E6%95%8F%E6%84%9F%E7%BD%91%E7%BB%9C&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">时间敏感网络;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=TSN&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">TSN;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%97%B6%E9%97%B4%E6%84%9F%E7%9F%A5%E6%95%B4%E5%BD%A2&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">时间感知整形;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%A4%9A%E6%A0%B8%E7%BD%91%E7%BB%9C%E5%A4%84%E7%90%86%E5%99%A8&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">多核网络处理器;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    贾正义,男,(1991-),博士研究生.研究方向为软件定义网络、时间敏感网络.E-mail:jiazy@dsp.ac.cn;
                                </span>
                                <span>
                                    陈晓,男,(1964-),硕士,研究员.研究方向可编程网络、软件定义网络.;
                                </span>
                                <span>
                                    王劲林,男,(1964-),硕士,研究员.研究方向为5G网络与信息安全、时间敏感网络.;
                                </span>
                                <span>
                                    叶晓舟,男,(1980-),博士,研究员.研究方向5G网络与信息安全.;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2019-03-13</p>

                    <p>

                            <b>基金：</b>
                                                        <span>国家科技重大专项(2017ZX03001019);</span>
                                <span>中科院先导专项(XDC02010701);</span>
                    </p>
            </div>
                    <h1><b>Research and implementation of Time-Aware Shaping mechanism based on multi-core network processor</b></h1>
                    <h2>
                    <span>JIA Zheng-yi</span>
                    <span>CHEN Xiao</span>
                    <span>WANG Jin-lin</span>
                    <span>YE Xiao-zhou</span>
            </h2>
                    <h2>
                    <span>Institute of Acoustics, Chinese Academy of Sciences</span>
                    <span>School of Electronic, Electrical and Communication Engineering,University of Chinese Academy of Sciences</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>The Time-Sensitive Networks(TSN) provides important network technology support for “Made in China 2025” plan. The design and implementation of the Time Aware Shaper(TAS), the fundamental mechanism of TSN, is of great significance. In this paper, based on the multi-core network processor, we propose a method for quantifying the bandwidth into time slots and design the function module structure and the processing flow of the TAS mechanism. Moreover, for the problem of time slot length variation caused by the error between the CPU clock and the PTP(Precision Time Protocol) clock, we propose a protection band adjustment algorithm to correct the time slot of the port. Finally, we develop the TAS mechanism based on the Cavium multi-core network processor. The experimental results show that the TAS mechanism can send packets according to the pre-allocated time slots. Besides, enabling the protection band adjustment can effectively correct the time slot error and increase the robustness of the TAS mechanism.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Time-Sensitive%20Networks&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Time-Sensitive Networks;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Time%20Aware%20Shaper&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Time Aware Shaper;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=multi-core%20network%20processor&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">multi-core network processor;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2019-03-13</p>
                                    <p>
                                            </p>
            </div>


        <!--brief start-->
                        <h3 id="19" name="19" class="anchor-tag">1 <b>引言</b></h3>
                <div class="p1">
                    <p id="20">IEEE时间敏感网络<citation id="76" type="reference"><link href="3" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>(Time-Sensitive Networking,TSN)能够为工业控制网络、5G任务关键型网络切片提供底层传输技术支撑<citation id="77" type="reference"><link href="5" rel="bibliography" /><sup>[<a class="sup">2</a>]</sup></citation>.TSN工作组开放了IEEE820.1Qbv标准,然而该标准只是提出了时间感知整形(Time Aware Shaper,TAS)机制的框架结构,如何将带宽量化为时隙,如何结合硬件平台实现TAS机制,标准中并未提及.此外,目前关于TAS机制的研究主要集中于时隙调度算法研究<citation id="78" type="reference"><link href="7" rel="bibliography" /><link href="9" rel="bibliography" /><sup>[<a class="sup">3</a>,<a class="sup">4</a>]</sup></citation>,很少有文章讨论上述问题.</p>
                </div>
                <div class="p1">
                    <p id="21">多核网络处理器具有高并行处理能力,已经成功应用于高速流处理及协议分析与控制<citation id="79" type="reference"><link href="11" rel="bibliography" /><sup>[<a class="sup">5</a>]</sup></citation>,流量识别<citation id="80" type="reference"><link href="13" rel="bibliography" /><sup>[<a class="sup">6</a>]</sup></citation>和流量控制<citation id="81" type="reference"><link href="15" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>,是TAS机制实现的理想平台.基于多核网络处理器,本文研究了TAS机制设计与实现方法.</p>
                </div>
                <h3 id="22" name="22" class="anchor-tag">2 <b>时间感知整形技术</b></h3>
                <div class="p1">
                    <p id="23">TAS机制在交换节点的每个输出端口,都有优先级为0～7的8个输出队列.端口按周期从队列取包发送,每个周期分为若干个时间片,在每个时间片内只能从一个或多个选定的队列取包发送,具体队列选择策略由开关控制列表(Gate Control List)决定.队列选择控制列表由二元组{时间片,队列状态}组成,其中“队列状态”由8位{0,1}二进制数标识,对应8个优先级队列.“1”代表队列被选中,即当前时间片内,从该队列取包并发送;“0”代表队列关闭,即当前时间片内,该队列不允许发包<citation id="82" type="reference"><link href="17" rel="bibliography" /><sup>[<a class="sup">8</a>]</sup></citation>.</p>
                </div>
                <div class="p1">
                    <p id="24">由上可知,TAS机制的关键是时隙的分配和按时隙发包机制.所以,实现时间感知整形机制需要完成两方面工作:(1) 将带宽量化为时隙,建立时隙资源池.(2)基于多核网络处理器实现TAS按时隙发包机制.</p>
                </div>
                <h3 id="25" name="25" class="anchor-tag">3 <b>带宽量化为时隙</b></h3>
                <div class="p1">
                    <p id="26">针对由于带宽资源竞争产生的延迟抖动问题,TAS机制通过将带宽量化为时隙,按时隙进行数据转发,实现业务带宽资源预留.多核网络处理器是以包为单位处理数据流的,带宽计量单位为pps(packet per second).对于多核网络处理器,设备的吞吐并非只取决于端口带宽,还取决于设备CPU处理能力.因此,我们将时隙分为端口时隙和内核时隙.</p>
                </div>
                <div class="p1">
                    <p id="27">端口时隙(Port Slot,PS):每个输出端口时分复用,端口按周期T发包,每个周期T内部,划分成N个时隙,这些时隙称为PS.所有TSN设备的PS周期和数量都是相同的,全网时钟同步后,按照PS来进行时隙的调度和分配.</p>
                </div>
                <div class="p1">
                    <p id="28">内核时隙(Core Slot,CS):每个CPU按周期T处理包,每个周期T内部,划分成M个CS,每个CS处理<i>m</i>个数据包(<i>m</i>≥1,整数).所有端口时分复用CPU,共享CPU的CS.CS是可调整的,与设备相关的.若<i>CS</i><sub><i>len</i></sub>为CS长度,那么设备带宽粒度<i>bw</i>=<i>m</i>/<i>CS</i><sub><i>len</i></sub>(pps).由于每个流只有在分配到的时隙内才可以被处理,所以如果为优先业务流分配<i>n</i>个时隙,则为优先业务流预留的带宽为BW=<i>n</i>*<i>bw</i>(pps).</p>
                </div>
                <div class="area_img" id="29">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201912001_029.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 CS与PS映射方法示意图" src="Detail/GetImg?filename=images/WXYJ201912001_029.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>1 CS<b>与</b>PS<b>映射方法示意图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201912001_029.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="30">在交换机启动时,交换机可以得到CS长度<i>CS</i><sub><i>len</i></sub>和PS长度<i>PS</i><sub><i>len</i></sub>信息,并且满足条件(<i>CS</i><sub><i>len</i></sub> ≤ <i>PS</i><sub><i>len</i></sub>).如图 1所示,一个PS长度可能等于多个CS.如果<i>CS</i><sub><i>len</i></sub>不能被<i>PS</i><sub><i>len</i></sub>整除,那么在一个PS内,经过若干个CS后,剩余长度会不足一个CS,此时,我们需要停止处理数据包,否则会侵占下一个PS.这里我们将PS剩余的不足一个CS的部分作为保护时隙(Protect Band,PB),防止在时隙快要结束时开始处理一个新的数据包,从而侵占了下一个PS的时间.PB还有另外一个重要作用,我们在TAS引擎设计里会详细介绍.</p>
                </div>
                <div class="p1">
                    <p id="31">在实际工程实现中,在单个核心上,每隔<i>CS</i><sub><i>perps</i></sub>个CS,我们进入保护时隙PB,在PB内我们不做任何数据处理,只是等待PB结束.这里<i>CS</i><sub><i>perps</i></sub>= <i>PS</i><sub><i>len</i></sub>/<i>CS</i><sub><i>len</i></sub>, <i>PB</i><sub><i>len</i></sub>=<i>PS</i><sub><i>len</i></sub>% <i>CS</i><sub><i>len</i></sub>;所有核的CS总数<i>TM</i>=<i>CS</i><sub><i>perps</i></sub>*<i>N</i>*<i>C</i><sub><i>num</i></sub>构成时隙资源池,其中<i>N</i>为一个周期内的PS数量,<i>C</i><sub><i>num</i></sub>为内核数量.</p>
                </div>
                <div class="p1">
                    <p id="32">在带宽量化为时隙后,我们可以进行时隙的分配.由于多个端口是可以并行发包的,所以每个端口的时隙理论上是独立的,但是内核在一个PS内能并行处理的包数量(CS)是有限的,所以端口实际的可用时隙是受到CS的限制的.所以时隙的分配方式是:首先根据转发路径确定转发端口;申请该端口的时隙;端口再向时隙资源池申请CS.</p>
                </div>
                <h3 id="33" name="33" class="anchor-tag">4 TAS<b>机制设计与实现</b></h3>
                <h4 class="anchor-tag" id="34" name="34">4.1 Cavium <b>多核网络处理器</b></h4>
                <div class="p1">
                    <p id="35">Cavium OCTEON II 处理器支持两种软件执行环境:(1)SE (Simple Executive)环境,是一种实时操作系统.SE 环境提供了一套硬件的 API.应用可以直接管理底层的处理核心、内存、协处理器等硬件资源.在实时操作系统下,没有系统调用、进程调度的开销, 也没有内核空间与用户空间区分带来的内存复制开销.利用OCTEON 消息机制,应用可以轮询获取报文,进行实时处理. SE 环境适合对性能和延迟要求高的应用,适合用于TAS机制的实现.(2)SMP (Symmetric Multi-Processing) Linux 环境,可以运行于一个或多个处理核心上.借助 Linux 通用和可移植的运行环境,用户可以非常灵活地搭建和部署各类应用. 相对 SE 环境而言, Linux 环境的报文处理性能较低,适用于对灵活性和可移植性要求较高的应用,因此Linux环境可用于时隙的配置和管理.</p>
                </div>
                <h4 class="anchor-tag" id="36" name="36">4.2 <b>架构设计</b></h4>
                <div class="area_img" id="37">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201912001_037.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 基于多核网络处理器的TAS机制功能模块图" src="Detail/GetImg?filename=images/WXYJ201912001_037.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>2 <b>基于多核网络处理器的</b>TAS<b>机制功能模块图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201912001_037.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="38">一个典型的逻辑交换机主要包含管理单元与转发单元,如图 2所示,我们在图中只显示了与TAS相关的部分.</p>
                </div>
                <div class="p1">
                    <p id="39">管理单元主要负责更新和维护TAS配置信息,包括业务流与端口队列的映射,以及TAS引擎转发时隙与端口队列的映射关系.</p>
                </div>
                <div class="p1">
                    <p id="40">时隙-队列映射.我们在每个端口都为时间敏感流预留相应队列,即时间敏感业务流与队列实现一对一映射.同时,我们在为业务分配CS,将申请到的CS与该队列绑定.</p>
                </div>
                <div class="p1">
                    <p id="41">转发单元主要负责TSN业务流的识别与添加队列.在识别数据流类型后,根据预先配置的业务流和队列映射信息,将数据流缓存到相应队列.</p>
                </div>
                <div class="p1">
                    <p id="42">数据流的转发是由TAS引擎完成.根据控制器下发的时隙与队列绑定关系,TAS引擎根据传输控制列表来按时隙从相应队列中取包发送.如图 2所示,TAS引擎由时钟驱动,根据时间信息来查询相应的队列,然后从相应端口转发,具体TAS引擎实现我们在后边详细讨论.</p>
                </div>
                <div class="p1">
                    <p id="43">时钟为全局同步时钟.通过运行PTP精准时钟同步协议,实现与其他设备的时钟同步.</p>
                </div>
                <div class="p1">
                    <p id="44">PKO硬件协处理器即Packet-Output Processing 单元,维护发送队列,提供硬件卸载 TCP/UDP 校验和功能.PKO 支持多个优先级队列,静态优先级队列中的报文总是会优先处理;若静态优先级队列为空,则采用加权公平轮询算法(Weighted Fair Queuing, WFQ)访问剩余队列.</p>
                </div>
                <h4 class="anchor-tag" id="45" name="45">4.3 TAS<b>引擎</b></h4>
                <div class="p1">
                    <p id="46">TAS引擎算法流程主要包含以下步骤:</p>
                </div>
                <div class="p1">
                    <p id="47">读取PTP时钟.TAS机制的前提条件为全网设备时钟同步.多核网络处理器的Precision Time Protocol 单元,提供 96 比特的 PTP 专用时钟.以PTP时钟作为参考时间,进行按时隙调度.</p>
                </div>
                <div class="p1">
                    <p id="48">计算当前所处CS,根据CS查询队列.控制器预先配置开关控制列表(GCL),即CS与队列的映射关系,内核根据当前时隙可以查询到相应队列,取包发送.如果队列为空,则从默认队列(普通数据流)中取包发送.</p>
                </div>
                <div class="p1">
                    <p id="49">时隙更新.每次按时隙取包发送后,如果都重头开始,读取PTP时钟并计算CS,会引入较大的计算开销,占用CPU资源,从而产生带宽浪费.另一方面,PTP时钟同步调整间隔周期是1秒,所以在1秒内连续访问PTP时钟也并不能增加时间同步精确度.所以,为了节省CPU资源,在一定周期内,我们考虑采用CS自计数法.</p>
                </div>
                <h4 class="anchor-tag" id="50" name="50">4.4 CS<b>自计数法</b></h4>
                <div class="p1">
                    <p id="51">每个CS处理一个数据包,在取包发送后,CS更新:<i>CS</i><sub><i>next</i></sub> = (<i>CS</i><sub><i>last</i></sub>+1)%<i>M</i>,<i>M</i>为单核CS总数,<i>CS</i><sub><i>last</i></sub>为更新前的CS;判断<i>CS</i><sub><i>next</i></sub>%<i>CS</i><sub><i>perps</i></sub>是否为0,如果为0则进入保护时隙PB,等待PB结束,CS再次更新.</p>
                </div>
                <div class="p1">
                    <p id="52">采用CS自计数法更新时隙时,要求CPU时钟与PTP时钟频率是同步的.中央处理器(CPU)执行指令所必须要的时钟频率信号是由晶振产生的.CPU一切指令的执行都是建立在这个基础上的.而内核时钟与PTP时钟是存在误差的.误差产生原因主要包括两方面:一方面,随着PTP时钟频率和相位的不断校准,CS长度会开始与PTP时钟产生偏差;另一方面,每个晶振输出信号的频率不可避免会有一定的偏差,所以CPU时钟频率自身也存在误差.这种误差会导致不同设备的TAS周期长度不同,PS产生偏差,从而破坏TAS整形机制,同时全网时钟同步也失去意义.</p>
                </div>
                <div class="p1">
                    <p id="53">为了与PTP时钟保持一致,确保PS长度能够稳定不出现偏差累积,我们通过两次校准来解决该问题.第一次校准为PS校准,每隔一定时间我们读取一次PTP时钟,重新计算当前所处PS和CS;第二次校准是通过调整保护时隙来进行相应的PS长度校准,校准方法如图 3所示.</p>
                </div>
                <div class="area_img" id="54">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201912001_054.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 保护时隙调整算法流程图" src="Detail/GetImg?filename=images/WXYJ201912001_054.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>3 <b>保护时隙调整算法流程图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201912001_054.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="55">(1)PTP时钟每隔一定时间校准一次当前所处得到PS并计算此时的CS,同时记录此时PTP时钟时间t<sub>1</sub>和PS计数器<i>PS</i><sub><i>cnt</i></sub>.</p>
                </div>
                <div class="p1">
                    <p id="56">(2)根据校准后的CS查找队列发包,判断(<i>CS</i><sub><i>last</i></sub>+1) % <i>CS</i><sub><i>perps</i></sub>是否为0,如果为0则进入保护时隙PB,等待PB结束,则一个PS结束,PS计数器<i>PS</i><sub><i>cnt</i></sub>加1.</p>
                </div>
                <div class="p1">
                    <p id="57">(3)判断是否需要校准PS.在校准PS前,先计算PB的补偿值.通过调整PB,可以补偿由于内核频率与PTP时钟频率偏差造成的PS长度误差.补偿值<i>comp</i> = <i>PS</i><sub><i>len</i></sub> - (<i>t</i><sub>2</sub>-<i>t</i><sub>1</sub>)/<i>PS</i><sub><i>cnt</i></sub>.调整后新的<i>PB</i>:<i>PB</i><sub><i>new</i></sub>=<i>PB</i><sub><i>last</i></sub>+<i>comp</i>.</p>
                </div>
                <h3 id="58" name="58" class="anchor-tag">5 <b>实验评估</b></h3>
                <h4 class="anchor-tag" id="59" name="59">5.1 TAS<b>整形测试</b></h4>
                <div class="p1">
                    <p id="60">基于多核网络处理器的TSN交换机系统参数设置如表 1所示,我们将端口传输周期划分为100个时隙,每个时隙长度为2 μs;我们的系统内核处理一个包的时间约为1.5 μs,所以CS为1.5 μs,保护时隙初始为500 ns.</p>
                </div>
                <div class="area_img" id="61">
                    <p class="img_tit"><b>表</b>1 <b>多核网络处理器系统参数描述</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="61" border="1"><tr><td><br />系统参数</td><td>描述</td><td>取值</td></tr><tr><td><br /><i>N</i></td><td>PS数量</td><td>100 (个)</td></tr><tr><td><br /><i>PS</i><sub><i>len</i></sub></td><td>PS长度</td><td>2 (μs)</td></tr><tr><td><br /><i>CS</i><sub><i>len</i></sub></td><td>CS长度</td><td>1.5 (μs)</td></tr><tr><td><br /><i>M</i></td><td>单核时隙数量</td><td>100 (个)</td></tr><tr><td><br /><i>PB</i><sub><i>len</i></sub></td><td>PB长度</td><td>0.5 (μs)</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="area_img" id="62">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201912001_062.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 TAS机制测试环境示意图" src="Detail/GetImg?filename=images/WXYJ201912001_062.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>4 TAS<b>机制测试环境示意图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201912001_062.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="63">TAS测试环境如图 4所示,主要包括测试系统和TSN交换机.测试系统负责生成数据流并记录数据流发送时间(时间戳1)和接收时间(时间戳2),时间戳均是源于PTP时钟.TSN交换机主要包括流分类模块,PTP时钟同步模块和TAS引擎机制.数据流ID,时隙和队列配置如表 2所示,TSN交换机的系统参数设置如表所示.测试系统按照数据流ID顺序,轮询发包,每轮每条流发一个包,发包速率为10 Kpps.TAS引擎按照表 2所配置时隙发包.</p>
                </div>
                <div class="p1">
                    <p id="64">统计结果如图 5所示,我们选取一个TAS周期(200 μs)的数据流统计结果进行分析,横坐标为PTP时间戳记录的时间,纵坐标为数据流ID,不同形状的点代表不同数据流的包.如图 5(a)所示,可以看出数据流之间的间隔是均匀的,且相邻的不同流之间间隔约为10 μs,与测试系统发包频率10 Kpps相符.但是,在经过TSN交换机时,TAS引擎按照表 2配置时隙对数据流整形,整形后如图 5(b)所示,在一个周期内,相邻数据流之间的间隔发生了变化,我们配置的相邻流之间的理论间隔为:20 μs(10个时隙),10 μs(5个时隙),40 μs(20个时隙),30 μs(15个时隙),从图 5(b)中也可以看出相邻流之间的间隔基本符合TAS配置.由此可以得出TAS引擎可以有效的按照预配置时隙发包.</p>
                </div>
                <div class="area_img" id="65">
                    <p class="img_tit"><b>表</b>2 TAS<b>时隙配置</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="65" border="1"><tr><td><br />数据流(ID)</td><td>时隙(CS)</td><td>队列</td></tr><tr><td><br />1</td><td>5</td><td>1</td></tr><tr><td><br />2</td><td>15</td><td>2</td></tr><tr><td><br />3</td><td>20</td><td>3</td></tr><tr><td><br />4</td><td>40</td><td>4</td></tr><tr><td><br />5</td><td>55</td><td>5</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="area_img" id="67">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201912001_06700.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 TAS 机制功能测试结果" src="Detail/GetImg?filename=images/WXYJ201912001_06700.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>5 TAS <b>机制功能测试结果</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201912001_06700.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="68" name="68">5.2 <b>保护时隙校准</b></h4>
                <div class="p1">
                    <p id="69">如表3所示,我们采集了一个周期里,在使能保护时隙调整前和使能后的每条数据流的接收时间.从表3中第二列我们可以看出,在未使能保护时隙调整前,虽然TAS引擎可以按照预配置时隙发包,但是数据流之间的实际间隔与我们配置的时隙间隔还是存在一定误差的.而误差原因,如我们在第4.4节所分析,一方面,随着PTP时钟频率和相位的不断校准,CS长度会开始与PTP时钟产生偏差;另一方面,每个晶振输出信号的频率不可避免会有一定的偏差,所以CPU时钟频率自身也存在误差.而这种误差会导致不同设备的TAS周期长度不同,PS产生偏差,从而破坏TAS整形机制.</p>
                </div>
                <div class="p1">
                    <p id="70">使能PB调整后,数据流在一个周期内的接收时间如表 3第三列所示,需要强调的是,我们关心的不是接收时间本身的变化,而是不同流的接收时间之间的相对间隔是否符合预配置的时隙间隔.我们计算所有流相对于流(ID=1)的时间间隔,如图 6所示,横坐标为数据流ID,纵坐标为在一个周期内(200 μs)其他4条流相对于流(ID=1)的时间间隔.图中最上面的线为未应用PB调整时的时间间隔,中间的虚线为理想的时间间隔(预配置的时隙间隔),最下面的实线为应用了PB调整后的时间间隔.</p>
                </div>
                <div class="area_img" id="71">
                    <p class="img_tit"><b>表</b>3 <b>使能</b>PB<b>调整前/后接收时间采集</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="71" border="1"><tr><td><br />ID</td><td>接收时间<br />(未使能PB调整)</td><td>接收时间<br />(使能PB调整)</td></tr><tr><td><br />1</td><td>513 465</td><td>532 277</td></tr><tr><td><br />2</td><td>537 466</td><td>550 888</td></tr><tr><td><br />3</td><td>549 472</td><td>561 090</td></tr><tr><td><br />4</td><td>597 472</td><td>600 078</td></tr><tr><td><br />5</td><td>633 466</td><td>628 880</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="area_img" id="72">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201912001_072.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 保护时隙调整算法效果评估" src="Detail/GetImg?filename=images/WXYJ201912001_072.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>6 <b>保护时隙调整算法效果评估</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201912001_072.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="73">从图 6最上面实线我们可以看出,随着与流(ID=1)预配置间隔时隙的增加,实际的数据流时间间隔误差也在增加.这是因为误差是出现在每个采用CS自计数的PS内的,随着间隔时隙的增加,这种误差也在不断的累积.当我们引入PB调整后,从图6中最下面实线可以看出,实际的时间间隔开始逼近理想时间间隔.从本实验结果,我们可以得出,增加保护时隙调整,可以有效的减少由于CPU时钟频率误差及PTP时钟频率调整所引入的PS偏移,增强了TAS机制的鲁棒性.</p>
                </div>
                <h3 id="74" name="74" class="anchor-tag">6 <b>结束语</b></h3>
                <div class="p1">
                    <p id="75">时间感知整形(TAS)是时间敏感网络(TSN)的重要机制,TAS的实现依赖于具体的平台.多核网络处理器具有高并行处理能力,可以作为TAS机制实现的理想平台.本研究详细论述了基于多核网络处理器的TAS机制实现方案,可为其他平台的TAS机制设计与实现提供理论参考.然而,本文只是从功能验证了TAS引擎的有效性,讨论了TAS机制的鲁棒性的提升,并没有进一步讨论TAS性能优化,我们后续研究将着力于基于多核网络处理器的TAS性能的测试和优化.</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="3">
                            <a id="bibliography_1" >
                                    <b>[1]</b>
                                 MESSENGER J L.Time-Sensitive Networking:An Introduction [J].IEEE Communications Standards Magazine,2018,2 (2):29-33.
                            </a>
                        </p>
                        <p id="5">
                            <a id="bibliography_2" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WJSY201801001&amp;v=MTM3MDY0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVWdkZ5RG5WcnpJTWlmWWQ3RzRIOW5Ncm85RlpZUUtESDg0dlI=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[2]</b> 朱明.5G中网络切片研究的现状与挑战 [J].网络新媒体技术,2018,7 (1):1-6.
                            </a>
                        </p>
                        <p id="7">
                            <a id="bibliography_3" >
                                    <b>[3]</b>
                                 DüRR F,NAYAK N G.No-wait packet scheduling for IEEE time-sensitive networks (TSN)[C]//Proceedings of the 24th International Conference on Real-Time Networks and Systems.Brest,France:ACM,2016:203-212.
                            </a>
                        </p>
                        <p id="9">
                            <a id="bibliography_4" >
                                    <b>[4]</b>
                                 NAYAK N G,DüRR F,ROTHERMEL K.Time-sensitive Software-defined Network (TSSDN) for Real-time Applications[C]// Proceedings of the 24th International Conference on Real-Time Networks and Systems.Brest,France:ACM,2016:193-202.
                            </a>
                        </p>
                        <p id="11">
                            <a id="bibliography_5" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WXYJ201112020&amp;v=MDM5MjFIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVZ2RnlEblZyeklNalhTWkxHNEg5RE5yWTlIWklRS0Q=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[5]</b> 杨吉喆,王玲玲,陆建德.基于Octeon多核网络处理器的IPv6联动IPS研究与设计 [J].微电子学与计算机,2011,28 (12):79-83.
                            </a>
                        </p>
                        <p id="13">
                            <a id="bibliography_6" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CMFD&amp;filename=2010153098.nh&amp;v=MTMwOTRFYlBJUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVWdkZ5RG5WcnpJVjEyNkhySzlIZEhGcDU=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[6]</b> 吴霖.基于多核网络处理器的P2P高速流量识别系统的设计与实现 [D].苏州:苏州大学,2010.
                            </a>
                        </p>
                        <p id="15">
                            <a id="bibliography_7" >
                                    <b>[7]</b>
                                 基于多核网络处理器的流控技术研究 [D].北京:北京邮电大学,2014.
                            </a>
                        </p>
                        <p id="17">
                            <a id="bibliography_8" >
                                    <b>[8]</b>
                                 IEEE.802.1Qbv-2015.IEEE Standard for Local and metropolitan area networks -Bridges and Bridged Networks-Amendment 25:Enhancements for Scheduled Traffic [S].New York,NY,USA:IEEE,2016.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="WXYJ201912001" />
        <input id="dpi" type="hidden" value="800" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WXYJ201912001&amp;v=MDU4NDI4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplVnZGeURuVnJ6SU1qWFNaTEc0SDlqTnJZOUZaWVFLREg=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sR00wSFZOZ1ZITVBhbjNuajd3OD0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
