<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637133357346846250%26DBCODE%3dCJFD%26TABLEName%3dCJFDTEMP%26FileName%3dWXYJ201911006%26RESULT%3d1%26SIGN%3dNmUVO6%252bZXxQdMY9tvthDfVL8xC8%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=WXYJ201911006&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=WXYJ201911006&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WXYJ201911006&amp;v=MjY5NDk5ak5ybzlGWW9RS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVZ2RkNuZ1dydktNalhTWkxHNEg=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#17" data-title="1 &lt;b&gt;引言&lt;/b&gt; ">1 <b>引言</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#20" data-title="2 10GBaseR&lt;b&gt;标准及数据格式&lt;/b&gt; ">2 10GBaseR<b>标准及数据格式</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#26" data-title="3 AXI4-Stream&lt;b&gt;总线&lt;/b&gt; ">3 AXI4-Stream<b>总线</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#32" data-title="4 &lt;b&gt;可编程光纤通信接口设计&lt;/b&gt; ">4 <b>可编程光纤通信接口设计</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#35" data-title="4.1 &lt;b&gt;发送单元设计&lt;/b&gt;">4.1 <b>发送单元设计</b></a></li>
                                                <li><a href="#45" data-title="4.2 &lt;b&gt;接收单元设计&lt;/b&gt;">4.2 <b>接收单元设计</b></a></li>
                                                <li><a href="#47" data-title="4.3 &lt;b&gt;数据包封装解封单元设计&lt;/b&gt;">4.3 <b>数据包封装解封单元设计</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#58" data-title="5 &lt;b&gt;结果验证及分析&lt;/b&gt; ">5 <b>结果验证及分析</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#66" data-title="6 &lt;b&gt;结束语&lt;/b&gt; ">6 <b>结束语</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#22" data-title="&lt;b&gt;图&lt;/b&gt;1 IEEE802&lt;b&gt;参考模型&lt;/b&gt;"><b>图</b>1 IEEE802<b>参考模型</b></a></li>
                                                <li><a href="#25" data-title="&lt;b&gt;图&lt;/b&gt;2 &lt;b&gt;数据帧封装格式&lt;/b&gt;"><b>图</b>2 <b>数据帧封装格式</b></a></li>
                                                <li><a href="#29" data-title="&lt;b&gt;图&lt;/b&gt;3 AXI4-Stream&lt;b&gt;总线主机与从机连接方式&lt;/b&gt;"><b>图</b>3 AXI4-Stream<b>总线主机与从机连接方式</b></a></li>
                                                <li><a href="#34" data-title="&lt;b&gt;图&lt;/b&gt;4 &lt;b&gt;模块总体结构&lt;/b&gt;"><b>图</b>4 <b>模块总体结构</b></a></li>
                                                <li><a href="#37" data-title="&lt;b&gt;图&lt;/b&gt;5 &lt;b&gt;发送单元内部模块及信号连接图&lt;/b&gt;"><b>图</b>5 <b>发送单元内部模块及信号连接图</b></a></li>
                                                <li><a href="#40" data-title="&lt;b&gt;图&lt;/b&gt;6 &lt;b&gt;等待帧数据状态转移图&lt;/b&gt;"><b>图</b>6 <b>等待帧数据状态转移图</b></a></li>
                                                <li><a href="#43" data-title="&lt;b&gt;图&lt;/b&gt;7 &lt;b&gt;请求发送状态转移图&lt;/b&gt;"><b>图</b>7 <b>请求发送状态转移图</b></a></li>
                                                <li><a href="#49" data-title="&lt;b&gt;图&lt;/b&gt;8 &lt;b&gt;数据封装解封单元框图&lt;/b&gt;"><b>图</b>8 <b>数据封装解封单元框图</b></a></li>
                                                <li><a href="#62" data-title="&lt;b&gt;图&lt;/b&gt;9 &lt;b&gt;数据输出的仿真结果&lt;/b&gt;"><b>图</b>9 <b>数据输出的仿真结果</b></a></li>
                                                <li><a href="#63" data-title="&lt;b&gt;图&lt;/b&gt;10 wireshark&lt;b&gt;对本地连接&lt;/b&gt;3&lt;b&gt;进行数据抓包&lt;/b&gt;"><b>图</b>10 wireshark<b>对本地连接</b>3<b>进行数据抓包</b></a></li>
                                                <li><a href="#65" data-title="&lt;b&gt;图&lt;/b&gt;11 &lt;b&gt;监测当前网络状况&lt;/b&gt;"><b>图</b>11 <b>监测当前网络状况</b></a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="74">


                                    <a id="bibliography_1" title=" 杨扩军,田书林,蒋俊,等.基于TIADC的20 GS/s高速数据采集系统[J].仪器仪表学报,2014,35(4):841-849." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YQXB201404018&amp;v=MTQxODVSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplVnZGQ25nV3J2TlBEelRiTEc0SDlYTXE0OUViSVFLREg4NHY=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[1]</b>
                                         杨扩军,田书林,蒋俊,等.基于TIADC的20 GS/s高速数据采集系统[J].仪器仪表学报,2014,35(4):841-849.
                                    </a>
                                </li>
                                <li id="76">


                                    <a id="bibliography_2" title=" 张晓威,苏淑靖.基于FPGA的高速高精度数据采集系统的设计[J].仪表技术与传感器,2016(1):70-72." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YBJS201601022&amp;v=MDE2NzJGQ25nV3J2TlBDL0JmYkc0SDlmTXJvOUhab1FLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplVnY=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[2]</b>
                                         张晓威,苏淑靖.基于FPGA的高速高精度数据采集系统的设计[J].仪表技术与传感器,2016(1):70-72.
                                    </a>
                                </li>
                                <li id="78">


                                    <a id="bibliography_3" title=" 陈洋君,吴志勇,崔明,等.基于MAX9259/MAX9260的CameraLink图像数据光纤传输技术[J].中国光学,2018,11(6):1017-1023." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=ZGGA201806014&amp;v=MTQ2NDk5bk1xWTlFWUlRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVZ2RkNuZ1dydk5QeXJNYjdHNEg=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[3]</b>
                                         陈洋君,吴志勇,崔明,等.基于MAX9259/MAX9260的CameraLink图像数据光纤传输技术[J].中国光学,2018,11(6):1017-1023.
                                    </a>
                                </li>
                                <li id="80">


                                    <a id="bibliography_4" title=" 王红亮,曹京胜,陈一波.一种LVDS-光纤接口转换器的设计与实现[J].仪表技术与传感器,2018,54(5):35-38." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YBJS201805009&amp;v=MDY4OTJGQ25nV3J2TlBDL0JmYkc0SDluTXFvOUZiWVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplVnY=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[4]</b>
                                         王红亮,曹京胜,陈一波.一种LVDS-光纤接口转换器的设计与实现[J].仪表技术与传感器,2018,54(5):35-38.
                                    </a>
                                </li>
                                <li id="82">


                                    <a id="bibliography_5" title=" 李增,姚源,崔明,等.基于光纤通道的红外视频数据采集系统[J].仪表技术与传感器,2010,46(2):51-53." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YBJS201002016&amp;v=MTUwMjM0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVWdkZDbmdXcnZOUEMvQmZiRzRIOUhNclk5RVlvUUtESDg=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[5]</b>
                                         李增,姚源,崔明,等.基于光纤通道的红外视频数据采集系统[J].仪表技术与传感器,2010,46(2):51-53.
                                    </a>
                                </li>
                                <li id="84">


                                    <a id="bibliography_6" title=" 802.3-2015.IEEE Standard for Ethernet.IEEE Standard[R].2015.DOI:10.1109/IEEESTD.2016.7428776." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=IEEE Standard for Ethernet">
                                        <b>[6]</b>
                                         802.3-2015.IEEE Standard for Ethernet.IEEE Standard[R].2015.DOI:10.1109/IEEESTD.2016.7428776.
                                    </a>
                                </li>
                                <li id="86">


                                    <a id="bibliography_7" title=" FORTUNATO,L.A standardized sentinel lymph node enhanced pathology protocol (SEPP) in patients with breast cancer [J].J Surg Oncol,2007,96(6):470-473." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=A standardized sentinel lymph node enhanced pathology protocol (SEPP) in patients with breast cancer">
                                        <b>[7]</b>
                                         FORTUNATO,L.A standardized sentinel lymph node enhanced pathology protocol (SEPP) in patients with breast cancer [J].J Surg Oncol,2007,96(6):470-473.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=WXYJ" target="_blank">微电子学与计算机</a>
                2019,36(11),24-29             </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>通用型芯片级光纤通信接口设计</b></span>
                                    </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E8%AE%B8%E5%B7%9D%E4%BD%A9&amp;code=10737332&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">许川佩</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%88%98%E5%8D%8E%E9%A2%96&amp;code=42862710&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">刘华颖</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E6%A1%82%E6%9E%97%E7%94%B5%E5%AD%90%E7%A7%91%E6%8A%80%E5%A4%A7%E5%AD%A6%E5%B9%BF%E8%A5%BF%E8%87%AA%E5%8A%A8%E6%A3%80%E6%B5%8B%E6%8A%80%E6%9C%AF%E4%B8%8E%E4%BB%AA%E5%99%A8%E9%87%8D%E7%82%B9%E5%AE%9E%E9%AA%8C%E5%AE%A4&amp;code=0269119&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">桂林电子科技大学广西自动检测技术与仪器重点实验室</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>为解决芯片与外部设备的海量数据实时传输的问题,本文以光纤通信技术为基础设计数据传输接口,在接口内分层搭建通信协议及交互接口架构,实现了网络各层之间的通信与校验工作.利用AXI4-Stream总线应用范围广且具有强大支持平台的优势,将AXI4-Stream接口作为芯片级数据交换接口,为突发性高速数据传输提供了支持.该接口支持UDP/IP协议封装格式,使其能灵活兼容于各类上层应用;支持通过可编程接口配置传输层端口号、IP地址及MAC地址;应用流水线技术及多进程并行处理技术,在控制面积及功耗的条件下,减少数据传输延迟,优化接口处理性能.最后通过光纤将片内数据传输到PC机进行了验证,数据传输速率可达9.691 Gbps,满足芯片与外部设备海量数据高速传输需求.</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%85%89%E7%BA%A4%E9%80%9A%E4%BF%A1&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">光纤通信;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=AXI4-Sream&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">AXI4-Sream;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=UDP%2FIP%E5%8D%8F%E8%AE%AE&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">UDP/IP协议;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=FPGA&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">FPGA;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    许川佩 女，（1968-），博士，教授，博士生导师．研究方向为自动测试总线与系统、虚拟技术及仪器．;
                                </span>
                                <span>
                                    *刘华颖（通讯作者）女，（1993-），硕士研究生．研究方向为虚拟技术及仪器．E-mail:363474480@qq.com.;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2019-02-19</p>

                    <p>

                            <b>基金：</b>
                                                        <span>国家自然科学基金(61671164);</span>
                    </p>
            </div>
                    <h1><b>The design of universal chip-level optical fiber communication interface</b></h1>
                    <h2>
                    <span>XU Chuan-pei</span>
                    <span>LIU Hua-ying</span>
            </h2>
                    <h2>
                    <span>Guangxi Key Laboratory of Automatic Detection Technology and Instrument,Gulin University of Electronic Technology</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>In order to solve the problem of mass data transmission between chips and external devices, the interface of data transmission is designed based on the optical fiber communication technology in this paper. The communication protocols and the interactive interface architectures are bulit in the interface to realize communication and verification between layers of the network. Many IP providers support the AXI protocol and it have a robust support platform, so the AXI4-Stream interface is used as a chip-level data exchange interface to support the bursty high-speed data transmission. UDP/IP format is supported for flexible compatibility with various upper-layer applications. The number of port, IP address and address of MAC layer can be set by programmable interface. Pipeline technology and multi-process parallel processing technology are applied to reduce data transmission delay and optimize interface processing performance under the control of area and power consumption. Finally, the design is verified by transmitting data in chip to PC via fiber optic communication and the data transmission data has reached up to 9.691 Gbps. It is demonstrated that the interface is able to meet the high-speed transmission requirement of massive data between chips and external devices.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=optical%20fiber%20communication&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">optical fiber communication;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=AXI4-Sream&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">AXI4-Sream;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=UDP%2FIP%20protocol&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">UDP/IP protocol;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=FPGA&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">FPGA;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2019-02-19</p>
                                    <p>
                                            </p>
            </div>


        <!--brief start-->
                        <h3 id="17" name="17" class="anchor-tag">1 <b>引言</b></h3>
                <div class="p1">
                    <p id="18">PCI(Peripheral Component Interconnect)、PCI-E(PCI Express)、ISA(Industry Standard Architecture)、USB、串口或并口等接口作为可编程芯片与外部数据交换常用接口<sup></sup><citation id="91" type="reference"><link href="74" rel="bibliography" /><link href="76" rel="bibliography" /><sup>[<a class="sup">1</a>,<a class="sup">2</a>]</sup></citation>,难以同时满足高速、远距离传输要求.随着芯片集成度的增加、复杂度的增大及芯片高速传输数据需求的不断提高,芯片内部海量数据的高速远距离传输成为新的问题.光纤通信技术的出现,为高速远距离传输数据提供了解决方案,其特有的传输速度快、抗干扰能力强的优势,为数据高速远距离传输提供保障,成为目前芯片级海量数据传输解决方案.文献<citation id="88" type="reference">[<a class="sup">3</a>]</citation>通过光纤传输CameraLink采集的图像数据,数据传输速率达到2.5Gb/s;文献<citation id="89" type="reference">[<a class="sup">4</a>]</citation>设计LVDS接口和光纤接口转换器,提高设备间的互通性,理论数据速率可达2.5 Gbps;文献<citation id="90" type="reference">[<a class="sup">5</a>]</citation>设计基于光纤通道的红外视频数据采集系统,物理层采用SFP光模块,最高传输速率为2.125 Gb/s.目前的应用中,数据传输速度仍然偏低,且不同的应用需设计专用数据交换接口,通用性不强.由于缺少上层协议的支持,使系统不具备良好的兼容性,为跨平台灵活高效应用带来不便.</p>
                </div>
                <div class="p1">
                    <p id="19">本文设计了的光纤通信接口,通过AXI4-Stream总线接口,在保证海量数据突发性高速传输的同时利用AXI4-Stream总线强壮的支持平台,使该设计具有更强的通用性,可灵活应用于所有支持相同接口的芯片级器件中,实现海量数据高速传输.该接口对UDP/IP协议提供支持,保证了数据传输质量,且便于数据后续处理,具备可编程接口可实现对目标地址的配置,提高了通用性.最后通过实验验证了方案的可行性.</p>
                </div>
                <h3 id="20" name="20" class="anchor-tag">2 10GBaseR<b>标准及数据格式</b></h3>
                <div class="p1">
                    <p id="21">2002年IEEE正式发布了万兆以太网标准,万兆以太网的传输速率为千兆以太网的10倍,两者的不同主要在物理层<citation id="92" type="reference"><link href="84" rel="bibliography" /><sup>[<a class="sup">6</a>]</sup></citation>.IEEE802参考模型对应OSI参考模型的下面两层,其中数据链路层分为逻辑链路控制子层(LLC子层,Logical Link Control)和介质访问控制子层(MAC子层),本文使用的是万兆以太网物理层标准中的10GBaseR标准可应用与局域网中.IEEE802参考模型如图1所示.</p>
                </div>
                <div class="area_img" id="22">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201911006_022.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 IEEE802参考模型" src="Detail/GetImg?filename=images/WXYJ201911006_022.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>1 IEEE802<b>参考模型</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201911006_022.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="23">在10GBaseR标准中物理层分为物理编码子层(PCS层)、物理介质子层(PMA层)、物理介质相关子层(PMD层).PCS层与MAC层通过XGMII接口相连接,根据不同标准定义的编码方式,完成对该层数据的编解码工作实现数据的编码解码,完成后将其传输给相邻层进行进一步的数据处理;PMA层完成PCS层与PMD层之间的串行解串服务 (SERializer/DESerializer)该层和PCS层连接成为PMA服务接口;PMD层位于物理层的最底层,为数据可靠传输提供保障.在该层选用不同的波长及光传输介质,进而达到不同的传输距离.</p>
                </div>
                <div class="p1">
                    <p id="24">万兆以太网标准在数据链路层继承802.3的以太网帧格式,包括先导域、起始帧、目的地址、源地址、协议类型、数据段、填充域及校验和.在一帧以太网帧中数据段长度为46～1 500字节.为了使本接口具有更高的数据兼容性,在传输层、网络层采用UDP协议、IP协议封装格式,使封装后的数据能灵活应用到各类数据传输领域.数据帧封装格式如图2所示,其中IP帧及MAC地址的目的地址均采用广播方式,这样可以解决每次数据传输需要指定地址的问题.有效数据位于UDP帧的数据段中,由于以太网帧中数据段长度的限制,UDP帧数据段长度范围为18字节到1 472字节,不足18字节时在MAC帧加入填充域进行数据填充.</p>
                </div>
                <div class="area_img" id="25">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201911006_025.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 数据帧封装格式" src="Detail/GetImg?filename=images/WXYJ201911006_025.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>2 <b>数据帧封装格式</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201911006_025.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="26" name="26" class="anchor-tag">3 AXI4-Stream<b>总线</b></h3>
                <div class="p1">
                    <p id="27">2010年ARM公司发布了AMBA 4.0(Advanced Microcontroller Bus Architecture),AXI4是该系列微控制器总线的一部分,AXI4相关总线协议包括AXI4、AXI4-Lite、AXI4-Stream总线协议.AXI4-Stream总线相较于前两者而言,去掉了地址线,使用更加方便且允许无限制的数据突发传输规模,故多用于高速数据流传输.由于该总线具有高性能、高带宽、低延迟的特点,作为片内总线可满足高性能片上系统需求,因此被需要IP供应商广泛应用.Xilinx公司从Virtex6,Spartan6系列FPGA芯片开始支持AXI4总线,并逐渐在Xilinx产品中广泛使用.同时,许多IP供应商提供对AXI总线的支持,众多强大的第三方AXI工具也为AXI的开发提供便利,更加扩大了其应用范围.本文基于AXI4-Stream总线实现了接口数据交换,利用总线的自身优势提高了接口的高效性、灵活性,并且由于应用范围广泛和强大的第三方工具的支持使该接口具有更强的通用性.</p>
                </div>
                <div class="p1">
                    <p id="28">AXI4-Stream总线既支持单个主机与从机通信,也支持多个主机与从机通信,图3为主机、从机信号连接图.</p>
                </div>
                <div class="area_img" id="29">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201911006_029.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 AXI4-Stream总线主机与从机连接方式" src="Detail/GetImg?filename=images/WXYJ201911006_029.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>3 AXI4-Stream<b>总线主机与从机连接方式</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201911006_029.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="30">tvalid、tready信号实现主机与从机之间的握手,需在一个时钟周期内两个信号同时有效时完成一次数据传输,若tvalid信号和tready信号有一个为无效,则不会进行数据传输,除握手信号以外的其他信号会一直保持到两个信号同时有效后继续进行数据传输;tkeep信号用来标识tdata中字节信号的有效性,其中tkeep信号中的1比特数据对应tdata中1字节数据的有效性,用这种方式可以灵活控制一个周期内传输有效数据的位宽;tstrb信号用于标识对应tdata中的字节属性,其标识方法与tkeep信号相同;tlast用于识别数据包边界,在一次数据包发送完成时,tlast信号会在最后一个数据传送周期时置高,传输完成后还原;tdata信号表示需要传输的有效数据,数据宽度以字节为单位递增,即为8 bits的整数倍,tdata信号的数据宽度(<i>W</i><sub><i>d</i></sub>)决定了tkeep及tstrb信号数据宽度(<i>W</i><sub><i>k</i></sub><sub>_</sub><sub><i>s</i></sub>),<i>W</i><sub><i>k</i></sub><sub>_</sub><sub><i>s</i></sub>的计算公式如(1)所示<citation id="93" type="reference"><link href="86" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>.</p>
                </div>
                <div class="p1">
                    <p id="31"><i>W</i><sub><i>k</i></sub><sub>_</sub><sub><i>s</i></sub>= <i>W</i><sub><i>d</i></sub> /8      (1)</p>
                </div>
                <h3 id="32" name="32" class="anchor-tag">4 <b>可编程光纤通信接口设计</b></h3>
                <div class="p1">
                    <p id="33">可编程光纤通信接口总结构如图4所示,分为用户数据端口、数据预处理单元、数据包封装解封单元.其中用户数据端口通过两组AXI4-Stream总线接口实现芯片内部的数据交互及编程接口管理工作,数据预处理单元随时准备接受数据并缓存防止数据丢失,判断数据发送条件,满足条件后将数据交给下一单元;数据封装解封单元实现网络各层协议、进行数据编码及数据校验工作实现数据的高效交互.该接口工作流程如下:在系统复位后会根据编程接口数据配置端口号、IP地址及MAC地址等信息为后续处理封装数据做准备.在发送数据时,通过AXI4-Stream总线接口将64 bits数据发送到数据预处理单元,发送单元进行数据缓存、计算数据校验和,当满足发送条件时,在数据包封装解封单元进行封装、编码、并串转换,接着通过SFP+实现电光转换,最后通过光纤传输到目的机.接收数据为上述步骤的逆过程,在MAC层、IP层、UDP层加入头校验,校验成功后缓存数据,通过AXI4-Stream总线端口,发送到目的单元进行数据处理.</p>
                </div>
                <div class="area_img" id="34">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201911006_034.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 模块总体结构" src="Detail/GetImg?filename=images/WXYJ201911006_034.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>4 <b>模块总体结构</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201911006_034.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="35" name="35">4.1 <b>发送单元设计</b></h4>
                <div class="p1">
                    <p id="36">用UDP协议进行上层数据封装,该协议封装头部的校验和段需要IP伪首部、UDP首部、数据段三部分的数据.由于IP伪首部、UDP首部在发送中保持不变,为了提高发送效率,发送单元将缓存数据与计算校验和同时进行并行处理,最后将校验和数据发送到数据封装单元.发送单元内部模块及信号连接如图5所示,包括数据帧等待模块、数据缓存模块、数据帧请求模块.</p>
                </div>
                <div class="area_img" id="37">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201911006_037.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 发送单元内部模块及信号连接图" src="Detail/GetImg?filename=images/WXYJ201911006_037.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>5 <b>发送单元内部模块及信号连接图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201911006_037.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="38">数据帧等待模块实现接收AXI4-Stream接口数据、计算有效数据和、控制数据缓存模块、使能数据帧请求模块的功能.缓存单元用于缓存中间数据,为防止注入率过高导致数据覆盖,数据缓存单元缓存容量为四个数据帧.数据帧请求模块用于计算数据校验和,向数据包封装单元发送请求及帧封装信息,等待响应信号后完成一次请求工作.</p>
                </div>
                <div class="p1">
                    <p id="39">为提高数据存储转发效率,采用流水线设计方式,使数据接收与发送相对独立,将数据帧等待单元分为帧数据响应模块与帧数据请求模块两部分.通过帧数据响应模块完成数据接收,帧数据请求模块实现数据发送工作.帧数据响应模块的主要功能由等待帧数据状态机实现.等待帧状态机用于与AXI4-Stream接口进行通信,控制数据缓存,计算数据和,使能数据帧请求模块.状态转移图如图6所示.</p>
                </div>
                <div class="area_img" id="40">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201911006_040.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 等待帧数据状态转移图" src="Detail/GetImg?filename=images/WXYJ201911006_040.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>6 <b>等待帧数据状态转移图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201911006_040.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="41">当启动信号有效时,状态机处于空闲状态IDLE,在接收到有效数据后,进入S1状态接收数据.在S1状态,当满足接收数量数据小于1 464字节、tlast无效且数据缓存空间还有至少8字节容量时,实现接收数据缓存、更新有效数据和及接收字节数三部分工作,否则进入S2状态,使能数据帧请求模块、拉低tready信号,完成此次AXI4-Stream端口数据接收、缓存最后64bits中的有效数据.若存储空间已满则进入S3状态,等待存储空间空闲时回到IDLE态开始新的接收.在接收到有效数据后,进行数据缓存并更新有效数据和,为数据帧请求模块计算校验和做准备.当数据存储单元完成一帧信号接收后,使能发送帧数据状态机.</p>
                </div>
                <div class="p1">
                    <p id="42">帧数据请求模块的核心是请求发送状态机.请求发送状态机完成计算数据校验和、发送请求、等待响应、发送帧有效信息四个任务.其中帧有效信息包括加入UDP/IP伪首部的数据校验和、帧数据字节数.如图7所示.</p>
                </div>
                <div class="area_img" id="43">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201911006_043.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 请求发送状态转移图" src="Detail/GetImg?filename=images/WXYJ201911006_043.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>7 <b>请求发送状态转移图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201911006_043.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="44">在空闲状态,等待至少有一帧数据缓存,满足条件后向数据封装单元发送请求、计算有效数据校验和、发送帧有效信息,进入S1态等待数据包封装解封单元准备就绪.接收到响应后回到空闲状态,等待新数据发送.</p>
                </div>
                <h4 class="anchor-tag" id="45" name="45">4.2 <b>接收单元设计</b></h4>
                <div class="p1">
                    <p id="46">数据接收模块用于缓存解封后的有效数据.一次传输完成后,若UDP校验通过,则由数据包解封模块发送确认信号,否则清除该帧数据.数据接收模块由数据接收机和缓存单元组成.当数据有效时,进入数据存储态,缓存数据,完成一帧数据接收,等待数据包解封单元发送的UDP层校验信号.若校验成功则进入初始状态,否则清空上一次接收数据,回到初始状态.</p>
                </div>
                <h4 class="anchor-tag" id="47" name="47">4.3 <b>数据包封装解封单元设计</b></h4>
                <div class="p1">
                    <p id="48">如图8所示,数据封装解封单元由UDP/IP层封装解封、MAC层封装解封、PCS层和PMA层编码解码三部分组成.</p>
                </div>
                <div class="area_img" id="49">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201911006_049.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图8 数据封装解封单元框图" src="Detail/GetImg?filename=images/WXYJ201911006_049.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>8 <b>数据封装解封单元框图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201911006_049.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="50">在数据发送时,UDP/IP层进行UDP头、IP头数据封装.在数据接收时,进行UDP头、IP头验证,通过向数据接收模块发送校验信号,决定缓存数据是否有效.MAC层用于控制并连接物理层的物理介质,主要进行以太网头的封装解封及验证工作; PCS层将有效数据进行64b/66b编码解码以及串并转化;PMA层主要实现PCS层与PMD层之间的连接;数据从PMA层出来以后会进入物理介质子层,实现光电转换,最后通过光纤完成数据交换.</p>
                </div>
                <div class="p1">
                    <p id="51">为了提高性能、加快开发速度,本设计中的MAC层与PCS/PMA层通过配置Xilinx的IP核完成工作.在接口方面,UDP/IP层与MAC层的数据传输为AXI4-Stream接口,MAC层与PCS/PMA层为XGMII接口.</p>
                </div>
                <div class="p1">
                    <p id="52">MAC层主要包括发送模块、接收模块、管理模块三个模块.发送模块用于封装帧、设置两帧之间的帧间隙.接收模块解码一帧数据、完成MAC头校验;管理模块通过AXI4-Lite总线来配置MAC层及控制PCS/PMA层的MDIO寄存器组.</p>
                </div>
                <div class="p1">
                    <p id="53">通过AXI4-Lite总线对配置管理模块进行配置,从而实现MAC层及PCS/PMA层的配置工作.配置MAC层及PCS/PMA层主要功能如下:</p>
                </div>
                <div class="p1">
                    <p id="54">(1)使能MDIO并配置MDC为10.4MHz;</p>
                </div>
                <div class="p1">
                    <p id="55">(2)配置MAC的工作模式,并复位MAC的 Rx、Tx端;</p>
                </div>
                <div class="p1">
                    <p id="56">(3)配置PCS层为10GBASE-R模式.</p>
                </div>
                <div class="p1">
                    <p id="57">在数据封装发送阶段,为了提高数据传输速率,系统复位后,通过预存的IP首部计算校验和,并写入IP封装头.通过预存的IP、UDP伪首部为计算数据校验和做准备.当满足发送条件后,启动状态机,发送一帧数据,同时将上一层模块计算好的校验和写入UDP封装头的校验和字段,以此减少封装带来的时间损耗.</p>
                </div>
                <h3 id="58" name="58" class="anchor-tag">5 <b>结果验证及分析</b></h3>
                <div class="p1">
                    <p id="59">为测试最高传输速率,本文设计模拟数据发生器,以156.25M的速度发送带宽为64bits的有效数据.如果发送数据缓存器满,则等到缓存区被释放后继续以相同速度产生数据,经设计接口通过光纤将数据传输到电脑上进行数据抓包验证及网络利用率测试.</p>
                </div>
                <div class="p1">
                    <p id="60">仿真结果如图9所示,用Core_ready信号来标识MAC层、PCS/PMA层配置是否完成,若接口准备完成则Core_ready数据为1.DeScr_wire表示对接收到的数据进行解码后的数据,即实际传输数据.从灰线标识时刻开始,上位机依次接收到数据前导码、起始符、以太网首部、IP首部、UDP首部以及数据段.此处refclk的频率为156.25 MHz.且位宽为64 bits,可见在仿真中,发送一帧数据时,数据输出速率为156.25 M*64 bits=10 000 Mbits/s.</p>
                </div>
                <div class="p1">
                    <p id="61">数据传输到PC机对数据传输速率及数据格式进行验证,将FPGA中产生数据经由设计接口通过PC端的“本地连接3”端口传输到上位机进行数据接收,用wireshark软件对接收数据进行抓包,验证数据格式的正确性.传输数据格式为MAC层数据段长度共1 500字节,其中包括8 Bytes UDP封装头,20 Bytes IP封装头,以及1 472 Bytes UDP数据段,加入MAC封装数据包总长度为1 518字节.用wireshark对“本地连接3”进行数据抓包,得到测试结果如图10,数据按照MAC层,IP层广播的形式进行发送,发送端的MAC地址为5a0102030405,IP为192.168.0.1,发送端口号为1234,接收端口号为120.通过接收完整的数据段,验证该接口实现数据无误传输.</p>
                </div>
                <div class="area_img" id="62">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201911006_062.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图9 数据输出的仿真结果" src="Detail/GetImg?filename=images/WXYJ201911006_062.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>9 <b>数据输出的仿真结果</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201911006_062.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="63">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201911006_063.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图10 wireshark对本地连接3进行数据抓包" src="Detail/GetImg?filename=images/WXYJ201911006_063.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>10 wireshark<b>对本地连接</b>3<b>进行数据抓包</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201911006_063.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="64">为了验证数据传输速率是否达到要求,通过Windows的资源监视器检测得到当前网络状况.图11为测试结果,万兆网所在端口“本地连接3”的网络使用率为96.91%,由网络使用率与网络传输速率的关系计算得到当前传输速率0.969 1*10 G=9.691 Gbps满足设计要求.</p>
                </div>
                <div class="area_img" id="65">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201911006_065.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图11 监测当前网络状况" src="Detail/GetImg?filename=images/WXYJ201911006_065.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>11 <b>监测当前网络状况</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201911006_065.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="66" name="66" class="anchor-tag">6 <b>结束语</b></h3>
                <div class="p1">
                    <p id="67">本文设计通用型芯片级光纤通信接口,支持AXI4-Stream总线接口,为海量数据突发传输提供保证,同时在网络模型各层搭建了各层协议模型及通信接口,支持UDP协议及IP协议格式,并且在物理层支持万兆以太网协议,利用其继承802.3的以太网帧格式和802.3的帧长度范围的优势使系统具有更强的兼容性.提供了可编程配置端口,实现了传输层端口号、IP地址及MAC地址的灵活配置,提高了接口通用性,最后通过SFP+芯片进行电光转换,是数据通过光纤进行数据传输,提高抗干扰能力、减缓信号衰减速度.该光纤通信接口既能实现芯片级高速数据交换,又能作为一种通用化的数据传输接口,能够实现可编程芯片与其他平台上层应用的高速数据通信.验证结果表明,该可编程光纤通信接口可在保证数据正确性的同时进行数据高速传输,满足芯片与外部设备万兆数据传输要求.</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="74">
                            <a id="bibliography_1" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YQXB201404018&amp;v=MTM4OTE0TzN6cXFCdEdGckNVUkxPZVplVnZGQ25nV3J2TlBEelRiTEc0SDlYTXE0OUViSVFLREg4NHZSNFQ2ajU=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[1]</b> 杨扩军,田书林,蒋俊,等.基于TIADC的20 GS/s高速数据采集系统[J].仪器仪表学报,2014,35(4):841-849.
                            </a>
                        </p>
                        <p id="76">
                            <a id="bibliography_2" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YBJS201601022&amp;v=MzAzNjZHNEg5Zk1ybzlIWm9RS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVZ2RkNuZ1dydk5QQy9CZmI=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[2]</b> 张晓威,苏淑靖.基于FPGA的高速高精度数据采集系统的设计[J].仪表技术与传感器,2016(1):70-72.
                            </a>
                        </p>
                        <p id="78">
                            <a id="bibliography_3" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=ZGGA201806014&amp;v=MDQ0MDR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVZ2RkNuZ1dydk5QeXJNYjdHNEg5bk1xWTlFWUlRS0RIODQ=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[3]</b> 陈洋君,吴志勇,崔明,等.基于MAX9259/MAX9260的CameraLink图像数据光纤传输技术[J].中国光学,2018,11(6):1017-1023.
                            </a>
                        </p>
                        <p id="80">
                            <a id="bibliography_4" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YBJS201805009&amp;v=MDQwMTRuZ1dydk5QQy9CZmJHNEg5bk1xbzlGYllRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVZ2RkM=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[4]</b> 王红亮,曹京胜,陈一波.一种LVDS-光纤接口转换器的设计与实现[J].仪表技术与传感器,2018,54(5):35-38.
                            </a>
                        </p>
                        <p id="82">
                            <a id="bibliography_5" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YBJS201002016&amp;v=MTc5MTZxQnRHRnJDVVJMT2VaZVZ2RkNuZ1dydk5QQy9CZmJHNEg5SE1yWTlFWW9RS0RIODR2UjRUNmo1NE8zenE=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[5]</b> 李增,姚源,崔明,等.基于光纤通道的红外视频数据采集系统[J].仪表技术与传感器,2010,46(2):51-53.
                            </a>
                        </p>
                        <p id="84">
                            <a id="bibliography_6" target="_blank" href="http://scholar.cnki.net/result.aspx?q=IEEE Standard for Ethernet">

                                <b>[6]</b> 802.3-2015.IEEE Standard for Ethernet.IEEE Standard[R].2015.DOI:10.1109/IEEESTD.2016.7428776.
                            </a>
                        </p>
                        <p id="86">
                            <a id="bibliography_7" target="_blank" href="http://scholar.cnki.net/result.aspx?q=A standardized sentinel lymph node enhanced pathology protocol (SEPP) in patients with breast cancer">

                                <b>[7]</b> FORTUNATO,L.A standardized sentinel lymph node enhanced pathology protocol (SEPP) in patients with breast cancer [J].J Surg Oncol,2007,96(6):470-473.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="WXYJ201911006" />
        <input id="dpi" type="hidden" value="800" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WXYJ201911006&amp;v=MjY5NDk5ak5ybzlGWW9RS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVZ2RkNuZ1dydktNalhTWkxHNEg=&amp;uid=WEEvREcwSlJHSldRa1FhdkJkVG5hVC9sRzVOZlY0eG5jQ2MrRjhjT2RFVT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="0" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
