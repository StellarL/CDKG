<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637133852617131250%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dWXYJ201908005%26RESULT%3d1%26SIGN%3dk4YxG5%252bFmt5E6M821O%252bo1OAJAjE%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=WXYJ201908005&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=WXYJ201908005&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WXYJ201908005&amp;v=MDM3MzdZUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVWdUZ5bm5WcnpLTWpYU1pMRzRIOWpNcDQ5Rlk=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#19" data-title="1 &lt;b&gt;引言&lt;/b&gt; ">1 <b>引言</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#22" data-title="2 “&lt;b&gt;天河二号”胖树网络拓扑&lt;/b&gt; ">2 “<b>天河二号”胖树网络拓扑</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#26" data-title="3 &lt;b&gt;电交换的路由器模型&lt;/b&gt; ">3 <b>电交换的路由器模型</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#27" data-title="3.1 NRC&lt;b&gt;的瓦片阵列高阶路由器结构&lt;/b&gt;">3.1 NRC<b>的瓦片阵列高阶路由器结构</b></a></li>
                                                <li><a href="#30" data-title="3.2 NRC&lt;b&gt;内数据分组的交换过程&lt;/b&gt;">3.2 NRC<b>内数据分组的交换过程</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#41" data-title="4 &lt;b&gt;基于&lt;/b&gt;AWGR&lt;b&gt;的光电混合交换网络&lt;/b&gt; ">4 <b>基于</b>AWGR<b>的光电混合交换网络</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#42" data-title="4.1 AWGR&lt;b&gt;光交换器件&lt;/b&gt;">4.1 AWGR<b>光交换器件</b></a></li>
                                                <li><a href="#48" data-title="4.2 &lt;b&gt;光电混合交换网络结构&lt;/b&gt;">4.2 <b>光电混合交换网络结构</b></a></li>
                                                <li><a href="#51" data-title="4.3 &lt;b&gt;适用于波长路由的电路由器光端口设计&lt;/b&gt;">4.3 <b>适用于波长路由的电路由器光端口设计</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#64" data-title="5 &lt;b&gt;网络流量控制&lt;/b&gt; ">5 <b>网络流量控制</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#66" data-title="5.1 “&lt;b&gt;信用”流量控制方法&lt;/b&gt;">5.1 “<b>信用”流量控制方法</b></a></li>
                                                <li><a href="#68" data-title="5.2 “&lt;b&gt;通断”流量控制方法&lt;/b&gt;">5.2 “<b>通断”流量控制方法</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#70" data-title="6 &lt;b&gt;网络性能仿真&lt;/b&gt; ">6 <b>网络性能仿真</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#76" data-title="7 &lt;b&gt;结束语&lt;/b&gt; ">7 <b>结束语</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#24" data-title="&lt;b&gt;图&lt;/b&gt;1 “&lt;b&gt;天河二号”计算机互连网络的“胖树”拓扑&lt;/b&gt;"><b>图</b>1 “<b>天河二号”计算机互连网络的“胖树”拓扑</b></a></li>
                                                <li><a href="#29" data-title="&lt;b&gt;图&lt;/b&gt;2 &lt;b&gt;高阶路由器的瓦片阵列和瓦片内部结构&lt;/b&gt;"><b>图</b>2 <b>高阶路由器的瓦片阵列和瓦片内部结构</b></a></li>
                                                <li><a href="#91" data-title="图3 6&#215;6的AWGR波长路由示意">图3 6×6的AWGR波长路由示意</a></li>
                                                <li><a href="#49" data-title="&lt;b&gt;图&lt;/b&gt;4 &lt;b&gt;基于&lt;/b&gt;AWGR&lt;b&gt;的互连网络拓扑&lt;/b&gt;"><b>图</b>4 <b>基于</b>AWGR<b>的互连网络拓扑</b></a></li>
                                                <li><a href="#52" data-title="&lt;b&gt;图&lt;/b&gt;5 &lt;b&gt;高阶路由器的光端口结构改进&lt;/b&gt;"><b>图</b>5 <b>高阶路由器的光端口结构改进</b></a></li>
                                                <li><a href="#72" data-title="&lt;b&gt;表&lt;/b&gt;1 &lt;b&gt;电交换网络和光电混合交换网络的仿真设定&lt;/b&gt;"><b>表</b>1 <b>电交换网络和光电混合交换网络的仿真设定</b></a></li>
                                                <li><a href="#92" data-title="图6 随机均匀和热点流量下的吞吐率和延迟仿真">图6 随机均匀和热点流量下的吞吐率和延迟仿真</a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="93">


                                    <a id="bibliography_1" title=" LIAO X K, PANG Z B, WANG K F, et al.High performance interconnect network for Tianhe System [J].Journal of Computer Science and Technology, 2015, 30 (2) :259." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=High performance interconnect network for Tianhe System">
                                        <b>[1]</b>
                                         LIAO X K, PANG Z B, WANG K F, et al.High performance interconnect network for Tianhe System [J].Journal of Computer Science and Technology, 2015, 30 (2) :259.
                                    </a>
                                </li>
                                <li id="95">


                                    <a id="bibliography_2" title=" YE X, MEJIA P, YIN Y, et al.DOS - A scalable optical switch for datacenters [C]//ACM/IEEE Symposium on Architectures for Networking and Communications Systems (ANCS) .La Jolla, CA, USA:IEEE, 2010:1-12." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=DOS:A scalable optical switch for datacenters">
                                        <b>[2]</b>
                                         YE X, MEJIA P, YIN Y, et al.DOS - A scalable optical switch for datacenters [C]//ACM/IEEE Symposium on Architectures for Networking and Communications Systems (ANCS) .La Jolla, CA, USA:IEEE, 2010:1-12.
                                    </a>
                                </li>
                                <li id="97">


                                    <a id="bibliography_3" title=" CAO Z, PROIETTI R, YOO S J B.Hi-LION:Hierarchical large-scale interconnection optical network with AWGRs [J].IEEE/OSA Journal of Optical Communications and Networking, 2015, 7 (1) :97-105." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Hi-LION:Hierarchical large-scale interconnection optical network with AWGRs">
                                        <b>[3]</b>
                                         CAO Z, PROIETTI R, YOO S J B.Hi-LION:Hierarchical large-scale interconnection optical network with AWGRs [J].IEEE/OSA Journal of Optical Communications and Networking, 2015, 7 (1) :97-105.
                                    </a>
                                </li>
                                <li id="99">


                                    <a id="bibliography_4" title=" CHEUNG S, SU T, OKAMOTO K, et al.Ultra-Compact Silicon Photonic 512 &#215; 512 25 GHz Arrayed Waveguide Grating Router [J].IEEE Journal of Selected Topics in Quantum Electronics, 2014, 20 (4) :310-316." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Ultra-compact silicon photonic 512&amp;#215;512 25 GHz arrayed waveguide grating router">
                                        <b>[4]</b>
                                         CHEUNG S, SU T, OKAMOTO K, et al.Ultra-Compact Silicon Photonic 512 &#215; 512 25 GHz Arrayed Waveguide Grating Router [J].IEEE Journal of Selected Topics in Quantum Electronics, 2014, 20 (4) :310-316.
                                    </a>
                                </li>
                                <li id="101">


                                    <a id="bibliography_5" title=" SCOTT S, ABTS D, KIM J, et al.The BlackWidow High-Radix Clos Network [C]//33rd International Symposium on Computer Architecture (ISCA&#39;06) .Boston, MA, USA:IEEE, 2006:16-28." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=The BlackWidow high-radix Clos network">
                                        <b>[5]</b>
                                         SCOTT S, ABTS D, KIM J, et al.The BlackWidow High-Radix Clos Network [C]//33rd International Symposium on Computer Architecture (ISCA&#39;06) .Boston, MA, USA:IEEE, 2006:16-28.
                                    </a>
                                </li>
                                <li id="103">


                                    <a id="bibliography_6" title=" SIMSARIAN J E, LARSON M C, GARRETT H E, et al.Less than 5-ns wavelength switching with an SG-DBR laser [J].IEEE Photonics Technology Letters, 2006, 18 (4) :565-567." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Less than 5-ns wavelength switching with an SG-DBR laser">
                                        <b>[6]</b>
                                         SIMSARIAN J E, LARSON M C, GARRETT H E, et al.Less than 5-ns wavelength switching with an SG-DBR laser [J].IEEE Photonics Technology Letters, 2006, 18 (4) :565-567.
                                    </a>
                                </li>
                                <li id="105">


                                    <a id="bibliography_7" title=" YE X, PROIETTI R, YIN Y, et al.Buffering and Flow Control in Optical Switches for High Performance Computing [J].IEEE/OSA Journal of Optical Communications and Networking, 2011, 3 (8) :59-72." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Buffering and flow control in optical switches for high performance computing">
                                        <b>[7]</b>
                                         YE X, PROIETTI R, YIN Y, et al.Buffering and Flow Control in Optical Switches for High Performance Computing [J].IEEE/OSA Journal of Optical Communications and Networking, 2011, 3 (8) :59-72.
                                    </a>
                                </li>
                                <li id="107">


                                    <a id="bibliography_8" title=" OMNeT++ Discrete Event Simulator [EB/OL].Republic of Seychelles:Simulcraft Inc., 2018[2018-11-10].https://omnetpp.org." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=OMNeT++ Discrete Event Simulator">
                                        <b>[8]</b>
                                         OMNeT++ Discrete Event Simulator [EB/OL].Republic of Seychelles:Simulcraft Inc., 2018[2018-11-10].https://omnetpp.org.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=WXYJ" target="_blank">微电子学与计算机</a>
                2019,36(08),19-24             </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>基于AWGR的光电混合交换高性能计算互连网络</b></span>
                                    </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E7%8E%8B%E6%98%AD&amp;code=08573758&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">王昭</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E8%A3%B4%E7%A7%89%E7%8E%BA&amp;code=42380740&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">裴秉玺</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E4%BD%95%E5%8D%AB%E9%94%8B&amp;code=15106390&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">何卫锋</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E4%B8%8A%E6%B5%B7%E4%BA%A4%E9%80%9A%E5%A4%A7%E5%AD%A6%E5%BE%AE%E7%BA%B3%E7%94%B5%E5%AD%90%E5%AD%A6%E7%B3%BB&amp;code=0054402&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">上海交通大学微纳电子学系</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>为了满足高性能计算机中互连网络的高吞吐量、低延迟需求, 本文基于阵列波导光栅路由器 (AWGR) , 提出了一种低延迟的光电混合交换的互连网络结构.该网络以“天河二号”超级计算机的互连网络拓扑结构为基础, 使用无竞争阻塞的AWGR替代了部分电路由器, 通过改进设计电路由器的光端口来实现与原有高阶路由器内部的电交换方式兼容.在此基础上, 使用OMNeT++软件框架编写了新的光电混合交换网络的仿真模型.仿真结果表明, 与原始网络相比, 光电混合交换网络的总延迟降低了8%～10%.</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E9%AB%98%E6%80%A7%E8%83%BD%E4%BA%92%E8%BF%9E%E7%BD%91%E7%BB%9C&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">高性能互连网络;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E9%98%B5%E5%88%97%E6%B3%A2%E5%AF%BC%E5%85%89%E6%A0%85%E8%B7%AF%E7%94%B1%E5%99%A8&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">阵列波导光栅路由器;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%85%89%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">光分组交换;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E7%BD%91%E7%BB%9C%E5%BB%B6%E8%BF%9F&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">网络延迟;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    王昭, 男, (1994-) , 硕士研究生.研究方向为高性能计算光互连网络分析与建模.E-mail:wangzhaojack@163.com.;
                                </span>
                                <span>
                                    裴秉玺, 男, (1994-) , 博士研究生.研究方向为片上光互连网络分析与建模.;
                                </span>
                                <span>
                                    何卫锋, 男, (1976-) , 博士, 博士生导师, 副研究员.研究方向为光电混合集成电路技术, 硅光互连网络.;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2018-11-26</p>

            </div>
                    <h1><b>An optical-electrical hybrid switching high performance computing interconnect network based on AWGR</b></h1>
                    <h2>
                    <span>WANG Zhao</span>
                    <span>PEI Bing-xi</span>
                    <span>HE Wei-feng</span>
            </h2>
                    <h2>
                    <span>Department of Micro-Nano Electronics, Shanghai Jiao Tong University</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>To satisfy the throughput and latency requirement of high-performance-computing interconnect network, a low-latency optical-electrical hybrid switching network structure based on arrayed waveguide grating router (AWGR) is proposed. On the basis of “Tianhe-Ⅱ” supercomputer's network topology, part of electrical high-radix routers are replaced by non-blocking and contention-free AWGRs. The optical port of electrical router is re-designed to interface the optical packets with router's internal switching logics. To evaluate the performance of proposed network, a simulation model is developed using OMNeT++ software framework. The simulation shows that the data latency of hybrid switching network is 8%～10% lower than the electrical switching network.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=high-performance%20interconnect%20network&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">high-performance interconnect network;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=arrayed%20waveguide%20grating%20router&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">arrayed waveguide grating router;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=optical%20packet%20switching&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">optical packet switching;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=network%20latency&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">network latency;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2018-11-26</p>
                            </div>


        <!--brief start-->
                        <h3 id="19" name="19" class="anchor-tag">1 <b>引言</b></h3>
                <div class="p1">
                    <p id="20">近年来, 高性能计算机的性能遵循千倍定律, 即每10年计算性能提升1000倍, 根据预测在2019年达到10<sup>18 </sup>Flops每秒 (Exa Flops, 即E级) . 高吞吐量、低延迟的互连系统是决定高性能计算机性能的关键硬件. 高性能计算互连系统普遍采用“电交换、光传输”的通信方式. 以我国自主研发的“天河二号”超级计算机的互连系统为例<citation id="109" type="reference"><link href="93" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>, 它采用了三级交换机的胖树 (fat-tree) 拓扑, 高阶路由芯片是每级交换机的组成单元, 片内使用分布式缓存实现多级仲裁以缓解端口竞争, 但也延长了硬件流水线, 测试表明路由器的穿越延迟占据了总延迟的30～50%<citation id="110" type="reference"><link href="93" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>. 此外“电交换、光传输”不可避免在交换机端口进行光电转换, 引入了功耗、可靠性问题和带宽瓶颈. 具有直接光交换功能的开关器件在高性能计算的互连系统中具有潜在的应用价值. 阵列波导光栅路由器 (Arrayed Waveguide Grating Router, AWGR) 是一种适用于光分组交换 (optical packet switching) 的新型无源光交换器件, 近年来被研究用于数据中心交换机的光互连<citation id="111" type="reference"><link href="95" rel="bibliography" /><sup>[<a class="sup">2</a>]</sup></citation><citation id="112" type="reference"><link href="97" rel="bibliography" /><sup>[<a class="sup">3</a>]</sup></citation>. AWGR器件具有循环波长路由特性, 控制光的波长可以将光路由到特定端口. AWGR的器件工艺正在走向成熟, 目前业界的Enablence公司已有至多32通道的路由模块产品, 学术界报道了512×512开关<citation id="113" type="reference"><link href="99" rel="bibliography" /><sup>[<a class="sup">4</a>]</sup></citation>和硅基工艺器件. 应用AWGR的波长路由特性, 需要解决产生和接收特定波长光信号的实际问题. 文献<citation id="114" type="reference">[<a class="sup">2</a>]</citation>在AWGR输入处安装可调波长转换器 (tunable wavelength converter) , 由控制模块调节. 由于大规模互连网络需要上万转换器件, 总成本高. 文献<citation id="115" type="reference">[<a class="sup">3</a>]</citation>提出了适合于波长路由的定制化的光网络拓扑, 传输数据报文会经过若干个“接力”的计算结点, 每次“接力”都可以调整波长. 由于主流高性能计算互连网络普遍选取“胖树 (fat-tree) ”拓扑, 全光互连网络的实现难度大, 定制化拓扑与已有互连系统的兼容性差.</p>
                </div>
                <div class="p1">
                    <p id="21">本文提出了一种可适用于目前高性能计算互连系统的光电混合交换网络方案.</p>
                </div>
                <h3 id="22" name="22" class="anchor-tag">2 “<b>天河二号”胖树网络拓扑</b></h3>
                <div class="p1">
                    <p id="23">图1展示了“天河二号”互连系统的网络拓扑. 网络由三级交换机 (root、NRC和NRM) 组成, 可连接至多18 432个计算节点 (Node) . 第一级交换机是NRM (Network Routing Module) , 它的32个电端口向下连接了32个计算节点. NRM有36个光端口 (图中黑色小方块) 向上连接到第二级交换机. 第二级交换机是NRC, 下侧和上侧各有12个光端口. 下侧通过10 m光纤连接到NRM, 上侧通过20 m光纤连接到第三级交换机. 36个NRC连接的432个结点组成一个计算集群 (cluster) . 第三级是根交换机 (root switch) , 一个根交换机有48个光端口, 分别通往不同的集群, 使整个网络连通. 在天河“胖树”网络中, 一条水平割线在任何位置穿过的链路数相等, 网络等分带宽正比于计算结点数量, 没有发生超额订阅 (oversubscription) , 理论上可以提供最大100%的数据吞吐率.</p>
                </div>
                <div class="area_img" id="24">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201908005_024.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 “天河二号”计算机互连网络的“胖树”拓扑" src="Detail/GetImg?filename=images/WXYJ201908005_024.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>1 “<b>天河二号”计算机互连网络的“胖树”拓扑</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201908005_024.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="25">24端口的网络路由芯片 (Network Routing Chip, NRC) 是三级交换机的基本单元, NRM和根交换机都由两层多个NRC拼接组成. 取决于通信结点之间的“距离”, 网络报文可能会穿越1/3/5/7/9个NRC. 报文首先向上转发, 到达通信结点的某一“公共祖先”交换机, 然后向下转发, 到达目的结点. 任何一个“祖先”交换机都可以发现一条通向目的结点的路径, 因此报文向上转发到“祖先”的路径是任意的, 但向下通向目的结点的路径一般是唯一的. “胖树”丰富的链路资源提供了大量冗余链路, 流量自适应路由方法可以在大量数据传输时, 平衡链路负载. 另一方面, 当网络报文需要穿越第二级交换机时, 必须在两次光传输中间进行电交换, 发生光电转换.</p>
                </div>
                <h3 id="26" name="26" class="anchor-tag">3 <b>电交换的路由器模型</b></h3>
                <h4 class="anchor-tag" id="27" name="27">3.1 NRC<b>的瓦片阵列高阶路由器结构</b></h4>
                <div class="p1">
                    <p id="28">NRC是网络三级交换机的基本单元, 由24个双向端口和一个片上网络 (Network on Chip, NoC) 组成. 路由器设计中, 增加端口数量可提升总吞吐量, 但因交叉开关、控制逻辑的复杂度与端口数成平方关系, 物理设计难度增大. 因此NRC采用了瓦片阵列结构<citation id="116" type="reference"><link href="101" rel="bibliography" /><sup>[<a class="sup">5</a>]</sup></citation>, 如图2所示. 缓冲区 (buffer) 和交叉开关被分布在4×6个完全相同的瓦片中, 每个瓦片包含一个6输入4输出的子开关 (sub-switch) 、端口的输入缓冲区 (input buffer) 、输出缓冲区 (output buffer) , 子开关的交点处也设置了缓冲区 (cross-point buffer) . 每个瓦片关联一个端口, 包含接收机 (receiver, RX) 和发射机 (transmitter, TX) . 瓦片之间用行总线和列总线相连.</p>
                </div>
                <div class="area_img" id="29">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201908005_029.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 高阶路由器的瓦片阵列和瓦片内部结构" src="Detail/GetImg?filename=images/WXYJ201908005_029.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>2 <b>高阶路由器的瓦片阵列和瓦片内部结构</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201908005_029.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="30" name="30">3.2 NRC<b>内数据分组的交换过程</b></h4>
                <div class="p1">
                    <p id="31">网络中一个链路层分组 (packet) 由5个微片 (flit) 组成. 头微片包含源结点编号、目的结点编号的路由信息, 每个微片有表明微片位置的标志 (Head/Body/Tail) 和虚通道编号 (virtual channel, VC) , 属于同一数据分组的微片的VC相同. 数据分组在网络缓冲区之间的传输采用了“虚切通 (virtual cut-through) ”机制. 如图2, 输入缓冲区、开关交点缓冲区、输出缓冲区都有6个FIFO队列, 用于VC为1～6的数据分组的缓存. 另一方面, 在NRC内部、多个NRC之间, 连接前后两级的缓冲区的只有一条物理信道. “虚切通”机制允许将单物理信道同时分配给几个不同虚通道上的数据分组. 获得分配的数据分组, 其微片可以轮询传输. 这样, 数据传输实际以微片为单位, 多个分组分时复用单物理信道, 在各自的虚拟信道上传输.</p>
                </div>
                <div class="p1">
                    <p id="32">如图2所示, 数据分组从“输入瓦片 (input tile) ”的接收机进入NRC, 经行总线到达“接力瓦片 (relay tile) ”、穿过子开关, 再经过列总线到达“输出瓦片 (output tile) ”, 从发射机离开NRC. 数据分组的传输是多级流水线过程:</p>
                </div>
                <div class="p1">
                    <p id="33"> (1) WB (Write Buffer) :“输入瓦片”收到分组后, 按照VC存放在相应输入缓冲区队列中;</p>
                </div>
                <div class="p1">
                    <p id="34"> (2) RC (Route Compute) : “输入瓦片”的路由逻辑检查队首数据分组的路由信息、计算输出端口, 行总线将数据分组分发到“接力瓦片”的开关缓冲区, 存储在VC相应队列. “接力瓦片”和“输入瓦片”在同一行, 和“输出瓦片”在同一列;</p>
                </div>
                <div class="p1">
                    <p id="35"> (3) VA-1 (Virtual Channel Allocation 1) :在6输入、4输出的子开关中, 数据分组和来自其它5个输入口的数据竞争同一个开关输出, 将输出口的6个虚通道分配以轮询方式分配给6个数据分组;</p>
                </div>
                <div class="p1">
                    <p id="36"> (4) SA (Witch Arbitration) :将开关输出权轮询地授予6个获胜的数据分组;</p>
                </div>
                <div class="p1">
                    <p id="37"> (5) ST (Switch Traversal) :获胜的6个数据分组以微片为单位, 穿过子开关, 被列总线传送到“输出瓦片”的输出缓冲区;</p>
                </div>
                <div class="p1">
                    <p id="38"> (6) VA-2 (Virtual Channel Allocation 2) :由于一列其它3个“接力瓦片”的数据分组也被发送到输出缓冲区, 这些分组竞争输出TX的6个虚通道;</p>
                </div>
                <div class="p1">
                    <p id="39"> (7) PA (Port Arbitration) :获得虚通道的6个数据分组, 以微片为单位轮询地被发射机转发, 离开NRC.</p>
                </div>
                <div class="p1">
                    <p id="40">采用分布式缓存、“虚切通”传输机制, 提高了存储资源、链路资源的利用率. 当某一分组的微片由于自身原因无法传输时, 其它分组的微片不会因此被阻塞 (head-of-line blocking) , 因此也提升了数据吞吐量. 然而硬件流水线也显著延长. 测试表明“天河二号”单路由器的穿越延迟达到了100 ns<citation id="117" type="reference"><link href="93" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>.</p>
                </div>
                <h3 id="41" name="41" class="anchor-tag">4 <b>基于</b>AWGR<b>的光电混合交换网络</b></h3>
                <h4 class="anchor-tag" id="42" name="42">4.1 AWGR<b>光交换器件</b></h4>
                <div class="area_img" id="91">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201908005_09100.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 6&#215;6的AWGR波长路由示意" src="Detail/GetImg?filename=images/WXYJ201908005_09100.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图3 6×6的AWGR波长路由示意  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201908005_09100.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="47">图3以一个6输入、6输出的AWGR为例, 展示了波长路由器的原理. AWGR的路由波长数等于端口数. 如图3 (a) , 当来自输入1的光分别位于不同的波长上, 会被路由到不同的端口;多个输入的路由方式是循环的. AWGR内有弯曲的、长度不等阵列波导, 引入了光相位差;不同波长的光在波导末端发生干涉时, 增强和抵消的位置也不同, 将输出端口设计在某一波长的光发生增强干涉的位置, 即可实现波长的路由. 如输入1的λ<sub>5</sub>光会被路由到输出5, 但输入2的λ<sub>5</sub>光会被路由到输出4. 波长与端口路由的关系由图3 (b) 的路由表定义. 反过来看, 当来自输入1的光报文希望从输出5离开路由器, 则它必须被预先调制到λ<sub>5</sub>波长上. 通过控制或调整光的波长, 可以实现AWGR的路由. 此外, 循环波长路由有一个重要性质:来自不同输入、去往同一输出的光波长必不相同, 可以同时输出, 这样就消除了电路由器的端口竞争, 光报文的穿越延迟仅取决于波导的长度. AWGR独特的波长路由方式, 实现了光报文的无阻塞直接交换.</p>
                </div>
                <h4 class="anchor-tag" id="48" name="48">4.2 <b>光电混合交换网络结构</b></h4>
                <div class="area_img" id="49">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201908005_049.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 基于AWGR的互连网络拓扑" src="Detail/GetImg?filename=images/WXYJ201908005_049.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>4 <b>基于</b>AWGR<b>的互连网络拓扑</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201908005_049.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="50">基于AWGR的光电混合交换网络结构如图4所示. 和图1相比, 光电混合交换网络的拓扑相同, 第一级、第三级交换机的基本结构不变, 但第二级交换机全部用24通道的AWGR替代, 同时对第一级、第三级交换机的光端口进行改进设计, 实现光分组的波分复用交换与电微片的片内交换的桥接.</p>
                </div>
                <h4 class="anchor-tag" id="51" name="51">4.3 <b>适用于波长路由的电路由器光端口设计</b></h4>
                <div class="area_img" id="52">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201908005_052.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 高阶路由器的光端口结构改进" src="Detail/GetImg?filename=images/WXYJ201908005_052.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>5 <b>高阶路由器的光端口结构改进</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201908005_052.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="53">在光电混合交换网络中, 为了实现波长路由的光交换方式, 需要对第一级、第三级交换机NRC的光端口进行改进设计. 图5展示了改进光端口的结构. 在输入端口处, 1:N的光解复用器 (O-DEMUX) 将AWGR输出的最多N路并行光报文进行分波, 每一路报文分别由RX接收. 然后, 报文以分组为单位, 存储在一个共享缓冲区 (shared buffer) , 缓冲区具有N写k读的功能, k不高于虚通道的数量. 从共享缓冲区读出的数据微片, 写入到“输入瓦片”的输入缓冲区内. 在输出端口, 增加了一个路由计算模块, 能对输出缓冲区准备发送的数据分组, 预先执行在AWGR内的路由计算, 确定目标波长. 可调波长发射机 (tunable TX) 具有一个快速可调谐激光器 (Tunable Laser, TL) 结构, 可以根据路由计算的波长结果, 将数据分组转换成具有目标波长的光信号发射出去, 其波长切换时间在纳秒量级<citation id="118" type="reference"><link href="103" rel="bibliography" /><sup>[<a class="sup">6</a>]</sup></citation>. 由于只对光端口进行了改进设计, 仍然保留了在NRC瓦片内的多级流水线逻辑, 端口仲裁和片上网络内“虚切通”的传输方式没有变化.</p>
                </div>
                <div class="p1">
                    <p id="54">从光端口进入的数据分组, 在写入到输入缓冲区 (WB阶段) 之前, 增加了两个阶段:</p>
                </div>
                <div class="p1">
                    <p id="55"> (1) WB-0 (Write Buffer 0) :一个1:N的光DEMUX分离出不同波长上最多N路数据分组, 同时写入到共享缓冲区中;</p>
                </div>
                <div class="p1">
                    <p id="56"> (2) VA-0 (Virtual Channel Allocation 0) :将6个虚通道分配给共享缓冲区中的至多6个数据分组 (如图5中标注V1～V6的数据分组) , 其他分组在竞争中失败 (图5中标注×) .</p>
                </div>
                <div class="p1">
                    <p id="57">同时, WB-0阶段不再直接存储RX接收的数据微片. 在共享缓冲区中获得虚通道的数据分组, 其微片写入到输入缓冲区的对应队列中. 此后, 数据分组进入NRC片上网络的多级流水线中.</p>
                </div>
                <div class="p1">
                    <p id="58">要从光端口输出的数据分组, 在进入到“输出瓦片”的输出缓冲区后, 将以数据分组为单位转发, 不再执行VA-2的过程. 因为快速可调谐激光器在波长切换时无法发送数据报文, 以分组为单位转发避免了频繁地波长切换导致的吞吐量损失.</p>
                </div>
                <div class="p1">
                    <p id="59"> (1) RC-2 (Route Compute 2) :在“输出瓦片”的输出缓冲区中, 路由模块检查缓存队首数据分组的路由信息, 预先计算出数据分组在AWGR内的输出端口. 由于“输出瓦片”映射的NRC端口固定连接到某一AWGR输入端口p<sub><i>i</i></sub>, 根据p<sub><i>i</i></sub>和p<sub><i>o</i></sub>查询如图3 (b) 的波长路由表, 即可得到实现正确路由所需的波长λ. 路由计算模块寄存了所有可发送数据分组的请求波长值;</p>
                </div>
                <div class="p1">
                    <p id="61"> (2) PA (Port Allocation) :快速可调谐激光器的波长切换时间与两个波长距离成正相关<citation id="119" type="reference"><link href="103" rel="bibliography" /><sup>[<a class="sup">6</a>]</sup></citation>. 在多个可发送的数据分组中, 采用“懒惰”分配机制, 优先将端口分配给请求波长最接近当前调谐波长的数据分组, 可最小化波长距离.</p>
                </div>
                <div class="p1">
                    <p id="63">在光端口的输入和输出侧增加的硬件结构, 具有“光适配器”功能. 在适配器的光信号侧, 可以直接接收来自AWGR的多波长光数据分组, 也可以直接向AWGR发送已调谐波长的光数据分组;在适配器的电信号侧, 数据分组的传输方式与原NRC的瓦片结构相同.</p>
                </div>
                <h3 id="64" name="64" class="anchor-tag">5 <b>网络流量控制</b></h3>
                <div class="p1">
                    <p id="65">高性能计算互连网络应当能够处理突发的大量数据传输的流量场景, 并且尽可能避免数据分组的丢失<citation id="120" type="reference"><link href="105" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>. 与电信网络依靠传输层的TCP协议实现可靠数据传输和流量控制不同, 高性能计算互连网络需要实现链路层的流量控制. 目前学术界尚未提出可靠的光信号随机存储器 (RAM) 方案, 因此光电混合交换网络的流量控制协议需要确保电交换路由器的缓冲区不发生溢出. 光电混合交换网络采用了基于“信用 (credit) ”的流量控制和基于“通断 (on/off) ”的流量控制两种方法, 可以确保当上游路由器向下游路由器的输入缓冲区发送数据之前, 已经获知下游缓冲区的占用情况.</p>
                </div>
                <h4 class="anchor-tag" id="66" name="66">5.1 “<b>信用”流量控制方法</b></h4>
                <div class="p1">
                    <p id="67">在第一级交换机内部、第三级交换机内部的两层NRC之间, 采用了细粒度的基于“信用”的流量控制方法. “信用”是指下游缓冲区的剩余容量, 以数据微片为单位. 在电交换机内部, 由于某一个NRC电端口 (称为上游电端口) 唯一地向另一NRC电端口 (称为下游电端口) 发送数据微片, 上游电端口维护了下游电端口缓冲区中每个缓存队列的剩余容量 (即信用) . 当上游电端口在虚通道v上发送了一个微片, 上游电端口自觉地将维护的v队列的信用减少1;当下游电端口中有一个微片离开了v缓冲队列, 则下游电端口主动向上游电端口发送一个信用消息credit-message (v) . 上游电端口收到后, 将维护的v队列的信用增加1. 当某一虚通道信用为0时, 上游电端口不能在该虚通道上发送数据分组. 信用消息只是局部地在直接相连的两个NRC电端口之间交换.</p>
                </div>
                <h4 class="anchor-tag" id="68" name="68">5.2 “<b>通断”流量控制方法</b></h4>
                <div class="p1">
                    <p id="69">在第一级和第三级交换机之间, 采用了粗粒度的“通断”流量控制. 此时上游光端口可以经过AWGR向任一下游光端口发送数据分组, 上下游端口不再一一对应. 当下游光端口的共享缓冲区占用率高于某一阈值时, 下游光端口在每个波长上产生一个traffic-message (OFF, k) 并上溯发送, 表示AWGR的k通道所连的光端口发生拥塞, 临时关断. 由于关断消息在所有波长上广播, 所有可能向下游拥塞光端口发送数据分组的上游光端口都会收到关断消息. 当下游光端口的共享缓冲区占用率降低到阈值以下时, 产生并广播traffic-message (ON, k) 消息, 表示AWGR的k通道所连的光端口已恢复畅通. 上游光端口根据收到的关断或开通消息决定是否在某一波长位置, 向特定下游光端口发送数据分组. 此外, “信用”和“通断”流量控制消息可以嵌入在数据分组的头微片中, 利用已有的带内 (in-band) 数据链路进行传输, 以最小化额外的网络负载.</p>
                </div>
                <h3 id="70" name="70" class="anchor-tag">6 <b>网络性能仿真</b></h3>
                <div class="p1">
                    <p id="71">本文使用OMNeT++软件框架<citation id="121" type="reference"><link href="107" rel="bibliography" /><sup>[<a class="sup">8</a>]</sup></citation>, 编写了“天河二号”互连网络链路层的仿真模型, 以及提出的基于AWGR的光电混合交换的仿真模型, 并进行了网络吞吐率和传输延迟的对比仿真. OMNeT++是基于C++语言的离散事件仿真框架, 广泛应用于通信网络中消息事件的建模和仿真. OMNeT++提供了带参数的链路、自定义消息、网络端口、拓扑连接、网络模块的软件基础设施. 通过继承系统定义的网络模块, 重载消息回调函数, 可以建立网络中的主机、交换机模型;通过设定链路参数、组合网络模块、定义网络拓扑, 可以搭建出完整的互连网络, 实现链路层的流量仿真.</p>
                </div>
                <div class="area_img" id="72">
                    <p class="img_tit"><b>表</b>1 <b>电交换网络和光电混合交换网络的仿真设定</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="72" border="1"><tr><td><br />仿真参数</td><td>仿真设定</td></tr><tr><td><br />流量模型</td><td>均匀随机 (uniform random) 、热点 (hotspot) </td></tr><tr><td><br />端口和链路带宽</td><td>112 Gbps</td></tr><tr><td><br />链路延迟</td><td>一二级交换机间50 ns, 二三级交换机间100 ns</td></tr><tr><td><br />NRC零负载延迟</td><td>100 ns</td></tr><tr><td><br />网卡穿越延迟</td><td>320 ns</td></tr><tr><td><br />计算节点时钟</td><td>437.5 MHz</td></tr><tr><td><br />数据分组长度</td><td>5个微片, 每个微片32个字节</td></tr><tr><td><br />TL波长切换时间</td><td>2～4 ns</td></tr><tr><td><br />NRC/AWGR端口数</td><td>24</td></tr><tr><td><br />计算节点数量</td><td>18 432</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="73">网络仿真对比了光电混合交换网络、电交换网络的吞吐率和延迟性能. 仿真的设定条件如表1所示, 参考了天河超级计算机互连网络的设计与测试参数, 根据仿真结果绘制出图6所示的性能-负载曲线. 注入负载 (offered load) 和吞吐率 (throughput rate) 归一化到所有计算结点的总带宽, 平均延迟 (average latency) 由计算结点一段时间内收到的所有微片的总延迟取算术平均得到, 包含了路由器延迟、链路延迟和网卡穿越延迟.</p>
                </div>
                <div class="area_img" id="92">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/WXYJ201908005_09200.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 随机均匀和热点流量下的吞吐率和延迟仿真" src="Detail/GetImg?filename=images/WXYJ201908005_09200.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图6 随机均匀和热点流量下的吞吐率和延迟仿真  <a class="btn-zoomin" href="Detail/GetImg?filename=images/WXYJ201908005_09200.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="75">图6中, 均匀随机 (uniform random) 流量模型下, 光电混合交换网络和电交换网络的吞吐率-负载特性 (a) 和延迟-负载特性 (b) 表明:光电混合交换网络的延迟比电交换网络低160～200 ns (约8～10%) , 由于快速可调谐激光器波长切换的额外时间开销, 最大吞吐率为84.56%, 与电交换网络的88.7%相比略有降低. 热点 (hot-spot) 流量模型下吞吐率-负载特性 (c) 和延迟-负载特性 (d) 表明:AWGR消除了端口竞争, 混合交换网络的最大吞吐率为61.53%, 高于电交换网络的51.26%, 提升约10%;由于改善了端口的拥塞状况, 平均延迟降低了180～250ns. 光电混合交换网络保持了电交换网络的高吞吐量优势, 降低了报文传输延迟.</p>
                </div>
                <h3 id="76" name="76" class="anchor-tag">7 <b>结束语</b></h3>
                <div class="p1">
                    <p id="77">本文在“天河二号”超级计算机互连网络的软硬件基础上, 提出了一种基于阵列波导光栅路由器 (AWGR) 的光电混合交换的网络方案.仿真结果表明, 光电混合交换网络的平均延迟降低了8%～10%的同时, 热点流量下的吞吐量有所提升.</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="93">
                            <a id="bibliography_1" target="_blank" href="http://scholar.cnki.net/result.aspx?q=High performance interconnect network for Tianhe System">

                                <b>[1]</b> LIAO X K, PANG Z B, WANG K F, et al.High performance interconnect network for Tianhe System [J].Journal of Computer Science and Technology, 2015, 30 (2) :259.
                            </a>
                        </p>
                        <p id="95">
                            <a id="bibliography_2" target="_blank" href="http://scholar.cnki.net/result.aspx?q=DOS:A scalable optical switch for datacenters">

                                <b>[2]</b> YE X, MEJIA P, YIN Y, et al.DOS - A scalable optical switch for datacenters [C]//ACM/IEEE Symposium on Architectures for Networking and Communications Systems (ANCS) .La Jolla, CA, USA:IEEE, 2010:1-12.
                            </a>
                        </p>
                        <p id="97">
                            <a id="bibliography_3" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Hi-LION:Hierarchical large-scale interconnection optical network with AWGRs">

                                <b>[3]</b> CAO Z, PROIETTI R, YOO S J B.Hi-LION:Hierarchical large-scale interconnection optical network with AWGRs [J].IEEE/OSA Journal of Optical Communications and Networking, 2015, 7 (1) :97-105.
                            </a>
                        </p>
                        <p id="99">
                            <a id="bibliography_4" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Ultra-compact silicon photonic 512&amp;#215;512 25 GHz arrayed waveguide grating router">

                                <b>[4]</b> CHEUNG S, SU T, OKAMOTO K, et al.Ultra-Compact Silicon Photonic 512 × 512 25 GHz Arrayed Waveguide Grating Router [J].IEEE Journal of Selected Topics in Quantum Electronics, 2014, 20 (4) :310-316.
                            </a>
                        </p>
                        <p id="101">
                            <a id="bibliography_5" target="_blank" href="http://scholar.cnki.net/result.aspx?q=The BlackWidow high-radix Clos network">

                                <b>[5]</b> SCOTT S, ABTS D, KIM J, et al.The BlackWidow High-Radix Clos Network [C]//33rd International Symposium on Computer Architecture (ISCA'06) .Boston, MA, USA:IEEE, 2006:16-28.
                            </a>
                        </p>
                        <p id="103">
                            <a id="bibliography_6" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Less than 5-ns wavelength switching with an SG-DBR laser">

                                <b>[6]</b> SIMSARIAN J E, LARSON M C, GARRETT H E, et al.Less than 5-ns wavelength switching with an SG-DBR laser [J].IEEE Photonics Technology Letters, 2006, 18 (4) :565-567.
                            </a>
                        </p>
                        <p id="105">
                            <a id="bibliography_7" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Buffering and flow control in optical switches for high performance computing">

                                <b>[7]</b> YE X, PROIETTI R, YIN Y, et al.Buffering and Flow Control in Optical Switches for High Performance Computing [J].IEEE/OSA Journal of Optical Communications and Networking, 2011, 3 (8) :59-72.
                            </a>
                        </p>
                        <p id="107">
                            <a id="bibliography_8" target="_blank" href="http://scholar.cnki.net/result.aspx?q=OMNeT++ Discrete Event Simulator">

                                <b>[8]</b> OMNeT++ Discrete Event Simulator [EB/OL].Republic of Seychelles:Simulcraft Inc., 2018[2018-11-10].https://omnetpp.org.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="WXYJ201908005" />
        <input id="dpi" type="hidden" value="800" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WXYJ201908005&amp;v=MDM3MzdZUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVWdUZ5bm5WcnpLTWpYU1pMRzRIOWpNcDQ5Rlk=&amp;uid=WEEvREcwSlJHSldRa1Fhb09jT0lPUUo3bEY4T2FiTmZaMW5CaDlzTGhwUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
