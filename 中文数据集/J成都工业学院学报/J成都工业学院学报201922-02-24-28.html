<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=NOOK-mvTMnxl11s6oPYV0boPXN3iP4N7Rc-A56nk4KI1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2fKXReader%2fDetail%3fTIMESTAMP%3d637141893522943750%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dCDDJ201902007%26RESULT%3d1%26SIGN%3dkeOJlubBWdBUVHw7Coz3fEoq5Ts%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=CDDJ201902007&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=CDDJ201902007&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=CDDJ201902007&amp;v=MDA2MzMzenFxQnRHRnJDVVI3cWZadVptRnk3aFY3dktKaW5QWkxHNEg5ak1yWTlGWTRRS0RIODR2UjRUNmo1NE8=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#20" data-title="1 PID-PWM&lt;b&gt;算法&lt;/b&gt; ">1 PID-PWM<b>算法</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#21" data-title="1.1 PID&lt;b&gt;算法&lt;/b&gt;">1.1 PID<b>算法</b></a></li>
                                                <li><a href="#38" data-title="1.2 PWM&lt;b&gt;算法&lt;/b&gt;">1.2 PWM<b>算法</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#41" data-title="2 &lt;b&gt;系统硬件设计与实现&lt;/b&gt; ">2 <b>系统硬件设计与实现</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#44" data-title="2.1 &lt;b&gt;控制器选型&lt;/b&gt;">2.1 <b>控制器选型</b></a></li>
                                                <li><a href="#46" data-title="2.2 &lt;b&gt;前向通道&lt;/b&gt;">2.2 <b>前向通道</b></a></li>
                                                <li><a href="#57" data-title="2.3 &lt;b&gt;后项通道&lt;/b&gt;">2.3 <b>后项通道</b></a></li>
                                                <li><a href="#62" data-title="2.4 &lt;b&gt;人机交互通道&lt;/b&gt;">2.4 <b>人机交互通道</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#66" data-title="3 &lt;b&gt;系统软件设计与实现&lt;/b&gt; ">3 <b>系统软件设计与实现</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#75" data-title="4 &lt;b&gt;系统调试与结构分析&lt;/b&gt; ">4 <b>系统调试与结构分析</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#80" data-title="5 &lt;b&gt;结束语&lt;/b&gt; ">5 <b>结束语</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#40" data-title="&lt;b&gt;图&lt;/b&gt;1 PWM&lt;b&gt;原理示意图&lt;/b&gt;"><b>图</b>1 PWM<b>原理示意图</b></a></li>
                                                <li><a href="#43" data-title="&lt;b&gt;图&lt;/b&gt;2 &lt;b&gt;系统结构框图&lt;/b&gt;"><b>图</b>2 <b>系统结构框图</b></a></li>
                                                <li><a href="#50" data-title="&lt;b&gt;图&lt;/b&gt;3 &lt;b&gt;按键接口电路图&lt;/b&gt;"><b>图</b>3 <b>按键接口电路图</b></a></li>
                                                <li><a href="#56" data-title="&lt;b&gt;图&lt;/b&gt;4 &lt;b&gt;温度传感器&lt;/b&gt;"><b>图</b>4 <b>温度传感器</b></a></li>
                                                <li><a href="#61" data-title="&lt;b&gt;图&lt;/b&gt;5 &lt;b&gt;加热模块&lt;/b&gt;"><b>图</b>5 <b>加热模块</b></a></li>
                                                <li><a href="#64" data-title="&lt;b&gt;图&lt;/b&gt;6 TFT&lt;b&gt;显示模块&lt;/b&gt;"><b>图</b>6 TFT<b>显示模块</b></a></li>
                                                <li><a href="#65" data-title="&lt;b&gt;图&lt;/b&gt;7 &lt;b&gt;串口打印监测数据&lt;/b&gt;"><b>图</b>7 <b>串口打印监测数据</b></a></li>
                                                <li><a href="#74" data-title="&lt;b&gt;图&lt;/b&gt;8 &lt;b&gt;水温控制软件设计流程图&lt;/b&gt;"><b>图</b>8 <b>水温控制软件设计流程图</b></a></li>
                                                <li><a href="#79" data-title="&lt;b&gt;图&lt;/b&gt;9 &lt;b&gt;不同目标温度下&lt;/b&gt;PID&lt;b&gt;控制效果图&lt;/b&gt;"><b>图</b>9 <b>不同目标温度下</b>PID<b>控制效果图</b></a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="3">


                                    <a id="bibliography_1" title="王冠龙, 崔靓, 朱学军.基于数字PID算法的温度控制系统设计[J].传感器与微系统, 2019, 38 (1) :86-88, 96." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=CGQJ201901024&amp;v=MDgxODdUNmo1NE8zenFxQnRHRnJDVVI3cWZadVptRnk3aFY3dktKaXJhWkxHNEg5ak1ybzlIWUlRS0RIODR2UjQ=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[1]</b>
                                        王冠龙, 崔靓, 朱学军.基于数字PID算法的温度控制系统设计[J].传感器与微系统, 2019, 38 (1) :86-88, 96.
                                    </a>
                                </li>
                                <li id="5">


                                    <a id="bibliography_2" title="文波, 孟令军, 张晓春, 等.基于增量式PID算法的水温自动控制器设计[J].仪表技术与传感器, 2015 (12) :113-116." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YBJS201512034&amp;v=MjgwNzlLUEMvQmZiRzRIOVROclk5R1lJUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3FmWnVabUZ5N2hWN3Y=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[2]</b>
                                        文波, 孟令军, 张晓春, 等.基于增量式PID算法的水温自动控制器设计[J].仪表技术与传感器, 2015 (12) :113-116.
                                    </a>
                                </li>
                                <li id="7">


                                    <a id="bibliography_3" title="赵娜, 方圆.基于51单片机的智能水温控制系统的设计[J].电脑迷, 2018, 112 (11) :150." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DNMI201811142&amp;v=MTA0NThRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVI3cWZadVptRnk3aFY3dktJU1BHWjdHNEg5bk5ybzVCWm8=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[3]</b>
                                        赵娜, 方圆.基于51单片机的智能水温控制系统的设计[J].电脑迷, 2018, 112 (11) :150.
                                    </a>
                                </li>
                                <li id="9">


                                    <a id="bibliography_4" title="王博, 曾方, 程一哲.基于PID算法的水温控制系统[J].电脑知识与技术, 2018, 14 (27) :242-243." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DNZS201827105&amp;v=MDE0NjVSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1Wm1GeTdoVjd2S0lTUFJmYkc0SDluT3FJNUZZWVFLREg4NHY=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[4]</b>
                                        王博, 曾方, 程一哲.基于PID算法的水温控制系统[J].电脑知识与技术, 2018, 14 (27) :242-243.
                                    </a>
                                </li>
                                <li id="11">


                                    <a id="bibliography_5" title="刘向东, 高军, 杨乐民.一种新的一阶系统自调整模糊控制器[J].哈尔滨理工大学学报, 2003, 8 (5) :75-79." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=HLGX200305022&amp;v=MDQ3MTJPM3pxcUJ0R0ZyQ1VSN3FmWnVabUZ5N2hWN3ZLTFNITWRyRzRIdExNcW85SFpvUUtESDg0dlI0VDZqNTQ=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[5]</b>
                                        刘向东, 高军, 杨乐民.一种新的一阶系统自调整模糊控制器[J].哈尔滨理工大学学报, 2003, 8 (5) :75-79.
                                    </a>
                                </li>
                                <li id="13">


                                    <a id="bibliography_6" title="姜学军, 刘新郭, 李晓静.计算机控制技术[M].2版.北京:清华大学出版社, 2009." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CBBD&amp;filename=9787302190981001&amp;v=MjIzMDl4RTlmYnZuS3JpZlplWnZGeW50VTduTUpGb1dYRnF6R2JDNEhOREZyNFpOWmVzUERSTTh6eFVTbURkOVNIN24z&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[6]</b>
                                        姜学军, 刘新郭, 李晓静.计算机控制技术[M].2版.北京:清华大学出版社, 2009.
                                    </a>
                                </li>
                                <li id="15">


                                    <a id="bibliography_7" title="张洋, 刘军, 严汉宇, 等.精通STM32F4 (库函数版) [M].北京:北京航空航天大学出版社, 2015." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CBBD&amp;filename=9787512417380000&amp;v=MDI2OTRhNUhOWE5xSXhOWk9zUERCTTh6eFVTbURkOVNIN24zeEU5ZmJ2bktyaWZaZVp2RnludFU3bk1KRm9XWEZxekdi&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[7]</b>
                                        张洋, 刘军, 严汉宇, 等.精通STM32F4 (库函数版) [M].北京:北京航空航天大学出版社, 2015.
                                    </a>
                                </li>
                                <li id="17">


                                    <a id="bibliography_8" title="ST Microelectronics Corporation.STM32F407xx/STM32F407xx Datasheet [EB/OL]. (2016-09-01) [2018-12-30].https://www.st.com/resource/en/datasheet/stm32f407zg.pdf." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=STM32F407xx/STM32F407xx Datasheet">
                                        <b>[8]</b>
                                        ST Microelectronics Corporation.STM32F407xx/STM32F407xx Datasheet [EB/OL]. (2016-09-01) [2018-12-30].https://www.st.com/resource/en/datasheet/stm32f407zg.pdf.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=CDDJ" target="_blank">成都工业学院学报</a>
                2019,22(02),24-28 DOI:10.13542/j.cnki.51-1747/tn.2019.02.006            </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>基于</b>STM32<b>及</b>PID-PWM<b>的智能水温监控系统设计</b></span>
                                    </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E6%9B%BE%E5%87%A4&amp;code=40391550&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">曾凤</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E6%96%BD%E6%98%8E%E6%9C%9D&amp;code=42096240&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">施明朝</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E7%8E%8B%E8%89%B3%E8%90%8D&amp;code=38404953&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">王艳萍</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E9%99%88%E5%BA%94%E6%9D%BE&amp;code=38735991&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">陈应松</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E7%94%B0%E4%BA%9A%E9%93%83&amp;code=39242731&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">田亚铃</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E6%88%90%E9%83%BD%E5%B7%A5%E4%B8%9A%E5%AD%A6%E9%99%A2%E6%9C%BA%E6%A2%B0%E5%B7%A5%E7%A8%8B%E5%AD%A6%E9%99%A2&amp;code=1698414&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">成都工业学院机械工程学院</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>以STM32F407ZGT6单片机作为控制核心, 设计以集成DS18B20芯片的防水型水温探测温线作为温度反馈传感器, 采用积分分离的比例 (Proportional) 、积分 (Integral) 、微分 (Derivative) 算法, 即PID算法控制脉冲宽度调制 (PWM) 占空比进行智能水温闭环控制, 同时用TFT液晶屏监控控制过程。实验结果表明该系统能快速、准确地进行水温控制, 系统稳定性良好。系统控制精度达到0.1℃, 温度波动小于0.5℃。</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=STM32%E5%8D%95%E7%89%87%E6%9C%BA&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">STM32单片机;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=PID&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">PID;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=PWM&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">PWM;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%B0%B4%E6%B8%A9%E9%97%AD%E7%8E%AF%E6%8E%A7%E5%88%B6&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">水温闭环控制;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    曾凤 (1990—) , 女, 助教, 硕士, 研究方向:嵌入式系统应用, 电子邮箱:1541202942@qq.com。;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2019-02-26</p>

                    <p>

                            <b>基金：</b>
                                                        <span>四川省科技创新创业苗子工程项目 (2018RZ0108);</span>
                                <span>成都工业学院校级理工科重点项目 (2018ZR001);</span>
                    </p>
            </div>
                    <h1><b>Design of Intelligent Water Temperature Monitoring System based on PID-PWM and STM</b>32</h1>
                    <h2>
                    <span>ZENG Feng</span>
                    <span>SHI Mingzhao</span>
                    <span>WANG Yanping</span>
                    <span>CHEN Yingsong</span>
                    <span>TIAN Yaling</span>
            </h2>
                    <h2>
                    <span>School of Mechanical Engineering, Chengdu Technological University</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>STM32 F407 ZGT6 micro controller unit was used in this design as the control core, and a waterproof temperature sensitive device integrated with DS18 B20 was used as the temperature feedback sensor. The separation integral PID control algorithm was used to adjust duty cycle of PWM for intelligent closed-loop control of water temperature, and the TFT LCD screen was used to monitor process. The experimental results show that the system can control the water temperature quickly and accurately, and it has good system stability. The accuracy of the system is up to 0.1 ℃, and the temperature shift is less than 0.5 ℃.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=STM32%20micro%20controller%20unit&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">STM32 micro controller unit;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=PID&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">PID;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=PWM&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">PWM;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=closed-loop%20control%20of%20water%20temperature&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">closed-loop control of water temperature;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2019-02-26</p>
                                    <p>
                                            </p>
            </div>


        <!--brief start-->
                        <div class="p1">
                    <p id="19">水温控制受外界环境影响大, 精确模型难建立<citation id="82" type="reference"><link href="3" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>, 由于加热设备余热及环境散热等因素, 加热和制冷均为非稳定过程<citation id="83" type="reference"><link href="5" rel="bibliography" /><sup>[<a class="sup">2</a>]</sup></citation>。赵娜等利用51单片机采用断续ON-OFF控制水温<citation id="84" type="reference"><link href="7" rel="bibliography" /><sup>[<a class="sup">3</a>]</sup></citation>, 王博实现了仿真条件下的PID算法水温控制<citation id="85" type="reference"><link href="9" rel="bibliography" /><sup>[<a class="sup">4</a>]</sup></citation>, 文波等基于51单片机PID控制继电器进行温度控制<citation id="86" type="reference"><link href="5" rel="bibliography" /><sup>[<a class="sup">2</a>]</sup></citation>。温度控制环节是纯滞后的一阶大惯性环节<citation id="87" type="reference"><link href="11" rel="bibliography" /><sup>[<a class="sup">5</a>]</sup></citation>, 在要求控制精度、温度上升速度及下降速度可控的情况下, 51单片机片内资源及运行速度有限, 不能满足要求。ON-OFF控制系统振荡大, 稳定性差。本系统以STM32单片机为控制核心, 采用PID算法及PWM控制, 以提高控制精度及稳定性。</p>
                </div>
                <h3 id="20" name="20" class="anchor-tag">1 PID-PWM<b>算法</b></h3>
                <h4 class="anchor-tag" id="21" name="21">1.1 PID<b>算法</b></h4>
                <div class="p1">
                    <p id="22">PID控制器自20世纪30年代出现以来, 由于控制效果好、容易在计算机中编程实现, 得到了快速的发展及广泛的应用<citation id="88" type="reference"><link href="13" rel="bibliography" /><sup>[<a class="sup">6</a>]</sup></citation>。其中积分调节保证系统的快速性, 微分调节可提高控制精度, 微分调节可消除系统惯性。</p>
                </div>
                <div class="p1">
                    <p id="23">模拟PID控制器的微分方程为:</p>
                </div>
                <div class="p1">
                    <p id="24" class="code-formula">
                        <mathml id="24"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>u</mi><mo stretchy="false"> (</mo><mi>t</mi><mo stretchy="false">) </mo><mo>=</mo><mi>Κ</mi><msub><mrow></mrow><mi>p</mi></msub><mo stretchy="false">[</mo><mi>e</mi><mo stretchy="false"> (</mo><mi>t</mi><mo stretchy="false">) </mo><mo>+</mo><mfrac><mn>1</mn><mrow><mi>Τ</mi><msub><mrow></mrow><mi>Ι</mi></msub></mrow></mfrac><mrow><mstyle displaystyle="true"><mrow><mo>∫</mo><mrow></mrow></mrow></mstyle></mrow><msubsup><mrow></mrow><mn>0</mn><mi>t</mi></msubsup><mi>e</mi><mo stretchy="false"> (</mo><mi>t</mi><mo stretchy="false">) </mo><mtext>d</mtext><mi>t</mi><mo>+</mo><mi>Τ</mi><msub><mrow></mrow><mi>D</mi></msub><mfrac><mrow><mtext>d</mtext><mi>e</mi><mo stretchy="false"> (</mo><mi>t</mi><mo stretchy="false">) </mo></mrow><mrow><mtext>d</mtext><mi>t</mi></mrow></mfrac><mo stretchy="false">]</mo><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>1</mn><mo stretchy="false">) </mo></mrow></math></mathml>
                    </p>
                </div>
                <div class="p1">
                    <p id="25">其中:<i>u</i> (<i>t</i>) 为输出信号;<i>K</i><sub><i>p</i></sub>为比例系数;<i>T</i><sub><i>I</i></sub>为积分时间常数;<i>T</i><sub><i>d</i></sub>为微分时间常数;<i>e</i> (<i>t</i>) 为误差。</p>
                </div>
                <div class="p1">
                    <p id="26">为了编程方便, 用采样周期<i>T</i>将其离散化, 当<i>T</i>足够小时, 微分方程可以写为位置式数字PID方程:</p>
                </div>
                <div class="p1">
                    <p id="27" class="code-formula">
                        <mathml id="27"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtable columnalign="left"><mtr><mtd><mi>u</mi><mo stretchy="false"> (</mo><mi>k</mi><mo stretchy="false">) </mo><mo>=</mo><mi>Κ</mi><msub><mrow></mrow><mi>Ρ</mi></msub><mo stretchy="false">[</mo><mi>e</mi><mo stretchy="false"> (</mo><mi>k</mi><mo stretchy="false">) </mo><mo>+</mo><mfrac><mi>Τ</mi><mrow><mi>Τ</mi><msub><mrow></mrow><mi>Ι</mi></msub></mrow></mfrac><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mi>k</mi></munderover><mi>e</mi></mstyle><mo stretchy="false"> (</mo><mi>j</mi><mo stretchy="false">) </mo><mo>+</mo><mi>Τ</mi><msub><mrow></mrow><mi>D</mi></msub><mfrac><mrow><mi>e</mi><mo stretchy="false"> (</mo><mi>k</mi><mo stretchy="false">) </mo><mo>-</mo><mi>e</mi><mo stretchy="false"> (</mo><mi>k</mi><mo>-</mo><mn>1</mn><mo stretchy="false">) </mo></mrow><mi>Τ</mi></mfrac><mo stretchy="false">]</mo><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>2</mn><mo stretchy="false">) </mo></mtd></mtr><mtr><mtd><mi>u</mi><mo stretchy="false"> (</mo><mi>k</mi><mo stretchy="false">) </mo><mo>=</mo><mi>Κ</mi><msub><mrow></mrow><mi>Ρ</mi></msub><mi>e</mi><mo stretchy="false"> (</mo><mi>k</mi><mo stretchy="false">) </mo><mo>+</mo><mi>Κ</mi><msub><mrow></mrow><mi>Ι</mi></msub><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mi>k</mi></munderover><mi>e</mi></mstyle><mo stretchy="false"> (</mo><mi>j</mi><mo stretchy="false">) </mo><mo>+</mo><mi>Κ</mi><msub><mrow></mrow><mi>D</mi></msub><mo stretchy="false">[</mo><mi>e</mi><mo stretchy="false"> (</mo><mi>k</mi><mo stretchy="false">) </mo><mo>-</mo><mi>e</mi><mo stretchy="false"> (</mo><mi>k</mi><mo>-</mo><mn>1</mn><mo stretchy="false">) </mo><mo stretchy="false">]</mo><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>3</mn><mo stretchy="false">) </mo></mtd></mtr></mtable></math></mathml>
                    </p>
                </div>
                <div class="p1">
                    <p id="28">其中:<image id="91" type="formula" href="images/CDDJ201902007_09100.jpg" display="inline" placement="inline"><alt></alt></image>。<i>K</i><sub><i>I</i></sub>为积分系数, <i>K</i><sub><i>D</i></sub>为微分系数。</p>
                </div>
                <div class="p1">
                    <p id="31">由于累加<i>e</i> (<i>j</i>) 耗费控制器的存储和计算时间, 实际编程中将方程 (3) 改进为:</p>
                </div>
                <div class="p1">
                    <p id="32"><i>u</i> (<i>k</i>) =<i>K</i><sub><i>P</i></sub><i>e</i> (<i>k</i>) +<i>K</i><sub><i>I</i></sub>[<i>e</i> (<i>k</i>) +<i>e</i> (<i>k</i>-1) ]+<i>K</i><sub><i>D</i></sub>[<i>e</i> (<i>k</i>) -<i>e</i> (<i>k</i>-1) ]      (4) </p>
                </div>
                <div class="p1">
                    <p id="33">控制系统中, 过强的积分控制将增加调节时间, 同时使系统产生过大的超调。因而本系统采用积分分离方法, 以平衡积分作用和系统动态特性。</p>
                </div>
                <div class="p1">
                    <p id="34"><i>u</i> (<i>k</i>) =<i>K</i><sub><i>P</i></sub><i>e</i> (<i>k</i>) +<i>K</i><sub><i>L</i></sub><i>K</i><sub><i>I</i></sub>[<i>e</i> (<i>k</i>) +<i>e</i> (<i>k</i>-1) ]+<i>K</i><sub><i>D</i></sub>[<i>e</i> (<i>k</i>) -<i>e</i> (<i>k</i>-1) ]      (5) </p>
                </div>
                <div class="p1">
                    <p id="35">其中:<image id="92" type="formula" href="images/CDDJ201902007_09200.jpg" display="inline" placement="inline"><alt></alt></image>称为控制系数, 本系统中<i>e</i><sub>0</sub>取2 ℃。</p>
                </div>
                <h4 class="anchor-tag" id="38" name="38">1.2 PWM<b>算法</b></h4>
                <div class="p1">
                    <p id="39">脉冲宽度调制 (Pulse Width Modulation, PWM) 是利用微处理器的数字输出来对模拟电路进行控制的一种有效的技术, 其原理图如图1所示<citation id="89" type="reference"><link href="15" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>。本系统利用STM32的定时器14通道1的PWM输出模式。设置定时器的计数频率为1 MHz, 重装载置寄存器ARR的值设置为5 000, 因而PWM周期为200 Hz。利用PID算法改变捕获/比较寄存器CCRx的值, 便可以改变PWM占空比。占空比为CCRx的值除以ARR的值。利用PMW输出的IO逻辑便可以实时调节加热器功率, 实时加热功率为PWM占空比乘以加热器功率。</p>
                </div>
                <div class="area_img" id="40">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/CDDJ201902007_040.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 PWM原理示意图" src="Detail/GetImg?filename=images/CDDJ201902007_040.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>1 PWM<b>原理示意图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/CDDJ201902007_040.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="41" name="41" class="anchor-tag">2 <b>系统硬件设计与实现</b></h3>
                <div class="p1">
                    <p id="42">本设计由STM32单片机最小系统、按键目标温度设置模块、防水型DS18B20温度检测模块、3.5 in (8.89 cm) TFT液晶显示屏控制模块、MOSFET控制的防水型加热器模块、串口通信模块构成。本系统是集水温信号采集、处理、显示、调节为一体的智能水温闭环控制系统, 结构框图如图2所示。</p>
                </div>
                <div class="area_img" id="43">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/CDDJ201902007_043.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 系统结构框图" src="Detail/GetImg?filename=images/CDDJ201902007_043.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>2 <b>系统结构框图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/CDDJ201902007_043.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="44" name="44">2.1 <b>控制器选型</b></h4>
                <div class="p1">
                    <p id="45">本设计选择STM32F407ZGT6单片机作为主控芯片, 该芯片内核为ARM Cortex-M4;主频高达168 MHz;有114个通用IO;工作电压范围为1.73～3.6 V;定时器资源丰富, 可用于驱动数模转换器 (Digital to Analog Converter, DAC) 、测量输入信号的脉冲宽度 (输入捕获) 、生成输出波形 (输出比较、PWM、带死区插入的互补PWM) ;通信接口丰富:3个I2C接口、3个SPI接口, 2个USB接口, 2个控制器局域网CAN2.0总线等<citation id="90" type="reference"><link href="17" rel="bibliography" /><sup>[<a class="sup">8</a>]</sup></citation>。STM32F407系列单片机由于资源丰富, 适用于多种控制场合。</p>
                </div>
                <h4 class="anchor-tag" id="46" name="46">2.2 <b>前向通道</b></h4>
                <div class="p1">
                    <p id="47">本系统的前向通道主要由两部分组成, 由加、减两个按键电路构成的目标温度设定模块以及以DS18B20传感器为核心器件的温度测量模块。</p>
                </div>
                <h4 class="anchor-tag" id="48" name="48">2.2.1 目标温度设定模块</h4>
                <div class="p1">
                    <p id="49">目标温度设定模块由两个独立按键控制, 与STM32单片机的接口电路如图3所示。其中, KEY1连接单片机的PE3口、KEY2连接单片机的PE2口。</p>
                </div>
                <div class="area_img" id="50">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/CDDJ201902007_050.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 按键接口电路图" src="Detail/GetImg?filename=images/CDDJ201902007_050.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>3 <b>按键接口电路图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/CDDJ201902007_050.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="51">目标温度设定采用软件加硬件的方式, 在软件初始化程序中设定一个基准温度, 两个硬件按键KEY1、KEY2分别作为目标温度加、减键。每按一次“加键”, 设定的目标温度值在基准温度上加0.1 ℃, 并作为当前的基准温度。每按一次“减键”, 目标温度值就减0.1 ℃。目标水温最高可设置成100 ℃, 最低可设置成0 ℃。</p>
                </div>
                <h4 class="anchor-tag" id="52" name="52">2.2.2 温度测量模块</h4>
                <div class="p1">
                    <p id="53">采用DS18B20作为温度传感器。其测温范围为-55～125  ℃。在温度为-10～85 ℃范围内的精度为±0.5  ℃。该传感器采用单总线接口、仅需要一条口线即可实现微处理器与该芯片的双向通信, 抗干扰性强。其供电电压范围为3.0～5.5 V。测量结果以9～12位数字方式串行传送。本系统配置为12位精度模式, 最大转换时间为750 ms。同时考虑到水温控制的防水要求, 采用了Raisym公司的不锈钢防水型封装的DS18B20温线, 如图4 (a) 所示。控制电路如图4 (b) 所示, 传感器的数据线端口2连接单片机的PG9口。</p>
                </div>
                <div class="area_img" id="56">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/CDDJ201902007_05600.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 温度传感器" src="Detail/GetImg?filename=images/CDDJ201902007_05600.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>4 <b>温度传感器</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/CDDJ201902007_05600.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="57" name="57">2.3 <b>后项通道</b></h4>
                <div class="p1">
                    <p id="58">本系统的后项通道由供电电源、加热器控制电路及加热器组成。加热器供电电源选用大疆悟1 V 2.0 TB47可充电电池, 可供电压为22.2～26 V。控制电路主要由2SD601A型号的NPN三极管与SUM110P0607L型号的MOSFET管组成, 其中三极管的基级与单片机的F9端口相连, 端口复用为TIM14_CH1 PWM模式。加热器为防水U型24 V 500 W电阻丝。由于加热器供电电源为24  V, 单片机工作在3.3 V, 所以采用PWM信号输出控制NPN三极管的通断, 利用三极管集电极电压控制大功率MOS管通断作为加热器的驱动控制, 进而控制加热功率。加热器实物如图5 (a) 所示, 控制电路如图5 (b) 所示。</p>
                </div>
                <div class="area_img" id="61">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/CDDJ201902007_06100.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 加热模块" src="Detail/GetImg?filename=images/CDDJ201902007_06100.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>5 <b>加热模块</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/CDDJ201902007_06100.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="62" name="62">2.4 <b>人机交互通道</b></h4>
                <div class="p1">
                    <p id="63">本系统的人机交互通道包括TFT液晶显示模块及利用STM32串口通信发送数据串口至PC端利用调试助手软件显示。本设计中采用两种显示, 即用TFT液晶屏显示设定温度和当前实际温度, 或使用串口打印方式监测数据。用串口通信发送信息到上位机 (PC) , 显示目标水温、当前温度、温度的偏差, PID的比例项、积分项、差分项输出, PWM输出。TFT显示实物如图6所示。使用串口打印方式监测数据如图7所示。</p>
                </div>
                <div class="area_img" id="64">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/CDDJ201902007_064.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 TFT显示模块" src="Detail/GetImg?filename=images/CDDJ201902007_064.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>6 TFT<b>显示模块</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/CDDJ201902007_064.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="65">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/CDDJ201902007_065.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 串口打印监测数据" src="Detail/GetImg?filename=images/CDDJ201902007_065.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>7 <b>串口打印监测数据</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/CDDJ201902007_065.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="66" name="66" class="anchor-tag">3 <b>系统软件设计与实现</b></h3>
                <div class="p1">
                    <p id="67">控制程序在Keil μVision5集成开发环境中编写, 用C语言编程。软件程序包括系统初始化, 按键信息采集处理, 水温采集、处理、显示, 控制信号调整输出, 其流程图如图8所示。</p>
                </div>
                <div class="p1">
                    <p id="68">程序功能主要由以下几部分组成:</p>
                </div>
                <div class="p1">
                    <p id="69">1) 系统初始化:TFT初始化、按键初始化、温度传感器初始化、PID参数初始化、目标温度初始化、PWM 输出初始化, 即将定时器14通道1配置为定时器PWM模式。</p>
                </div>
                <div class="p1">
                    <p id="70">2) 目标温度按键信息采集:定时采集两个按键接口PE2、PE3口的电平信号, 当有对应键按下时, 修改目标温度。</p>
                </div>
                <div class="p1">
                    <p id="71">3) 温度数据采集:定时采集温度传感器接口PG9的温度信号, 获得实时水温。</p>
                </div>
                <div class="p1">
                    <p id="72">4) 大功率MOS管控制:根据设定的目标温度及温度传感器采集到的当前温度, 利用PID控制算法, 控制PWM信号的占空比, 通过PF9口输出PWM波控制加热器电路。</p>
                </div>
                <div class="p1">
                    <p id="73">5) 数据显示:编程将目标温度及实时温度显示在TFT上。利用printf () 函数将温度调节信息显示在PC端串口助手软件中。</p>
                </div>
                <div class="area_img" id="74">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/CDDJ201902007_074.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图8 水温控制软件设计流程图" src="Detail/GetImg?filename=images/CDDJ201902007_074.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>8 <b>水温控制软件设计流程图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/CDDJ201902007_074.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="75" name="75" class="anchor-tag">4 <b>系统调试与结构分析</b></h3>
                <div class="p1">
                    <p id="76">本系统在电路制作过程中采用模块化硬件焊接调试方法, 以提高制作效率。</p>
                </div>
                <div class="p1">
                    <p id="77">实验对500 mL温度低于设定温度的自来水进行实验。设定目标温度分别为30、50、70、80 ℃。设置系统PID比例系数<i>K</i><sub><i>P</i></sub>为700、积分系数<i>K</i><sub><i>I</i></sub>为300、微分系数<i>K</i><sub><i>D</i></sub>为300。系统水温控制的实验统计结果如图9所示。实验结果表明温度控制平滑, 满足控制要求。</p>
                </div>
                <div class="p1">
                    <p id="78">实验结果表明:目标温度为30、50、70、80 ℃的超调量σ%分别为6.70%、2.00%、0.43%、0.00%, 温度越高超调量越低。分析其原因有:1) 当温度达到或超过目标温度时, 虽然加热器控制电路输出为0, 但是由于加热器的余热, 会使水温继续上升, 产生超调;2) 由于环境的影响, 加热过程中也伴随着热传递。水与环境温度差越高、散热越快。加热棒余热加热与热传递会相互抵消一部分, 因而设定目标温度越高超调会慢慢降低。</p>
                </div>
                <div class="area_img" id="79">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/CDDJ201902007_079.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图9 不同目标温度下PID控制效果图" src="Detail/GetImg?filename=images/CDDJ201902007_079.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图</b>9 <b>不同目标温度下</b>PID<b>控制效果图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/CDDJ201902007_079.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="80" name="80" class="anchor-tag">5 <b>结束语</b></h3>
                <div class="p1">
                    <p id="81">本设计可以实现目标水温的设定、水温的实时监测、水温的自动化控制。现采用自然冷却的方式, 冷却速度较慢, 今后可增加降温控制电路, 如半导体制冷。本控制方案适用于对温度控制稳定性高、要求超调量小的场景中, 如家用热水器控制、养殖鱼池水温控制等。</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="3">
                            <a id="bibliography_1" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=CGQJ201901024&amp;v=MjYwNTVIWUlRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVI3cWZadVptRnk3aFY3dktKaXJhWkxHNEg5ak1ybzk=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[1]</b>王冠龙, 崔靓, 朱学军.基于数字PID算法的温度控制系统设计[J].传感器与微系统, 2019, 38 (1) :86-88, 96.
                            </a>
                        </p>
                        <p id="5">
                            <a id="bibliography_2" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YBJS201512034&amp;v=MTc3MzE0TzN6cXFCdEdGckNVUjdxZlp1Wm1GeTdoVjd2S1BDL0JmYkc0SDlUTnJZOUdZSVFLREg4NHZSNFQ2ajU=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[2]</b>文波, 孟令军, 张晓春, 等.基于增量式PID算法的水温自动控制器设计[J].仪表技术与传感器, 2015 (12) :113-116.
                            </a>
                        </p>
                        <p id="7">
                            <a id="bibliography_3" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DNMI201811142&amp;v=MDc4NzQ1QlpvUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3FmWnVabUZ5N2hWN3ZLSVNQR1o3RzRIOW5Ocm8=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[3]</b>赵娜, 方圆.基于51单片机的智能水温控制系统的设计[J].电脑迷, 2018, 112 (11) :150.
                            </a>
                        </p>
                        <p id="9">
                            <a id="bibliography_4" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DNZS201827105&amp;v=MDE4ODdUNmo1NE8zenFxQnRHRnJDVVI3cWZadVptRnk3aFY3dktJU1BSZmJHNEg5bk9xSTVGWVlRS0RIODR2UjQ=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[4]</b>王博, 曾方, 程一哲.基于PID算法的水温控制系统[J].电脑知识与技术, 2018, 14 (27) :242-243.
                            </a>
                        </p>
                        <p id="11">
                            <a id="bibliography_5" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=HLGX200305022&amp;v=MDU5OTh2S0xTSE1kckc0SHRMTXFvOUhab1FLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1Wm1GeTdoVjc=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[5]</b>刘向东, 高军, 杨乐民.一种新的一阶系统自调整模糊控制器[J].哈尔滨理工大学学报, 2003, 8 (5) :75-79.
                            </a>
                        </p>
                        <p id="13">
                            <a id="bibliography_6" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CBBD&amp;filename=9787302190981001&amp;v=MTk5NjZvV1hGcXpHYkM0SE5ERnI0Wk5aZXNQRFJNOHp4VVNtRGQ5U0g3bjN4RTlmYnZuS3JpZlplWnZGeW50VTduTUpG&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[6]</b>姜学军, 刘新郭, 李晓静.计算机控制技术[M].2版.北京:清华大学出版社, 2009.
                            </a>
                        </p>
                        <p id="15">
                            <a id="bibliography_7" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CBBD&amp;filename=9787512417380000&amp;v=MjY4MjJhNUhOWE5xSXhOWk9zUERCTTh6eFVTbURkOVNIN24zeEU5ZmJ2bktyaWZaZVp2RnludFU3bk1KRm9XWEZxekdi&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[7]</b>张洋, 刘军, 严汉宇, 等.精通STM32F4 (库函数版) [M].北京:北京航空航天大学出版社, 2015.
                            </a>
                        </p>
                        <p id="17">
                            <a id="bibliography_8" target="_blank" href="http://scholar.cnki.net/result.aspx?q=STM32F407xx/STM32F407xx Datasheet">

                                <b>[8]</b>ST Microelectronics Corporation.STM32F407xx/STM32F407xx Datasheet [EB/OL]. (2016-09-01) [2018-12-30].https://www.st.com/resource/en/datasheet/stm32f407zg.pdf.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="CDDJ201902007" />
        <input id="dpi" type="hidden" value="300" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=CDDJ201902007&amp;v=MDA2MzMzenFxQnRHRnJDVVI3cWZadVptRnk3aFY3dktKaW5QWkxHNEg5ak1yWTlGWTRRS0RIODR2UjRUNmo1NE8=&amp;uid=WEEvREcwSlJHSldRa1FhcEFLUmVhZDM0Lyt6WGRicHQzdFV6dG0zODBDdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=842_VlRz_g1CMCLi-M0twVw-4EOFG_noWyi_OsMnrAg1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
