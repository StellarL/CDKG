<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=NOOK-mvTMnxl11s6oPYV0boPXN3iP4N7Rc-A56nk4KI1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2fKXReader%2fDetail%3fTIMESTAMP%3d637141588494975000%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dJXYD201906018%26RESULT%3d1%26SIGN%3dNgCkYYcShSKl7%252bjTfzJNrW32FPg%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JXYD201906018&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JXYD201906018&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JXYD201906018&amp;v=MDk0NzJGaURtVmJ6UEx6WFNhckc0SDlqTXFZOUViSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1Wm0=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#13" data-title="0 引言 ">0 引言</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#16" data-title="1 机械臂抓取系统搭建 ">1 机械臂抓取系统搭建</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#20" data-title="2 改进的SCARA机械臂手眼标定方法与实验 ">2 改进的SCARA机械臂手眼标定方法与实验</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#21" data-title="2.1 改进的SCARA机械臂手眼标定方法">2.1 改进的SCARA机械臂手眼标定方法</a></li>
                                                <li><a href="#41" data-title="2.2 实验设计与精度分析">2.2 实验设计与精度分析</a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#52" data-title="3 基于轮廓提取的矩形检测算法 ">3 基于轮廓提取的矩形检测算法</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#53" data-title="3.1 图像的预处理">3.1 图像的预处理</a></li>
                                                <li><a href="#55" data-title="3.2 图像阈值化和中值滤波">3.2 图像阈值化和中值滤波</a></li>
                                                <li><a href="#63" data-title="3.3 矩形纸盒的边缘检测和轮廓提取">3.3 矩形纸盒的边缘检测和轮廓提取</a></li>
                                                <li><a href="#71" data-title="3.4 计算矩形中心点和角度">3.4 计算矩形中心点和角度</a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#80" data-title="4 基于PnP算法的单目相机深度估计 ">4 基于PnP算法的单目相机深度估计</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#81" data-title="4.1 堆叠矩形纸盒的层数估计">4.1 堆叠矩形纸盒的层数估计</a></li>
                                                <li><a href="#87" data-title="4.2 层数估计实验">4.2 层数估计实验</a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#96" data-title="5 结束语 ">5 结束语</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#18" data-title="图1 系统硬件组成结构">图1 系统硬件组成结构</a></li>
                                                <li><a href="#19" data-title="图2 机械臂抓取系统实物">图2 机械臂抓取系统实物</a></li>
                                                <li><a href="#46" data-title="&lt;b&gt;表1 手眼标定采集的数据点&lt;/b&gt;"><b>表1 手眼标定采集的数据点</b></a></li>
                                                <li><a href="#49" data-title="&lt;b&gt;表2 手眼标定精度分析的数据点&lt;/b&gt;"><b>表2 手眼标定精度分析的数据点</b></a></li>
                                                <li><a href="#61" data-title="图3 阈值化后图像">图3 阈值化后图像</a></li>
                                                <li><a href="#62" data-title="图4 中值滤波后图像">图4 中值滤波后图像</a></li>
                                                <li><a href="#67" data-title="&lt;b&gt;表3 不同轮廓的面积值数据&lt;/b&gt;"><b>表3 不同轮廓的面积值数据</b></a></li>
                                                <li><a href="#69" data-title="图5 寻找目标物体的凸包">图5 寻找目标物体的凸包</a></li>
                                                <li><a href="#70" data-title="图6 寻找最小包围矩形">图6 寻找最小包围矩形</a></li>
                                                <li><a href="#76" data-title="&lt;b&gt;表4 矩形纸盒的旋转角度估计&lt;/b&gt;"><b>表4 矩形纸盒的旋转角度估计</b></a></li>
                                                <li><a href="#77" data-title="图7 第1组矩形角度估计效果">图7 第1组矩形角度估计效果</a></li>
                                                <li><a href="#78" data-title="图8 第2组矩形角度估计效果">图8 第2组矩形角度估计效果</a></li>
                                                <li><a href="#79" data-title="图9 第3组矩形角度估计原图">图9 第3组矩形角度估计原图</a></li>
                                                <li><a href="#84" data-title="图10 堆叠矩形纸盒的深度估计原理">图10 堆叠矩形纸盒的深度估计原理</a></li>
                                                <li><a href="#89" data-title="图11 层数估计实验的算法流程">图11 层数估计实验的算法流程</a></li>
                                                <li><a href="#93" data-title="&lt;b&gt;表5 不同层数堆叠纸盒的&lt;/b&gt;&lt;i&gt;Z&lt;/i&gt;&lt;b&gt;值&lt;/b&gt;"><b>表5 不同层数堆叠纸盒的</b><i>Z</i><b>值</b></a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="3">


                                    <a id="bibliography_1" title=" Zhang Z.A flexible new technique for camera calibration[J].IEEE Transactions on Pattern Analysis and Machine Intelligence, 2000, 22 (11) :1330-1334." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=A flexible new technique for camera calibration">
                                        <b>[1]</b>
                                         Zhang Z.A flexible new technique for camera calibration[J].IEEE Transactions on Pattern Analysis and Machine Intelligence, 2000, 22 (11) :1330-1334.
                                    </a>
                                </li>
                                <li id="5">


                                    <a id="bibliography_2" title=" 胡占义, 雷成, 吴福朝.关于P4P问题的一点讨论[J].自动化学报, 2001, 27 (6) :770-776." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=MOTO200106004&amp;v=MTgyNTNZOUZZSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1Wm1GaURtVmJ6UEtDTGZZYkc0SHRETXE=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[2]</b>
                                         胡占义, 雷成, 吴福朝.关于P4P问题的一点讨论[J].自动化学报, 2001, 27 (6) :770-776.
                                    </a>
                                </li>
                                <li id="7">


                                    <a id="bibliography_3" title=" 万晓峰.基于SCARA机械手的手眼标定[J].电子世界, 2017 (6) :76-77." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=ELEW201706064&amp;v=MDY2MTZZSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1Wm1GaURtVmJ6UElDSE9lYkc0SDliTXFZOUQ=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[3]</b>
                                         万晓峰.基于SCARA机械手的手眼标定[J].电子世界, 2017 (6) :76-77.
                                    </a>
                                </li>
                                <li id="9">


                                    <a id="bibliography_4" title=" Lepetit V, Moreno-Noguer F, Fua P.EPnP:An accurate O (n) solution to the PnP problem[J].International Journal of Computer Vision, 2009, 81 (2) :155-166." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SSJD&amp;filename=SSJD15110100320222&amp;v=MDQ0OTU5SDlETXJvOUZaK2tQRG40N29CTVQ2VDRQUUgvaXJSZEdlcnFRVE1ud1plWnRGaW5sVXJmSktGMFNhUlU9Tmo3QmFySw==&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[4]</b>
                                         Lepetit V, Moreno-Noguer F, Fua P.EPnP:An accurate O (n) solution to the PnP problem[J].International Journal of Computer Vision, 2009, 81 (2) :155-166.
                                    </a>
                                </li>
                                <li id="11">


                                    <a id="bibliography_5" title=" 张培科, 武元新.基于改进的DLT算法的PnP问题求解[J].信息技术, 2018 (1) :36-41." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=HDZJ201801011&amp;v=MTg3NzVtVmJ6UExTblJaTEc0SDluTXJvOUVaWVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1Wm1GaUQ=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[5]</b>
                                         张培科, 武元新.基于改进的DLT算法的PnP问题求解[J].信息技术, 2018 (1) :36-41.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=JXYD" target="_blank">机械与电子</a>
                2019,37(06),75-80             </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>基于机器视觉的堆叠矩形纸盒识别方法研究</b></span>
                                    </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E7%8E%8B%E7%85%A7%E5%8D%8E&amp;code=41600557&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">王照华</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E8%83%A1%E6%B3%93&amp;code=06987935&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">胡泓</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E8%B0%A2%E7%BF%8A%E9%91%AB&amp;code=42094177&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">谢翊鑫</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%88%98%E5%BD%AC&amp;code=06989462&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">刘彬</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E5%93%88%E5%B0%94%E6%BB%A8%E5%B7%A5%E4%B8%9A%E5%A4%A7%E5%AD%A6(%E6%B7%B1%E5%9C%B3)&amp;code=0149444&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">哈尔滨工业大学(深圳)</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>针对堆叠矩形纸盒的识别和抓取问题, 设计了一套由SCARA四轴机器人、工业相机和真空吸取装置等组成的机械臂抓取系统。提出了一种简易的手眼标定方法, 并进行理论证明和实验分析。改进和完成了一套基于轮廓提取的矩形检测算法, 实现对平面上多个矩形纸盒的识别;采用PnP算法对矩形纸盒进行深度估计, 从而实现了对堆叠矩形纸盒的识别和抓取。</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E7%9F%A9%E5%BD%A2%E6%A3%80%E6%B5%8B&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">矩形检测;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E8%BD%AE%E5%BB%93%E6%8F%90%E5%8F%96&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">轮廓提取;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%89%8B%E7%9C%BC%E6%A0%87%E5%AE%9A&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">手眼标定;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%B7%B1%E5%BA%A6%E4%BC%B0%E8%AE%A1&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">深度估计;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    王照华 (1993-) , 男, 浙江温州人, 硕士研究生, 研究方向为机器视觉、机电一体化;;
                                </span>
                                <span>
                                    胡泓 (1965-) , 男, 重庆人, 教授, 研究方向为机电一体化、精密仪器测试和自动化控制。;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2019-03-30</p>

            </div>
                    <h1><b>Research on Recognition and Grab System of Stacked Rectangular Carton Based on Machine Vision</b></h1>
                    <h2>
                    <span>WANG Zhaohua</span>
                    <span>HU Hong</span>
                    <span>XIE Yixin</span>
                    <span>LIU Bin</span>
            </h2>
                    <h2>
                    <span>Harbin Institute of Technology</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>For the identification and grabbing of stacked rectangular carton, a set of mechanical arm grabbing system consisting of SCARA four-axis robot, industrial camera and vacuum suction device was designed. A simple hand-eye calibration method was proposed, and theoretical proof and experimental analysis were carried out. A set of rectangle detection algorithm based on contour extraction was improved and completed to realize the recognition of multiple rectangular cartons on the plane. The PnP algorithm was used to estimate the depth of the rectangular carton, thus realizing the recognition and grasping of the stacked rectangular carton.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=rectangle%20detection&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">rectangle detection;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=contour%20extraction&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">contour extraction;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=hand-eye%20calibration&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">hand-eye calibration;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=depth%20estimation&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">depth estimation;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2019-03-30</p>
                            </div>


        <!--brief start-->
                        <h3 id="13" name="13" class="anchor-tag">0 引言</h3>
                <div class="p1">
                    <p id="14">随着工业4.0时代的到来, 人们对工业生产的自动程度要求越来越高, 各个省份都提出“机器换人, 产业升级”的口号, 来解决中国劳动力成本不断上涨的问题。在企业生产线上, 物料的堆叠是生产制造过程中的普遍现象, 其中堆叠矩形纸盒最为常见。</p>
                </div>
                <div class="p1">
                    <p id="15">在此, 通过研究图像处理和机器视觉算法, 设计合理的堆叠矩形纸盒识别与抓取系统, 实现矩形纸盒的识别和抓取, 从而有效降低企业运行成本, 提高企业生产效率。通过研究机器人堆叠目标识别与定位抓取系统, 发现并解决系统集成中所面临的问题, 对其他相关研究也具有一定参考和借鉴作用。</p>
                </div>
                <h3 id="16" name="16" class="anchor-tag">1 机械臂抓取系统搭建</h3>
                <div class="p1">
                    <p id="17">基于机器视觉的机械臂抓取系统由硬件部分和软件部分共同构成。其中, 硬件部分主要由相机 (工业相机或深度相机) 、光源、上位机、SCARA四轴机械臂及控制柜、真空吸取装置, 以及抓取目标等组成。整套系统硬件组成结构如图1所示。机械臂抓取系统实物如图2所示。软件部分主要包括手眼标定算法和视觉算法。</p>
                </div>
                <div class="area_img" id="18">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JXYD201906018_018.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 系统硬件组成结构" src="Detail/GetImg?filename=images/JXYD201906018_018.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图1 系统硬件组成结构  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JXYD201906018_018.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="19">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JXYD201906018_019.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 机械臂抓取系统实物" src="Detail/GetImg?filename=images/JXYD201906018_019.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图2 机械臂抓取系统实物  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JXYD201906018_019.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="20" name="20" class="anchor-tag">2 改进的SCARA机械臂手眼标定方法与实验</h3>
                <h4 class="anchor-tag" id="21" name="21">2.1 改进的SCARA机械臂手眼标定方法</h4>
                <div class="p1">
                    <p id="22">目前, 主要的手眼标定方法是张氏标定法<citation id="98" type="reference"><link href="3" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>。但是该方法是针对六自由度机器人提出的, 需要机械臂转动固定在末端的标定板, 相机获得不同姿势下的棋盘格标定板照片。但是四轴机器人只能实现<i>X</i>, <i>Y</i>, <i>Z</i>三维移动和绕中心轴旋转, 无法获得不同姿势下的棋盘格标定板照片。同时, 四轴机器人相对于六轴机器人较为简单, 不需要考虑6个自由度。因此, 胡占义<citation id="99" type="reference"><link href="5" rel="bibliography" /><sup>[<a class="sup">2</a>]</sup></citation>等人提出了简易的标定方法, 并进行了理论证明。而万晓峰<citation id="100" type="reference"><link href="7" rel="bibliography" /><sup>[<a class="sup">3</a>]</sup></citation>采用这种简易的标定方法, 设计了手眼标定具体的实验操作步骤。本文对该方法的理论证明和实验操作进行了改进和重新设计。</p>
                </div>
                <div class="p1">
                    <p id="23">在SACRA四轴机器人的手眼标定方法使用时, 需要满足一个条件:相机的成像平面和标定时的机器人基坐标系平面保持平行, 也就是保证相机光轴和机器人基坐标系平面的垂直度。本文通过在相机上安装水平仪, 然后微调相机支架上的相机位置, 保证相机成像平面尽量保持水平。由于本文研究的是抓取纸盒, 对精度要求并不高, 因此该方法可以满足实验需要。</p>
                </div>
                <div class="p1">
                    <p id="24">由相机的小孔成像模型, 可以推得相机坐标系到像素坐标系的转换公式 (1) 。在式 (1) 中, <i>a</i><sub><i>x</i></sub>=<i>f</i>/<i>d</i><sub><i>x</i></sub> , <i>a</i><sub><i>y</i></sub>=<i>f</i>/<i>d</i><sub><i>y</i></sub>, 是相机在<i>x</i>轴和<i>y</i>轴上的有效焦距。</p>
                </div>
                <div class="p1">
                    <p id="25" class="code-formula">
                        <mathml id="25"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>z</mi><msub><mrow></mrow><mi>c</mi></msub><mrow><mo>[</mo><mtable columnalign="left"><mtr><mtd><mi>u</mi></mtd></mtr><mtr><mtd><mi>v</mi></mtd></mtr><mtr><mtd><mn>1</mn></mtd></mtr></mtable><mo>]</mo></mrow><mo>=</mo><mrow><mo>[</mo><mrow><mtable><mtr><mtd><mi>a</mi><msub><mrow></mrow><mi>x</mi></msub></mtd><mtd><mn>0</mn></mtd><mtd><mi>u</mi><msub><mrow></mrow><mn>0</mn></msub></mtd></mtr><mtr><mtd><mn>0</mn></mtd><mtd><mi>a</mi><msub><mrow></mrow><mi>y</mi></msub></mtd><mtd><mi>v</mi><msub><mrow></mrow><mn>0</mn></msub></mtd></mtr><mtr><mtd><mn>0</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd></mtr></mtable></mrow><mo>]</mo></mrow><mrow><mo>[</mo><mtable columnalign="left"><mtr><mtd><mi>x</mi><msub><mrow></mrow><mi>c</mi></msub></mtd></mtr><mtr><mtd><mi>y</mi><msub><mrow></mrow><mi>c</mi></msub></mtd></mtr><mtr><mtd><mi>z</mi><msub><mrow></mrow><mi>c</mi></msub></mtd></mtr></mtable><mo>]</mo></mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>1</mn><mo stretchy="false">) </mo></mrow></math></mathml>
                    </p>
                </div>
                <div class="p1">
                    <p id="26">因为本方法保持了相机光轴和机器人基坐标系平面的垂直度, 也就是保证了相机坐标系下的<i>x</i><sub><i>c</i></sub>-<i>y</i><sub><i>c</i></sub> 坐标平面和机器人基坐标系是2个平行的平面坐标系, 因此, 可以通过旋转变化和平移变换来实现坐标的相互转换。</p>
                </div>
                <div class="p1">
                    <p id="27">其中, 旋转量可以表示为<image id="102" type="formula" href="images/JXYD201906018_10200.jpg" display="inline" placement="inline"><alt></alt></image>, 平移量为<image id="103" type="formula" href="images/JXYD201906018_10300.jpg" display="inline" placement="inline"><alt></alt></image>, 机器人基平面坐标系下坐标表示为<image id="104" type="formula" href="images/JXYD201906018_10400.jpg" display="inline" placement="inline"><alt></alt></image>。机器人基坐标系<i>x</i><sub><i>w</i></sub>-<i>y</i><sub><i>w</i></sub> 坐标到相机坐标系下的<i>x</i><sub><i>c</i></sub>-<i>y</i><sub><i>c</i></sub> 坐标的转换矩阵为</p>
                </div>
                <div class="p1">
                    <p id="34" class="code-formula">
                        <mathml id="34"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mrow><mo>[</mo><mrow><mtable><mtr><mtd><mi>x</mi><msub><mrow></mrow><mi>c</mi></msub></mtd></mtr><mtr><mtd><mi>y</mi><msub><mrow></mrow><mi>c</mi></msub></mtd></mtr><mtr><mtd><mspace width="0.25em" /><mn>1</mn></mtd></mtr></mtable></mrow><mo>]</mo></mrow><mo>=</mo><mrow><mo>[</mo><mrow><mtable><mtr><mtd><mi>cos</mi><mi>θ</mi></mtd><mtd><mo>-</mo><mi>sin</mi><mi>θ</mi></mtd><mtd><mi>a</mi></mtd></mtr><mtr><mtd><mi>sin</mi><mi>θ</mi></mtd><mtd><mi>cos</mi><mi>θ</mi></mtd><mtd><mi>b</mi></mtd></mtr><mtr><mtd><mn>0</mn></mtd><mtd><mn>0</mn></mtd><mtd><mi>z</mi><msub><mrow></mrow><mi>c</mi></msub><mspace width="0.25em" /></mtd></mtr></mtable></mrow><mo>]</mo></mrow><mrow><mo>[</mo><mrow><mtable><mtr><mtd><mi>x</mi><msub><mrow></mrow><mi>w</mi></msub></mtd></mtr><mtr><mtd><mi>y</mi><msub><mrow></mrow><mi>w</mi></msub></mtd></mtr><mtr><mtd><mn>1</mn></mtd></mtr></mtable></mrow><mo>]</mo></mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>2</mn><mo stretchy="false">) </mo></mrow></math></mathml>
                    </p>
                </div>
                <div class="p1">
                    <p id="35">在式 (1) 中, <i>z</i><sub><i>c</i></sub>为一固定的常量。</p>
                </div>
                <div class="p1">
                    <p id="36">结合式 (1) 和式 (2) , 可以得到像素坐标系<i>u</i>-<i>v</i> 和机器人基坐标系<i>x</i><sub><i>w</i></sub>-<i>y</i><sub><i>w</i></sub>之间的关系, 经过化简之后, 可以得到式 (3) 。并可以令<image id="105" type="formula" href="images/JXYD201906018_10500.jpg" display="inline" placement="inline"><alt></alt></image><image id="105" type="formula" href="images/JXYD201906018_10501.jpg" display="inline" placement="inline"><alt></alt></image></p>
                </div>
                <div class="p1">
                    <p id="39" class="code-formula">
                        <mathml id="39"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mrow><mo>[</mo><mtable columnalign="left"><mtr><mtd><mi>u</mi></mtd></mtr><mtr><mtd><mi>v</mi></mtd></mtr><mtr><mtd><mn>1</mn></mtd></mtr></mtable><mo>]</mo></mrow><mo>=</mo><mrow><mo>[</mo><mrow><mtable><mtr><mtd><mi>w</mi><msub><mrow></mrow><mrow><mn>1</mn><mn>1</mn></mrow></msub></mtd><mtd><mi>w</mi><msub><mrow></mrow><mrow><mn>1</mn><mn>2</mn></mrow></msub></mtd><mtd><mi>w</mi><msub><mrow></mrow><mrow><mn>1</mn><mn>3</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>w</mi><msub><mrow></mrow><mrow><mn>2</mn><mn>1</mn></mrow></msub></mtd><mtd><mi>w</mi><msub><mrow></mrow><mrow><mn>2</mn><mn>2</mn></mrow></msub></mtd><mtd><mi>w</mi><msub><mrow></mrow><mrow><mn>2</mn><mn>3</mn></mrow></msub></mtd></mtr><mtr><mtd><mn>0</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd></mtr></mtable></mrow><mo>]</mo></mrow><mrow><mo>[</mo><mrow><mtable><mtr><mtd><mi>x</mi><msub><mrow></mrow><mi>w</mi></msub></mtd></mtr><mtr><mtd><mi>y</mi><msub><mrow></mrow><mi>w</mi></msub></mtd></mtr><mtr><mtd><mn>1</mn></mtd></mtr></mtable></mrow><mo>]</mo></mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>3</mn><mo stretchy="false">) </mo></mrow></math></mathml>
                    </p>
                </div>
                <div class="p1">
                    <p id="40">为了求解<b><i>W</i></b>矩阵, 可以采集<i>n</i>组 (<i>n</i>&gt;3) (<i>u</i>, <i>v</i>) 和 (<i>x</i><sub><i>w</i></sub>, <i>y</i><sub><i>w</i></sub>) 坐标点数据, 如采集4组数据, 通过最小二乘法求解该超定方程。</p>
                </div>
                <h4 class="anchor-tag" id="41" name="41">2.2 实验设计与精度分析</h4>
                <div class="p1">
                    <p id="42">本文设计的这种手眼的标定方法具体的实验操作如下所述。</p>
                </div>
                <div class="p1">
                    <p id="43">先打印和制作1个有圆形图案的标定板, 并放置在机器人基坐标平面上, 用工业相机获取包含该圆形标定板的图片。通过霍夫梯度法检测圆心位置 (<i>u</i>, <i>v</i>) 。</p>
                </div>
                <div class="p1">
                    <p id="44">然后在机械手末端夹装1个圆棒, 圆棒顶端有尖顶, 可以对准圆心。通过机器人示教控制移动机械手, 将圆棒顶尖对准圆心, 从而在机器人软件EPSON RC++7.0上读取圆心在机器人基坐标下的坐标值 (<i>x</i><sub><i>w</i></sub>, <i>y</i><sub><i>w</i></sub>) 。</p>
                </div>
                <div class="p1">
                    <p id="45">本文在实验过程中采集了6组 (<i>u</i>, <i>v</i>) 和 (<i>x</i><sub><i>w</i></sub>, <i>y</i><sub><i>w</i></sub>) 坐标点数据, 通过上节中证明的算法求解出转移矩阵。采集的6组数据如表1所示, 求解出的像素坐标系<i>u</i>-<i>v</i> 到机器人基坐标系<i>x</i><sub><i>w</i></sub>-<i>y</i><sub><i>w</i></sub>转移矩阵<b><i>W</i></b><sup>-1</sup> 如式 (4) 。</p>
                </div>
                <div class="area_img" id="46">
                    <p class="img_tit"><b>表1 手眼标定采集的数据点</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="46" border="1"><tr><td><br />序号</td><td>实验<i>x</i><sub><i>w</i></sub>/mm</td><td>实验<i>y</i><sub><i>w</i></sub>/mm</td><td>圆心<i>u</i>/px</td><td>圆心<i>v</i>/px</td></tr><tr><td><br />1</td><td>214.667</td><td>273.120</td><td>965.25</td><td>512.25</td></tr><tr><td><br />2</td><td>92.090</td><td>251.791</td><td>669.75</td><td>566.25</td></tr><tr><td><br />3</td><td>188.541</td><td>108.502</td><td>903.75</td><td>921.75</td></tr><tr><td><br />4</td><td>354.199</td><td>177.966</td><td>1 299.75</td><td>747.75</td></tr><tr><td><br />5</td><td>303.744</td><td>237.406</td><td>1 173.75</td><td>600.75</td></tr><tr><td><br />6</td><td>245.178</td><td>186.585</td><td>1 037.25</td><td>728.25</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="47" class="code-formula">
                        <mathml id="47"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi mathvariant="bold-italic">W</mi><msup><mrow></mrow><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>=</mo><mrow><mo>[</mo><mrow><mtable><mtr><mtd><mn>0</mn><mo>.</mo><mn>4</mn><mn>1</mn><mn>8</mn><mspace width="0.25em" /><mn>3</mn></mtd><mtd><mo>-</mo><mn>0</mn><mo>.</mo><mn>0</mn><mn>0</mn><mn>3</mn><mspace width="0.25em" /><mn>3</mn></mtd><mtd><mo>-</mo><mn>1</mn><mn>8</mn><mn>6</mn><mo>.</mo><mn>4</mn><mn>5</mn><mn>5</mn><mspace width="0.25em" /><mn>7</mn></mtd></mtr><mtr><mtd><mo>-</mo><mn>0</mn><mo>.</mo><mn>0</mn><mn>0</mn><mn>1</mn><mspace width="0.25em" /><mn>2</mn></mtd><mtd><mo>-</mo><mn>0</mn><mo>.</mo><mn>4</mn><mn>0</mn><mn>2</mn><mspace width="0.25em" /><mn>2</mn></mtd><mtd><mn>4</mn><mn>8</mn><mn>0</mn><mo>.</mo><mn>3</mn><mn>2</mn><mn>7</mn><mspace width="0.25em" /><mn>2</mn></mtd></mtr><mtr><mtd><mn>0</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>1</mn><mo>.</mo><mn>0</mn><mn>0</mn><mn>0</mn><mspace width="0.25em" /><mn>0</mn></mtd></mtr></mtable></mrow><mo>]</mo></mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>4</mn><mo stretchy="false">) </mo></mrow></math></mathml>
                    </p>
                </div>
                <div class="p1">
                    <p id="48">为了评估标定的<b><i>W</i></b>矩阵的精度, 本文又采集了6组 (<i>u</i>, <i>v</i>) 和 (<i>x</i><sub><i>w</i></sub>, <i>y</i><sub><i>w</i></sub>) 坐标点数据, 采用计算出来的<b><i>W</i></b>矩阵来计算 (<i>x</i><sub><i>w</i></sub>, <i>y</i><sub><i>w</i></sub>) 的理论值。对比和分析 (<i>x</i><sub><i>w</i></sub>, <i>y</i><sub><i>w</i></sub>) 的实验值和理论值来评估<b><i>W</i></b>矩阵的精度。用来评估手眼标定精度的6组数据如表2所示。</p>
                </div>
                <div class="area_img" id="49">
                    <p class="img_tit"><b>表2 手眼标定精度分析的数据点</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="49" border="1"><tr><td><br />序号</td><td>实验<br /><i>x</i><sub><i>w</i></sub>/mm</td><td>实验<br /><i>y</i><sub><i>w</i></sub>/mm</td><td>圆心<br /><i>u</i>/px</td><td>圆心<br /><i>v</i>/px</td><td>标定<br /><i>x</i><sub><i>w</i></sub>/mm</td><td>标定<br /><i>y</i><sub><i>w</i></sub>/mm</td></tr><tr><td><br />1</td><td>333.672</td><td>146.034</td><td>1 250.25</td><td>824.25</td><td>333.804</td><td>147.314</td></tr><tr><td><br />2</td><td>339.873</td><td>201.419</td><td>1 263.75</td><td>686.25</td><td>339.906</td><td>202.801</td></tr><tr><td><br />3</td><td>270.827</td><td>196.098</td><td>1 097.25</td><td>702.75</td><td>270.205</td><td>196.364</td></tr><tr><td><br />4</td><td>178.073</td><td>283.005</td><td>866.25</td><td>486.75</td><td>174.29</td><td>283.517</td></tr><tr><td><br />5</td><td>307.731</td><td>211.006</td><td>1 184.25</td><td>663.75</td><td>306.726</td><td>211.946</td></tr><tr><td><br />6</td><td>209.426</td><td>216.919</td><td>244.25</td><td>650.25</td><td>206.378</td><td>217.664</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="50">通过对比和分析 (<i>x</i><sub><i>w</i></sub>, <i>y</i><sub><i>w</i></sub>) 的实验值和理论值, 标定的精度在3 mm以内。由于本文研究的是抓取纸盒, 对精度要求并不高, 因此这种手眼标定方法可以满足本文实验要求。</p>
                </div>
                <div class="p1">
                    <p id="51">本文采用的手眼标定方法的理论相对简单, 操作方便, 不需要高精度的棋盘格标定板, 也不需要先对相机内参进行标定, 而是直接进行机器人和相机的手眼标定, 精度也能满足实验要求, 因此, 这种适合SACRA四轴机器人的手眼标定方法有一定的实用价值。</p>
                </div>
                <h3 id="52" name="52" class="anchor-tag">3 基于轮廓提取的矩形检测算法</h3>
                <h4 class="anchor-tag" id="53" name="53">3.1 图像的预处理</h4>
                <div class="p1">
                    <p id="54">先将原始RGB图片进行了三通道的分离, 发现蓝色通道的图片背景和目标物体的像素值相差非常明显, 效果优于红色通道图片和绿色通道图片, 因此直接采用蓝色通道的图片作为灰度化的结果。对于灰度化后的图像, 采用高斯滤波去除图像的噪声。</p>
                </div>
                <h4 class="anchor-tag" id="55" name="55">3.2 图像阈值化和中值滤波</h4>
                <div class="p1">
                    <p id="56">通过以上对RGB图片进行灰度化和高斯滤波后, 现在把获取到的灰度图像进行阈值化处理。对于阈值化, 其目的是将目标矩形纸盒和机器人工作平面进行分离, 为后续矩形的识别做准备。阈值化利用图像中目标与背景的像素值差异, 把图像分别设置为2个不同的级别, 选取1个合适的阈值, 以确定某像素是目标对象还是背景, 从而获得阈值化的图像。</p>
                </div>
                <div class="p1">
                    <p id="57">在阈值化算法中, 假设阈值设置为<i>T</i>, 就可以以<i>T</i>为边界, 把数值分为2个部分, 则二值化的公式为</p>
                </div>
                <div class="p1">
                    <p id="58" class="code-formula">
                        <mathml id="58"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>d</mi><mi>s</mi><mi>t</mi><mo stretchy="false"> (</mo><mi>x</mi><mo>, </mo><mi>y</mi><mo stretchy="false">) </mo><mo>=</mo><mrow><mo>{</mo><mrow><mtable><mtr><mtd><mi>m</mi><mi>a</mi><mi>x</mi><mi>v</mi><mi>a</mi><mi>l</mi></mtd><mtd><mi>s</mi><mi>r</mi><mi>c</mi><mo stretchy="false"> (</mo><mi>x</mi><mo>, </mo><mi>y</mi><mo stretchy="false">) </mo><mo>&gt;</mo><mi>Τ</mi></mtd></mtr><mtr><mtd><mn>0</mn></mtd><mtd><mi>s</mi><mi>r</mi><mi>c</mi><mo stretchy="false"> (</mo><mi>x</mi><mo>, </mo><mi>y</mi><mo stretchy="false">) </mo><mo>&lt;</mo><mi>Τ</mi></mtd></mtr></mtable></mrow></mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>5</mn><mo stretchy="false">) </mo></mrow></math></mathml>
                    </p>
                </div>
                <div class="p1">
                    <p id="59"><i>src</i> (<i>x</i>, <i>y</i>) 为在图片 (<i>x</i>, <i>y</i>) 处的灰度值;<i>dst</i> (<i>x</i>, <i>y</i>) 为二值化后的值, 只能取0或者<i>maxval</i>。在阈值二值化中, 最主要的是选取合适的阈值<i>T</i>, 这也是二值化的难点所在。在本文中, <i>maxval</i>取255, 即白色, 0表示黑色。经过反复实验, 阈值<i>T</i>的取值范围是75～95。</p>
                </div>
                <div class="p1">
                    <p id="60">阈值化之后的图像如图3所示。由图3可以看出, 通过选取合适的阈值, 阈值化可以有效地分割目标矩形纸盒和机器人工作平面, 从而为后续矩形的识别做准备。由图3可知, 尽管进行了高斯滤波来除去噪声点, 但阈值化后的图像仍然有很多噪点。本文采用中值滤波算法进行处理, 由图4可以看出, 这些噪声点已经被很好的去除了。</p>
                </div>
                <div class="area_img" id="61">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JXYD201906018_061.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 阈值化后图像" src="Detail/GetImg?filename=images/JXYD201906018_061.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图3 阈值化后图像  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JXYD201906018_061.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="62">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JXYD201906018_062.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 中值滤波后图像" src="Detail/GetImg?filename=images/JXYD201906018_062.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图4 中值滤波后图像  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JXYD201906018_062.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="63" name="63">3.3 矩形纸盒的边缘检测和轮廓提取</h4>
                <div class="p1">
                    <p id="64">进行边缘检测主要目的是提取目标对象的边缘, 为下一步的提取轮廓做准备。对于已经二值化的图像, Canny边缘检测算法较容易实现, 高阈值和低阈值的选择影响不大, 这里高阈值取190, 低阈值取130。</p>
                </div>
                <div class="p1">
                    <p id="65">一个轮廓就是图像中连续的点的集合, 也就是图像中的一条曲线。其表示方法根据不同情况会有所不同。这里采用OpenCV中的findContours函数, 从Canny边缘检测算法处理后的图像中查找轮廓。findContours函数将目标纸盒的矩形和干扰物体的边缘都提取为一个独立的轮廓, 本文采用计算轮廓面积的方法进行筛选。轮廓的面积就是不同轮廓占用和包围的像素点的多少。由于图像中矩形轮廓包围的像素点较大, 而且同一个矩形其包围的像素点的值是一个相对固定值, 因此可以通过计算轮廓面积的方法来区分目标纸盒的矩形和干扰物体轮廓。</p>
                </div>
                <div class="p1">
                    <p id="66">通过计算轮廓面积, 可以得到不同轮廓的像素值, 如表3所示。由表3可知, 序号4, 5, 6的轮廓面积值都在100 400～110 400 px<sup>2</sup>之间, 面积值较大而且相对固定, 这是目标矩形的轮廓面积值。而其他序号的轮廓都非常小, 是干扰物体的轮廓。因此, 通过计算轮廓面积的方法可以筛选出目标矩形的轮廓。</p>
                </div>
                <div class="area_img" id="67">
                    <p class="img_tit"><b>表3 不同轮廓的面积值数据</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="67" border="1"><tr><td>轮廓序号</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td></tr><tr><td><br />面积大小<br />/px<sup>2</sup></td><td>4</td><td>56</td><td>0</td><td>110 029</td><td>108 229</td><td>100 498</td><td>0</td><td>32</td><td>94</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="68">通过计算轮廓面积的筛选方法已经筛选出了目标矩形的轮廓, 但是这些轮廓由于图像像素点的偏差, 一个目标矩形轮廓上的像素点不一定是矩形最外层的轮廓。通过寻找凸包的算法, 可以找到物体的最外层轮廓, 如图5所示。由于本文需要使用机械臂对矩形纸盒进行抓取, 因此需要知道矩形的4个顶点的坐标。通过寻找可旋转的最小面积的包围矩形算法可以返回矩形的顶点, 如图6所示。</p>
                </div>
                <div class="area_img" id="69">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JXYD201906018_069.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 寻找目标物体的凸包" src="Detail/GetImg?filename=images/JXYD201906018_069.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图5 寻找目标物体的凸包  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JXYD201906018_069.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="70">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JXYD201906018_070.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 寻找最小包围矩形" src="Detail/GetImg?filename=images/JXYD201906018_070.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图6 寻找最小包围矩形  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JXYD201906018_070.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="71" name="71">3.4 计算矩形中心点和角度</h4>
                <div class="p1">
                    <p id="72">通过寻找可旋转的最小面积的包围矩形算法, 可以返回矩形的4个顶点的坐标 (<i>x</i><sub>1</sub>, <i>y</i><sub>1</sub>) , (<i>x</i><sub>2</sub>, <i>y</i><sub>2</sub>) , (<i>x</i><sub>3</sub>, <i>y</i><sub>3</sub>) , (<i>x</i><sub>4</sub>, <i>y</i><sub>4</sub>) 。在已知矩形4个顶点的条件下, 可以通过式 (6) 来计算矩形中心的坐标 (<i>x</i><sub>center</sub>, <i>y</i><sub>center</sub>) 。</p>
                </div>
                <div class="p1">
                    <p id="73" class="code-formula">
                        <mathml id="73"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mrow><mo>{</mo><mtable columnalign="left"><mtr><mtd><mi>x</mi><msub><mrow></mrow><mrow><mtext>c</mtext><mtext>e</mtext><mtext>n</mtext><mtext>t</mtext><mtext>e</mtext><mtext>r</mtext></mrow></msub><mo>=</mo><mfrac><mrow><mi>x</mi><msub><mrow></mrow><mn>1</mn></msub><mo>+</mo><mi>x</mi><msub><mrow></mrow><mn>2</mn></msub><mo>+</mo><mi>x</mi><msub><mrow></mrow><mn>3</mn></msub><mo>+</mo><mi>x</mi><msub><mrow></mrow><mn>4</mn></msub></mrow><mn>4</mn></mfrac></mtd></mtr><mtr><mtd><mi>y</mi><msub><mrow></mrow><mrow><mtext>c</mtext><mtext>e</mtext><mtext>n</mtext><mtext>t</mtext><mtext>e</mtext><mtext>r</mtext></mrow></msub><mo>=</mo><mfrac><mrow><mi>y</mi><msub><mrow></mrow><mn>1</mn></msub><mo>+</mo><mi>y</mi><msub><mrow></mrow><mn>2</mn></msub><mo>+</mo><mi>y</mi><msub><mrow></mrow><mn>3</mn></msub><mo>+</mo><mi>y</mi><msub><mrow></mrow><mn>4</mn></msub></mrow><mn>4</mn></mfrac></mtd></mtr></mtable></mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>6</mn><mo stretchy="false">) </mo></mrow></math></mathml>
                    </p>
                </div>
                <div class="p1">
                    <p id="74">因为前文得到的矩形4个顶点的坐标 (<i>x</i><sub>1</sub>, <i>y</i><sub>1</sub>) , (<i>x</i><sub>2</sub>, <i>y</i><sub>2</sub>) , (<i>x</i><sub>3</sub>, <i>y</i><sub>3</sub>) , (<i>x</i><sub>4</sub>, <i>y</i><sub>4</sub>) 是像素坐标系下的坐标, 不能反映真实三维空间中的矩形姿势, 因此需要通过手眼标定的转移矩阵<b><i>W</i></b><sup>-1</sup>将像素坐标系<i>u</i>-<i>v</i> 转换到机器人基坐标系<i>x</i><sub><i>w</i></sub>-<i>y</i><sub><i>w</i></sub> 。</p>
                </div>
                <div class="p1">
                    <p id="75">限于篇幅, 这里展示3组实验数据。3组实验的原始数据如表4所示, 3组角度估计的效果如图7～图9所示。在算法程序中, 规定矩形短边的斜率作为整个矩形的旋转角度, 当图中的短边处于水平位置时, 矩形的旋转角度是0;当图中的短边左端向下倾斜时, 矩形的旋转角度是倾斜角度的正值;当图中的短边左端向上倾斜时, 矩形的旋转角度是倾斜角度的负值。由表4和图7～图9可知, 实验结果数据和实验图像基本吻合, 能满足机械手抓取矩形纸盒的精度要求。</p>
                </div>
                <div class="area_img" id="76">
                    <p class="img_tit"><b>表4 矩形纸盒的旋转角度估计</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="76" border="1"><tr><td><br />序号</td><td>像素坐标系下<br />矩形4个顶点<br />坐标/px</td><td>机器人基坐标<br />系下矩形4个<br />顶点坐标/px</td><td>矩形的<br />倾斜角度/ (°) </td></tr><tr><td rowspan="4"><br />1</td><td><br />[678.869, 790.158]</td><td>[94.907 8, 161.711]</td><td rowspan="4">26.126 2</td></tr><tr><td><br />[479.73, 403.594]</td><td>[12.883 5, 317.426]</td></tr><tr><td><br />[733.121, 273.059]</td><td>[119.308, 369.623]</td></tr><tr><td><br />[932.26, 659.623]</td><td>[201.332, 213.908]</td></tr><tr><td rowspan="4"><br />2</td><td><br />[826.565, 915.494]</td><td>[156.275, 111.124]</td><td rowspan="4">-27.946 7</td></tr><tr><td><br />[568.06, 774.249]</td><td>[48.608 7, 168.242]</td></tr><tr><td><br />[771.714, 401.524]</td><td>[135.027, 317.908]</td></tr><tr><td><br />[1 030.22, 542.769]</td><td>[242.694, 260.789]</td></tr><tr><td rowspan="4"><br />3</td><td><br />[636.856, 818.792]</td><td>[77.239 1, 150.245]</td><td rowspan="4">-54.612</td></tr><tr><td><br />[466.576, 572.832]</td><td>[6.822 73, 249.374]</td></tr><tr><td><br />[798.752, 342.864]</td><td>[146.531, 341.469]</td></tr><tr><td><br />[969.032, 588.824]</td><td>[216.947, 242.339]</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="area_img" id="77">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JXYD201906018_077.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 第1组矩形角度估计效果" src="Detail/GetImg?filename=images/JXYD201906018_077.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图7 第1组矩形角度估计效果  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JXYD201906018_077.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="78">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JXYD201906018_078.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图8 第2组矩形角度估计效果" src="Detail/GetImg?filename=images/JXYD201906018_078.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图8 第2组矩形角度估计效果  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JXYD201906018_078.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="79">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JXYD201906018_079.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图9 第3组矩形角度估计原图" src="Detail/GetImg?filename=images/JXYD201906018_079.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图9 第3组矩形角度估计原图  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JXYD201906018_079.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="80" name="80" class="anchor-tag">4 基于PnP算法的单目相机深度估计</h3>
                <h4 class="anchor-tag" id="81" name="81">4.1 堆叠矩形纸盒的层数估计</h4>
                <div class="p1">
                    <p id="82">在已知堆叠矩形纸盒的三维结构尺寸, 以及矩形纸盒上的4个角点和图像中矩形4个顶点的对应关系情况下, 可以运用PnP算法<citation id="101" type="reference"><link href="9" rel="bibliography" /><link href="11" rel="bibliography" /><sup>[<a class="sup">4</a>,<a class="sup">5</a>]</sup></citation>, 求解出矩形纸盒的世界坐标系到相机坐标系的旋转矩阵<b><i>R</i></b>和平移向量<b><i>t</i></b>。本文通过PnP算法估计堆叠矩形纸盒的深度。</p>
                </div>
                <div class="p1">
                    <p id="83">假设已知矩形纸盒尺寸:长为150 mm, 宽为100 mm, 高为37 mm。如图10所示, 在堆叠矩形纸盒中处于最上层的纸盒表面建立三维世界坐标系, 则矩形纸盒上表面4个角点坐标为 (0, 0, 0) , (150, 0, 0) , (0, 100, 0) , (150, 100, 0) 。工业相机安装在堆叠的矩形纸盒上面, 通过第3节提出的矩形检测算法, 就可以计算出像素坐标系下矩形4个顶点坐标。</p>
                </div>
                <div class="area_img" id="84">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JXYD201906018_084.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图10 堆叠矩形纸盒的深度估计原理" src="Detail/GetImg?filename=images/JXYD201906018_084.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图10 堆叠矩形纸盒的深度估计原理  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JXYD201906018_084.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="85">在已知4对三维的空间坐标和二维的像素坐标值情况下, 可以运用PnP算法, 求解出矩形纸盒的世界坐标系到相机坐标系的旋转矩阵<b><i>R</i></b>和平移向量<b><i>t</i></b>, 有式 (7) 成立。平移向量是这2个坐标系之间在<i>X</i>, <i>Y</i>和<i>Z</i>轴方向上的距离差值, 由于搭建的系统相机是水平安装的, 因此平移向量的<i>Z</i>值表示对应的矩形纸盒到相机的<i>Z</i>轴方向的距离, 从而估计出堆叠纸盒的层数。</p>
                </div>
                <div class="p1">
                    <p id="86" class="code-formula">
                        <mathml id="86"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mrow><mo>[</mo><mtable columnalign="left"><mtr><mtd><mi>x</mi><msub><mrow></mrow><mi>c</mi></msub></mtd></mtr><mtr><mtd><mi>y</mi><msub><mrow></mrow><mi>c</mi></msub></mtd></mtr><mtr><mtd><mi>z</mi><msub><mrow></mrow><mi>c</mi></msub></mtd></mtr></mtable><mo>]</mo></mrow><mo>=</mo><mrow><mo>[</mo><mrow><mi mathvariant="bold-italic">R</mi><mtext> </mtext><mi mathvariant="bold-italic">t</mi></mrow><mo>]</mo></mrow><mrow><mo>[</mo><mtable columnalign="left"><mtr><mtd><mi>x</mi><msub><mrow></mrow><mi>r</mi></msub></mtd></mtr><mtr><mtd><mi>y</mi><msub><mrow></mrow><mi>r</mi></msub></mtd></mtr><mtr><mtd><mi>z</mi><msub><mrow></mrow><mi>r</mi></msub></mtd></mtr></mtable><mo>]</mo></mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>7</mn><mo stretchy="false">) </mo></mrow></math></mathml>
                    </p>
                </div>
                <h4 class="anchor-tag" id="87" name="87">4.2 层数估计实验</h4>
                <div class="p1">
                    <p id="88">本文的堆叠矩形纸盒层数估计实验的程序流程如图11所示。先通过矩形检测算法, 获得二维像素坐标系下矩形4个顶点坐标。建立矩形纸盒的三维坐标系, 根据已知的矩形纸盒尺寸, 得到4个纸盒的三维坐标。再计算像素坐标系下矩形各个边长 (短边、长边和斜边) , 根据各边长度匹配4对三维坐标点和二维坐标点。然后采用<i>PnP</i>算法, 计算出矩形纸盒的世界坐标系到相机坐标系的旋转矩阵<b><i>R</i></b>和平移向量<b><i>t</i></b>。最后根据平移向量<b><i>t</i></b>中<i>Z</i>值的大小, 确定堆叠矩形纸盒的层数。</p>
                </div>
                <div class="area_img" id="89">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JXYD201906018_089.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图11 层数估计实验的算法流程" src="Detail/GetImg?filename=images/JXYD201906018_089.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图11 层数估计实验的算法流程  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JXYD201906018_089.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="90">实验得到的平移向量<b><i>t</i></b>中<i>Z</i>值如表5所示。<i>Z</i>值表示的是相机坐标系到矩形纸盒坐标系的<i>Z</i>轴方向的距离差值, 也就是相机离堆叠纸盒表面的高度差。由于相机高度是固定的, 所以<i>Z</i>值可以估计出堆叠矩形纸盒的层数</p>
                </div>
                <div class="p1">
                    <p id="91">由表5可知, 本实验各层纸盒分别做了12次实验。1层纸盒<i>Z</i>值的平均值是628, 中位数是627, 标准差是6.3;2层纸盒<i>Z</i>值的平均值是574, 中位数是584, 标准差是27.3;3层纸盒<i>Z</i>值的平均值是547, 中位数是552.5, 标准差是20.5。不同层数的堆叠纸盒<i>Z</i>值的相差比较大, 有显著的统计学意义, 因此, 本文提出的基于PnP算法的单目相机深度估计方法具有一定的实用性。</p>
                </div>
                <div class="p1">
                    <p id="92">但是由表5也可以看出, 1层纸盒的<i>Z</i>值较为稳定, 取值范围在616～637 mm之间, 但是2层和3层的<i>Z</i>值取值范围较大, 而且两者之间有交集, 从<i>Z</i>值上区别纸盒的层数较为困难, 该算法需要进一步提升精度。</p>
                </div>
                <div class="area_img" id="93">
                    <p class="img_tit"><b>表5 不同层数堆叠纸盒的</b><i>Z</i><b>值</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="93" border="1"><tr><td><br />序号</td><td>1层纸盒<i>Z</i>值<br />/mm</td><td>2层纸盒<i>Z</i>值<br />/mm</td><td>3层纸盒<i>Z</i>值<br />/mm</td></tr><tr><td><br />1</td><td>623</td><td>579</td><td>553</td></tr><tr><td><br />2</td><td>637</td><td>556</td><td>486</td></tr><tr><td><br />3</td><td>631</td><td>528</td><td>539</td></tr><tr><td><br />4</td><td>625</td><td>597</td><td>549</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="94"><b>表5 (续</b>) </p>
                </div>
                <div class="area_img" id="95">
                    <p class="img_tit"> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="95" border="1"><tr><td><br />序号</td><td>1层纸盒<i>Z</i>值<br />/mm</td><td>2层纸盒<i>Z</i>值<br />/mm</td><td>3层纸盒<i>Z</i>值<br />/mm</td></tr><tr><td><br />5</td><td>631</td><td>595</td><td>554</td></tr><tr><td><br />6</td><td>624</td><td>598</td><td>561</td></tr><tr><td><br />7</td><td>637</td><td>576</td><td>552</td></tr><tr><td><br />8</td><td>627</td><td>538</td><td>561</td></tr><tr><td><br />9</td><td>635</td><td>536</td><td>547</td></tr><tr><td><br />10</td><td>627</td><td>601</td><td>542</td></tr><tr><td><br />11</td><td>625</td><td>596</td><td>562</td></tr><tr><td><br />12</td><td>616</td><td>589</td><td>556</td></tr><tr><td><br />平均值</td><td>628</td><td>574</td><td>547</td></tr><tr><td><br />中位数</td><td>627</td><td>584</td><td>552.5</td></tr><tr><td><br />标准差</td><td>6.3</td><td>27.3</td><td>20.5</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <h3 id="96" name="96" class="anchor-tag">5 结束语</h3>
                <div class="p1">
                    <p id="97">由于传统的手眼标定方法比较烦琐, 并不适用于SCARA四轴机器人, 因此改进了一种简易的手眼标定方法。该方法操作方便, 不需要对相机内参进行标定, 可以直接进行机器人和相机的手眼标定, 标定的误差小于3 mm, 能满足抓取纸盒的精度要求。提出了一套基于轮廓提取的矩形检测算法, 可以识别机械臂基平面上的多个矩形纸盒;采用PnP算法计算纸盒到相机的距离, 可以实现堆叠矩阵纸盒的层数估计, 通过实验发现, 1层纸盒和2层纸盒容易区分, 但是2层和3层纸盒的层数容易误判, 需要进一步优化算法, 提高精度。</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="3">
                            <a id="bibliography_1" target="_blank" href="http://scholar.cnki.net/result.aspx?q=A flexible new technique for camera calibration">

                                <b>[1]</b> Zhang Z.A flexible new technique for camera calibration[J].IEEE Transactions on Pattern Analysis and Machine Intelligence, 2000, 22 (11) :1330-1334.
                            </a>
                        </p>
                        <p id="5">
                            <a id="bibliography_2" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=MOTO200106004&amp;v=MTU5NzdJUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3FmWnVabUZpRG1WYnpQS0NMZlliRzRIdERNcVk5Rlk=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[2]</b> 胡占义, 雷成, 吴福朝.关于P4P问题的一点讨论[J].自动化学报, 2001, 27 (6) :770-776.
                            </a>
                        </p>
                        <p id="7">
                            <a id="bibliography_3" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=ELEW201706064&amp;v=MjQxNjNVUjdxZlp1Wm1GaURtVmJ6UElDSE9lYkc0SDliTXFZOURZSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckM=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[3]</b> 万晓峰.基于SCARA机械手的手眼标定[J].电子世界, 2017 (6) :76-77.
                            </a>
                        </p>
                        <p id="9">
                            <a id="bibliography_4" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SSJD&amp;filename=SSJD15110100320222&amp;v=MTcyOTlUNlQ0UFFIL2lyUmRHZXJxUVRNbndaZVp0RmlubFVyZkpLRjBTYVJVPU5qN0Jhcks5SDlETXJvOUZaK2tQRG40N29CTQ==&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[4]</b> Lepetit V, Moreno-Noguer F, Fua P.EPnP:An accurate O (n) solution to the PnP problem[J].International Journal of Computer Vision, 2009, 81 (2) :155-166.
                            </a>
                        </p>
                        <p id="11">
                            <a id="bibliography_5" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=HDZJ201801011&amp;v=MTU1MTZxQnRHRnJDVVI3cWZadVptRmlEbVZielBMU25SWkxHNEg5bk1ybzlFWllRS0RIODR2UjRUNmo1NE8zenE=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[5]</b> 张培科, 武元新.基于改进的DLT算法的PnP问题求解[J].信息技术, 2018 (1) :36-41.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="JXYD201906018" />
        <input id="dpi" type="hidden" value="300" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JXYD201906018&amp;v=MDk0NzJGaURtVmJ6UEx6WFNhckc0SDlqTXFZOUViSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1Wm0=&amp;uid=WEEvREcwSlJHSldRa1FhdXNzY2Z1OVRrR1ZNakRMQkZrb2lIQ3ZpNFBEdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=842_VlRz_g1CMCLi-M0twVw-4EOFG_noWyi_OsMnrAg1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
