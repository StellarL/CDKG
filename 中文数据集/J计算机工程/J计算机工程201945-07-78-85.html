<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637129918377176250%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dJSJC201907013%26RESULT%3d1%26SIGN%3dsh6Erc6%252fAS2N6RlAjIy3lTPmaS0%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JSJC201907013&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JSJC201907013&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJC201907013&amp;v=MTg1NzE0TzN6cXFCdEdGckNVUkxPZVplUnBGQ2puVUx2TUx6N0JiYkc0SDlqTXFJOUVaNFFLREg4NHZSNFQ2ajU=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#33" data-title="0 概述 ">0 概述</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#38" data-title="1 相关工作 ">1 相关工作</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#45" data-title="2 安全关键嵌入式实时操作系统设计 ">2 安全关键嵌入式实时操作系统设计</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#47" data-title="2.1 ARINC-653标准">2.1 ARINC-653标准</a></li>
                                                <li><a href="#50" data-title="2.2 操作系统内核总体架构">2.2 操作系统内核总体架构</a></li>
                                                <li><a href="#55" data-title="2.3 软硬件混合的空间分区">2.3 软硬件混合的空间分区</a></li>
                                                <li><a href="#64" data-title="2.4 基于Tick的时间分区">2.4 基于Tick的时间分区</a></li>
                                                <li><a href="#68" data-title="2.5 合同-通道的分区通信机制">2.5 合同-通道的分区通信机制</a></li>
                                                <li><a href="#73" data-title="2.6 基于CACHE锁分区的CACHE策略">2.6 基于CACHE锁分区的CACHE策略</a></li>
                                                <li><a href="#77" data-title="2.7 基于Manifest的任务与分区管理">2.7 基于Manifest的任务与分区管理</a></li>
                                                <li><a href="#82" data-title="2.8 基于任务好感度的任务分区策略">2.8 基于任务好感度的任务分区策略</a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#87" data-title="3 原型系统功能与性能测试 ">3 原型系统功能与性能测试</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#90" data-title="3.1 原型系统软件隔离功能测试">3.1 原型系统软件隔离功能测试</a></li>
                                                <li><a href="#105" data-title="3.2 操作系统基本功能验证">3.2 操作系统基本功能验证</a></li>
                                                <li><a href="#110" data-title="3.3 操作系统驱动保护功能验证">3.3 操作系统驱动保护功能验证</a></li>
                                                <li><a href="#115" data-title="3.4 操作系统栈保护功能验证">3.4 操作系统栈保护功能验证</a></li>
                                                <li><a href="#124" data-title="3.5 原型系统性能测试">3.5 原型系统性能测试</a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#127" data-title="4 结束语 ">4 结束语</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#52" data-title="&lt;b&gt;图1 安全关键嵌入式实时操作系统架构&lt;/b&gt;"><b>图1 安全关键嵌入式实时操作系统架构</b></a></li>
                                                <li><a href="#61" data-title="&lt;b&gt;图2 软硬件混合隔离方式&lt;/b&gt;"><b>图2 软硬件混合隔离方式</b></a></li>
                                                <li><a href="#63" data-title="&lt;b&gt;图3 分区内部空间布局&lt;/b&gt;"><b>图3 分区内部空间布局</b></a></li>
                                                <li><a href="#67" data-title="&lt;b&gt;图4 时间分区示意图&lt;/b&gt;"><b>图4 时间分区示意图</b></a></li>
                                                <li><a href="#70" data-title="&lt;b&gt;图5 ARINC-653通信示意图&lt;/b&gt;"><b>图5 ARINC-653通信示意图</b></a></li>
                                                <li><a href="#72" data-title="&lt;b&gt;图6 ARINC-653通道缓存示意图&lt;/b&gt;"><b>图6 ARINC-653通道缓存示意图</b></a></li>
                                                <li><a href="#81" data-title="&lt;b&gt;图7 操作系统、配置信息及应用程序的编译链接流程&lt;/b&gt;"><b>图7 操作系统、配置信息及应用程序的编译链接流程</b></a></li>
                                                <li><a href="#86" data-title="&lt;b&gt;图8 基于任务好感度的任务分区&lt;/b&gt;"><b>图8 基于任务好感度的任务分区</b></a></li>
                                                <li><a href="#107" data-title="&lt;b&gt;表1 基本功能测试任务&lt;/b&gt;"><b>表1 基本功能测试任务</b></a></li>
                                                <li><a href="#109" data-title="&lt;b&gt;图9 操作系统基本功能运行演示的串口输出&lt;/b&gt;"><b>图9 操作系统基本功能运行演示的串口输出</b></a></li>
                                                <li><a href="#112" data-title="&lt;b&gt;表2 驱动故障&lt;/b&gt;"><b>表2 驱动故障</b></a></li>
                                                <li><a href="#114" data-title="&lt;b&gt;图10 串口驱动故障及恢复测试结果&lt;/b&gt;"><b>图10 串口驱动故障及恢复测试结果</b></a></li>
                                                <li><a href="#119" data-title="&lt;b&gt;图11 分区栈区MMU保护测试结果&lt;/b&gt;"><b>图11 分区栈区MMU保护测试结果</b></a></li>
                                                <li><a href="#122" data-title="&lt;b&gt;图12 任务栈溢出检测&lt;/b&gt;"><b>图12 任务栈溢出检测</b></a></li>
                                                <li><a href="#123" data-title="&lt;b&gt;图13 任务栈溢出恢复&lt;/b&gt;"><b>图13 任务栈溢出恢复</b></a></li>
                                                <li><a href="#126" data-title="&lt;b&gt;表3 AgOS与其他嵌入式操作系统的性能对比&lt;/b&gt;"><b>表3 AgOS与其他嵌入式操作系统的性能对比</b></a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="145">


                                    <a id="bibliography_1" title=" LUTZ R R.Analyzing software requirements errors in safety-critical, embedded systems[C]//Proceedings of IEEE International Symposium on Requirements Engineering.Washington D.C., USA:IEEE Press, 2002:126-133." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Analyzing software requirements errors in safety-critical,embedded systems">
                                        <b>[1]</b>
                                         LUTZ R R.Analyzing software requirements errors in safety-critical, embedded systems[C]//Proceedings of IEEE International Symposium on Requirements Engineering.Washington D.C., USA:IEEE Press, 2002:126-133.
                                    </a>
                                </li>
                                <li id="147">


                                    <a id="bibliography_2" title=" SAI global.Avionics application software standard interface:ARINC-653[S].AEEC, 1996:1-29." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Avionics application software standard interface">
                                        <b>[2]</b>
                                         SAI global.Avionics application software standard interface:ARINC-653[S].AEEC, 1996:1-29.
                                    </a>
                                </li>
                                <li id="149">


                                    <a id="bibliography_3" title=" RUSHBY J.Partitioning in avionics architectures:require-ments, mechanisms, and assurance:NASA/CR-1999-209347[R].Menlo Park, USA:SRI International, 1999:34." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Partitioning for avionics architectures:Requirements,mechanisms,and assurance">
                                        <b>[3]</b>
                                         RUSHBY J.Partitioning in avionics architectures:require-ments, mechanisms, and assurance:NASA/CR-1999-209347[R].Menlo Park, USA:SRI International, 1999:34.
                                    </a>
                                </li>
                                <li id="151">


                                    <a id="bibliography_4" title=" HERDER J, HERBERT B.MINIX 3:a highly reliable, self-repairing operating system[J].ACM SIGOPS Operating Systems Review, 2006, 40 (3) :80-89." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SJCM&amp;filename=SJCM13091000055028&amp;v=MTcyNDlNbndaZVp1SHlqbVVMakxJRndYYmhVPU5pZklZN0s3SHRqTnI0OUZaTzRLREg0eG9CTVQ2VDRQUUgvaXJSZEdlcnFRVA==&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[4]</b>
                                         HERDER J, HERBERT B.MINIX 3:a highly reliable, self-repairing operating system[J].ACM SIGOPS Operating Systems Review, 2006, 40 (3) :80-89.
                                    </a>
                                </li>
                                <li id="153">


                                    <a id="bibliography_5" title=" HUNT G, LARUS J.Singularity:rethinking the software stack[J].ACM SIGOPS Operating Systems Review, 2007, 41 (2) :37-49." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SJCM&amp;filename=SJCM13091000055122&amp;v=MjQ4MjhIdGpOcjQ5RlpPNEtEWDQ3b0JNVDZUNFBRSC9pclJkR2VycVFUTW53WmVadUh5am1VTGpMSUZ3WGJoVT1OaWZJWTdLNw==&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[5]</b>
                                         HUNT G, LARUS J.Singularity:rethinking the software stack[J].ACM SIGOPS Operating Systems Review, 2007, 41 (2) :37-49.
                                    </a>
                                </li>
                                <li id="155">


                                    <a id="bibliography_6" title=" KLEIN G, ELPHINSTONE K, HEISER G, et al.SeL4:formal verification of an OS kernel[C]//Proceedings of ACM Symposium on Operating Systems Principles.New York, USA:ACM Press, 2009:207-220." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=se L4:Formal Verification of an OS Kernel">
                                        <b>[6]</b>
                                         KLEIN G, ELPHINSTONE K, HEISER G, et al.SeL4:formal verification of an OS kernel[C]//Proceedings of ACM Symposium on Operating Systems Principles.New York, USA:ACM Press, 2009:207-220.
                                    </a>
                                </li>
                                <li id="157">


                                    <a id="bibliography_7" title=" GU Ronghui, SHAO Zhong, CHEN Hao.CertiKOS:an extensible architecture for building certified concurrent OS kernels[C]//Proceedings of the 12th USENIX Symposium on Operation Systems Design and Imple-mentation.Savannah, USA:[s.n.], 2016:653-669." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=CertiKOS:an extensible architecture for building certified concurrent OS kernels">
                                        <b>[7]</b>
                                         GU Ronghui, SHAO Zhong, CHEN Hao.CertiKOS:an extensible architecture for building certified concurrent OS kernels[C]//Proceedings of the 12th USENIX Symposium on Operation Systems Design and Imple-mentation.Savannah, USA:[s.n.], 2016:653-669.
                                    </a>
                                </li>
                                <li id="159">


                                    <a id="bibliography_8" title=" WAHBE R, LUCCO S.Efficient software-based fault isolation[C]//Proceedings of Symposium on Operating Systems Principles.New York, USA:ACM Press, 1994:87-94." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Efficient software-based fault isolation">
                                        <b>[8]</b>
                                         WAHBE R, LUCCO S.Efficient software-based fault isolation[C]//Proceedings of Symposium on Operating Systems Principles.New York, USA:ACM Press, 1994:87-94.
                                    </a>
                                </li>
                                <li id="161">


                                    <a id="bibliography_9" title=" SEHR D, MUTH R.Adapting software fault isolation to contemporary CPU architectures[C]//Proceedings of the 19th USENIX Conference on Security.Berkeley, USA:USENIX Association, 2010:1-12." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Adapting software fault isolation to contemporary CPU architectures">
                                        <b>[9]</b>
                                         SEHR D, MUTH R.Adapting software fault isolation to contemporary CPU architectures[C]//Proceedings of the 19th USENIX Conference on Security.Berkeley, USA:USENIX Association, 2010:1-12.
                                    </a>
                                </li>
                                <li id="163">


                                    <a id="bibliography_10" title=" AIKEN M, F&#196;HNDRICH M.Decontructing process isolation[C]//Proceedings of 2006 Workshop on Memory System Performance and Correctness.New York, USA:ACM Press, 2006:1-10." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Larus:deconstructing process isolation">
                                        <b>[10]</b>
                                         AIKEN M, F&#196;HNDRICH M.Decontructing process isolation[C]//Proceedings of 2006 Workshop on Memory System Performance and Correctness.New York, USA:ACM Press, 2006:1-10.
                                    </a>
                                </li>
                                <li id="165">


                                    <a id="bibliography_11" title=" SOLER M, CRESPO A, MASMANO M, et al.Cache management techniques for time isolation in partitioned systems[C]//Proceedings of DASIA’12.Washington D.C., USA:IEEE Press, 2012:14-16." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Cache management techniques for time isolation in partitioned systems">
                                        <b>[11]</b>
                                         SOLER M, CRESPO A, MASMANO M, et al.Cache management techniques for time isolation in partitioned systems[C]//Proceedings of DASIA’12.Washington D.C., USA:IEEE Press, 2012:14-16.
                                    </a>
                                </li>
                                <li id="167">


                                    <a id="bibliography_12" title=" 于东, 秦承刚, 吴文江, 等.一种实时操作系统的性能评估方法:CN201010580325.3[P].2010-12-09." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SCPD&amp;filename=CN102541724A&amp;v=MTUyNDBKaU82SHJHOUd0RExyWXMwQys0UEQzMUx4eFlUNnpvT1MzZm1wV0ZhZTdLVlRMdWRaZUJ0RnlybVY3Zz0=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[12]</b>
                                         于东, 秦承刚, 吴文江, 等.一种实时操作系统的性能评估方法:CN201010580325.3[P].2010-12-09.
                                    </a>
                                </li>
                                <li id="169">


                                    <a id="bibliography_13" >
                                        <b>[13]</b>
                                     林鹤, 李均, 朱怡安.基于μC/OS-II的高可靠嵌入式操作系统的设计与实现[D].西安:西北工业大学, 2016.</a>
                                </li>
                                <li id="171">


                                    <a id="bibliography_14" title=" 朱怡安, 魏润之, 苏世游.一种基于μC/OS-II符合OSEK标准的实时系统内核设计[J].计算机科学, 2016, 43 (4) :173-176." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJA201604036&amp;v=MTQ1MjRiN0c0SDlmTXE0OUdZb1FLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUnBGQ2puVUx2UEx6N0I=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[14]</b>
                                         朱怡安, 魏润之, 苏世游.一种基于μC/OS-II符合OSEK标准的实时系统内核设计[J].计算机科学, 2016, 43 (4) :173-176.
                                    </a>
                                </li>
                                <li id="173">


                                    <a id="bibliography_15" title=" 郭景, 陈贤富.一种符合OSEK标准的操作系统微内核设计[J].微电子学与计算机, 2017 (11) :16-22." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WXYJ201711004&amp;v=MjYwNTNvOUZZSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUnBGQ2puVUx2UE1qWFNaTEc0SDliTnI=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[15]</b>
                                         郭景, 陈贤富.一种符合OSEK标准的操作系统微内核设计[J].微电子学与计算机, 2017 (11) :16-22.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=JSJC" target="_blank">计算机工程</a>
                2019,45(07),78-85 DOI:10.19678/j.issn.1000-3428.0050533            </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>一种安全关键的嵌入式实时操作系统内核设计</b></span>
 <span class="shoufa"></span>                                     </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E6%AC%A7%E9%98%B3%E6%B9%98%E8%87%BB&amp;code=38075394&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">欧阳湘臻</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E6%9C%B1%E6%80%A1%E5%AE%89&amp;code=09119165&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">朱怡安</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E6%9D%8E%E8%81%94&amp;code=10202586&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">李联</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%8F%B2%E5%85%88%E7%90%9B&amp;code=39427148&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">史先琛</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E8%A5%BF%E5%8C%97%E5%B7%A5%E4%B8%9A%E5%A4%A7%E5%AD%A6%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2&amp;code=0085569&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">西北工业大学计算机学院</a>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E8%A5%BF%E5%8C%97%E5%B7%A5%E4%B8%9A%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E4%B8%8E%E5%BE%AE%E7%94%B5%E5%AD%90%E5%AD%A6%E9%99%A2&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">西北工业大学软件与微电子学院</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>在研究ARINC-653标准的时空隔离原理基础上, 设计并实现一种安全关键的嵌入式实时操作系统。采用微内核设计, 通过基于Manifest的任务与分区管理、软硬件结合的分区保护及软件静态验证, 提升系统可靠性与可配置性。在PowerPC平台上实现嵌入式实时操作系统内核原型并对其进行功能与性能测试, 结果表明该操作系统内核功能完备, 满足软硬件分区、栈溢出保护与监测、驱动故障保护等需求, 且综合性能优于同类操作系统内核。</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%88%86%E5%8C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">分区操作系统;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%AE%89%E5%85%A8%E5%85%B3%E9%94%AE%E4%BB%BB%E5%8A%A1&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">安全关键任务;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AE%9E%E6%97%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">嵌入式实时操作系统;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=ARINC-653%E6%A0%87%E5%87%86&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">ARINC-653标准;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E7%A9%BA%E9%97%B4%E9%9A%94%E7%A6%BB&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">空间隔离;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%97%B6%E9%97%B4%E9%9A%94%E7%A6%BB&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">时间隔离;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    欧阳湘臻 (1994—) , 男, 硕士研究生, 主研方向为嵌入式操作系统;;
                                </span>
                                <span>
                                    朱怡安, 教授、博士生导师;;
                                </span>
                                <span>
                                    李联, 助理研究员;;
                                </span>
                                <span>
                                    史先琛, 博士研究生。;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2018-02-27</p>

                    <p>

                            <b>基金：</b>
                                                        <span>航空科学基金“混合关键任务调度算法及无锁同步机制研究” (20150753010);</span>
                                <span>国家民用飞机专项科研技术研究类项目“高可靠操作系统内核关键技术研究” (MJ-2015-D-66);</span>
                                <span>陕西省重点研发计划重大重点项目“时间/事件混合触发的实时操作系统技术与应用研究” (2016MSZD-G-8-1);</span>
                    </p>
            </div>
                    <h1><b>A Safety-Critical Embedded Real Time Operating System Kernel Design</b></h1>
                    <h2>
                    <span>OUYANG Xiangzhen</span>
                    <span>ZHU Yian</span>
                    <span>LI Lian</span>
                    <span>SHI Xianchen</span>
            </h2>
                    <h2>
                    <span>School of Computer Science, Northwestern Polytechnical University</span>
                    <span>School of Software and Microelectronics, Northwestern Polytechnical University</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>Based on the study of the temporal and spatial isolation principle of the ARINC-653 standard, this paper designs and implements a safety-critical embedded real time operating system.Micro-kernel design improves system reliability and configurability through Manifest-based task and partition management, partition protection with software and hardware, and software static verification.The embedded real-time operating system kernel prototype is implemented on the PowerPC platform, and the function and performance of the kernel prototype are tested.The results show that the operating system kernel is fully functional and meets the requirements of software and hardware partition, stack overflow protection and monitoring, and drive fault protection, etc., and the comprehensive performance is better than similar operating system kernel.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=partition%20operating%20system&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">partition operating system;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=safety-critical%20task&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">safety-critical task;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=embedded%20real%20time%20operating%20system&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">embedded real time operating system;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=ARINC-653%20standard&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">ARINC-653 standard;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=spatial%20isolation&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">spatial isolation;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=temporal%20isolation&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">temporal isolation;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2018-02-27</p>
                                    <p>
                                            </p>
            </div>


        <!--brief start-->
                        <h3 id="33" name="33" class="anchor-tag">0 概述</h3>
                <div class="p1">
                    <p id="34">在工业控制、汽车、航天、航空等应用领域, 一旦操作系统发生故障或不能及时响应任务, 可能造成生命和财产的重大损失。由于开发团队沟通不畅、编程失误等各种人为错误, 因此软件错误不可避免。据统计<citation id="175" type="reference"><link href="145" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>, 旅行者号18 000行代码与伽利略号22 000行代码中, 分别发现87处与122处可能导致灾难性后果的软件错误。因此, 如何设计一种能为安全关键系统提供稳定运行平台的高可靠性、可容错的实时操作系统内核极具现实意义和研究价值。</p>
                </div>
                <div class="p1">
                    <p id="35">目前, 国外已有成熟可靠的安全关键嵌入式实时操作系统, 如VxWorks 653与INTEGRITY-178B。VxWorks是美国Wind River公司设计开发的高性能、可扩展、易裁剪的实时操作系统, 其内核衍生出多种面向不同应用领域的版本, 如虚拟化OS VxWorks MILS OS。其中面向航空领域的VxWorks-653平台是为复杂、高安全性要求的航电系统开发的符合ARINC-653标准的实时操作系统, 取得了美国国家安全局 (National Security Agency, NSA) 的EAL 6级认证, 目前已被200多家客户, 在超过75架飞机的350多个项目中使用。INTEGRITY 178B由美国Green Hills Software公司开发, 是符合ARINC-653<citation id="176" type="reference"><link href="147" rel="bibliography" /><sup>[<a class="sup">2</a>]</sup></citation>标准的高可靠性实时操作系统, 目前已通过RTCA Do-178B认证, 获得NSA的EAL 6+认证, 被用于B-2、F-16、F-22、F-35和空客A380等飞机的航电系统。</p>
                </div>
                <div class="p1">
                    <p id="36">然而, 国内现有的嵌入式实时操作系统产品在安全可靠性方面还有所不足。随着近年来计算机硬件、集成开发环境、虚拟机与软件验证等技术的迅速发展, 代码开源计划与开源社区的成熟, 亟需实现高效、可靠的自主研发安全关键嵌入式实时操作系统。</p>
                </div>
                <div class="p1">
                    <p id="37">本文基于ARINC-653标准实现了一种面向安全关键应用领域的嵌入式实时操作系统AgOS, 根据ARINC-653标准规定的分时分区实时操作系统, 提出软硬件分区混合的分区保护技术、基于Manifest描述的任务与分区方式、基于CACHE锁的CACHE策略、基于任务好感度的分区分配策略。在PowerPC平台上实现该嵌入式实时操作系统内核原型, 并给出操作系统内核原型的功能与性能测试结果。</p>
                </div>
                <h3 id="38" name="38" class="anchor-tag">1 相关工作</h3>
                <div class="p1">
                    <p id="39">国内外对于操作系统的安全性及可靠性有大量研究<citation id="177" type="reference"><link href="149" rel="bibliography" /><link href="151" rel="bibliography" /><sup>[<a class="sup">3</a>,<a class="sup">4</a>]</sup></citation>, 综合来看, 目前操作系统领域主要依靠以下机制保证操作系统的安全可靠:</p>
                </div>
                <div class="p1">
                    <p id="40">1) 安全编程语言<citation id="178" type="reference"><link href="153" rel="bibliography" /><sup>[<a class="sup">5</a>]</sup></citation>, Java、C#等安全编程语言可在编程语言层面保证操作系统不会出现类型安全问题与缓冲区溢出问题, 但安全编程语言本身依赖的虚拟机或者运行时框架由C语言实现, 仍然存在缓冲区溢出的安全隐患。</p>
                </div>
                <div class="p1">
                    <p id="41">2) 微内核设计<citation id="179" type="reference"><link href="151" rel="bibliography" /><link href="153" rel="bibliography" /><link href="155" rel="bibliography" /><sup>[<a class="sup">4</a>,<a class="sup">5</a>,<a class="sup">6</a>]</sup></citation>, 微内核设计的操作系统内核一般只提供必要的任务调度、任务通信与内存管理等服务, 而外设驱动等服务在用户模式下运行。外设驱动的失效不会干扰到内核的运行。</p>
                </div>
                <div class="p1">
                    <p id="42">3) 故障隔离与恢复机制<citation id="180" type="reference"><link href="149" rel="bibliography" /><link href="151" rel="bibliography" /><sup>[<a class="sup">3</a>,<a class="sup">4</a>]</sup></citation>, 操作系统提供一套安全有效的内存隔离与保护机制来限制故障的蔓延。现有的内存隔离与保护机制使用硬件MMU或者MPU进行内存保护, 或者SFI软件隔离任务, 当程序发生故障时, 故障不会蔓延影响到其他程序的运行。该机制的缺点是启用硬件MMU或使用软件隔离会增加访存延时。此外, 还需要专门的监测程序负责监测程序运行状态, 当程序发生故障时, 故障处理程序接管故障程序运行, 恢复故障的程序或设备。该机制增加了运行开销, 影响操作系统性能。</p>
                </div>
                <div class="p1">
                    <p id="43">4) 软件静态验证<citation id="181" type="reference"><link href="153" rel="bibliography" /><link href="155" rel="bibliography" /><link href="157" rel="bibliography" /><sup>[<a class="sup">5</a>,<a class="sup">6</a>,<a class="sup">7</a>]</sup></citation>, 包括操作系统源代码层面的形式化设计与验证技术、源代码与编译器层面的软件静态分析验证技术、编译器层面的验证等, 从不同层面保证操作系统的安全可靠。</p>
                </div>
                <div class="p1">
                    <p id="44">本文操作系统借鉴了相关研究的成果, 在ARINC-653规定的分区隔离、安全检测的基础上, 融入微内核、用户态驱动设计, 采用软件静态分析验证技术实现内核编程的类型安全。</p>
                </div>
                <h3 id="45" name="45" class="anchor-tag">2 安全关键嵌入式实时操作系统设计</h3>
                <div class="p1">
                    <p id="46">与传统嵌入式实时操作系统相比, 安全关键领域的软件开发有许多规范与标准约束, 如汽车领域的OSEK/VDX标准, 航空航天领域的DO-178B/C机载软件适航标准、ARINC-653安全关键实时操作系统设计标准等。这些标准界定了安全关键嵌入式实时操作系统开发过程中的规范以及必须实现的功能集合。</p>
                </div>
                <h4 class="anchor-tag" id="47" name="47">2.1 ARINC-653标准</h4>
                <div class="p1">
                    <p id="48">ARINC-653标准最初于1996年10月发布。1997年1月发布标准的补充ARINC-653-1, 引入APEX接口与时间、空间分区的概念。</p>
                </div>
                <div class="p1">
                    <p id="49">ARINC-653标准的核心思想是时空隔离, 即一个分区内软件的性能与行为不会受到另一个分区内软件的影响。在该思想的指导下, ARINC-653-1标准要求操作系统必须实现时间分区与空间分区。时间分区必须确保某分区中的软件从共享资源中获得的服务不会被其他分区的软件所干扰, 这包括资源性能、速率、延迟、抖动与访问共享资源的时长。空间分区必须确保某分区中的软件既不能改变其他分区软件或私有数据 (无论是在内存中还是在数据转移中) , 也不能控制其他分区的私有设备<citation id="182" type="reference"><link href="151" rel="bibliography" /><sup>[<a class="sup">4</a>]</sup></citation>。</p>
                </div>
                <h4 class="anchor-tag" id="50" name="50">2.2 操作系统内核总体架构</h4>
                <div class="p1">
                    <p id="51">本文设计并实现的嵌入式实时操作系统AgOS架构如图1所示, AgOS是基于ARINC-653标准的分区操作系统, 采用微内核架构。操作系统内核只提供最基本的系统服务, 如时钟管理、中断管理、分区管理、任务管理等。其他如通信机制、健康监测、虚拟化设备与中断作为可裁剪的模块, 此外, 串口驱动、网络支持等作为可裁剪的系统服务, 需按照需求加载到操作系统中。</p>
                </div>
                <div class="area_img" id="52">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201907013_052.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 安全关键嵌入式实时操作系统架构" src="Detail/GetImg?filename=images/JSJC201907013_052.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图1 安全关键嵌入式实时操作系统架构</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201907013_052.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="53">操作系统共分成3层, 应用层、内核层以及硬件层。应用层是安全关键应用, 通过调用APEX接口获得系统服务。内核层是操作系统核心部分, 采用微内核、模块化、层次化设计, 向下通过硬件抽象层 (Hardware Abstraction Layer, HAL) 管理处理器与其他硬件, 向上通过系统调用的方式向应用程序提供APEX接口。硬件层包括体系结构支持、板级支持包等与平台相关的代码。</p>
                </div>
                <div class="p1">
                    <p id="54">AgOS操作系统大部分功能采用C语言实现, 但是C语言并非一种安全的编程语言, 例如C语言在编写过程中可能会将一种类型错误地当成另一种类型 (如将字符指针作为字符数组使用) , 然而依然可以通过编译。C字符串处理strcpy () 等函数以及基于字符串处理的sprintf () 等函数在实现上并未对字符数组边界执行检查, 有缓冲区溢出的风险。这些C程序编写过程中常出现的类型安全与缓冲区溢出问题, 在操作系统编写过程中同样会出现。为避免这些安全问题, AgOS在实现过程中不使用动态内存分配, 全部采用静态空间配置, 不使用有可能导致缓冲区溢出的C库函数, 如strcpy等相关函数, 通过软件静态分析验证工具Frama-C阻止类型不安全的使用。</p>
                </div>
                <h4 class="anchor-tag" id="55" name="55">2.3 软硬件混合的空间分区</h4>
                <div class="p1">
                    <p id="56">空间分区有硬件分区和软件分区2种实现方式<citation id="183" type="reference"><link href="149" rel="bibliography" /><sup>[<a class="sup">3</a>]</sup></citation>。硬件隔离分区是指通过硬件MMU机制确保分区内的软件不会访问到其他分区。一旦分区尝试访问MMU指定可访问以外的内存, 非法访问行为会被MMU所阻止, 且CPU会产生相应的中断以便进行错误处理与恢复。</p>
                </div>
                <div class="p1">
                    <p id="57">硬件隔离是最常用的空间隔离方式, 具有高安全性的优势, 但开启MMU会产生访存延迟, 同时分区切换也会产生额外开销, 对操作系统性能与实时性会有一定影响。</p>
                </div>
                <div class="p1">
                    <p id="58">与硬件隔离对应的软件隔离概念早在1994年就已提出。文献<citation id="184" type="reference">[<a class="sup">8</a>]</citation>通过修改编译器对访存指令及跳转指令进行封装, 实现了基本的软件隔离。文献<citation id="185" type="reference">[<a class="sup">9</a>]</citation>将修改编译器的软件隔离方法应用于现有的ARM与X86 CPU体系结构。</p>
                </div>
                <div class="p1">
                    <p id="59">在软件隔离实际应用研究方面, 文献<citation id="186" type="reference">[<a class="sup">10</a>]</citation>在SingularityOS上实现一种软件隔离进程 (Software Isolated Process, SIP) 的空间隔离方式。该空间隔离方式不依赖硬件MMU, 而是依赖软件静态验证与运行时检测, 保证应用程序中不会存在非法访存的代码。文献<citation id="187" type="reference">[<a class="sup">10</a>]</citation>软件隔离方式的优点在于消除了MMU造成的访存延迟和MMU切换的开销, 提升了操作系统访存性能与实时性, 但也存在鲁棒性不足的缺点。在安全关键的军事、航空航天领域, 嵌入式硬件通常运行在极端恶劣的气候、复杂电磁环境或高辐照环境中, 恶劣的硬件工作环境极有可能诱发硬件存储器比特位翻转, 导致非法访存的发生, 这是软件隔离分区所无法应对的故障。</p>
                </div>
                <div class="p1">
                    <p id="60">本文在硬隔离分区和软隔离分区的基础上, 综合其优缺点, 提出一种软硬件分区混合的分区实现方式, 可在某些不支持MMU的硬件平台上实现分区功能, 同时兼具性能与鲁棒性。AgOS将分区分为安全关键分区 (存在关键等级A～D的任务) 与非安全关键分区 (存在关键等级为E的任务) , 如图2所示。安全关键分区与安全关键分区、安全关键分区与非安全关键分区之间使用硬件隔离保证鲁棒性, 非安全关键分区与非安全关键分区之间通过软件隔离提升访存性能。</p>
                </div>
                <div class="area_img" id="61">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201907013_061.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 软硬件混合隔离方式" src="Detail/GetImg?filename=images/JSJC201907013_061.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图2 软硬件混合隔离方式</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201907013_061.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="62">同时, 对于硬件隔离的安全关键分区, 为避免分区内栈溢出造成分区内错误无法被发现, 本文实现的操作系统采取栈区、代码与只读数据区、数据区与BSS区依次布置的分区布局, 如图3所示。采用该布局方式后, 无论栈指针向上向下溢出都会被硬件MMU所阻止, 进入对应的健康监测处理过程。</p>
                </div>
                <div class="area_img" id="63">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201907013_063.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 分区内部空间布局" src="Detail/GetImg?filename=images/JSJC201907013_063.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图3 分区内部空间布局</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201907013_063.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="64" name="64">2.4 基于Tick的时间分区</h4>
                <div class="p1">
                    <p id="65">AgOS时间分区的调度由操作系统管理, 在时间上具有严格的确定性。分区按照固定周期的时间序列进行CPU资源分配, 每个分区按照主时间框架分配的分区窗口被时钟中断触发。</p>
                </div>
                <div class="p1">
                    <p id="66">分区调度的基本单元是分区, 不存在优先级, 分区调度算法是固定时间片轮转调度, 按照主时间框架重复执行, 主时间框架被分成定长的Tick组成的序列, 每隔固定时间产生一次Tick时钟中断, 触发调度程序。如图4所示。主时间框架的长度以及时间窗口的分配由分区、任务的Manifest所生成的配置表决定。</p>
                </div>
                <div class="area_img" id="67">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201907013_067.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 时间分区示意图" src="Detail/GetImg?filename=images/JSJC201907013_067.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图4 时间分区示意图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201907013_067.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="68" name="68">2.5 合同-通道的分区通信机制</h4>
                <div class="p1">
                    <p id="69">AgOS采用ARINC-653标准规定的通道-端口式的分区间通信机制, 如图5所示。标准规定2种标准的分区间通信方式:采样端口与队列端口。采样端口只保存最新消息, 后写入的消息会被之前写入的消息所覆盖;队列端口不允许覆盖, 消息以FIFO顺序写入-读出。</p>
                </div>
                <div class="area_img" id="70">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201907013_070.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 ARINC-653通信示意图" src="Detail/GetImg?filename=images/JSJC201907013_070.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图5 ARINC-653通信示意图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201907013_070.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="71">如图6所示, 采样端口每次写入数据都会从通道缓存的起始位置0开始, 逐步向右推进, 直到缓存写满或者写入完成。同样采样端口每次读取数据也从通道缓存起始位置开始读。在该通信方式中, 前一次写入的数据会被后一次写入的数据覆盖, 正在被写入的采样端口不能被读取。队列端口则采用循环数组实现的队列结构, 由2个索引分别表示读与写。每次端口写入数据, 写索引右移;每次端口读数据, 读索引右移。当读索引追上写索引时, 队列端口为空;当写索引追上读索引时, 队列端口为满。队列端口读出的数据以FIFO顺序输出。</p>
                </div>
                <div class="area_img" id="72">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201907013_072.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 ARINC-653通道缓存示意图" src="Detail/GetImg?filename=images/JSJC201907013_072.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图6 ARINC-653通道缓存示意图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201907013_072.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="73" name="73">2.6 基于CACHE锁分区的CACHE策略</h4>
                <div class="p1">
                    <p id="74">ARINC-653标准明确规定操作系统不同分区之间的运行不能互相影响, 但CACHE的会导致共享CACHE的分区内任务执行时间相互影响, 因此需要谨慎使用多个分区共享CACHE。</p>
                </div>
                <div class="p1">
                    <p id="75">目前, 国内外均开展了有关CACHE分区技术<citation id="188" type="reference"><link href="165" rel="bibliography" /><sup>[<a class="sup">11</a>]</sup></citation>的研究, 但在大多数不支持硬件CACHE分区的硬件平台上, 禁用CACHE又会造成硬件资源的浪费。因此, 本文在不破坏确定性、保证分区间非干扰性的前提下, 提出一种CACHE策略。该策略基于ARINC-653操作系统运行的确定性, 运用静态分析与测试结合的方式, 得到操作系统和应用访存行为的统计结果。操作系统利用硬件CACHE锁机制, 将CACHE作为固定的高速SRAM使用, 在操作系统引导初始化时读取用户配置, 根据用户设定, 将操作系统最频繁读写的内存地址, 如任务控制块、分区控制块、任务栈中保存的执行现场等依次锁入数据CACHE, 将使用频率最多的中断服务程序与系统函数依次锁入指令CACHE。</p>
                </div>
                <div class="p1">
                    <p id="76">中断响应、任务切换时会花费大量时间执行取指、保存执行现场、恢复执行现场等访存操作。应用该CACHE策略后, 由于中断响应程序以及执行现场都在CACHE中, 因此从CACHE中的取指令与保存-恢复执行现场的速度远快于从内存中执行对应操作, 并且CACHE在装入指定地址后是锁定的, 操作系统执行过程中不存在CACHE替换, 因此能保证分区间互不干扰的前提下, 利用CACHE优化实时性, 提升系统性能。</p>
                </div>
                <h4 class="anchor-tag" id="77" name="77">2.7 基于Manifest的任务与分区管理</h4>
                <div class="p1">
                    <p id="78">Manifest是用于描述程序的文件, 一般包含程序的名称、版本、依赖、权限等信息。Manifest在操作系统、编程中应用广泛。谷歌Andriod系统中利用Manifest文件描述应用程序的Java包名、组件、服务、权限乃至依赖的API、库等。微软.NET框架中利用Manifest文件描述应用程序项目构建的信息, 如类名、调用的DLL文件名及版本号与校验码等。Manifest的引入一方面可帮助程序员更方便地编写和管理应用程序, 改善程序兼容性, 另一方面也便于操作系统验证应用程序的可靠性, 提高系统安全性。</p>
                </div>
                <div class="p1">
                    <p id="79">AgOS提出了基于Manifest描述的分区与任务。在编译AgOS应用程序的过程中, 每个合法分区都必须对应一个描述分区的Manifest文件。分区Manifest文件以XML格式表示, 包含分区名、分区空间配置、分区时间配置、分区关键等级、使用的外部设备、分区健康监测表入口等信息。相似地, 每个合法的任务也必须对应一个描述任务的Manifest文件, 该文件包含任务名、任务所在的分区、任务的时间-空间配置、任务的通信对象、所占用的通道、端口等。</p>
                </div>
                <div class="p1">
                    <p id="80">在分区与任务的Manifest通过检查后, Manifest文件中包含的信息将被XML数据软总线传给代码生成器生成对应的源码与链接脚本。在进入到编译环节前, XML数据软总线将信息传送给软件静态分析器, 软件静态分析器根据分区信息分析分区内任务代码是否会访问分区外内存, 若存在非法访存则停止编译并报错。在通过编译后, 链接器再根据生成的链接脚本, 将应用程序链接到指定地址, 如图7所示。</p>
                </div>
                <div class="area_img" id="81">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201907013_081.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 操作系统、配置信息及应用程序的编译链接流程" src="Detail/GetImg?filename=images/JSJC201907013_081.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图7 操作系统、配置信息及应用程序的编译链接流程</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201907013_081.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="82" name="82">2.8 基于任务好感度的任务分区策略</h4>
                <div class="p1">
                    <p id="83">在当前应用情形下, 分区数量和任务数量较少, 通常只有几个分区与任务, 一般由程序员在配置表中手动将任务分配到指定分区。但随着计算机硬件性能的提升与安全关键应用的不断发展, 例如综合航电系统的代码不断复杂化、分区的分布式实现, 可以预见未来安全关键嵌入式实时操作系统的任务数和分区数会逐渐增加, 且分区与分区之间的隔离程度也会提升。由程序员指定分配数量庞大的任务与分区不仅会耗费大量时间与精力, 还极有可能会产生分配错误, 这些错误轻则导致任务执行效率低下, 重则会导致生命、财产的损失。因此, 如何设计一个可靠的策略将数量庞大的任务分配到有限个分区中是一个值得研究的问题。</p>
                </div>
                <div class="p1">
                    <p id="84">针对上述问题, 本文提出一种基于任务好感度的任务分区分配策略。在任务对应的Manifest文件中定义任务与其他任务的好感度, 例如在App1的Manifest中定义&lt;suki task=“app2” value=“+1”/&gt;, 表示App1对App2的好感度为+1。由相应的分区生成算法生成对应的分区, 好感度为正的任务之间倾向于分配在同一分区, 好感度为负的任务之间倾向于分配在不同分区, 好感度为0的任务不在意彼此之间是否在同一分区。任务有自我好感度的设定, 自我好感度为正的任务倾向于独自占有分区, 自我好感度为负的任务倾向于与其他任务处于同一分区。</p>
                </div>
                <div class="p1">
                    <p id="85">在程序员配置分区时, 无需考虑整个操作系统有多少个分区以及分区中应用之间的关系, 只需考虑所编写的任务与其他任务的关系。这将极大减少程序员负担, 降低人为出错的概率。程序员可以通过修改任务好感度, 快速简便地调整任务所在分区, 提升任务执行性能。例如, 编写子系统A的程序员需要将计算任务A1与系统控制任务B1加入到综合航电系统中。他不关注其他子系统所占用的分区, 只希望计算任务A1与采集任务A2处于同一分区, 因为这有助于计算任务A1通过分区内高效的任务间通信机制快速获取采集任务A2的信息, 并且不希望控制任务B1与计算任务A1处于同一分区, 因为这不能隔离两者的故障。那么程序员只需将计算任务A1设定为“喜欢”采集任务A2, 控制任务B1设定为“厌恶”计算任务A1, 即计算任务A1对采集任务A2的好感度为“+1”且控制任务B1对计算任务A1的好感度为“-1”即可。这样在应用程序编译后自动生成的分区配置表中, 采集任务A2与计算任务A1处于同一分区, 而计算任务A1与控制任务B1处于不同分区, 如图8所示。</p>
                </div>
                <div class="area_img" id="86">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201907013_086.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图8 基于任务好感度的任务分区" src="Detail/GetImg?filename=images/JSJC201907013_086.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图8 基于任务好感度的任务分区</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201907013_086.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="87" name="87" class="anchor-tag">3 原型系统功能与性能测试</h3>
                <div class="p1">
                    <p id="88">AgOS内核在Freescale MPC 8xxx平台上编写实现。MPC 8xxx平台的硬件环境为:PowerPC e300核, 32 bit PowerPC RISC指令集, 主频666 MHz;有8路组相联32 KB的ICACHE与DCACHE, 同时支持灵活的段页式MMU与高速的块MMU 2种MMU机制;内存为256 MB DDR2 RAM, 工作频率333 MHz。</p>
                </div>
                <div class="p1">
                    <p id="89">AgOS开发环境为基于Eclipse的专用集成开发环境。该开发环境集成了XML数据软总线插件, 提供静态验证工具以及AgOS对应的任务、分区、通道-端口配置环境。</p>
                </div>
                <h4 class="anchor-tag" id="90" name="90">3.1 原型系统软件隔离功能测试</h4>
                <div class="p1">
                    <p id="91">本文中操作系统的软件分区是由软件静态分析器保证, 使用Frama-C的访存分析阻止分区内的程序对分区外地址的非法访问。App1非法访存代码具体为:</p>
                </div>
                <div class="p1">
                    <p id="92">1.int App1 () </p>
                </div>
                <div class="p1">
                    <p id="93">2.{ //app1所属分区1地址为0x00190000～0x001A0000</p>
                </div>
                <div class="p1">
                    <p id="94">3.unsigned int a;</p>
                </div>
                <div class="p1">
                    <p id="95">4.unsigned int *inPartitionMem=0x00194400;//分区//内地址</p>
                </div>
                <div class="p1">
                    <p id="96">5.unsigned int *outPartitionMem=0xADEADBEE;//分区//外非法地址</p>
                </div>
                <div class="p1">
                    <p id="98">6.*inPartitionMem=0xFFEEDDCC;//分区内合法写数据</p>
                </div>
                <div class="p1">
                    <p id="99">7.*outPartitionMem=0xCCCCCCCC;//分区外非法写//数据</p>
                </div>
                <div class="p1">
                    <p id="100">8.…//其他代码</p>
                </div>
                <div class="p1">
                    <p id="101">9. }</p>
                </div>
                <div class="p1">
                    <p id="102">当XML数据软总线将分区空间属性与C源码信息传给Frama-C, Frama-C对分区内写数据的合法代码予以通过, 对分区外非法写数据的代码报出错误:</p>
                </div>
                <div class="p1">
                    <p id="103">App1.c:7 out of bounds write.assert\\valid (outPartitionMem) </p>
                </div>
                <div class="p1">
                    <p id="104">只有通过软件静态分析器的访存分析, 分区内的代码才能进入编译阶段。</p>
                </div>
                <h4 class="anchor-tag" id="105" name="105">3.2 操作系统基本功能验证</h4>
                <div class="p1">
                    <p id="106">AgOS操作系统基本的硬件隔离分区保护、任务调度、通信等功能的测试采用的测试任务集如表1所示。主时间框架为序列{任务1, 任务2, 任务3}顺序执行。</p>
                </div>
                <div class="area_img" id="107">
                    <p class="img_tit"><b>表1 基本功能测试任务</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="107" border="1"><tr><td>任务</td><td>所属分区及空间</td><td>执行时间/ms</td><td>测试用例描述    </td></tr><tr><td>任务1</td><td>分区1<br />0x00190000～0x001A0000</td><td>60</td><td>向操作系统注册分区健康监测表<br />while (1) {<br />自加变量a并打印访问分区2中的地址 }</td></tr><tr><td><br />任务2</td><td>分区2<br />0x001A0000～0x001B0000</td><td>120</td><td>申请采样端口接收<br />while (1) {<br />接收来自任务3的消息并打印消息的内容 }</td></tr><tr><td><br />任务3</td><td>分区1<br />0x00190000～0x001A0000</td><td>90</td><td>申请采样端口发送<br />while (1) {<br />循环发送任务1中的变量a至任务2 }</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="108">任务运行情况下的输出如图9所示。串口循环输出并打印任务名及任务相关信息, 任务1的非法访问尝试被MMU阻止并跳转到任务1对应的健康监测函数内, 说明分区MMU保护功能有效。任务2成功打印来自任务3的消息, 即上一个主时间框架执行完后变量<i>a</i>的值, 说明跨分区间采样端口通信机制有效。</p>
                </div>
                <div class="area_img" id="109">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201907013_109.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图9 操作系统基本功能运行演示的串口输出" src="Detail/GetImg?filename=images/JSJC201907013_109.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图9 操作系统基本功能运行演示的串口输出</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201907013_109.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="110" name="110">3.3 操作系统驱动保护功能验证</h4>
                <div class="p1">
                    <p id="111">驱动故障以串口速率不同步为例, 目标机端除去表1中原本3个测例, 另外新增的驱动故障测例如表2所示。宿主机不断向目标机发送‘+’号, 目标机端读取宿主机端发送的字符, 如果接收到‘+’号, 则表示正常;否则错误次数累加。错误次数累加到1 900次后, 通过健康监测模块的APEX接口向操作系统发送错误代码, 操作系统跳转到分区健康检测入口, 执行对应的故障恢复程序。</p>
                </div>
                <div class="area_img" id="112">
                    <p class="img_tit"><b>表2 驱动故障</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="112" border="1"><tr><td>任务</td><td>所属分区</td><td>执行时间/ms</td><td>测试用例描述</td></tr><tr><td>任务4</td><td>分区3<br />0x001B0000～<br />0x001C0000</td><td>120</td><td>模拟串口故障 (速率不同步) <br />while (1) {自加变量c并通过串口输出<br />尝试从串口读取一个char<br />if (读到的char不是‘+’) 错误次数++<br />if (错误次数&gt;1 900) {<br />系统调用向操作系统发送错误代码<br />错误次数重置}<br />}</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="113">测试结果如图10所示, 目标机在执行任务4时由于串口故障, 输出的变量<i>c</i>的值是乱码, 且不能正确读取来自宿主机的‘+’号消息, 任务4不断累积错误次数。当错误次数累积到1 900次时, 操作系统调用APEX健康监测接口向操作系统发送错误代码, 操作系统跳转到分区健康监测入口, 执行对应的串口恢复函数, 即重新初始化串口。串口重新初始化成功, 打印出分区串口错误与健康监测恢复完成的信息, 继续执行变量<i>c</i>的累加并输出正常的字符。</p>
                </div>
                <div class="area_img" id="114">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201907013_114.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图10 串口驱动故障及恢复测试结果" src="Detail/GetImg?filename=images/JSJC201907013_114.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图10 串口驱动故障及恢复测试结果</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201907013_114.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="115" name="115">3.4 操作系统栈保护功能验证</h4>
                <div class="p1">
                    <p id="116">操作系统栈溢出通常发生在函数压栈或中断循环嵌套中, 本文采用无穷递归的测试方式, 模拟不断函数调用压栈导致分区栈溢出的情况。</p>
                </div>
                <div class="p1">
                    <p id="117">栈溢出测例程序作为App4加入到测试任务集中, App4位于分区4, 分区内栈区域为0x001B000～0x001B4000。</p>
                </div>
                <div class="p1">
                    <p id="118">程序运行结果如图11所示, 无穷递归函数不断递归压栈, 当深度达到0x0001992时, 栈指针从0x001B4000不断增长到分区边界0x001B0000, 从而触发MMU保护。MMU中断产生后, 操作系统跳转到健康监测表中对应的栈溢出恢复程序。分区栈溢出恢复程序由用户定义, 本文的栈恢复程序重置分区相关属性, 并将该分区下所有任务设置成STATUS_RESET状态, 等待操作系统下次调度时重置该分区下的任务。</p>
                </div>
                <div class="area_img" id="119">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201907013_119.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图11 分区栈区MMU保护测试结果" src="Detail/GetImg?filename=images/JSJC201907013_119.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图11 分区栈区MMU保护测试结果</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201907013_119.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="120">ARINC-653标准规定的内存隔离仅限于分区级, 分区内的每个任务的任务栈不能采用MMU中断触发健康监测的方式, 只能采用执行时检测的方式, 开销较大。该测试的测例同上, 测试结果如图12、图13所示。图12说明当开启任务栈执行时检测功能, 任务调度器会在任务调度时动态检测当前任务栈占用率, 如果任务栈占用率异常, 则向任务健康监测模块报告错误, 将任务状态设置为重置状态, 待下次调度时重启任务。图13说明任务完成重启, 重新开始执行。</p>
                </div>
                <div class="area_img" id="122">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201907013_122.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图12 任务栈溢出检测" src="Detail/GetImg?filename=images/JSJC201907013_122.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图12 任务栈溢出检测</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201907013_122.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="123">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201907013_123.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图13 任务栈溢出恢复" src="Detail/GetImg?filename=images/JSJC201907013_123.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图13 任务栈溢出恢复</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201907013_123.jpg&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="124" name="124">3.5 原型系统性能测试</h4>
                <div class="p1">
                    <p id="125">分时分区嵌入式实时操作系统的性能评价除了中断响应时间与上下文切换时间<citation id="189" type="reference"><link href="167" rel="bibliography" /><sup>[<a class="sup">12</a>]</sup></citation>外, 还有一项比较重要的性能指标:分区切换时间。本文将AgOS与其他嵌入式操作系统<citation id="190" type="reference"><link href="169" rel="bibliography" /><link href="171" rel="bibliography" /><link href="173" rel="bibliography" /><sup>[<a class="sup">13</a>,<a class="sup">14</a>,<a class="sup">15</a>]</sup></citation>进行对比, 如表3所示。可以看出, AgOS在不使用CACHE策略的情况下, 中断响应时间略有不足, 使用CACHE策略优化后, 所有性能指标均优于比较系统。</p>
                </div>
                <div class="area_img" id="126">
                    <p class="img_tit"><b>表3 AgOS与其他嵌入式操作系统的性能对比</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="126" border="1"><tr><td><br />操作系统</td><td>上下文切换<br />时间/μs</td><td>中断响应<br />时间/μs</td><td>分区切换<br />时间/μs</td><td>内核大小/<br />KB</td></tr><tr><td><br />AgOS系统</td><td>0.76</td><td>2.64</td><td>2.47</td><td>74</td></tr><tr><td><br />AgOS (优化) 系统</td><td>0.14</td><td>0.36</td><td>0.26</td><td>74</td></tr><tr><td><br />文献[13]系统</td><td>3.20</td><td>0.70</td><td>12.40</td><td>52</td></tr><tr><td><br />文献[14]系统</td><td>2.32</td><td>0.66</td><td></td><td></td></tr><tr><td><br />文献[15]系统</td><td>3.40</td><td></td><td></td><td></td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <h3 id="127" name="127" class="anchor-tag">4 结束语</h3>
                <div class="p1">
                    <p id="128">本文在ARINC-653标准的基础上, 设计并实现了一种安全关键嵌入式实时操作系统内核, 并提出软硬件混合隔离分区方式、分区CACHE策略、基于Manifest的分区与任务管理策略、基于任务好感度的分区分配策略, 从而提高系统可靠性, 优化操作系统性能, 改善用户体验。原型操作系统的功能与性能测试结果表明, 该操作系统在安全性、可靠性等方面满足相关需求, 并且优于同类操作系统。下一步将研究虚拟化技术与ARINC-653分区的结合, 实现Hypervisor虚拟化分区。</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="145">
                            <a id="bibliography_1" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Analyzing software requirements errors in safety-critical,embedded systems">

                                <b>[1]</b> LUTZ R R.Analyzing software requirements errors in safety-critical, embedded systems[C]//Proceedings of IEEE International Symposium on Requirements Engineering.Washington D.C., USA:IEEE Press, 2002:126-133.
                            </a>
                        </p>
                        <p id="147">
                            <a id="bibliography_2" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Avionics application software standard interface">

                                <b>[2]</b> SAI global.Avionics application software standard interface:ARINC-653[S].AEEC, 1996:1-29.
                            </a>
                        </p>
                        <p id="149">
                            <a id="bibliography_3" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Partitioning for avionics architectures:Requirements,mechanisms,and assurance">

                                <b>[3]</b> RUSHBY J.Partitioning in avionics architectures:require-ments, mechanisms, and assurance:NASA/CR-1999-209347[R].Menlo Park, USA:SRI International, 1999:34.
                            </a>
                        </p>
                        <p id="151">
                            <a id="bibliography_4" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SJCM&amp;filename=SJCM13091000055028&amp;v=MjAyNjZmSVk3SzdIdGpOcjQ5RlpPNEtESDR4b0JNVDZUNFBRSC9pclJkR2VycVFUTW53WmVadUh5am1VTGpMSUZ3WGJoVT1OaQ==&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[4]</b> HERDER J, HERBERT B.MINIX 3:a highly reliable, self-repairing operating system[J].ACM SIGOPS Operating Systems Review, 2006, 40 (3) :80-89.
                            </a>
                        </p>
                        <p id="153">
                            <a id="bibliography_5" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SJCM&amp;filename=SJCM13091000055122&amp;v=MjYxNTFHZXJxUVRNbndaZVp1SHlqbVVMakxJRndYYmhVPU5pZklZN0s3SHRqTnI0OUZaTzRLRFg0N29CTVQ2VDRQUUgvaXJSZA==&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[5]</b> HUNT G, LARUS J.Singularity:rethinking the software stack[J].ACM SIGOPS Operating Systems Review, 2007, 41 (2) :37-49.
                            </a>
                        </p>
                        <p id="155">
                            <a id="bibliography_6" target="_blank" href="http://scholar.cnki.net/result.aspx?q=se L4:Formal Verification of an OS Kernel">

                                <b>[6]</b> KLEIN G, ELPHINSTONE K, HEISER G, et al.SeL4:formal verification of an OS kernel[C]//Proceedings of ACM Symposium on Operating Systems Principles.New York, USA:ACM Press, 2009:207-220.
                            </a>
                        </p>
                        <p id="157">
                            <a id="bibliography_7" target="_blank" href="http://scholar.cnki.net/result.aspx?q=CertiKOS:an extensible architecture for building certified concurrent OS kernels">

                                <b>[7]</b> GU Ronghui, SHAO Zhong, CHEN Hao.CertiKOS:an extensible architecture for building certified concurrent OS kernels[C]//Proceedings of the 12th USENIX Symposium on Operation Systems Design and Imple-mentation.Savannah, USA:[s.n.], 2016:653-669.
                            </a>
                        </p>
                        <p id="159">
                            <a id="bibliography_8" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Efficient software-based fault isolation">

                                <b>[8]</b> WAHBE R, LUCCO S.Efficient software-based fault isolation[C]//Proceedings of Symposium on Operating Systems Principles.New York, USA:ACM Press, 1994:87-94.
                            </a>
                        </p>
                        <p id="161">
                            <a id="bibliography_9" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Adapting software fault isolation to contemporary CPU architectures">

                                <b>[9]</b> SEHR D, MUTH R.Adapting software fault isolation to contemporary CPU architectures[C]//Proceedings of the 19th USENIX Conference on Security.Berkeley, USA:USENIX Association, 2010:1-12.
                            </a>
                        </p>
                        <p id="163">
                            <a id="bibliography_10" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Larus:deconstructing process isolation">

                                <b>[10]</b> AIKEN M, FÄHNDRICH M.Decontructing process isolation[C]//Proceedings of 2006 Workshop on Memory System Performance and Correctness.New York, USA:ACM Press, 2006:1-10.
                            </a>
                        </p>
                        <p id="165">
                            <a id="bibliography_11" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Cache management techniques for time isolation in partitioned systems">

                                <b>[11]</b> SOLER M, CRESPO A, MASMANO M, et al.Cache management techniques for time isolation in partitioned systems[C]//Proceedings of DASIA’12.Washington D.C., USA:IEEE Press, 2012:14-16.
                            </a>
                        </p>
                        <p id="167">
                            <a id="bibliography_12" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SCPD&amp;filename=CN102541724A&amp;v=MzExMzRybVY3Zz1KaU82SHJHOUd0RExyWXMwQys0UEQzMUx4eFlUNnpvT1MzZm1wV0ZhZTdLVlRMdWRaZUJ0Rnk=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[12]</b> 于东, 秦承刚, 吴文江, 等.一种实时操作系统的性能评估方法:CN201010580325.3[P].2010-12-09.
                            </a>
                        </p>
                        <p id="169">
                            <a id="bibliography_13" >
                                    <b>[13]</b>
                                 林鹤, 李均, 朱怡安.基于μC/OS-II的高可靠嵌入式操作系统的设计与实现[D].西安:西北工业大学, 2016.
                            </a>
                        </p>
                        <p id="171">
                            <a id="bibliography_14" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJA201604036&amp;v=MDAwMzZxQnRHRnJDVVJMT2VaZVJwRkNqblVMdlBMejdCYjdHNEg5Zk1xNDlHWW9RS0RIODR2UjRUNmo1NE8zenE=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[14]</b> 朱怡安, 魏润之, 苏世游.一种基于μC/OS-II符合OSEK标准的实时系统内核设计[J].计算机科学, 2016, 43 (4) :173-176.
                            </a>
                        </p>
                        <p id="173">
                            <a id="bibliography_15" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WXYJ201711004&amp;v=MDI4ODVMRzRIOWJOcm85RllJUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVScEZDam5VTHZQTWpYU1o=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[15]</b> 郭景, 陈贤富.一种符合OSEK标准的操作系统微内核设计[J].微电子学与计算机, 2017 (11) :16-22.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="JSJC201907013" />
        <input id="dpi" type="hidden" value="600" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJC201907013&amp;v=MTg1NzE0TzN6cXFCdEdGckNVUkxPZVplUnBGQ2puVUx2TUx6N0JiYkc0SDlqTXFJOUVaNFFLREg4NHZSNFQ2ajU=&amp;uid=WEEvREcwSlJHSldRa1FhdXNXaEhoRFQwam9BWm83cU5adCswdFNtUXRBUT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
