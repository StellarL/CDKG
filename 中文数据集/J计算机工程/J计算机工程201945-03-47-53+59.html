<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637130624485587500%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dJSJC201903009%26RESULT%3d1%26SIGN%3df4RNNGJuZKm81fJlfaXSZTGIRHk%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JSJC201903009&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JSJC201903009&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJC201903009&amp;v=MTM0NTFNckk5RmJZUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVSb0Z5L2hWcjdOTHo3QmJiRzRIOWo=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#39" data-title="0 概述 ">0 概述</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#43" data-title="1 IEEE 1588V2协议与PTPd协议 ">1 IEEE 1588V2协议与PTPd协议</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#45" data-title="1.1 IEEE 1588同步原理">1.1 IEEE 1588同步原理</a></li>
                                                <li><a href="#56" data-title="1.2 PTPd功能部件描述">1.2 PTPd功能部件描述</a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#68" data-title="2 PTPd系统设计 ">2 PTPd系统设计</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#69" data-title="2.1 获取时间戳的方式及改进">2.1 获取时间戳的方式及改进</a></li>
                                                <li><a href="#86" data-title="2.2 时钟伺服模块">2.2 时钟伺服模块</a></li>
                                                <li><a href="#92" data-title="2.3 影响时钟同步精度的因素分析">2.3 影响时钟同步精度的因素分析</a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#102" data-title="3 时钟同步性能测试 ">3 时钟同步性能测试</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#105" data-title="3.1 不同&lt;i&gt;P&lt;/i&gt;、&lt;i&gt;I&lt;/i&gt;值对同步精度的影响">3.1 不同<i>P</i>、<i>I</i>值对同步精度的影响</a></li>
                                                <li><a href="#113" data-title="3.2 不同同步周期对同步精度的影响">3.2 不同同步周期对同步精度的影响</a></li>
                                                <li><a href="#118" data-title="3.3 补偿出边界时间对同步精度的影响">3.3 补偿出边界时间对同步精度的影响</a></li>
                                                <li><a href="#124" data-title="3.4 不同中间设备对同步精度的影响">3.4 不同中间设备对同步精度的影响</a></li>
                                                <li><a href="#129" data-title="3.5 同步效果综合分析">3.5 同步效果综合分析</a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#135" data-title="4 结束语 ">4 结束语</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#47" data-title="&lt;b&gt;图1 主-从时钟同步原理&lt;/b&gt;"><b>图1 主-从时钟同步原理</b></a></li>
                                                <li><a href="#59" data-title="&lt;b&gt;图2 PTPd功能部件示意图&lt;/b&gt;"><b>图2 PTPd功能部件示意图</b></a></li>
                                                <li><a href="#71" data-title="&lt;b&gt;图3 时间戳的产生位置&lt;/b&gt;"><b>图3 时间戳的产生位置</b></a></li>
                                                <li><a href="#77" data-title="&lt;b&gt;图4 报文到达MAC层的时间&lt;/b&gt;"><b>图4 报文到达MAC层的时间</b></a></li>
                                                <li><a href="#79" data-title="&lt;b&gt;图5 报文到达网络驱动层的时间&lt;/b&gt;"><b>图5 报文到达网络驱动层的时间</b></a></li>
                                                <li><a href="#88" data-title="&lt;b&gt;图6 时钟伺服模块&lt;/b&gt;"><b>图6 时钟伺服模块</b></a></li>
                                                <li><a href="#108" data-title="&lt;b&gt;图7 &lt;i&gt;P&lt;/i&gt;、&lt;i&gt;I&lt;/i&gt;值为1、1时的同步精度实验结果&lt;/b&gt;"><b>图7 <i>P</i>、<i>I</i>值为1、1时的同步精度实验结果</b></a></li>
                                                <li><a href="#109" data-title="&lt;b&gt;图8 &lt;i&gt;P&lt;/i&gt;、&lt;i&gt;I&lt;/i&gt;值为2、16时的同步精度实验结果&lt;/b&gt;"><b>图8 <i>P</i>、<i>I</i>值为2、16时的同步精度实验结果</b></a></li>
                                                <li><a href="#110" data-title="&lt;b&gt;图9 &lt;i&gt;P&lt;/i&gt;、&lt;i&gt;I&lt;/i&gt;值为10、1 000时的同步精度实验结果&lt;/b&gt;"><b>图9 <i>P</i>、<i>I</i>值为10、1 000时的同步精度实验结果</b></a></li>
                                                <li><a href="#112" data-title="&lt;b&gt;表1 不同&lt;i&gt;P&lt;/i&gt;、&lt;i&gt;I&lt;/i&gt;值下的同步精度分析结果&lt;/b&gt;"><b>表1 不同<i>P</i>、<i>I</i>值下的同步精度分析结果</b></a></li>
                                                <li><a href="#116" data-title="&lt;b&gt;表2 不同同步周期下的同步精度分析结果&lt;/b&gt;"><b>表2 不同同步周期下的同步精度分析结果</b></a></li>
                                                <li><a href="#121" data-title="&lt;b&gt;图10 未补偿出边界时间实验结果&lt;/b&gt;"><b>图10 未补偿出边界时间实验结果</b></a></li>
                                                <li><a href="#122" data-title="&lt;b&gt;图11 补偿出边界时间实验结果&lt;/b&gt;"><b>图11 补偿出边界时间实验结果</b></a></li>
                                                <li><a href="#127" data-title="&lt;b&gt;表3 不同中间设备下的同步精度分析结果&lt;/b&gt; μs"><b>表3 不同中间设备下的同步精度分析结果</b> μs</a></li>
                                                <li><a href="#131" data-title="&lt;b&gt;图12 从时钟未校准与校准后的时钟偏差对比&lt;/b&gt;"><b>图12 从时钟未校准与校准后的时钟偏差对比</b></a></li>
                                                <li><a href="#133" data-title="&lt;b&gt;图13 时钟偏差频率分布直方图&lt;/b&gt;"><b>图13 时钟偏差频率分布直方图</b></a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="5">


                                    <a id="bibliography_1" title=" Cisco Systems, Inc.Network time protocol:best practices[EB/OL]. (2008-12-17) .[2018-03-07].https://www.cisco.com/c/en/us/support/docs/availability/high-availability/19643-ntpm.html." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Network time protocol:best practices">
                                        <b>[1]</b>
                                         Cisco Systems, Inc.Network time protocol:best practices[EB/OL]. (2008-12-17) .[2018-03-07].https://www.cisco.com/c/en/us/support/docs/availability/high-availability/19643-ntpm.html.
                                    </a>
                                </li>
                                <li id="7">


                                    <a id="bibliography_2" title=" IEEE.Std 1588-2008 IEEE standard for a precision clock synchronization protocol for networked measurement and control systems:978-0-7381-5400-8 [S].New York, USA:IEEE Instrumentation and Measurement Society, 2008." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=IEEE standard for a precision clock synchronization pro-tocol for networked measurement and control systems">
                                        <b>[2]</b>
                                         IEEE.Std 1588-2008 IEEE standard for a precision clock synchronization protocol for networked measurement and control systems:978-0-7381-5400-8 [S].New York, USA:IEEE Instrumentation and Measurement Society, 2008.
                                    </a>
                                </li>
                                <li id="9">


                                    <a id="bibliography_3" title=" YANG X, ZHANG S, LI H.Research and implementation of precise time synchronization system of microgrid based on IEEE 1588[C]//Proceedings of Advanced Information Management, Communicates, Electronic and Automation Control Conference.New York, USA:ACM Press, 2017:258-261." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Research and implementation of precise time synchronization system of microgrid based on IEEE 1588">
                                        <b>[3]</b>
                                         YANG X, ZHANG S, LI H.Research and implementation of precise time synchronization system of microgrid based on IEEE 1588[C]//Proceedings of Advanced Information Management, Communicates, Electronic and Automation Control Conference.New York, USA:ACM Press, 2017:258-261.
                                    </a>
                                </li>
                                <li id="11">


                                    <a id="bibliography_4" title=" 钱美, 韩江桂, 尹为民.船舶综合电力系统同步测量的实现[J].电力自动化设备, 2010, 30 (11) :101-104." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DLZS201011027&amp;v=MDMyMTMzenFxQnRHRnJDVVJMT2VaZVJvRnkvaFZyN05JU0hSZmJHNEg5SE5ybzlIWTRRS0RIODR2UjRUNmo1NE8=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[4]</b>
                                         钱美, 韩江桂, 尹为民.船舶综合电力系统同步测量的实现[J].电力自动化设备, 2010, 30 (11) :101-104.
                                    </a>
                                </li>
                                <li id="13">


                                    <a id="bibliography_5" title=" 苏建徽, 陈亚园.微电网精密时钟同步技术[J].电力自动化设备, 2016, 36 (11) :40-44." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DLZS201611006&amp;v=MDgyNDR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVJvRnkvaFZyN05JU0hSZmJHNEg5Zk5ybzlGWW9RS0RIODQ=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[5]</b>
                                         苏建徽, 陈亚园.微电网精密时钟同步技术[J].电力自动化设备, 2016, 36 (11) :40-44.
                                    </a>
                                </li>
                                <li id="15">


                                    <a id="bibliography_6" title=" 杜慧琦, 刘玥, 刘博, 等.IEEE1588v2时钟同步技术在战术信息系统中的应用[J].计算机应用与软件, 2017, 34 (11) :125-129." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201711023&amp;v=MjYzNDRaTEc0SDliTnJvOUhaNFFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUm9GeS9oVnI3Tkx6VFo=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[6]</b>
                                         杜慧琦, 刘玥, 刘博, 等.IEEE1588v2时钟同步技术在战术信息系统中的应用[J].计算机应用与软件, 2017, 34 (11) :125-129.
                                    </a>
                                </li>
                                <li id="17">


                                    <a id="bibliography_7" title=" 苏宇, 胡珩, 张涛, 等.基于PTPd的精准时钟同步技术的研究[J].计算机技术与发展, 2016, 26 (1) :175-180." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WJFZ201601038&amp;v=MjA0MjBESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVSb0Z5L2hWcjdOTWlmTmRMRzRIOWZNcm85R2JJUUs=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[7]</b>
                                         苏宇, 胡珩, 张涛, 等.基于PTPd的精准时钟同步技术的研究[J].计算机技术与发展, 2016, 26 (1) :175-180.
                                    </a>
                                </li>
                                <li id="19">


                                    <a id="bibliography_8" title=" CHEN W, SUN J, ZHANG L, et al.An implementation of IEEE 1588 protocol for IEEE 802.11 WLAN[J].Wireless Networks, 2015, 21 (6) :2069-2085." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=An implementation of IEEE 1588 protocol for IEEE 802.11 WLAN">
                                        <b>[8]</b>
                                         CHEN W, SUN J, ZHANG L, et al.An implementation of IEEE 1588 protocol for IEEE 802.11 WLAN[J].Wireless Networks, 2015, 21 (6) :2069-2085.
                                    </a>
                                </li>
                                <li id="21">


                                    <a id="bibliography_9" title=" 陈翔.精确时间同步协议的软件模型研究[D].昆明:昆明理工大学, 2016." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CMFD&amp;filename=1016231332.nh&amp;v=MjI2NDdUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVJvRnkvaFZyN05WRjI2R0xHN0g5TFByWkViUElRS0RIODR2UjQ=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[9]</b>
                                         陈翔.精确时间同步协议的软件模型研究[D].昆明:昆明理工大学, 2016.
                                    </a>
                                </li>
                                <li id="23">


                                    <a id="bibliography_10" title=" CORRELL K, BARENDT N, BRANICKY M.Design considerations for software only implementations of the IEEE 1588 precision time protocol[C]//Proceedings of Conference on IEEE 1588 Standard for A Precision Clock Synchronization Protocol for Networked Measurement and Control Systems.Zurich, Switzerland:IEEE Press, 2006:11-15." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Design Considerations for Software OnlyImplementations of the IEEE1588Precision Time Protocol">
                                        <b>[10]</b>
                                         CORRELL K, BARENDT N, BRANICKY M.Design considerations for software only implementations of the IEEE 1588 precision time protocol[C]//Proceedings of Conference on IEEE 1588 Standard for A Precision Clock Synchronization Protocol for Networked Measurement and Control Systems.Zurich, Switzerland:IEEE Press, 2006:11-15.
                                    </a>
                                </li>
                                <li id="25">


                                    <a id="bibliography_11" title=" 宋升金, 许永辉, 姜守达.基于PTPd改进的高精密时钟同步实现[J].计算机工程与应用, 2013, 49 (2) :72-75." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSGG201302019&amp;v=MTc5MTdCdEdGckNVUkxPZVplUm9GeS9oVnI3Tkx6N01hYkc0SDlMTXJZOUViWVFLREg4NHZSNFQ2ajU0TzN6cXE=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[11]</b>
                                         宋升金, 许永辉, 姜守达.基于PTPd改进的高精密时钟同步实现[J].计算机工程与应用, 2013, 49 (2) :72-75.
                                    </a>
                                </li>
                                <li id="27">


                                    <a id="bibliography_12" title=" 朱望纯, 钟震林, 覃斌毅.嵌入式Linux设备的高精度IEEE1588时钟同步实现[J].计算机测量与控制, 2014, 22 (5) :1619-1622." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JZCK201405096&amp;v=MTI4NjI4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUm9GeS9oVnI3Tkx6ZklaYkc0SDlYTXFvOU1Zb1FLREg=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[12]</b>
                                         朱望纯, 钟震林, 覃斌毅.嵌入式Linux设备的高精度IEEE1588时钟同步实现[J].计算机测量与控制, 2014, 22 (5) :1619-1622.
                                    </a>
                                </li>
                                <li id="29">


                                    <a id="bibliography_13" title=" 徐立, 赵平.基于IEEE 1588精确时钟同步软件实现[J].现代电子技术, 2010, 33 (24) :47-50." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=XDDJ201024017&amp;v=MTEyNTE0TzN6cXFCdEdGckNVUkxPZVplUm9GeS9oVnI3TlBTblBaTEc0SDlIT3E0OUVZNFFLREg4NHZSNFQ2ajU=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[13]</b>
                                         徐立, 赵平.基于IEEE 1588精确时钟同步软件实现[J].现代电子技术, 2010, 33 (24) :47-50.
                                    </a>
                                </li>
                                <li id="31">


                                    <a id="bibliography_14" title=" 吕青松, 吴宁.基于IEEE1588协议的高精度网络时钟同步软件设计[J].南京师范大学学报 (工程技术版) , 2013, 13 (4) :64-69." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=NJSE201304013&amp;v=MTE0MTlLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUm9GeS9oVnI3Tkt5ZllhN0c0SDlMTXE0OUVaNFE=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[14]</b>
                                         吕青松, 吴宁.基于IEEE1588协议的高精度网络时钟同步软件设计[J].南京师范大学学报 (工程技术版) , 2013, 13 (4) :64-69.
                                    </a>
                                </li>
                                <li id="33">


                                    <a id="bibliography_15" title=" 庄晓燕, 王厚军.基于卡尔曼滤波器的 IEEE 1588 时钟同步算法[J].电子测量与仪器学报, 2012, 26 (9) :747-751." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DZIY201209002&amp;v=MDk2NjNDZDdHNEg5UE1wbzlGWm9RS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVJvRnkvaFZyN05JVGY=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[15]</b>
                                         庄晓燕, 王厚军.基于卡尔曼滤波器的 IEEE 1588 时钟同步算法[J].电子测量与仪器学报, 2012, 26 (9) :747-751.
                                    </a>
                                </li>
                                <li id="35">


                                    <a id="bibliography_16" title=" LI D, WANG G, YANG C, et al.IEEE 1588 based time synchronization system for a seafloor observatory network[J].Journal of Zhejiang University-Science C, 2013, 14 (10) :766-776." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SSJD&amp;filename=SSJD13102400017292&amp;v=MTUyNzdNbndaZVp1SHlqbVVMbklKMW9SYXhjPU5qN0Jhcks3SDlIT3E0OUZaT29JRG5VN29CTVQ2VDRQUUgvaXJSZEdlcnFRVA==&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[16]</b>
                                         LI D, WANG G, YANG C, et al.IEEE 1588 based time synchronization system for a seafloor observatory network[J].Journal of Zhejiang University-Science C, 2013, 14 (10) :766-776.
                                    </a>
                                </li>
                                <li id="37">


                                    <a id="bibliography_17" title=" 李学桥, 陈园, 梁爽.基于 IEEE1588协议的精确时钟同步算法改进[J].计算机工程与科学, 2011, 33 (2) :42-45." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJK201102008&amp;v=MjQwMDc0SDlETXJZOUZiSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUm9GeS9oVnI3Tkx6N0JaYkc=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[17]</b>
                                         李学桥, 陈园, 梁爽.基于 IEEE1588协议的精确时钟同步算法改进[J].计算机工程与科学, 2011, 33 (2) :42-45.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=JSJC" target="_blank">计算机工程</a>
                2019,45(03),47-53+59 DOI:10.19678/j.issn.1000-3428.0050662            </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>基于PTPd2的精密时钟同步软件实现方法</b></span>
 <span class="shoufa"></span>                                     </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E9%99%B6%E7%A8%B3%E9%9D%99&amp;code=39182441&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">陶稳静</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E9%99%86%E9%98%B3&amp;code=07068981&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">陆阳</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%8D%AB%E6%98%9F&amp;code=03082577&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">卫星</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E8%B4%BE%E5%90%91%E5%88%A9&amp;code=39182442&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">贾向利</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E5%90%88%E8%82%A5%E5%B7%A5%E4%B8%9A%E5%A4%A7%E5%AD%A6%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E4%BF%A1%E6%81%AF%E5%AD%A6%E9%99%A2&amp;code=0083575&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">合肥工业大学计算机与信息学院</a>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E5%AE%89%E5%85%A8%E5%85%B3%E9%94%AE%E5%B7%A5%E4%B8%9A%E6%B5%8B%E6%8E%A7%E6%8A%80%E6%9C%AF%E6%95%99%E8%82%B2%E9%83%A8%E5%B7%A5%E7%A8%8B%E7%A0%94%E7%A9%B6%E4%B8%AD%E5%BF%83&amp;code=1505528&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">安全关键工业测控技术教育部工程研究中心</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>针对软件实现方式在协议栈网络驱动层获取时间戳, 易受协议栈延时和抖动影响导致同步精度较低的问题, 提出一种精密时钟同步软件实现方法。基于开源代码PTPd2采用纯软件方式实现IEEE 1588协议, 通过Linux系统的内核函数在网络驱动层获取报文时间戳, 相比网络时间协议在应用层获取时间戳可有效避免协议栈的干扰, 同时利用Wireshark抓包软件捕获报文经过介质访问控制 (MAC) 层的时间, 在PTPd2中补偿报文从网络驱动层传输到MAC层产生的延时和抖动, 提高了时钟同步精度。实验结果表明, 当主-从时钟设备直接相连时, 合理设置<i>P</i>、<i>I</i>值和同步周期并补偿出边界时间, 时钟同步精度可达19μs, 可满足大部分分布式控制系统的要求。</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E7%B2%BE%E7%A1%AE%E6%97%B6%E9%97%B4%E5%8D%8F%E8%AE%AE&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">精确时间协议;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%97%B6%E9%92%9F%E5%90%8C%E6%AD%A5&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">时钟同步;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E8%BD%AF%E4%BB%B6%E5%AE%9E%E7%8E%B0&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">软件实现;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%87%BA%E8%BE%B9%E7%95%8C%E6%97%B6%E9%97%B4&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">出边界时间;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%97%B6%E9%92%9F%E5%81%8F%E5%B7%AE&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">时钟偏差;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    陶稳静 (1994—) , 女, 硕士研究生, 主研方向为时钟同步技术;;
                                </span>
                                <span>
                                    陆阳, 教授、博士生导师;;
                                </span>
                                <span>
                                    卫星, 副教授;;
                                </span>
                                <span>
                                    贾向利, 硕士研究生。;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2018-03-07</p>

                    <p>

                            <b>基金：</b>
                                                        <span>国家重点研发计划专项 (2016YFC0801405, 2016YFC0801804);</span>
                    </p>
            </div>
                    <h1><b>Software Implementation of Precision Clock Synchronization Based on PTPd2</b></h1>
                    <h2>
                    <span>TAO Wenjing</span>
                    <span>LU Yang</span>
                    <span>WEI Xing</span>
                    <span>JIA Xiangli</span>
            </h2>
                    <h2>
                    <span>School of Computer Science and Information Engineering, Hefei University of Technology</span>
                    <span>Engineering Research Center of Safety Critical Industry Measure and Control Technology, Ministry of Education</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>Aiming at the problem that the software implementation obtains the timestamp in the network driver layer of the protocol stack, which is susceptible to the delay of the protocol stack and the jitter, the synchronization accuracy is low.A precise clock synchronization software implementation method is proposed.Based on open source code PTPd2, this paper uses pure software method to implement the IEEE 1588 protocol, and uses the kernel function of Linux system to get the message timestamp in the network driver layer, it can effectively avoid the interference of protocol stack compared with Network Time Protocol (NTP) that get timestamp in application layer, at the same time, Wireshark packet capture software is used to capture the time when the message passes the Media Access Control (MAC) layer and compensate the delay and jitter generated by the message transmitted from the network driver layer to the MAC layer in PTPd2, thereby it improves the clock synchronization accuracy.Experimental results show that when the master-slave clock device is directly connected, the <i>P</i>、<i>I</i> value and the synchronization period are reasonably set and the boundary time is compensated, and the clock synchronization accuracy can reach 19 μs.This method can meet the requirements of most distributed control systems.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Precision%20Time%20Protocol%20(PTP)%20&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Precision Time Protocol (PTP) ;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=clock%20synchronization&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">clock synchronization;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=software%20implementation&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">software implementation;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=outbound%20time&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">outbound time;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=clock%20deviation&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">clock deviation;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2018-03-07</p>
                                    <p>
                                            </p>
            </div>


        <!--brief start-->
                        <h3 id="39" name="39" class="anchor-tag">0 概述</h3>
                <div class="p1">
                    <p id="40">随着信息技术的迅速发展, 时钟同步技术成为分布式测控系统中的关键技术, 该技术对时钟同步精度的要求越来越高。传统的网络时间协议 (Network Time Protocol, NTP) 在2 000 km范围的广域网内同步精度在10 ms级, 局域网内的同步精度在1 ms级<citation id="137" type="reference"><link href="5" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>, 这种毫秒级的精度已经无法适用对精度要求更高的场合, 而同步精度在亚微秒级的IEEE 1588协议则可以满足需求<citation id="138" type="reference"><link href="7" rel="bibliography" /><sup>[<a class="sup">2</a>]</sup></citation>。</p>
                </div>
                <div class="p1">
                    <p id="41">IEEE 1588协议有3种实现方式<citation id="139" type="reference"><link href="9" rel="bibliography" /><sup>[<a class="sup">3</a>]</sup></citation>:基于支持精确时间协议 (Precision Time Protocol, PTP) 的芯片在物理层获取时间戳的硬件实现方式;基于支持PTP的嵌入式微控制器在媒体独立接口 (Media Independent Interface, MII) 处获取时间戳的硬件实现方式;基于精确时间协议进程 (Precision Time Protocol daemon, PTPd) 的软件实现方式。文献<citation id="140" type="reference">[<a class="sup">4</a>]</citation>基于第1种方式使用芯片DP83640在物理层获取时间戳, 同步精度在100 ns左右;文献<citation id="143" type="reference">[<a class="sup">3</a>,<a class="sup">5</a>]</citation>基于第2种方式使用ARM芯片STM32F407进行微电网的时钟同步, 同步精度在亚微秒级;文献<citation id="141" type="reference">[<a class="sup">6</a>]</citation>基于第3种方式在一台计算机中安装虚拟机, 利用虚拟网络实现主-从时钟的通信, 同步精度在30 μs;文献<citation id="142" type="reference">[<a class="sup">7</a>]</citation>基于第3种方式将PTPd移植到嵌入式设备ARM11 (S3C6410) 中实现PTP, 同步精度在10 ms级。软硬件实现PTP的区别在于获取时间戳的方式不同, 硬件实现是在底层获取时间戳, 需要硬件辅助, 精度较高, 但在实际应用中需要改变原有网络中的硬件设备, 增加了成本;软件实现是在协议栈获取时间戳, 精度稍低, 但是实现简单, 节约成本。</p>
                </div>
                <div class="p1">
                    <p id="42">本文在分析IEEE 1588V2同步原理的基础上, 利用Linux系统内核开源的特点, 改进时间戳获取方式, 在介质访问控制 (Media Access Control, MAC) 层获取时间戳以补偿主-从时钟的出边界时间, 以提高同步精度。此外, 对影响同步精度的其他因素, 如<i>P</i>、<i>I</i>值、同步周期、中间设备等进行了分析和实验验证。</p>
                </div>
                <h3 id="43" name="43" class="anchor-tag">1 IEEE 1588V2协议与PTPd协议</h3>
                <div class="p1">
                    <p id="44">IEEE 1588V2协议由<citation id="144" type="reference"><link href="7" rel="bibliography" />IEEE组织在2008</citation>年发布, 相比IEEE 1588V1协议, IEEE 1588V2协议的主要改进有以下3个方面:1) 简化报文格式以节省网络带宽;2) 增加端延时测量方式测量节点之间的链路延迟;3) 增加E2E (End-to-End) 和P2P (Peer-to-Peer) 2种透明时钟模型, 降低链路非对称性对时钟同步精度的影响。</p>
                </div>
                <h4 class="anchor-tag" id="45" name="45">1.1 IEEE 1588同步原理</h4>
                <div class="p1">
                    <p id="46">PTP的工作原理是首先利用最佳主时钟 (Best Master Clock, BMC) 算法选择一个精确的时钟源作为最佳主时钟, 然后交换报文信息, 利用本地时钟同步 (Local Clock Synchronization, LCS) 算法, 周期性地同步和修改网络中的所有时钟<citation id="145" type="reference"><link href="19" rel="bibliography" /><sup>[<a class="sup">8</a>]</sup></citation>。主-从时钟同步原理如图1所示。首先主时钟周期性地发送Sync报文, 系统记录Sync报文的精确发送时间<i>t</i><sub>1</sub>;接着主时钟发送Follow_Up报文, 该报文携带Sync报文发送的精确时间<i>t</i><sub>1</sub>, 从时钟接收到Sync报文, 并记录接收时间<i>t</i><sub>2</sub>;然后从时钟发送Delay_Req报文, 并记录发送时刻<i>t</i><sub>3</sub>, 主时钟接收到Delay_Req报文, 并记录接收时刻<i>t</i><sub>4</sub>;最后主时钟将时间信息<i>t</i><sub>4</sub>放入Delay_Resp报文中发送给从时钟, 当从时钟接收到Delay_Resp报文时, 一个同步周期结束。</p>
                </div>
                <div class="area_img" id="47">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903009_047.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 主-从时钟同步原理" src="Detail/GetImg?filename=images/JSJC201903009_047.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图1 主-从时钟同步原理</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903009_047.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="48">定义<i>t</i><sub>1</sub>时刻主-从时钟之间的时钟偏差为<i>offset</i> (假设一个同步周期内主-从时钟频率一致) , 主-从链路延迟为<i>delay</i>_<i>ms</i>, 从-主链路延迟为<i>delay</i>_<i>sm</i>, 则有:</p>
                </div>
                <div class="p1">
                    <p id="49"><i>t</i><sub>2</sub>-<i>t</i><sub>1</sub>=<i>delay</i>_<i>ms</i>+<i>offset</i>      (1) </p>
                </div>
                <div class="p1">
                    <p id="50"><i>t</i><sub>4</sub>-<i>t</i><sub>3</sub>=<i>delay</i>_<i>sm</i>-<i>offset</i>      (2) </p>
                </div>
                <div class="p1">
                    <p id="51">协议假定主-从时钟的往返时间是对称的, 即<i>delay</i>_<i>ms</i>=<i>delay</i>_<i>sm</i>=<i>delay</i>, 因此, 根据式 (1) 、式 (2) 有:</p>
                </div>
                <div class="p1">
                    <p id="52"><i>offset</i>= (<i>t</i><sub>2</sub>-<i>t</i><sub>1</sub> + <i>t</i><sub>3</sub>-<i>t</i><sub>4</sub>) /2      (3) </p>
                </div>
                <div class="p1">
                    <p id="53"><i>delay</i>= (<i>t</i><sub>2</sub>-<i>t</i><sub>1</sub> + <i>t</i><sub>4</sub>-<i>t</i><sub>3</sub>) /2      (4) </p>
                </div>
                <div class="p1">
                    <p id="54">最终从时钟可根据主-从时钟偏差<i>offse</i>t和链路延迟<i>delay</i>调整本地时钟与主时钟保持同步。</p>
                </div>
                <div class="p1">
                    <p id="55">在IEEE 1588V2中改进了Sync报文的发送速率, 最高可达1 000次/s, 而第1版中是不大于1次/s<citation id="146" type="reference"><link href="21" rel="bibliography" /><sup>[<a class="sup">9</a>]</sup></citation>, 但是同步周期太短也会造成网络拥堵, 因此, 在一般情况下都设置为1 s或2 s。协议规定Delay_Req报文的发送周期是Sync报文的1倍～32倍, 因为链路延迟一般变化不大, 所以Delay_Req的发送周期可以设置比Sync稍长, 以节省网络带宽。</p>
                </div>
                <h4 class="anchor-tag" id="56" name="56">1.2 PTPd功能部件描述</h4>
                <div class="p1">
                    <p id="57">PTPd是PTP的纯软件实现, 其最早是由美国Case Western Reserve University的2名工程专业学生历时6个月所开发<citation id="147" type="reference"><link href="23" rel="bibliography" /><sup>[<a class="sup">10</a>]</sup></citation>, PTPd现在由全球最大的开源软件开发平台SourceForge进行更新和维护。目前PTPd有2个版本, PTPd1支持IEEE 1588V1, PTPd2支持IEEE 1588V2<citation id="148" type="reference"><link href="25" rel="bibliography" /><sup>[<a class="sup">11</a>]</sup></citation>, PTPd2支持的开发平台有Linux、FreeBSD、OpenBSD、NetBSD、Solaris以及各种嵌入式系统等。本文采用PTPd2.1.0代码, 在Linux系统上实现PTP。</p>
                </div>
                <div class="p1">
                    <p id="58">图2所示为PTPd的功能部件联系图, 主要由7个部分组成, 分别是协议引擎、报文处理、网络层实现、时间戳获取、时钟伺服模块、定时器以及BMC算法。</p>
                </div>
                <div class="area_img" id="59">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903009_059.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 PTPd功能部件示意图" src="Detail/GetImg?filename=images/JSJC201903009_059.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图2 PTPd功能部件示意图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903009_059.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="60">PTPd各功能部件详述如下:</p>
                </div>
                <div class="p1">
                    <p id="61">1) PTPd协议引擎。主要运行PTP状态机, 由protocol.c实现, 完成协议端口状态之间的正确转换, 核心函数是protocol () , 运行在一个永久循环中, 一般由外部中断或产生错误终止循环。</p>
                </div>
                <div class="p1">
                    <p id="62">2) 报文处理。文件msg.c详细定义了函数msgPack () 和msgUnpack () , msgPack () 用于封装由于定时器超时而要发送的报文信息, msgUnpack () 则解析端口接收到的报文信息。</p>
                </div>
                <div class="p1">
                    <p id="63">3) 网络层实现。文件net.c实现报文的网络传输, 由findIface () 函数识别端口硬件地址和IP地址, netSelect () 检查是否在网络上接收到数据, 并且所有报文基于UDP传输, 根据不同的UDP端口号发送和接收报文。</p>
                </div>
                <div class="p1">
                    <p id="64">4) 时间戳获取。精确时间戳在Linux内核中产生, 由net.c中的recvmsg () 函数获取, 精度在纳秒级。</p>
                </div>
                <div class="p1">
                    <p id="65">5) 时钟伺服模块。文件servo.c是同步系统的核心, 主要功能是计算主-从时钟偏差和链路延迟并且更新本地时钟。第2.2节详细阐述了本模块的作用。</p>
                </div>
                <div class="p1">
                    <p id="66">6) 定时器。由timer.c实现, 主要功能是定义定时器中断时间, 根据报文类型设置定时间隔, 并依据定时器是否超时实时更新定时器。</p>
                </div>
                <div class="p1">
                    <p id="67">7) BMC算法。文件bmc.c详述了最佳主时钟算法, 依据状态决策算法结果返回各端口应有状态, 仅适用于普通时钟。</p>
                </div>
                <h3 id="68" name="68" class="anchor-tag">2 PTPd系统设计</h3>
                <h4 class="anchor-tag" id="69" name="69">2.1 获取时间戳的方式及改进</h4>
                <div class="p1">
                    <p id="70">获取精确时间戳是进行时钟同步的关键一步, 如图3所示, 可在A、B、C 3个位置获取时间戳。</p>
                </div>
                <div class="area_img" id="71">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903009_071.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 时间戳的产生位置" src="Detail/GetImg?filename=images/JSJC201903009_071.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图3 时间戳的产生位置</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903009_071.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="72">NTP在C点即应用层获取时间戳, 精度最低;PTP可在B点或A点获取时间戳, B点即网络驱动层, 同步精度比NTP高;A点是在MII接口处获取, 同步精度最高, 达亚微秒级, 但是需要硬件辅助。因为报文从C点传输到A点会受协议栈的延时和抖动的影响, 所以越靠近物理层获取时间戳, 同步精度越高。</p>
                </div>
                <div class="p1">
                    <p id="73">PTPd是在B点获取时间戳, 要获取报文到达网络驱动层的时间戳, 需要先设置Linux内核中的socket选项为SO_TIMESTAMP, 但SO_TIMESTAMP选项返回微秒级精度, 而SO_TIMESTAMPNS选项返回纳秒级精度<citation id="149" type="reference"><link href="27" rel="bibliography" /><sup>[<a class="sup">12</a>]</sup></citation>, 因此, 首先采用SO_TIMESTAMPNS选项, 然后用recvmsg () 函数接收网络报文, 报文到达网络驱动层的时间戳被存储为SCM_TIMESTAMPNS类型的附属数据, 使用CMSG_FIRTHDR () 和CMSG_NXTHDR () 宏遍历附属数据, 其中匹配SCM_TIMESTAMPNS类型的数据即为时间戳, 最后通过timespec结构体存储此时间戳。</p>
                </div>
                <div class="p1">
                    <p id="74">PTPd在B点获取时间戳可避免报文从C点传输到B点受协议栈延迟和抖动的影响, 因此, 时钟同步精度较高, 然而报文从B点传输到MAC层也会受到协议栈延时和抖动的影响, 若分别在主-从时钟中补偿报文从B点传输到A点的时间则能提高同步精度。本文定义出边界时间为报文从网络驱动层传输到MAC层所经历的时间, 则计算出边界时间的步骤如下:</p>
                </div>
                <div class="p1">
                    <p id="75"><b>步骤1</b> 主时钟首先组播Sync报文<i>S</i><sub><i>j</i></sub>, 报文<i>S</i><sub><i>j</i></sub>到达主时钟MAC层的时间为<i>Tmac</i>_<i>S</i><sub><i>j</i></sub>, 随后组播Follow_Up报文, Follow_Up报文记录了报文<i>S</i><sub><i>j</i></sub>到达主时钟的网络驱动层的精确时间<i>Tip</i>_<i>S</i><sub><i>j</i></sub>。</p>
                </div>
                <div class="p1">
                    <p id="76"><b>步骤2</b> 在主时钟中用Wireshark抓包软件捕获报文<i>S</i><sub><i>j</i></sub>, 提取<i>Tmac</i>_<i>S</i><sub><i>j</i></sub>, 如图4所示。</p>
                </div>
                <div class="area_img" id="77">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903009_077.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 报文到达MAC层的时间" src="Detail/GetImg?filename=images/JSJC201903009_077.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图4 报文到达MAC层的时间</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903009_077.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="78"><b>步骤3</b> 在主时钟中用Wireshark抓包软件捕获跟随报文<i>S</i><sub><i>j</i></sub>的Follow_Up报文, 提取<i>Tip</i>_<i>S</i><sub><i>j</i></sub>, 如图5所示。</p>
                </div>
                <div class="area_img" id="79">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903009_079.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 报文到达网络驱动层的时间" src="Detail/GetImg?filename=images/JSJC201903009_079.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图5 报文到达网络驱动层的时间</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903009_079.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="80"><b>步骤4</b> 通过下式计算主时钟的出边界时间Δ<i>t</i><sub>1</sub>:</p>
                </div>
                <div class="p1">
                    <p id="81" class="code-formula">
                        <mathml id="81"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>Δ</mi><mi>t</mi><msub><mrow></mrow><mn>1</mn></msub><mo>=</mo><mo stretchy="false">[</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false"> (</mo></mstyle><mi>Τ</mi><mi>m</mi><mi>a</mi><mi>c</mi><mo>_</mo><mi>S</mi><msub><mrow></mrow><mi>j</mi></msub><mo>-</mo><mi>Τ</mi><mi>i</mi><mi>p</mi><mo>_</mo><mi>S</mi><msub><mrow></mrow><mi>j</mi></msub><mo stretchy="false">) </mo><mo stretchy="false">]</mo><mo>/</mo><mi>n</mi><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>5</mn><mo stretchy="false">) </mo></mrow></math></mathml>
                    </p>
                </div>
                <div class="p1">
                    <p id="82">其中, <i>n</i>为报文数。</p>
                </div>
                <div class="p1">
                    <p id="83"><b>步骤5</b> 从时钟按照上述相同方式计算从时钟的出边界时间Δ<i>t</i><sub>2</sub>。</p>
                </div>
                <div class="p1">
                    <p id="84">根据上述方法分别计算出主-从时钟的出边界时间Δ<i>t</i><sub>1</sub>和Δ<i>t</i><sub>2</sub>, 主时钟发送Sync报文, 将主时钟的出边界时间Δ<i>t</i><sub>1</sub>补偿到Sync报文到达主时钟的网络驱动层的时间, 即第1.1节所述同步原理的<i>t</i><sub>1</sub>中, <i>t</i><sub>1</sub>= <i>t</i><sub>1</sub>+Δ<i>t</i><sub>1</sub>, 并将补偿后的时间<i>t</i><sub>1</sub>装入Follow_Up报文的preciseOriginTimestamp字段中发送给从时钟;从时钟发送Delay_Req报文, 将从时钟的出边界时间Δ<i>t</i><sub>2</sub>补偿到Delay_Req报文到达从时钟的网络驱动层的时间, 即第1.1节所述同步原理的<i>t</i><sub>3</sub>中, <i>t</i><sub>3</sub>=<i>t</i><sub>3</sub>+Δ<i>t</i><sub>2</sub>, 并将补偿后的时间<i>t</i><sub>3</sub>保存在从时钟中。最后从时钟根据获取的时钟信息<i>t</i><sub>1</sub>～<i>t</i><sub>4</sub>进行时钟同步。本文方法补偿主-从时钟的出边界时间, 达到接近A点获取时间戳的效果, 因此, 相比在B点获取时间戳的时钟同步精度更高。</p>
                </div>
                <div class="p1">
                    <p id="85">此外, 文献<citation id="150" type="reference">[<a class="sup">13</a>]</citation>采用gettimeofday () 来获取系统时间, 并补偿内核获取该函数的时间来提高同步精度, 但并不适用于本文系统。文献<citation id="151" type="reference">[<a class="sup">14</a>]</citation>在Windows系统上实现PTP也仅能达到亚毫秒级, 由于Linux系统下的clock_gettime () 和clock_settime () 函数返回纳秒级精度, 因此本文系统采用该函数来获取设定系统时间, 可进一步提高时钟同步精度。</p>
                </div>
                <h4 class="anchor-tag" id="86" name="86">2.2 时钟伺服模块</h4>
                <div class="p1">
                    <p id="87">图6所示为PTPd系统的时钟伺服模块, 该模块主要由无限冲击响应 (Infinite Impulse Response, IIR) 滤波器、有限冲击响应 (Finite Impulse Response, FIR) 滤波器以及比例积分 (Proportional Integral, PI) 控制器组成。</p>
                </div>
                <div class="area_img" id="88">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903009_088.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 时钟伺服模块" src="Detail/GetImg?filename=images/JSJC201903009_088.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图6 时钟伺服模块</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903009_088.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="89">该模块的作用是由从时钟根据第1.1节IEEE 1588同步原理计算的主-从时钟偏差<i>offset</i>和链路延迟<i>delay</i>校正本地时钟。文献<citation id="152" type="reference">[<a class="sup">15</a>]</citation>采用卡尔曼滤波算法对时钟偏差、时钟漂移变化率进行估计, 并根据估计值修正从时钟, 但算法较复杂, 不易实现。本文分别利用FIR和IIR滤波器过滤主-从时钟偏差和链路延迟以减小报文传输延时抖动产生的误差, 并使用PI控制器计算从时钟相对于主时钟的频率补偿值, 从而补偿系统时钟频率, 比例积分控制器的<i>Drifft</i>与<i>adj</i>如下:</p>
                </div>
                <div class="p1">
                    <p id="90" class="code-formula">
                        <mathml id="90"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtable columnalign="left"><mtr><mtd><mi>D</mi><mi>r</mi><mi>i</mi><mi>f</mi><mi>f</mi><mi>t</mi><mo>=</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mrow><mfrac><mrow><mi>X</mi><msub><mrow></mrow><mi>i</mi></msub></mrow><mi>Ι</mi></mfrac></mrow></mstyle><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>6</mn><mo stretchy="false">) </mo></mtd></mtr><mtr><mtd><mi>a</mi><mi>d</mi><mi>j</mi><mo>=</mo><mfrac><mrow><mi>X</mi><msub><mrow></mrow><mi>m</mi></msub></mrow><mi>Ρ</mi></mfrac><mo>+</mo><mi>D</mi><mi>r</mi><mi>i</mi><mi>f</mi><mi>f</mi><mi>t</mi><mo>=</mo><mfrac><mrow><mi>X</mi><msub><mrow></mrow><mi>m</mi></msub></mrow><mi>Ρ</mi></mfrac><mo>+</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mrow><mfrac><mrow><mi>X</mi><msub><mrow></mrow><mi>i</mi></msub></mrow><mi>Ι</mi></mfrac></mrow></mstyle><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>7</mn><mo stretchy="false">) </mo></mtd></mtr></mtable></math></mathml>
                    </p>
                </div>
                <div class="p1">
                    <p id="91">其中, <i>I</i>为积分系数, <i>X</i><sub><i>i</i></sub>为第<i>i</i>个同步周期的主-从时钟偏差值, <i>P</i>为比例系数, <i>Drifft</i>为<i>m</i>个同步周期的时钟偏差累积值, <i>adj</i>为第<i>m</i>个同步周期计算的频率补偿值。最终从时钟根据式 (6) 、式 (7) 计算出<i>adj</i>并调用Linux系统内核函数adjtimex () 补偿系统频率, 实现从时钟与主时钟的时钟频率一致。</p>
                </div>
                <h4 class="anchor-tag" id="92" name="92">2.3 影响时钟同步精度的因素分析</h4>
                <div class="p1">
                    <p id="93">影响时钟同步精度的因素分析如下:</p>
                </div>
                <h4 class="anchor-tag" id="94" name="94">1) 获取时间戳的位置</h4>
                <div class="p1">
                    <p id="95">在一般情况下, 各时钟设备的通信报文甚至同一种报文从应用层到物理层经历的时间各不相同, 其主要受操作系统和协议栈的延时及抖动的影响, 因此, 在最靠近物理层的位置获取时间戳, 时钟同步精度最高。本文在无硬件支持的条件下, 尽量补偿主-从时钟的出边界时间, 最终提高同步精度。</p>
                </div>
                <h4 class="anchor-tag" id="96" name="96">2) 时钟晶振的不稳定性<citation id="153" type="reference"><link href="35" rel="bibliography" /><sup>[<a class="sup">16</a>]</sup></citation><sup></sup></h4>
                <div class="p1">
                    <p id="97">主-从时钟的时钟晶振不可能保持完全一致, 因此, 从时钟需要不断地进行频率补偿来与主时钟同步, 在时钟同步系统中, 选择晶振稳定可靠的时钟以及进行频率补偿至关重要。</p>
                </div>
                <h4 class="anchor-tag" id="98" name="98">3) 链路延迟的不对称性</h4>
                <div class="p1">
                    <p id="99">如1.1节讨论的同步原理假定链路延迟是对称的, 而实际链路延迟是不对称的。文献<citation id="154" type="reference">[<a class="sup">17</a>]</citation>采用加权平均求链路延迟来减小不对称, 但对本文系统效果不明显, 而且网络中间设备如路由器、交换机等会加大链路的不对称性, 因此, 可以考虑使用边界时钟和透明时钟降低链路不对称性。</p>
                </div>
                <h4 class="anchor-tag" id="100" name="100">4) 同步周期</h4>
                <div class="p1">
                    <p id="101">同步周期越短, 说明主从时钟越频繁地进行时钟同步, 但同时也会占用更多的网络带宽, 因此, 同步周期并非越短越好, 应视网络情况而定。</p>
                </div>
                <h3 id="102" name="102" class="anchor-tag">3 时钟同步性能测试</h3>
                <div class="p1">
                    <p id="103">实验在2台计算机上进行, 2台PC均安装Ubuntu14.04 LTS系统, 其中, PC1的处理器为Intel (R) Core (TM) i5-2450M, PC2的处理器为Intel (R) Core (TM) i5-3210M, 主频均为2.5 GHz。当2台PC上电启动后, 配置PC1的网卡地址:#ifconfig eth0 192.168.1.1 netmask 255.255.255.0;配置PC2的网卡地址:#ifconfig eth0 192.168.1.2 netmask 255.255.255.0, 2台PC同时运行PTPd2软件, 由最佳主时钟算法决策出一台PC为主时钟, 一台PC为从时钟。</p>
                </div>
                <div class="p1">
                    <p id="104">本文分别配置<i>P</i>、<i>I</i>值、同步周期、出边界时间并连接不同中间设备进行实验, 以验证不同参数值及中间设备对同步精度的影响, 实验结果由从时钟输出主-从时钟偏差, Matlab软件绘图。</p>
                </div>
                <h4 class="anchor-tag" id="105" name="105">3.1 不同<i>P</i>、<i>I</i>值对同步精度的影响</h4>
                <div class="p1">
                    <p id="106">本节在同步周期为1 s、未补偿出边界时间、主-从时钟设备通过网线直连条件下, 设置不同<i>P</i>、<i>I</i>值进行实验, 验证不同<i>P</i>、<i>I</i>值对同步精度的影响。</p>
                </div>
                <div class="p1">
                    <p id="107"><i>P</i>、<i>I</i>值为第2.2节讨论的比例积分控制器的比例系数和积分系数, 主要用于计算从时钟相对于主时钟的频率补偿值。不同的<i>P</i>、<i>I</i>值能达到的同步精度不同, 根据比例积分控制器原理, <i>P</i>值和<i>I</i>值分别在1～10、1～1 000之间取值, 通过进行大量实验, 选取最佳<i>P</i>、<i>I</i>值。限于篇幅, 本文最终确定3组较为典型的<i>P</i>、<i>I</i>值来对比同步精度, 实验结果如图7～图9所示。</p>
                </div>
                <div class="area_img" id="108">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903009_108.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 P、I值为1、1时的同步精度实验结果" src="Detail/GetImg?filename=images/JSJC201903009_108.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图7 <i>P</i>、<i>I</i>值为1、1时的同步精度实验结果</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903009_108.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="109">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903009_109.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图8 P、I值为2、16时的同步精度实验结果" src="Detail/GetImg?filename=images/JSJC201903009_109.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图8 <i>P</i>、<i>I</i>值为2、16时的同步精度实验结果</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903009_109.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="110">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903009_110.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图9 P、I值为10、1 000时的同步精度实验结果" src="Detail/GetImg?filename=images/JSJC201903009_110.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图9 <i>P</i>、<i>I</i>值为10、1 000时的同步精度实验结果</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903009_110.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="111">由图7～图9可以看出, <i>P</i>、<i>I</i>值为1、1时同步效果最差, 不仅时钟偏差较大而且抖动厉害;<i>P</i>、<i>I</i>值为10、1 000是PTPd2系统默认值, 收敛速度较慢, 需要5 min以上才能稳定。本文先不考虑积分系数<i>I</i>, 使<i>P</i>在1～10之间取值, 由第2.2节分析及实验结果可知, <i>P</i>值越小响应速度越快, 但同时时钟偏差抖动也较大, 最终综合收敛速度和同步精度, 选定<i>P</i>为2;然后加入积分系数<i>I</i>, 使<i>I</i>在1～1 000之间取值, 先以100为梯度选取合适<i>I</i>值的范围, 再分别以10和1为梯度精确<i>I</i>值。通过实验可知, 当<i>I</i>为16时系统在1 min左右收敛, 并且同步精度较高。因此, <i>P</i>、<i>I</i>值为2、16是较适合PTPd2系统的参数值, 表1为不同<i>P</i>、<i>I</i>值下的统计结果, 其中平均值是指主-从时钟偏差的绝对值平均值 (下文同) , 标准差反映了系统同步效果的稳定性, 因此当<i>P</i>、<i>I</i>值分别为2和16时, 同步精度约为30 μs。</p>
                </div>
                <div class="area_img" id="112">
                    <p class="img_tit"><b>表1 不同<i>P</i>、<i>I</i>值下的同步精度分析结果</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="112" border="1"><tr><td><i>P</i>、<i>I</i>值</td><td>平均值/μs</td><td>标准差/μs</td><td>最大偏移值/μs</td></tr><tr><td>1、1</td><td>299.269</td><td>342.190</td><td>-666.220</td></tr><tr><td><br />2、16</td><td>30.518</td><td>40.117</td><td>151.895</td></tr><tr><td><br />10、1 000</td><td>83.737</td><td>162.713</td><td>-783.914</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <h4 class="anchor-tag" id="113" name="113">3.2 不同同步周期对同步精度的影响</h4>
                <div class="p1">
                    <p id="114">基于第3.1节实验结果, 在<i>P</i>、<i>I</i>值为2和16、未补偿出边界时间、主-从时钟设备通过网线直连条件下, 设置不同的同步周期进行实验, 验证不同同步周期对同步精度的影响。</p>
                </div>
                <div class="p1">
                    <p id="115">分别设置同步周期为0.125 s、0.5 s、1 s、2 s和4 s, 统计结果如表2所示。</p>
                </div>
                <div class="area_img" id="116">
                    <p class="img_tit"><b>表2 不同同步周期下的同步精度分析结果</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="116" border="1"><tr><td>同步周期/s</td><td>平均值/μs</td><td>标准差/μs</td><td>最大偏移值/μs</td></tr><tr><td>0.125</td><td>27.697</td><td>35.929</td><td>-884.558</td></tr><tr><td><br />0.500</td><td>24.939</td><td>31.834</td><td>172.975</td></tr><tr><td><br />1.000</td><td>30.518</td><td>40.117</td><td>151.895</td></tr><tr><td><br />2.000</td><td>42.232</td><td>52.598</td><td>-154.193</td></tr><tr><td><br />4.000</td><td>194.549</td><td>220.523</td><td>526.492</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="117">由表2可知, 同步周期为0.5 s时, 精度最高, 但同步周期为0.125 s时精度变差, 主要是因为主-从时钟频繁进行时钟同步, 占用网络带宽, 造成网络拥堵;而同步周期为2 s和4 s时的精度更差, 主要因为主-从时钟频率不一致, 同步周期越长, 累积误差越大, 因此, 折中考虑推荐同步周期设为1 s。</p>
                </div>
                <h4 class="anchor-tag" id="118" name="118">3.3 补偿出边界时间对同步精度的影响</h4>
                <div class="p1">
                    <p id="119">基于第3.2节实验结果, 在<i>P</i>、<i>I</i>值为2和16、同步周期为1 s、主-从时钟设备通过网线直连条件下, 对未补偿和补偿出边界时间这2种情况进行实验对比, 验证补偿出边界时间对同步精度的影响。</p>
                </div>
                <div class="p1">
                    <p id="120">根据第2.1节所述方法分别计算主-从时钟的出边界时间, 主时钟的出边界时间是34 090 ns, 从时钟的出边界时间是20 076 ns。分别进行未补偿和补偿出边界时间实验, 实验结果如图10、图11所示。</p>
                </div>
                <div class="area_img" id="121">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903009_121.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图10 未补偿出边界时间实验结果" src="Detail/GetImg?filename=images/JSJC201903009_121.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图10 未补偿出边界时间实验结果</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903009_121.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="122">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903009_122.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图11 补偿出边界时间实验结果" src="Detail/GetImg?filename=images/JSJC201903009_122.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图11 补偿出边界时间实验结果</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903009_122.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="123">补偿出边界时间后的主-从时钟偏差平均值为19.621 μs, 标准差为26.019 μs, 最大偏移值为-104.443 μs。从折线图和统计结果可知, 相比未补偿出边界时间, 同步精度提高了10 μs左右, 且时钟偏差抖动变小。实验结果表明, 补偿出边界时间可以提高时钟同步精度。</p>
                </div>
                <h4 class="anchor-tag" id="124" name="124">3.4 不同中间设备对同步精度的影响</h4>
                <div class="p1">
                    <p id="125">基于第3.3节实验结果, 本文在<i>P</i>、<i>I</i>值为2和16、同步周期为1 s、补偿出边界时间条件下, 在主-从时钟设备间连接不同中间设备进行实验, 验证不同中间设备对同步精度的影响。</p>
                </div>
                <div class="p1">
                    <p id="126">网络中的中间设备对计算链路延迟有一定影响, 即第2.3节所述的增加链路延迟的不对称性, 进而影响到同步精度, 分别配置中间设备为路由器、交换机、网线, 统计结果如表3所示。</p>
                </div>
                <div class="area_img" id="127">
                    <p class="img_tit"><b>表3 不同中间设备下的同步精度分析结果</b> μs <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="127" border="1"><tr><td>中间设备</td><td>平均值</td><td>标准差</td><td>最大偏移值</td></tr><tr><td>路由器</td><td>30.277</td><td>37.944</td><td>169.339</td></tr><tr><td><br />交换机</td><td>24.736</td><td>31.765</td><td>-178.772</td></tr><tr><td><br />网线</td><td>19.621</td><td>26.019</td><td>-104.443</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="128">从表3可以看出, 路由器的同步精度最差, 因为路由器是三层设备, 根据路由表寻址转发数据, 交换机是二层设备, 依据MAC地址转发数据, 所以路由器的延时要比交换机长, 且精度低。因此, 增加网络元件会降低同步精度, 建议使用透明时钟来减小误差, 提高精度。</p>
                </div>
                <h4 class="anchor-tag" id="129" name="129">3.5 同步效果综合分析</h4>
                <div class="p1">
                    <p id="130">本文在主-从时钟设备通过网线直连条件下进行实验, 但从时钟不进行时钟校准, 并与第3.3节补偿出边界时间后的实验结果进行对比分析。分析结果如图12所示, 从图12可以看出, 当从时钟不调整本地时钟时, 主-从时钟偏差会越来越大, 其主要原因是主-从时钟的晶振频率不一致, 因此, 随着时间累积, 误差逐渐增大。当从时钟进行时钟校准时, 时钟偏差稳定在-105 μs～100 μs之间, 并集中分布在零值附近。</p>
                </div>
                <div class="area_img" id="131">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903009_131.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图12 从时钟未校准与校准后的时钟偏差对比" src="Detail/GetImg?filename=images/JSJC201903009_131.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图12 从时钟未校准与校准后的时钟偏差对比</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903009_131.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="132">图13所示为进行时钟校准的主-从时钟偏差频率分布直方图, 经分析可知, 时钟偏差大致服从一个期望为<i>μ</i>=10×10<sup>-9</sup>s、标准差为<i>σ</i>=2.601×10<sup>-5</sup>s的正态分布, 即<i>N</i> (10×10<sup>-9</sup>, 6.769×10<sup>-10</sup>) 。</p>
                </div>
                <div class="area_img" id="133">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903009_133.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图13 时钟偏差频率分布直方图" src="Detail/GetImg?filename=images/JSJC201903009_133.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图13 时钟偏差频率分布直方图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903009_133.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="134">通过综合分析可知, 未进行时钟校准的从时钟与主时钟的同步误差会随着时间累积达到毫秒级甚至秒级, 而进行时钟校准的从时钟与主时钟的同步误差在100 μs以内, 平均误差为19 μs, 由此可以看出, 本文系统的同步效果显著。</p>
                </div>
                <h3 id="135" name="135" class="anchor-tag">4 结束语</h3>
                <div class="p1">
                    <p id="136">本文基于PTPd2代码在不需要硬件辅助的条件下实现IEEE 1588协议, 通过实验选取最佳<i>P</i>、<i>I</i>值优化同步效果, 并设置不同的同步周期进行实验, 通过综合网络负载和同步精度, 最终选定同步周期为1 s, 分别补偿主-从时钟的出边界时间, 以提高同步精度, 增加网络元件, 验证中间设备对同步精度的影响。实验结果表明, 当最佳时钟同步精度为19 μs时, 本文方法可以满足大部分分布式控制系统的要求。</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="5">
                            <a id="bibliography_1" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Network time protocol:best practices">

                                <b>[1]</b> Cisco Systems, Inc.Network time protocol:best practices[EB/OL]. (2008-12-17) .[2018-03-07].https://www.cisco.com/c/en/us/support/docs/availability/high-availability/19643-ntpm.html.
                            </a>
                        </p>
                        <p id="7">
                            <a id="bibliography_2" target="_blank" href="http://scholar.cnki.net/result.aspx?q=IEEE standard for a precision clock synchronization pro-tocol for networked measurement and control systems">

                                <b>[2]</b> IEEE.Std 1588-2008 IEEE standard for a precision clock synchronization protocol for networked measurement and control systems:978-0-7381-5400-8 [S].New York, USA:IEEE Instrumentation and Measurement Society, 2008.
                            </a>
                        </p>
                        <p id="9">
                            <a id="bibliography_3" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Research and implementation of precise time synchronization system of microgrid based on IEEE 1588">

                                <b>[3]</b> YANG X, ZHANG S, LI H.Research and implementation of precise time synchronization system of microgrid based on IEEE 1588[C]//Proceedings of Advanced Information Management, Communicates, Electronic and Automation Control Conference.New York, USA:ACM Press, 2017:258-261.
                            </a>
                        </p>
                        <p id="11">
                            <a id="bibliography_4" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DLZS201011027&amp;v=MjE1MDFIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVJvRnkvaFZyN05JU0hSZmJHNEg5SE5ybzlIWTRRS0Q=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[4]</b> 钱美, 韩江桂, 尹为民.船舶综合电力系统同步测量的实现[J].电力自动化设备, 2010, 30 (11) :101-104.
                            </a>
                        </p>
                        <p id="13">
                            <a id="bibliography_5" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DLZS201611006&amp;v=MDA4MzN5L2hWcjdOSVNIUmZiRzRIOWZOcm85RllvUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVSb0Y=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[5]</b> 苏建徽, 陈亚园.微电网精密时钟同步技术[J].电力自动化设备, 2016, 36 (11) :40-44.
                            </a>
                        </p>
                        <p id="15">
                            <a id="bibliography_6" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JYRJ201711023&amp;v=MDI0MTZaNFFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUm9GeS9oVnI3Tkx6VFpaTEc0SDliTnJvOUg=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[6]</b> 杜慧琦, 刘玥, 刘博, 等.IEEE1588v2时钟同步技术在战术信息系统中的应用[J].计算机应用与软件, 2017, 34 (11) :125-129.
                            </a>
                        </p>
                        <p id="17">
                            <a id="bibliography_7" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WJFZ201601038&amp;v=MDc2NDg2ajU0TzN6cXFCdEdGckNVUkxPZVplUm9GeS9oVnI3Tk1pZk5kTEc0SDlmTXJvOUdiSVFLREg4NHZSNFQ=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[7]</b> 苏宇, 胡珩, 张涛, 等.基于PTPd的精准时钟同步技术的研究[J].计算机技术与发展, 2016, 26 (1) :175-180.
                            </a>
                        </p>
                        <p id="19">
                            <a id="bibliography_8" target="_blank" href="http://scholar.cnki.net/result.aspx?q=An implementation of IEEE 1588 protocol for IEEE 802.11 WLAN">

                                <b>[8]</b> CHEN W, SUN J, ZHANG L, et al.An implementation of IEEE 1588 protocol for IEEE 802.11 WLAN[J].Wireless Networks, 2015, 21 (6) :2069-2085.
                            </a>
                        </p>
                        <p id="21">
                            <a id="bibliography_9" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CMFD&amp;filename=1016231332.nh&amp;v=MDA3MTVoVnI3TlZGMjZHTEc3SDlMUHJaRWJQSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUm9GeS8=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[9]</b> 陈翔.精确时间同步协议的软件模型研究[D].昆明:昆明理工大学, 2016.
                            </a>
                        </p>
                        <p id="23">
                            <a id="bibliography_10" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Design Considerations for Software OnlyImplementations of the IEEE1588Precision Time Protocol">

                                <b>[10]</b> CORRELL K, BARENDT N, BRANICKY M.Design considerations for software only implementations of the IEEE 1588 precision time protocol[C]//Proceedings of Conference on IEEE 1588 Standard for A Precision Clock Synchronization Protocol for Networked Measurement and Control Systems.Zurich, Switzerland:IEEE Press, 2006:11-15.
                            </a>
                        </p>
                        <p id="25">
                            <a id="bibliography_11" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSGG201302019&amp;v=MjY1NjZPZVplUm9GeS9oVnI3Tkx6N01hYkc0SDlMTXJZOUViWVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkw=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[11]</b> 宋升金, 许永辉, 姜守达.基于PTPd改进的高精密时钟同步实现[J].计算机工程与应用, 2013, 49 (2) :72-75.
                            </a>
                        </p>
                        <p id="27">
                            <a id="bibliography_12" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JZCK201405096&amp;v=MjAwNDc0SDlYTXFvOU1Zb1FLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUm9GeS9oVnI3Tkx6ZklaYkc=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[12]</b> 朱望纯, 钟震林, 覃斌毅.嵌入式Linux设备的高精度IEEE1588时钟同步实现[J].计算机测量与控制, 2014, 22 (5) :1619-1622.
                            </a>
                        </p>
                        <p id="29">
                            <a id="bibliography_13" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=XDDJ201024017&amp;v=MTAyOTJPM3pxcUJ0R0ZyQ1VSTE9lWmVSb0Z5L2hWcjdOUFNuUFpMRzRIOUhPcTQ5RVk0UUtESDg0dlI0VDZqNTQ=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[13]</b> 徐立, 赵平.基于IEEE 1588精确时钟同步软件实现[J].现代电子技术, 2010, 33 (24) :47-50.
                            </a>
                        </p>
                        <p id="31">
                            <a id="bibliography_14" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=NJSE201304013&amp;v=MTg0ODZHNEg5TE1xNDlFWjRRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVJvRnkvaFZyN05LeWZZYTc=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[14]</b> 吕青松, 吴宁.基于IEEE1588协议的高精度网络时钟同步软件设计[J].南京师范大学学报 (工程技术版) , 2013, 13 (4) :64-69.
                            </a>
                        </p>
                        <p id="33">
                            <a id="bibliography_15" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DZIY201209002&amp;v=MDczMTJGeS9oVnI3TklUZkNkN0c0SDlQTXBvOUZab1FLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUm8=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[15]</b> 庄晓燕, 王厚军.基于卡尔曼滤波器的 IEEE 1588 时钟同步算法[J].电子测量与仪器学报, 2012, 26 (9) :747-751.
                            </a>
                        </p>
                        <p id="35">
                            <a id="bibliography_16" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SSJD&amp;filename=SSJD13102400017292&amp;v=MDI1ODJjPU5qN0Jhcks3SDlIT3E0OUZaT29JRG5VN29CTVQ2VDRQUUgvaXJSZEdlcnFRVE1ud1plWnVIeWptVUxuSUoxb1JheA==&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[16]</b> LI D, WANG G, YANG C, et al.IEEE 1588 based time synchronization system for a seafloor observatory network[J].Journal of Zhejiang University-Science C, 2013, 14 (10) :766-776.
                            </a>
                        </p>
                        <p id="37">
                            <a id="bibliography_17" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJK201102008&amp;v=MTA5MzBETXJZOUZiSVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUm9GeS9oVnI3Tkx6N0JaYkc0SDk=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[17]</b> 李学桥, 陈园, 梁爽.基于 IEEE1588协议的精确时钟同步算法改进[J].计算机工程与科学, 2011, 33 (2) :42-45.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="JSJC201903009" />
        <input id="dpi" type="hidden" value="300" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJC201903009&amp;v=MTM0NTFNckk5RmJZUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVSb0Z5L2hWcjdOTHo3QmJiRzRIOWo=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="4" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
