<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <link href="/kxreader/Content/css/detail?v=qX2z2KjRAEyQiNfAbKtl7dLnsqFoQ5Jdw3TZfDf0n1k1" rel="stylesheet"/>

    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>
</head>

<body>
    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637130624162931250%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dJSJC201903002%26RESULT%3d1%26SIGN%3d%252fndQFMwba1MJcBt%252fhhZen3HtJIs%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JSJC201903002&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=JSJC201903002&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>

    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJC201903002&amp;v=MTg5MjR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVJvRnkvaFViM0lMejdCYmJHNEg5ak1ySTlGWm9RS0RIODQ=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#37" data-title="0 概述 ">0 概述</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#42" data-title="1 相关工作 ">1 相关工作</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#50" data-title="2 容器化工作流系统总体架构 ">2 容器化工作流系统总体架构</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#60" data-title="3 可弹性伸缩工作流模型 ">3 可弹性伸缩工作流模型</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#61" data-title="3.1 直接数据传输">3.1 直接数据传输</a></li>
                                                <li><a href="#67" data-title="3.2 基于文件的数据传输">3.2 基于文件的数据传输</a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#71" data-title="4 工作流的动态伸缩 ">4 工作流的动态伸缩</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#73" data-title="4.1 横向伸缩">4.1 横向伸缩</a></li>
                                                <li><a href="#75" data-title="4.2 纵向伸缩">4.2 纵向伸缩</a></li>
                                                <li><a href="#77" data-title="4.3 基于CPU使用率的自动伸缩实现">4.3 基于CPU使用率的自动伸缩实现</a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#88" data-title="5 实验结果与分析 ">5 实验结果与分析</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#89" data-title="5.1 实验环境">5.1 实验环境</a></li>
                                                <li><a href="#92" data-title="5.2 自动伸缩验证">5.2 自动伸缩验证</a></li>
                                                <li><a href="#98" data-title="5.3 处理性能">5.3 处理性能</a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#107" data-title="6 结束语 ">6 结束语</a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#52" data-title="&lt;b&gt;图1 容器化工作流系统总体架构&lt;/b&gt;"><b>图1 容器化工作流系统总体架构</b></a></li>
                                                <li><a href="#63" data-title="&lt;b&gt;图2 直接数据传输的工作流模型&lt;/b&gt;"><b>图2 直接数据传输的工作流模型</b></a></li>
                                                <li><a href="#64" data-title="&lt;b&gt;图3 TCP套接字的I/O缓冲区示意图&lt;/b&gt;"><b>图3 TCP套接字的I/O缓冲区示意图</b></a></li>
                                                <li><a href="#66" data-title="&lt;b&gt;图4 直接传输数据的任务处理流程&lt;/b&gt;"><b>图4 直接传输数据的任务处理流程</b></a></li>
                                                <li><a href="#69" data-title="&lt;b&gt;图5 基于文件的数据传输工作流模型&lt;/b&gt;"><b>图5 基于文件的数据传输工作流模型</b></a></li>
                                                <li><a href="#70" data-title="&lt;b&gt;图6 基于文件传输数据的任务处理流程&lt;/b&gt;"><b>图6 基于文件传输数据的任务处理流程</b></a></li>
                                                <li><a href="#91" data-title="&lt;b&gt;表1 主机及虚拟机的主要参数&lt;/b&gt;"><b>表1 主机及虚拟机的主要参数</b></a></li>
                                                <li><a href="#94" data-title="&lt;b&gt;表2 处理一张图片的平均时间&lt;/b&gt; s"><b>表2 处理一张图片的平均时间</b> s</a></li>
                                                <li><a href="#95" data-title="&lt;b&gt;图7 横向伸缩时不同负载下每个流程的容器数&lt;/b&gt;"><b>图7 横向伸缩时不同负载下每个流程的容器数</b></a></li>
                                                <li><a href="#96" data-title="&lt;b&gt;图8 纵向伸缩时不同负载下每个流程的容器CPU数&lt;/b&gt;"><b>图8 纵向伸缩时不同负载下每个流程的容器CPU数</b></a></li>
                                                <li><a href="#100" data-title="&lt;b&gt;图9 直接传输数据的工作流处理效率&lt;/b&gt;"><b>图9 直接传输数据的工作流处理效率</b></a></li>
                                                <li><a href="#101" data-title="&lt;b&gt;图10 基于NFS数据传输的工作流处理效率&lt;/b&gt;"><b>图10 基于NFS数据传输的工作流处理效率</b></a></li>
                                                <li><a href="#104" data-title="&lt;b&gt;图11 工作流处理速度随负载的变化情况&lt;/b&gt;"><b>图11 工作流处理速度随负载的变化情况</b></a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="3">


                                    <a id="bibliography_1" title=" 张卫民, 刘灿灿, 骆志刚.科学工作流技术研究综述[J].国防科技大学学报, 2011, 33 (3) :56-65." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=GFKJ201103014&amp;v=MDQ0OTZVYjNMSWl2QVpMRzRIOURNckk5RVlJUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSTE9lWmVSb0Z5L2g=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[1]</b>
                                         张卫民, 刘灿灿, 骆志刚.科学工作流技术研究综述[J].国防科技大学学报, 2011, 33 (3) :56-65.
                                    </a>
                                </li>
                                <li id="5">


                                    <a id="bibliography_2" title=" 班爱琴, 于炯, 鲁亮, 等.云环境基于多工作流的任务调度节能算法的研究[J].电子技术与软件工程, 2015, 14 (1) :178-182." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DZRU201514136&amp;v=MDI5MDVSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUm9GeS9oVWIzTElUZlplN0c0SDlUTnE0NUdZb1FLREg4NHY=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[2]</b>
                                         班爱琴, 于炯, 鲁亮, 等.云环境基于多工作流的任务调度节能算法的研究[J].电子技术与软件工程, 2015, 14 (1) :178-182.
                                    </a>
                                </li>
                                <li id="7">


                                    <a id="bibliography_3" title=" DEELMAN E, VAHI K, RYNGE M, et al.Pegasus in the cloud:science automation through workflow technologies[J].IEEE Internet Computing, 2016, 20 (1) :70-76." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Pegasus in the Cloud: Science Automation through Workflow Technologies">
                                        <b>[3]</b>
                                         DEELMAN E, VAHI K, RYNGE M, et al.Pegasus in the cloud:science automation through workflow technologies[J].IEEE Internet Computing, 2016, 20 (1) :70-76.
                                    </a>
                                </li>
                                <li id="9">


                                    <a id="bibliography_4" title=" DEELMAN E, VAHI K, JUVE G, et al.Pegasus:a workflow management system for science automation[J].Future Generation Computer Systems, 2015, 46 (1) :17-35." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SJES&amp;filename=SJES14110700170354&amp;v=MjMwNTNpZk9mYks4SDlETXFJOUZaZXdQRDNrOW9CTVQ2VDRQUUgvaXJSZEdlcnFRVE1ud1plWnVIeWptVUxuSUoxb1dhQkU9Tg==&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[4]</b>
                                         DEELMAN E, VAHI K, JUVE G, et al.Pegasus:a workflow management system for science automation[J].Future Generation Computer Systems, 2015, 46 (1) :17-35.
                                    </a>
                                </li>
                                <li id="11">


                                    <a id="bibliography_5" title=" DEELMAN E, SINGH G, SU M H, et al.Pegasus:a framework for mapping complex scientific workflows onto distributed systems[J].Scientific Programming, 2005, 13 (3) :219-237." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=SIJD&amp;filename=SIJD15112600083268&amp;v=Mjg0NzF3WmVadUh5am1VTG5JSjFvV2FCRT1OaVRCYXJLOUg5RE9xWTlGWk9NTURub3hvQk1UNlQ0UFFIL2lyUmRHZXJxUVRNbg==&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[5]</b>
                                         DEELMAN E, SINGH G, SU M H, et al.Pegasus:a framework for mapping complex scientific workflows onto distributed systems[J].Scientific Programming, 2005, 13 (3) :219-237.
                                    </a>
                                </li>
                                <li id="13">


                                    <a id="bibliography_6" title=" MAJITHIA S, SHIELDS M, TAYLOR I, et al.Triana:a graphical Web service composition and execution toolkit[C]//Proceedings of IEEE International Conference on Web Services.Washington D.C., USA:IEEE Press, 2004:514-521." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Triana: A Graphical Web Service Composition and Execution Toolkit">
                                        <b>[6]</b>
                                         MAJITHIA S, SHIELDS M, TAYLOR I, et al.Triana:a graphical Web service composition and execution toolkit[C]//Proceedings of IEEE International Conference on Web Services.Washington D.C., USA:IEEE Press, 2004:514-521.
                                    </a>
                                </li>
                                <li id="15">


                                    <a id="bibliography_7" title=" GUAN Z J, HERNANDEZ F, BANGALORE P, et al.Grid 2 flow:a grid 2 enabled scientific workflow system with a Petri net 2 based interface[J].Concurrency and Computation:Practice and Experience, 2005, 18 (10) :1115-1140." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Grid-flow: A Grid-enabled scientific workflow system with a Petri-net-based interface">
                                        <b>[7]</b>
                                         GUAN Z J, HERNANDEZ F, BANGALORE P, et al.Grid 2 flow:a grid 2 enabled scientific workflow system with a Petri net 2 based interface[J].Concurrency and Computation:Practice and Experience, 2005, 18 (10) :1115-1140.
                                    </a>
                                </li>
                                <li id="17">


                                    <a id="bibliography_8" title=" LASZEWSKI G V, GAWOR J, LANE P, et al.Features of the Java commodity grid kit[J].Concurrency and Computation Practice and Experience, 2010, 14 (13/14/15) :1045-1055." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Features of the Java commodity grid kit">
                                        <b>[8]</b>
                                         LASZEWSKI G V, GAWOR J, LANE P, et al.Features of the Java commodity grid kit[J].Concurrency and Computation Practice and Experience, 2010, 14 (13/14/15) :1045-1055.
                                    </a>
                                </li>
                                <li id="19">


                                    <a id="bibliography_9" title=" WATSON G, FRINGS W, KNOBLOCH C, et al.Scalable control and monitoring of supercomputer applications using an integrated tool framework[C]//Proceedings of IEEE ICPPW’11.Washington D.C., USA:IEEE Press, 2011:457-466." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Scalable control and monitoring of supercomputer applications using an integrated tool framework">
                                        <b>[9]</b>
                                         WATSON G, FRINGS W, KNOBLOCH C, et al.Scalable control and monitoring of supercomputer applications using an integrated tool framework[C]//Proceedings of IEEE ICPPW’11.Washington D.C., USA:IEEE Press, 2011:457-466.
                                    </a>
                                </li>
                                <li id="21">


                                    <a id="bibliography_10" title=" LIAO J, GEROFI B, LIEN G, et al.A flexible I/O arbitration framework for net CDF-based big data processing workflows on high-end supercomputers[J].Concurrency and Computation Practice and Experience, 2017, 29 (15) ." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=A flexible I/O arbitration framework for net CDF-based big data processing workflows on high-end supercomputers">
                                        <b>[10]</b>
                                         LIAO J, GEROFI B, LIEN G, et al.A flexible I/O arbitration framework for net CDF-based big data processing workflows on high-end supercomputers[J].Concurrency and Computation Practice and Experience, 2017, 29 (15) .
                                    </a>
                                </li>
                                <li id="23">


                                    <a id="bibliography_11" title=" RAHO M, SPYRIDAKIS A, PAOLINO M, et al.KVM, Xen and Docker:a performance analysis for ARM based NFV and cloud computing[C]//Proceedings of IEEE International Conference on Information, Electronic and Electrical Engineering.Washington D.C., USA:IEEE Press, 2016:1-8." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=KVM,Xen and Docker:a performance analysis for ARM based NFV and cloud computing">
                                        <b>[11]</b>
                                         RAHO M, SPYRIDAKIS A, PAOLINO M, et al.KVM, Xen and Docker:a performance analysis for ARM based NFV and cloud computing[C]//Proceedings of IEEE International Conference on Information, Electronic and Electrical Engineering.Washington D.C., USA:IEEE Press, 2016:1-8.
                                    </a>
                                </li>
                                <li id="25">


                                    <a id="bibliography_12" title=" ANDERSON J, HU H, AGARWAL U, et al.Performance considerations of network functions virtualization using containers[C]//Proceedings of IEEE International Conference on Computing, networking and Communications.Washington D.C., USA:IEEE Press, 2016:1-7." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Performance considerations of network functions virtualization using containers">
                                        <b>[12]</b>
                                         ANDERSON J, HU H, AGARWAL U, et al.Performance considerations of network functions virtualization using containers[C]//Proceedings of IEEE International Conference on Computing, networking and Communications.Washington D.C., USA:IEEE Press, 2016:1-7.
                                    </a>
                                </li>
                                <li id="27">


                                    <a id="bibliography_13" title=" BAGHERI R, JAHANSHAHI M.Scheduling workflow applications on the heterogeneous cloud resources[J].Indian Journal of Science and Technology, 2015, 8 (12) ." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Scheduling workflow applications on the heterogeneous cloud resources">
                                        <b>[13]</b>
                                         BAGHERI R, JAHANSHAHI M.Scheduling workflow applications on the heterogeneous cloud resources[J].Indian Journal of Science and Technology, 2015, 8 (12) .
                                    </a>
                                </li>
                                <li id="29">


                                    <a id="bibliography_14" title=" ZHANG W, LIU G, ZHANG W, et al.OpenNetVM:a platform for high performance network service chains[C]//Proceedings of Workshop on Hot Topics in Middle Boxes and Network Function Virtualization.New York, USA:ACM Press, 2016:26-31." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=OpenNetVM:a platform for high performance network service chains">
                                        <b>[14]</b>
                                         ZHANG W, LIU G, ZHANG W, et al.OpenNetVM:a platform for high performance network service chains[C]//Proceedings of Workshop on Hot Topics in Middle Boxes and Network Function Virtualization.New York, USA:ACM Press, 2016:26-31.
                                    </a>
                                </li>
                                <li id="31">


                                    <a id="bibliography_15" title=" YUCE M R, KEONG H C, CHAE M S.Wideband communication for implantable and wearable systems[J].IEEE Transactions on Microwave Theory and Techniques, 2009, 57 (10) :2597-2604." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Wideband communication for implantable and wearable systems">
                                        <b>[15]</b>
                                         YUCE M R, KEONG H C, CHAE M S.Wideband communication for implantable and wearable systems[J].IEEE Transactions on Microwave Theory and Techniques, 2009, 57 (10) :2597-2604.
                                    </a>
                                </li>
                                <li id="33">


                                    <a id="bibliography_16" >
                                        <b>[16]</b>
                                     黄秀国, 王戟.分布式协作工作流负载平衡调度[C]//2005年全国软件与应用学术会议论文集.南京:[出版者不详], 2005:516-519.</a>
                                </li>
                                <li id="35">


                                    <a id="bibliography_17" title=" 尚世锋, 姜进磊, 郑纬民.CWFlow:支持资源自适应使用的云工作流框架[J].清华大学学报 (自然科学版) , 2013, 53 (1) :415-420." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=QHXB201303024&amp;v=MTkzNTZxQnRHRnJDVVJMT2VaZVJvRnkvaFViM0xOQ1hUYkxHNEg5TE1ySTlIWUlRS0RIODR2UjRUNmo1NE8zenE=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[17]</b>
                                         尚世锋, 姜进磊, 郑纬民.CWFlow:支持资源自适应使用的云工作流框架[J].清华大学学报 (自然科学版) , 2013, 53 (1) :415-420.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=JSJC" target="_blank">计算机工程</a>
                2019,45(03),7-13 DOI:10.19678/j.issn.1000-3428.0049811            </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>云环境下支持弹性伸缩的容器化工作流框架</b></span>
 <span class="shoufa"></span>                                     </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%88%98%E5%BD%AA&amp;code=38999644&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">刘彪</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E7%8E%8B%E5%AE%9D%E7%94%9F&amp;code=20595760&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">王宝生</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E9%82%93%E6%96%87%E5%B9%B3&amp;code=20492245&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">邓文平</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E5%9B%BD%E9%98%B2%E7%A7%91%E6%8A%80%E5%A4%A7%E5%AD%A6%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2&amp;code=0269230&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">国防科技大学计算机学院</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>云计算和容器技术为工作流的运行带来便利, 但其存在管理困难、资源利用率不足以及智能和自动化程度较低等问题。为此, 提出一种支持弹性伸缩的容器化工作流框架, 在此基础上给出基于CPU使用率的工作流自动伸缩模型, 在流程过载时自动扩充流程的容器数目, 减少任务等待时间, 当任务负载减小时, 能够在确保任务不丢失的情况下完成流程的缩容, 以节约资源和成本。实验结果表明, 流程的扩容数量与其处理时间成正相关, 较好地消除工作流中的瓶颈, 在工作流过载时, 能够以较短的时间完成相同的任务量。</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E4%BA%91%E8%AE%A1%E7%AE%97&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">云计算;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Docker%E5%AE%B9%E5%99%A8&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Docker容器;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%B7%A5%E4%BD%9C%E6%B5%81%E6%A1%86%E6%9E%B6&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">工作流框架;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">弹性伸缩;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">调度策略;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">负载均衡;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    刘彪 (1993—) , 男, 硕士研究生, 主研方向为云计算、大数据、并行计算;;
                                </span>
                                <span>
                                    王宝生, 研究员、博士生导师;;
                                </span>
                                <span>
                                    邓文平, 助理研究员、博士。;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2017-12-22</p>

                    <p>

                            <b>基金：</b>
                                                        <span>国家自然科学基金 (61472438, 61602503);</span>
                    </p>
            </div>
                    <h1><b>Containerized Workflow Framework Supporting Elastic Scaling in Cloud Environment</b></h1>
                    <h2>
                    <span>LIU Biao</span>
                    <span>WANG Baosheng</span>
                    <span>DENG Wenping</span>
            </h2>
                    <h2>
                    <span>School of Computer, National University of Defense Technology</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>Cloud computing and container technology bring the convenience of the workflows operation, but there are problems such as management difficulties, insufficient resource utilization, and low intelligence and automation.Therefore, a containerized workflow framework supporting elastic scaling is proposed.On the basis of this, a workflow automatic scaling model based on CPU usage is presented, which can automatically expand the number of containers when the workflow process is overloaded, and reduce the task waiting time.When the task load is reduced, the process can be reduced while ensuring that the task is not lost to save resources and costs.Experimental results show that the number of expansions of the process is positively related to the processing time, which can better eliminate the bottleneck of the workflow.When the workflow is overloaded, the same amount of tasks can be completed in a shorter time.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=cloud%20computing&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">cloud computing;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Docker%20container&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Docker container;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=workflow%20framework&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">workflow framework;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=elastic%20scaling&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">elastic scaling;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=scheduling%20strategy&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">scheduling strategy;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=load%20balancing&amp;code=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">load balancing;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2017-12-22</p>
                                    <p>
                                            </p>
            </div>


        <!--brief start-->
                        <h3 id="37" name="37" class="anchor-tag">0 概述</h3>
                <div class="p1">
                    <p id="38">随着信息时代和大数据时代的到来, 数据呈爆发式增长, 灵活高效的数据处理方法变得越来越重要。数据处理由多个步骤组成, 如数据采集、重新格式化数据、运行分析等, 这些步骤形成一条工作流。工作流通常需要对海量数据进行查找、移动、处理、分析及可视化等操作, 但其部署和执行对计算资源和存储空间的要求较高<citation id="109" type="reference"><link href="3" rel="bibliography" /><link href="5" rel="bibliography" /><sup>[<a class="sup">1</a>,<a class="sup">2</a>]</sup></citation>。</p>
                </div>
                <div class="p1">
                    <p id="39">云计算和容器的出现为科学工作流的执行带来了新的机遇, 也带来新的挑战。云计算通过虚拟化将计算、存储、应用和服务变成可动态配置的资源池, 其资源的规模性、可扩展性和灵活性为科学工作流的执行提供了强有力的支持。容器作为一种虚拟化技术, 因其轻量级、易部署、启动快等优点正逐步取代传统的虚拟机成为新一代云化信息基础设施的宏重构的基础单元。使用容器充当工作流的运行载体, 能够提升工作流的隔离性、可移植性、可扩展性、可靠性和灵活性等。</p>
                </div>
                <div class="p1">
                    <p id="40">云计算和容器技术给工作流的运行带来很多好处, 但也面临一些问题和挑战, 主要体现在:云数据中心一直存在管理困难、资源利用率不足、高能耗等问题, 加上容器本身管理的复杂性, 使得在云平台中基于容器执行工作流需要一种高效的工作流编排调度系统来有效地协调和管理数据、任务及资源;工作流在实际运行中往往会面临突发负载, 需要动态调整资源, 云计算结合容器技术虽然让资源扩缩变得更加方便, 可以按需使用与扩缩, 但依然需要人工手动操作, 智能和自动化程度较低。</p>
                </div>
                <div class="p1">
                    <p id="41">针对上述问题, 本文提出一个基于容器的支持自动伸缩的工作流框架, 并基于此框架构建数据传输和基于文件共享传输的可弹性伸缩工作流模型, 根据用户指定的伸缩策略和伸缩条件动态调整工作流中每个流程的实例数目, 从而应对负载变化。</p>
                </div>
                <h3 id="42" name="42" class="anchor-tag">1 相关工作</h3>
                <div class="p1">
                    <p id="43">目前, 国外已有很多比较成熟的工作流管理系统 (Workflow Management Systems, WfMS) , 如文献<citation id="120" type="reference">[<a class="sup">3</a>,<a class="sup">4</a>,<a class="sup">5</a>]</citation>介绍一种在云中执行科学工作流程的解决方案Pegasus。Pegasus采用集中式调度架构, 中央调度器负责生成所有任务的调度计划, 并为其分配资源, 可帮助工作流应用在不同的环境中执行。Pegasus基于XML格式描述抽象工作流程, 而不用考虑底层执行环境或中间件所要求的低级规范细节, 通过自动将高级工作描述映射到分布式资源上, 从而桥接科学领域和执行环境, 同时提供完善的错误自动处理和恢复机制以提升系统的可靠性。类似于Pegasus流程管理系统的还有Triana<citation id="110" type="reference"><link href="13" rel="bibliography" /><sup>[<a class="sup">6</a>]</sup></citation>、GridFlow <citation id="111" type="reference"><link href="15" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>、Java Cog Kit <citation id="112" type="reference"><link href="17" rel="bibliography" /><sup>[<a class="sup">8</a>]</sup></citation>等, 然而, 这些系统都是针对各自研究领域而开发的流程管理系统, 系统的实现技术、使用场景各不相同, 缺乏统一的标准和操作模式<citation id="113" type="reference"><link href="3" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>, 同时, 对于一些突发负载无法处理。文献<citation id="114" type="reference">[<a class="sup">9</a>]</citation>提出组件并行耦合的方案, 有效地整合了现有的编程和性能工具, 有利于并行应用的开发。文献<citation id="115" type="reference">[<a class="sup">10</a>]</citation>为减少工作流流程间的数据交换时间, 提出一个面向大数据处理的通用I/O中间件, 为工作流系统中组件间的数据交换提供了一个通用框架。文献<citation id="116" type="reference">[<a class="sup">11</a>]</citation>分析了KVM、Xen和Docker 3种虚拟化技术的性能, 指出Docker的性能开销可以忽略不计, 并且更易使用和部署。文献<citation id="117" type="reference">[<a class="sup">12</a>]</citation>进一步表示Docker可以提供更低的延迟, 并可用于硬件虚拟化的高性能网络技术。文献<citation id="118" type="reference">[<a class="sup">13</a>]</citation>为解决将工作流应用程序部署到云环境中的问题, 引入一种新的调度算法, 该算法能够检测可并发运行的任务集合并将其分配到不同的子工作流程中, 然后将每个子工作流程分配在资源集群中, 以此减少任务间通信成本。文献<citation id="119" type="reference">[<a class="sup">14</a>]</citation>基于Docker容器构建一个高性能网络功能服务链平台OpenNetVM, 使用DPDK实现高性能I/O。上述研究对任务调度和通信成本进行了优化, 但没考虑负载变化和工作流的弹性伸缩问题。</p>
                </div>
                <div class="p1">
                    <p id="44">关于工作流负载的研究, 文献<citation id="121" type="reference">[<a class="sup">15</a>]</citation>指出在电子商务、在线视频、气象等应用中的突发负载是平均负载的5倍～10倍, 甚至更高。文献<citation id="122" type="reference">[<a class="sup">16</a>]</citation>研究分布式系统中工作流的协作方式和负载平衡技术, 提出负载均衡调度方法, 采用负载因子描述单个系统的工作流负载, 当负载超过安全负载时根据负载平衡策略进行实例迁移, 实现多个工作流引擎之间的负载均衡, 但该方案不能根据任务负载进行弹性伸缩。文献<citation id="123" type="reference">[<a class="sup">17</a>]</citation>提出一个支持资源自适应的云工作流框架CWFlow, 通过监控服务性能来动态添加或减少虚拟机节点的数目, 从而达到节省资源使用费的目的。但在CWFlow模型中, 工作流被作为一个整体来进行扩充或缩减, 对于不同流程之间执行时间差异较大的工作流并不能获得很好表现, 而且以虚拟机为资源调节单位, 资源伸缩的响应时间很大, 不适应负载变化频繁的工作流。</p>
                </div>
                <div class="p1">
                    <p id="45">基于已有研究, 本文提出基于容器的可弹性伸缩工作流框架, 每个流程以微服务的形式运行于容器中, 在实现工作流便捷部署、运行隔离和集中管理的基础上, 可利用微服务的松耦合性自由编排组合工作流, 并基于CPU使用率进行工作流的快速自动弹性伸缩。本文旨在为工作流的动态弹性伸缩提供一个通用框架, 流程间耦合与通信问题在文献<citation id="124" type="reference">[<a class="sup">9</a>,<a class="sup">10</a>,<a class="sup">13</a>]</citation>中已有研究。</p>
                </div>
                <div class="p1">
                    <p id="46">本文主要贡献如下:</p>
                </div>
                <div class="p1">
                    <p id="47">1) 提出并实现一个基于容器的工作流系统 (Container-based Workflow System, CBWS) , 该系统与Docker Swarm相结合, 并可通过Docker原生命令使用。</p>
                </div>
                <div class="p1">
                    <p id="48">2) 针对直接数据传输和基于文件数据传输2类工作流进行可伸缩改进, 引入停止信号、发送确认和重传机制, 实现对有状态容器的扩容和缩容, 且只需对现有工作流程序的源代码进行微小修改。</p>
                </div>
                <div class="p1">
                    <p id="49">3) 提出工作流的横向和纵向2种不同伸缩策略, 并基于CPU使用率实现工作流的横向和纵向伸缩。</p>
                </div>
                <h3 id="50" name="50" class="anchor-tag">2 容器化工作流系统总体架构</h3>
                <div class="p1">
                    <p id="51">容器化工作流系统采用集中式控制, 总体架构如图1所示。</p>
                </div>
                <div class="area_img" id="52">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903002_052.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 容器化工作流系统总体架构" src="Detail/GetImg?filename=images/JSJC201903002_052.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图1 容器化工作流系统总体架构</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903002_052.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="53">该框架分为客户端、服务端、工作节点和持久存储层。客户端作为用户和系统的交互工具, 提供数据可视化、工作流建模和系统管理功能。用户可以通过客户端的图形界面自由编排组合工作流, 系统将自动把用户输入转变为指定格式的工作流描述文件, 从而对用户隐藏工作流模板语法的复杂性。服务端由监控器和集中式工作流引擎组成, 监控器收集并汇聚主机资源、容器资源和任务状态信息, 为工作流调度与伸缩提供依据。集中式工作流引擎负责工作流解析、调度和弹性伸缩, 并自动对工作流进行动态调整。工作节点层是由多个主机构成的集群, 为进行集中式管控, 在每个主机上部署一个节点代理, 用于执行任务和监控采集。持久存储层提供镜像仓库和网络文件系统 (Network File System, NFS) 服务, 用于数据存储与共享。</p>
                </div>
                <div class="p1">
                    <p id="54">容器化工作流系统的工作过程描述如下:</p>
                </div>
                <div class="p1">
                    <p id="55">1) 用户通过图形界面定义工作流, 系统根据用户输入自动生成工作流描述文件并提交给流程解析器。</p>
                </div>
                <div class="p1">
                    <p id="56">2) 流程解析器对工作流描述进行解析, 生成相应的容器启动命令交给容器调度器。</p>
                </div>
                <div class="p1">
                    <p id="57">3) 容器调度器根据主机资源使用情况选取合适的主机运行容器。</p>
                </div>
                <div class="p1">
                    <p id="58">4) 弹性伸缩决策器定时计算每个服务的资源使用率, 并与规定的指标比较。</p>
                </div>
                <div class="p1">
                    <p id="59">5) 如果符合伸缩条件, 则弹性伸缩决策模块根据服务的伸缩策略执行服务伸缩操作。</p>
                </div>
                <h3 id="60" name="60" class="anchor-tag">3 可弹性伸缩工作流模型</h3>
                <h4 class="anchor-tag" id="61" name="61">3.1 直接数据传输</h4>
                <div class="p1">
                    <p id="62">直接进行数据传输的工作流模型如图2所示, 各流程间存在单向的数据依赖关系, 没有反馈和迭代处理, 可用有向无环图 (DAG) 表示。每个流程以容器服务的形式部署和运行, 利用服务发现功能使得流程间可直接通过服务名通信, 而不用考虑容器IP的变化。当一个流程有多个容器实例时, 采用负载均衡机制将请求均衡分配到每个容器。每个流程通过TCP协议将处理结果直接发送到下一个流程, 图3为TCP套接室的I/O缓冲区示意图, 每个socket被创建后都会分配输入缓冲区和输出缓冲区, TCP通信通过ACK信号可确保对方收到了数据, 但仅保证对方的输入缓冲区收到数据, 不能保证对方应用程序取到数据。在工作流运行过程中, 如果直接停止一个容器, 则可能导致正在处理的、缓冲区的和正在传输的数据丢失。</p>
                </div>
                <div class="area_img" id="63">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903002_063.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 直接数据传输的工作流模型" src="Detail/GetImg?filename=images/JSJC201903002_063.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图2 直接数据传输的工作流模型</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903002_063.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="64">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903002_064.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 TCP套接字的I/O缓冲区示意图" src="Detail/GetImg?filename=images/JSJC201903002_064.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图3 TCP套接字的I/O缓冲区示意图</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903002_064.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="65">本文通过引入停止信号、发送确认和重传机制确保任务在工作流伸缩过程中不会丢失。直接传输数据任务处理程序的工作流程如图4所示。任务处理程序在接收数据前先判断是否需停止, 这样可确保程序通过停止信号退出时没有任务处于执行状态。接收数据后发送确认信号使发送方确认数据被接收, 同样发送数据后等待确认的信号, 确保数据已发送给下一个流程。由于容器的停止可能导致数据发送失败, 因此需捕获发送异常, 当捕获到异常时重新发送数据。</p>
                </div>
                <div class="area_img" id="66">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903002_066.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 直接传输数据的任务处理流程" src="Detail/GetImg?filename=images/JSJC201903002_066.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图4 直接传输数据的任务处理流程</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903002_066.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="67" name="67">3.2 基于文件的数据传输</h4>
                <div class="p1">
                    <p id="68">基于文件的数据传输工作流模型如图5所示, 通过NFS实现跨主机容器之间的数据交互, 基于redis构建任务队列实现多容器并发执行。具体而言, 为每个流程创建一个任务队列, 任务队列中存放待处理数据的地址, 每个处理程序从任务队列中取出数据, 然后判断是否为停止信号, 若是则退出程序, 否则根据地址从NFS中读取并处理数据, 处理结果存入NFS, 同时将处理结果的地址添加到下一个流程的任务队列, 使任务可以继续被下一个流程处理。基于文件数据传输工作流的每个处理程序工作流程如图6所示。</p>
                </div>
                <div class="area_img" id="69">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903002_069.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 基于文件的数据传输工作流模型" src="Detail/GetImg?filename=images/JSJC201903002_069.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图5 基于文件的数据传输工作流模型</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903002_069.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="70">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903002_070.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 基于文件传输数据的任务处理流程" src="Detail/GetImg?filename=images/JSJC201903002_070.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图6 基于文件传输数据的任务处理流程</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903002_070.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h3 id="71" name="71" class="anchor-tag">4 工作流的动态伸缩</h3>
                <div class="p1">
                    <p id="72">传统工作流无法根据任务量或任务到达速率进行动态伸缩, 导致请求量大时服务质量下降, 请求量小时空闲资源浪费严重。CBWS支持横向和纵向2种伸缩策略来满足不同需求的工作流动态伸缩, 并实现基于CPU使用率对工作流进行横向与纵向伸缩。</p>
                </div>
                <h4 class="anchor-tag" id="73" name="73">4.1 横向伸缩</h4>
                <div class="p1">
                    <p id="74">横向伸缩也叫水平扩展, 即用更多的节点来支撑更大量的请求。CBWS通过调整流程服务的容器数目实现横向伸缩。在横向扩容过程中, 弹性伸缩决策器首先获取待扩容服务的资源配额, 然后查找是否存在空闲资源大于该配额的主机, 若存在则通过docker service scale将服务的实例数目增加1个。在缩容过程中, 需考虑容器内可能有未完成的任务, 不能采用无状态服务的缩容方式来直接停止容器, 而是由伸缩决策器向一个流程容器发送停止信号使容器自行停止。</p>
                </div>
                <h4 class="anchor-tag" id="75" name="75">4.2 纵向伸缩</h4>
                <div class="p1">
                    <p id="76">纵向伸缩也叫垂直扩展, 即扩展一个点的能力来支撑更大量的请求。CBWS通过增加容器的资源配额来实现流程的纵向扩容, 通过减少资源配额实现纵向缩容。纵向伸缩需更新容器的资源配额, 直接使用docker service update命令更新容器时会启动一个新容器代替当前容器, 存在任务丢失可能, 为避免这种情况, 先通过发送停止信号停止待更新容器, 待容器自动停止后再更新容器的资源配额, 每次更新时增加或缩减的资源数目可由用户设定。和横向扩容一样, 纵向扩容前也需检查是否有足够空闲资源的主机来运行扩容后的容器。</p>
                </div>
                <h4 class="anchor-tag" id="77" name="77">4.3 基于CPU使用率的自动伸缩实现</h4>
                <div class="p1">
                    <p id="78"><b>定义1</b> (流程过载) 工作流中某个流程的数据到达速度若高于其最大数据处理速度, 则称此流程过载。</p>
                </div>
                <div class="p1">
                    <p id="79">在CPU密集型工作流的处理过程中, 当流程过载时, 该流程会处于满负荷工作状态, 出现CPU不够用的情况。这时要提高流程的吞吐率, 就需要对流程进行扩容。流程扩容策略由用户创建工作流时指定, 分为横向扩容和纵向扩容。CBWS以流程一段时间内CPU的平均使用率作为该流程扩缩依据。</p>
                </div>
                <div class="p1">
                    <p id="80">CBWS使用Docker SDK来操作和管理容器, 系统在创建服务时将用户输入的伸缩策略和伸缩条件等参数作为服务的标签, 伸缩决策器通过服务的标签获取服务的相关参数, 并根据这些参数进行服务的伸缩, 这也使得用户可以直接使用Docker原生命令为服务添加标签来实现服务的自动伸缩功能, 增强了系统的易用性。</p>
                </div>
                <div class="p1">
                    <p id="81">基于CPU使用率进行自动伸缩的原理步骤如下:</p>
                </div>
                <div class="p1">
                    <p id="82"><b>步骤1</b> 监控器采集主机和容器的资源信息并存入数据库, 为缩短采集时间, 采集时使用多线程, 每个线程向一个主机发起请求, 节点代理收到请求后, 将本主机及本机上容器的资源使用状态返回给监控器。</p>
                </div>
                <div class="p1">
                    <p id="83"><b>步骤2</b> 伸缩决策器使用Docker SDK查找出带伸缩标签的服务。</p>
                </div>
                <div class="p1">
                    <p id="84"><b>步骤3</b> 计算每个服务的CPU平均使用率, 计算方法是通过服务名从数据库中查出属于该服务的所有活跃的容器, 然后取这些容器CPU使用率的平均值作为该服务的CPU平均使用率。</p>
                </div>
                <div class="p1">
                    <p id="85"><b>步骤4</b> 对所有CPU平均使用率低于预设缩容阈值的服务根据其伸缩策略进行缩容。</p>
                </div>
                <div class="p1">
                    <p id="86"><b>步骤5</b> 对CPU平均使用率最大的且超过预设扩容阈值的服务根据其伸缩策略进行扩容, 即每轮检测最多扩容一个服务, 这样可以把资源分配给最需要扩充的服务, 这个服务往往是工作流中的瓶颈流程。</p>
                </div>
                <div class="p1">
                    <p id="87"><b>步骤6</b> 上述步骤完成后转步骤1。</p>
                </div>
                <h3 id="88" name="88" class="anchor-tag">5 实验结果与分析</h3>
                <h4 class="anchor-tag" id="89" name="89">5.1 实验环境</h4>
                <div class="p1">
                    <p id="90">为验证本文提出的可弹性伸缩工作流框架的有效性, 使用python语言开发出原型系统CBWS, 同时设计一套图片处理工作流, 该工作流包含3个流程, 分别为图片格式转换、轮廓滤波处理和添加水印, 用python实现了该工作流直接数据传输和基于文件传输的2个版本。实验使用在1台笔记本电脑上用VMware启动3台虚拟机, 3台虚拟机使用主机模式连接到一个虚拟网桥上, 并组建成Swarm容器集群, 其中, 1台作为管理节点, 另外2台作为工作节点。管理节点安装NFS服务端及数据库服务, 并运行CBWS服务端和客户端, 工作节点运行CBWS代理, 容器都运行在工作节点。主机及虚拟机的主要参数如表1所示。</p>
                </div>
                <div class="area_img" id="91">
                    <p class="img_tit"><b>表1 主机及虚拟机的主要参数</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="91" border="1"><tr><td>配置项</td><td>笔记本主机</td><td>虚拟机管理节点</td><td>虚拟机工作节点</td></tr><tr><td>CPU</td><td>2核4线程 酷睿i7-<br />7500U处理器</td><td>1处理器<br />2核心</td><td>1处理器<br />1核心</td></tr><tr><td><br />内存/GB</td><td>16</td><td>2</td><td>1</td></tr><tr><td><br />操作系统<br />Docker版本</td><td>Windows 10<br />家庭中文版无</td><td>Ubuntu16.04<br />17.12.0-ce</td><td>Ubuntu16.04<br />17.12.0-ce</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <h4 class="anchor-tag" id="92" name="92">5.2 自动伸缩验证</h4>
                <div class="p1">
                    <p id="93">本文实验以图片处理工作流为例, 验证工作流在不同负载下的自动伸缩效果。工作流流程之间通过NFS进行数据交互, 分别测试采用横向伸缩和采用纵向伸缩时容器数目或容器资源的变化情况。在测试时, 初始化每个流程的容器数目为1, 容器CPU限制为0.1 (即限制该容器最多可使用10%的CPU资源) , 每个容器分配64 MB内存, 基于CPU的扩容阈值设为90%, 缩容阈值设为40%。横向伸缩每次调整的容器数目为1, 纵向伸缩每次调整的CPU数为0.1。测试图片为一张624 KB的png格式图像, 当无扩容时, 每个流程单容器处理一张图片所需的时间如表2所示。通过控制图片发送速度对工作流进行压力测试, 对于采用横向伸缩策略的工作流记录不同负载下每个流程的容器数量的变化情况, 以及采用纵向伸缩策略的工作流记录不同负载下容器CPU资源的变化情况, 实验结果如图7、图8所示。</p>
                </div>
                <div class="area_img" id="94">
                    <p class="img_tit"><b>表2 处理一张图片的平均时间</b> s <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="94" border="1"><tr><td><br />流程</td><td>时间</td></tr><tr><td><br />1</td><td>0.557 4</td></tr><tr><td><br />2</td><td>0.510 5</td></tr><tr><td><br />3</td><td>2.452 6</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="area_img" id="95">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903002_095.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 横向伸缩时不同负载下每个流程的容器数" src="Detail/GetImg?filename=images/JSJC201903002_095.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图7 横向伸缩时不同负载下每个流程的容器数</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903002_095.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="96">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903002_096.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图8 纵向伸缩时不同负载下每个流程的容器CPU数" src="Detail/GetImg?filename=images/JSJC201903002_096.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图8 纵向伸缩时不同负载下每个流程的容器CPU数</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903002_096.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="97">从图7、图8可以看出, 流程容器的扩容数目或资源的扩充数目与每个流程的处理时间成正相关, 在本次测试中, 流程3最为耗时, 扩容数目最多, 流程1和流程2耗时相差不多, 因此, 扩展数目也基本一致。实验结果证明, CBWS可实现差异性扩容, 将更多资源用于瓶颈流程以提升其处理能力, 从而能够在提升工作流整体吞吐率的情况下降低流程间吞吐率的差异性, 有利于用更少的资源满足用户的服务需求。</p>
                </div>
                <h4 class="anchor-tag" id="98" name="98">5.3 处理性能</h4>
                <div class="p1">
                    <p id="99">本文实验首先固定流程的最大扩容数量, 横向扩容时最大的流程容器扩充个数为5, 纵向扩容时容器CPU最大扩充数为0.5, 然后测试2种工作流模型在使用横向和纵向伸缩策略时以最快速度处理不同数量图片的时间。初始化的容器设置和5.2节的实验相同, 在测试时, 客户端以远大于工作流吞吐率的速度发送图片, 记录无扩容、横向扩容和纵向扩容工作流处理不同数目图片的时间, 实验结果如图9、图10所示。</p>
                </div>
                <div class="area_img" id="100">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903002_100.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图9 直接传输数据的工作流处理效率" src="Detail/GetImg?filename=images/JSJC201903002_100.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图9 直接传输数据的工作流处理效率</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903002_100.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="area_img" id="101">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903002_101.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图10 基于NFS数据传输的工作流处理效率" src="Detail/GetImg?filename=images/JSJC201903002_101.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图10 基于NFS数据传输的工作流处理效率</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903002_101.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="102">图9、图10显示了基于CPU使用率的伸缩策略对于CPU密集型工作流的有效性, 相对于无扩容工作流, 无论是横向还是纵向扩容都能很大程度上提升数据处理速度。横向扩容通过扩充容器数目分担负载, 实现并行处理, 提高了工作流吞吐率, 纵向扩容通过增加容器的CPU使用时间, 加快了处理速度, 从而提高吞吐率。值得注意的是, 横向扩容不能缩短单个任务的完成时间, 因为每个容器的CPU数目并没有扩充。纵向扩容增加了容器的CPU配额, 提升了处理能力, 因而可以缩短单个任务的完成时间。当纵向扩容时, 一个流程只有一个容器, 因此最多只能占用一个主机的所有资源, 而无法使用多个主机资源, 而横向扩容每个流程可有多个容器, 容器可被调度到不同主机, 从而可以使用多个主机的资源。另外, 横向与纵向策略可以进行结合, 当纵向扩容遇到主机资源不足时转而进行横向扩容。</p>
                </div>
                <div class="p1">
                    <p id="103">通过固定图片数为100张, 用客户端以不同的速度将图片传给工作流进行处理, 模拟不同的任务产生速度来测试工作流在不同负载下的处理能力。本文以基于NFS进行数据传输的工作流为例, 采用横向伸缩策略, 记录工作流在无扩容和流程容器最大扩容数为分别为2、4、6时处理完客户端上传图片的时间, 以此测试可弹性工作流处理能力随负载的变化情况, 实验结果如图11所示。</p>
                </div>
                <div class="area_img" id="104">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/JSJC201903002_104.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图11 工作流处理速度随负载的变化情况" src="Detail/GetImg?filename=images/JSJC201903002_104.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit"><b>图11 工作流处理速度随负载的变化情况</b>  <a class="btn-zoomin" href="Detail/GetImg?filename=images/JSJC201903002_104.jpg&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="105">从图11可以看出, 无弹性伸缩的工作流处理100张图片的时间趋于稳定状态, 原因在于其处理能力不能随负载变化, 由于其吞吐率小于任务到达速度, 上传的图片会在任务队列中排队, 产生了较长的任务等待时间。相反, 可弹性伸缩工作流的吞吐率可随任务负载发送变化, 变化的范围与设置的最大流程容器扩容数目有关。对于最大扩容数为2的工作流, 由于扩容数较少, 在任务产生较慢时能及时处理完任务, 在负载大于1时, 处理能力扩到最大, 发生任务等待。最大扩容数为4的工作流在负载大于2时, 发生任务等待。最大扩容数为6的工作流, 在本次负载压力测试下其吞吐率基本能与任务产生速度一致, 没有产生过多的任务等待时间, 只有在负载为3时其完成时间略高于客户端发送完成的时间, 而且还大于负载为2.5时的完成时间。其原因在于基于容器的流程扩容虽然很快, 但仍需要一定的反应时间, 在任务产生速度太快而任务量又较小的情况下, 会出现工作流尚未扩充完成客户端即发送结束, 导致新扩充的容器分担不到足够负载, 影响了完成时间, 这种情况在使用纵向伸缩策略的工作流中则不会发生。</p>
                </div>
                <div class="p1">
                    <p id="106">本文对多个实验处理结果进行了检查, 通过对比最终处理完成的图片和发送的图片, 确认任务没有在工作流伸缩过程中丢失, 证明了CBWS的可靠性和正确性。</p>
                </div>
                <h3 id="107" name="107" class="anchor-tag">6 结束语</h3>
                <div class="p1">
                    <p id="108">本文讨论了云环境下容器和工作流的结合问题, 提出一个支持自动弹性伸缩的容器化工作流框架。该框架采用集中式控制原则, 以容器微服务形式部署和运行工作流, 可对工作流进行自由编排和组合, 提高工作流的可扩展性和流程的复用性。在该工作流框架的基础上, 给出可弹性伸缩工作流模型, 实现基于CPU使用率的横向和纵向伸缩策略, 能够在确保任务不丢失的情况下, 根据CPU使用率自动伸缩服务。扩容过程基于贪心策略每次只扩充CPU使用率最高的服务, 有利于资源的合理分配。利用此工作流框架, 用户可以指定工作流的某些流程或所有流程自动根据任务负载进行容器资源的动态调整, 从而在确保性能的前提下, 以更少的资源运行任务节省系统资源和使用费用。在目前的工作流框架中, 每条工作流中的流程平均分布到各个工作主机中, 因此流程之间存在跨主机通信, 而跨主机通信会带来额外的数据传输延迟, 对于单个任务的完成时间产生一定影响, 下一步将对此进行改进。</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="3">
                            <a id="bibliography_1" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=GFKJ201103014&amp;v=MTczMzFvRnkvaFViM0xJaXZBWkxHNEg5RE1ySTlFWUlRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVI=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[1]</b> 张卫民, 刘灿灿, 骆志刚.科学工作流技术研究综述[J].国防科技大学学报, 2011, 33 (3) :56-65.
                            </a>
                        </p>
                        <p id="5">
                            <a id="bibliography_2" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DZRU201514136&amp;v=MjA2ODNVUkxPZVplUm9GeS9oVWIzTElUZlplN0c0SDlUTnE0NUdZb1FLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckM=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[2]</b> 班爱琴, 于炯, 鲁亮, 等.云环境基于多工作流的任务调度节能算法的研究[J].电子技术与软件工程, 2015, 14 (1) :178-182.
                            </a>
                        </p>
                        <p id="7">
                            <a id="bibliography_3" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Pegasus in the Cloud: Science Automation through Workflow Technologies">

                                <b>[3]</b> DEELMAN E, VAHI K, RYNGE M, et al.Pegasus in the cloud:science automation through workflow technologies[J].IEEE Internet Computing, 2016, 20 (1) :70-76.
                            </a>
                        </p>
                        <p id="9">
                            <a id="bibliography_4" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SJES&amp;filename=SJES14110700170354&amp;v=MTI3NTdycVFUTW53WmVadUh5am1VTG5JSjFvV2FCRT1OaWZPZmJLOEg5RE1xSTlGWmV3UEQzazlvQk1UNlQ0UFFIL2lyUmRHZQ==&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[4]</b> DEELMAN E, VAHI K, JUVE G, et al.Pegasus:a workflow management system for science automation[J].Future Generation Computer Systems, 2015, 46 (1) :17-35.
                            </a>
                        </p>
                        <p id="11">
                            <a id="bibliography_5" target="_blank" href="/kcms/detail/detail.aspx?dbcode=SIJD&amp;filename=SIJD15112600083268&amp;v=MzE4NTlpclJkR2VycVFUTW53WmVadUh5am1VTG5JSjFvV2FCRT1OaVRCYXJLOUg5RE9xWTlGWk9NTURub3hvQk1UNlQ0UFFILw==&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[5]</b> DEELMAN E, SINGH G, SU M H, et al.Pegasus:a framework for mapping complex scientific workflows onto distributed systems[J].Scientific Programming, 2005, 13 (3) :219-237.
                            </a>
                        </p>
                        <p id="13">
                            <a id="bibliography_6" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Triana: A Graphical Web Service Composition and Execution Toolkit">

                                <b>[6]</b> MAJITHIA S, SHIELDS M, TAYLOR I, et al.Triana:a graphical Web service composition and execution toolkit[C]//Proceedings of IEEE International Conference on Web Services.Washington D.C., USA:IEEE Press, 2004:514-521.
                            </a>
                        </p>
                        <p id="15">
                            <a id="bibliography_7" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Grid-flow: A Grid-enabled scientific workflow system with a Petri-net-based interface">

                                <b>[7]</b> GUAN Z J, HERNANDEZ F, BANGALORE P, et al.Grid 2 flow:a grid 2 enabled scientific workflow system with a Petri net 2 based interface[J].Concurrency and Computation:Practice and Experience, 2005, 18 (10) :1115-1140.
                            </a>
                        </p>
                        <p id="17">
                            <a id="bibliography_8" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Features of the Java commodity grid kit">

                                <b>[8]</b> LASZEWSKI G V, GAWOR J, LANE P, et al.Features of the Java commodity grid kit[J].Concurrency and Computation Practice and Experience, 2010, 14 (13/14/15) :1045-1055.
                            </a>
                        </p>
                        <p id="19">
                            <a id="bibliography_9" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Scalable control and monitoring of supercomputer applications using an integrated tool framework">

                                <b>[9]</b> WATSON G, FRINGS W, KNOBLOCH C, et al.Scalable control and monitoring of supercomputer applications using an integrated tool framework[C]//Proceedings of IEEE ICPPW’11.Washington D.C., USA:IEEE Press, 2011:457-466.
                            </a>
                        </p>
                        <p id="21">
                            <a id="bibliography_10" target="_blank" href="http://scholar.cnki.net/result.aspx?q=A flexible I/O arbitration framework for net CDF-based big data processing workflows on high-end supercomputers">

                                <b>[10]</b> LIAO J, GEROFI B, LIEN G, et al.A flexible I/O arbitration framework for net CDF-based big data processing workflows on high-end supercomputers[J].Concurrency and Computation Practice and Experience, 2017, 29 (15) .
                            </a>
                        </p>
                        <p id="23">
                            <a id="bibliography_11" target="_blank" href="http://scholar.cnki.net/result.aspx?q=KVM,Xen and Docker:a performance analysis for ARM based NFV and cloud computing">

                                <b>[11]</b> RAHO M, SPYRIDAKIS A, PAOLINO M, et al.KVM, Xen and Docker:a performance analysis for ARM based NFV and cloud computing[C]//Proceedings of IEEE International Conference on Information, Electronic and Electrical Engineering.Washington D.C., USA:IEEE Press, 2016:1-8.
                            </a>
                        </p>
                        <p id="25">
                            <a id="bibliography_12" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Performance considerations of network functions virtualization using containers">

                                <b>[12]</b> ANDERSON J, HU H, AGARWAL U, et al.Performance considerations of network functions virtualization using containers[C]//Proceedings of IEEE International Conference on Computing, networking and Communications.Washington D.C., USA:IEEE Press, 2016:1-7.
                            </a>
                        </p>
                        <p id="27">
                            <a id="bibliography_13" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Scheduling workflow applications on the heterogeneous cloud resources">

                                <b>[13]</b> BAGHERI R, JAHANSHAHI M.Scheduling workflow applications on the heterogeneous cloud resources[J].Indian Journal of Science and Technology, 2015, 8 (12) .
                            </a>
                        </p>
                        <p id="29">
                            <a id="bibliography_14" target="_blank" href="http://scholar.cnki.net/result.aspx?q=OpenNetVM:a platform for high performance network service chains">

                                <b>[14]</b> ZHANG W, LIU G, ZHANG W, et al.OpenNetVM:a platform for high performance network service chains[C]//Proceedings of Workshop on Hot Topics in Middle Boxes and Network Function Virtualization.New York, USA:ACM Press, 2016:26-31.
                            </a>
                        </p>
                        <p id="31">
                            <a id="bibliography_15" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Wideband communication for implantable and wearable systems">

                                <b>[15]</b> YUCE M R, KEONG H C, CHAE M S.Wideband communication for implantable and wearable systems[J].IEEE Transactions on Microwave Theory and Techniques, 2009, 57 (10) :2597-2604.
                            </a>
                        </p>
                        <p id="33">
                            <a id="bibliography_16" >
                                    <b>[16]</b>
                                 黄秀国, 王戟.分布式协作工作流负载平衡调度[C]//2005年全国软件与应用学术会议论文集.南京:[出版者不详], 2005:516-519.
                            </a>
                        </p>
                        <p id="35">
                            <a id="bibliography_17" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=QHXB201303024&amp;v=MzI2MDI4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUkxPZVplUm9GeS9oVWIzTE5DWFRiTEc0SDlMTXJJOUhZSVFLREg=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[17]</b> 尚世锋, 姜进磊, 郑纬民.CWFlow:支持资源自适应使用的云工作流框架[J].清华大学学报 (自然科学版) , 2013, 53 (1) :415-420.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="JSJC201903002" />
        <input id="dpi" type="hidden" value="300" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JSJC201903002&amp;v=MTg5MjR2UjRUNmo1NE8zenFxQnRHRnJDVVJMT2VaZVJvRnkvaFViM0lMejdCYmJHNEg5ak1ySTlGWm9RS0RIODQ=&amp;uid=WEEvREcwSlJHSldRa1FhcTdWa2FjcW9vRlJTQ2JLUmN2amRwVFpsWThsTT0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="1" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>

</body>
</html>
