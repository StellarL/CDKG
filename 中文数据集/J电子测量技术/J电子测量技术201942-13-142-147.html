

<!DOCTYPE html>
<html>
<head>
    <title>全文阅读--XML全文阅读--中国知网</title>
    <link rel="icon" href="/kxreader/favicon.ico" />
    <link rel="shortcut Icon" href="/kxreader/favicon.ico" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="文献 XML KBASE CNKI 中国知网" />
    <meta name="description" content="XML文献检索" />
    <script type="text/javascript">
        var APPPATH = '/kxreader';
    </script>

</head>

<body>

    
<script type="text/javascript" src="//login.cnki.net/TopLogin/api/loginapi/get?type=top&amp;localCSS=&amp;returnurl=%2f%2fkns.cnki.net%2f%2fKXReader%2fDetail%3fTIMESTAMP%3d637135678771037500%26DBCODE%3dCJFD%26TABLEName%3dCJFDLAST2019%26FileName%3dDZCL201913026%26RESULT%3d1%26SIGN%3dyEWJnbhnwU2yZhSYPaG88Mhl%252fVI%253d"></script>

<div id="headerBox" class="header">
    <div class="topbar">
        <div class="textalign">
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=DZCL201913026&amp;align=md">
                <i class="icon-cen active" title="居中对齐"></i>
            </a>
            <a href="/kxreader/Detail?dbcode=CJFD&amp;filename=DZCL201913026&amp;align=lt">
                <i class="icon-left " title="左对齐"></i>
            </a>
        </div>
        <h6 class="free-tip"><i class="icon"></i>HTML阅读开放试用阶段，欢迎体验！</h6>
    </div>
</div>


    



<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DZCL201913026&amp;v=MTE2ODl1WnRGeXJsV3I3SklUZklZckc0SDlqTnJJOUhZb1FLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlo=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>

    <div class="main">

        

    <div class="sidebar-a">
        <!--sidebar start-->
        <div class="sidenav">
            <div class="arrow"><span></span></div>
            <!--sidebar_list start-->
            <dl class="sidenav-list">
                    <dt class="tit">目录结构</dt>
                            <dd class="guide">
                                    <p><a href="#35" data-title="&lt;b&gt;0 引  言&lt;/b&gt; "><b>0 引  言</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#38" data-title="&lt;b&gt;1 总体方案设计&lt;/b&gt; "><b>1 总体方案设计</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#42" data-title="&lt;b&gt;2 系统硬件设计&lt;/b&gt; "><b>2 系统硬件设计</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#44" data-title="&lt;b&gt;2.1 单片机最小系统&lt;/b&gt;"><b>2.1 单片机最小系统</b></a></li>
                                                <li><a href="#47" data-title="&lt;b&gt;2.2 电机转速采集模块&lt;/b&gt;"><b>2.2 电机转速采集模块</b></a></li>
                                                <li><a href="#52" data-title="&lt;b&gt;2.3 蓝牙模块&lt;/b&gt;"><b>2.3 蓝牙模块</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#56" data-title="&lt;b&gt;3 系统软件设计&lt;/b&gt; "><b>3 系统软件设计</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#57" data-title="&lt;b&gt;3.1 单片机软件设计&lt;/b&gt;"><b>3.1 单片机软件设计</b></a></li>
                                                <li><a href="#60" data-title="&lt;b&gt;3.2 增量式PID控制算法和PWM调速设计&lt;/b&gt;"><b>3.2 增量式PID控制算法和PWM调速设计</b></a></li>
                                                <li><a href="#77" data-title="&lt;b&gt;3.3 APP客户端软件设计&lt;/b&gt;"><b>3.3 APP客户端软件设计</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#88" data-title="&lt;b&gt;4 实验结果与分析&lt;/b&gt; "><b>4 实验结果与分析</b></a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#89" data-title="&lt;b&gt;4.1 数据库测试&lt;/b&gt;"><b>4.1 数据库测试</b></a></li>
                                                <li><a href="#92" data-title="&lt;b&gt;4.2 振荡器转速测试&lt;/b&gt;"><b>4.2 振荡器转速测试</b></a></li>
                                                <li><a href="#96" data-title="&lt;b&gt;4.3 系统整体测试&lt;/b&gt;"><b>4.3 系统整体测试</b></a></li>
                                    </ul>
                            </dd>
                            <dd class="guide">
                                    <p><a href="#101" data-title="&lt;b&gt;5 结  论&lt;/b&gt; "><b>5 结  论</b></a><i></i></p>
                                                            </dd>
                            <dd class="guide">
                                    <p><a href="#" data-title="文内图表 ">文内图表</a><i></i></p>
                                                                    <ul class="contentbox">
                                                <li><a href="#40" data-title="图1 系统结构">图1 系统结构</a></li>
                                                <li><a href="#46" data-title="图2 单片机最小系统">图2 单片机最小系统</a></li>
                                                <li><a href="#54" data-title="图3 蓝牙模块">图3 蓝牙模块</a></li>
                                                <li><a href="#59" data-title="图4 单片机程序流程">图4 单片机程序流程</a></li>
                                                <li><a href="#62" data-title="图5 增量式PID控制系统">图5 增量式PID控制系统</a></li>
                                                <li><a href="#80" data-title="图6 客户端程序流程">图6 客户端程序流程</a></li>
                                                <li><a href="#91" data-title="图7 数据库测试结果">图7 数据库测试结果</a></li>
                                                <li><a href="#94" data-title="&lt;b&gt;表1 电机转速测试结果&lt;/b&gt;"><b>表1 电机转速测试结果</b></a></li>
                                                <li><a href="#98" data-title="图8 系统整体测试结果">图8 系统整体测试结果</a></li>
                                    </ul>
                            </dd>
                                    <dd class="guide">
                                        <h6>
                                            <p><a href="#a_bibliography">参考文献</a> </p>
                                        </h6>
                                    </dd>

            </dl>
        </div>
        <!--sidebar end-->
        &nbsp;
        <!--此处有一空格符 勿删-->
    </div>

                <div class="sidebar-b three-collumn" style="width:0;">
            <div class="refer" style="width: 0;">
                <div class="arrow off" title="参考文献"><span></span></div>
                <div class="js-scrollbox" >
                    
                    <div class="subbox active">
                        <h4>
                            <span class="tit">参考文献</span>
                            <a class="close" href="javascript:void(0)">x</a>
                        </h4>
                        <div class="side-scroller">
                            <ul class="refer-list">
                                <li id="3">


                                    <a id="bibliography_1" title=" 郭锡华.静脉输液用药监控的回顾性分析[J].中国药物与临床, 2005, 5 (11) :878-879." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YWLC200511036&amp;v=MDU5MjFyQ1VSN3FmWnVadEZ5cmxXcjdJUERySGJiRzRIdFROcm85R1lvUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0Y=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[1]</b>
                                         郭锡华.静脉输液用药监控的回顾性分析[J].中国药物与临床, 2005, 5 (11) :878-879.
                                    </a>
                                </li>
                                <li id="5">


                                    <a id="bibliography_2" title=" 林瑞来.难溶性药物溶解度的提高方法[J].中国医药指南, 2010, 8 (3) :32-33." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YYXK201003020&amp;v=MDIxMTJySTlIWklRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVI3cWZadVp0RnlybFdyN0lQRFRUWmJHNEg5SE0=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[2]</b>
                                         林瑞来.难溶性药物溶解度的提高方法[J].中国医药指南, 2010, 8 (3) :32-33.
                                    </a>
                                </li>
                                <li id="7">


                                    <a id="bibliography_3" title=" 刘海成.AVR单片机原理及测控工程应用:基于ATmega48/ATmega16[M].北京:北京航空航天大学出版社, 2008." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CBBD&amp;filename=9787811242164001&amp;v=MDY4NDE3M0lLVjhVWEZxekdidTVIOVBJclk1RFlPc1BEUk04enhVU21EZDlTSDduM3hFOWZidm5LcmlmWmVadkZ5bm1V&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[3]</b>
                                         刘海成.AVR单片机原理及测控工程应用:基于ATmega48/ATmega16[M].北京:北京航空航天大学出版社, 2008.
                                    </a>
                                </li>
                                <li id="9">


                                    <a id="bibliography_4" title=" 陈遵银, 葛银茂.基于光码盘传感器的直流电机测速[J].计量技术, 2002 (1) :29-29." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JLJS200201012&amp;v=MDk4NTQ5RVpvUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3FmWnVadEZ5cmxXcjdJTHlIQmZiRzRIdFBNcm8=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[4]</b>
                                         陈遵银, 葛银茂.基于光码盘传感器的直流电机测速[J].计量技术, 2002 (1) :29-29.
                                    </a>
                                </li>
                                <li id="11">


                                    <a id="bibliography_5" title=" XU J B, YIN X Y, CUI X M, et al.A realization method of rotating speed measurement based on different M/T[C].Advances in Energy Science &amp;amp; Environment Engineering, 2017:020015." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=A realization method of rotating speed measurement based on different M/T">
                                        <b>[5]</b>
                                         XU J B, YIN X Y, CUI X M, et al.A realization method of rotating speed measurement based on different M/T[C].Advances in Energy Science &amp;amp; Environment Engineering, 2017:020015.
                                    </a>
                                </li>
                                <li id="13">


                                    <a id="bibliography_6" title=" 曹然彬.基于CC2541芯片的蓝牙数据采集系统的设计与实现[J].电子科学技术, 2017, 4 (4) :12-15." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DKJS201704004&amp;v=MDcwNTh0R0ZyQ1VSN3FmWnVadEZ5cmxXcjdJSVNiQmZiRzRIOWJNcTQ5RllJUUtESDg0dlI0VDZqNTRPM3pxcUI=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[6]</b>
                                         曹然彬.基于CC2541芯片的蓝牙数据采集系统的设计与实现[J].电子科学技术, 2017, 4 (4) :12-15.
                                    </a>
                                </li>
                                <li id="15">


                                    <a id="bibliography_7" title=" 邹益民, 相惠清, 宗敏.一种基于手机蓝牙的短距无线测控技术及其应用[J].电子测试, 2016 (19) :45-47." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WDZC201619019&amp;v=MDM0Mjc0SDlmTnBvOUViWVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1WnRGeXJsV3I3SU1pblJiYkc=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[7]</b>
                                         邹益民, 相惠清, 宗敏.一种基于手机蓝牙的短距无线测控技术及其应用[J].电子测试, 2016 (19) :45-47.
                                    </a>
                                </li>
                                <li id="17">


                                    <a id="bibliography_8" title=" 吴强, 韩震宇, 李程.基于增量式PID算法的无刷直流电机PWM调速研究[J].机电工程技术, 2013 (3) :63-65." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JXKF201303028&amp;v=MTM4ODBESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3FmWnVadEZ5cmxXcjdJTHpYQWFMRzRIOUxNckk5SGJJUUs=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[8]</b>
                                         吴强, 韩震宇, 李程.基于增量式PID算法的无刷直流电机PWM调速研究[J].机电工程技术, 2013 (3) :63-65.
                                    </a>
                                </li>
                                <li id="19">


                                    <a id="bibliography_9" title=" 张立勋, 沈锦华, 路敦民, 等.AVR单片机实现的直流电机PWM调速控制器[J].机械与电子, 2004, 22 (4) :29-32." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JXYD200404009&amp;v=MTE0MTFNcTQ5RmJZUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3FmWnVadEZ5cmxXcjdJTHpYU2FyRzRIdFg=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[9]</b>
                                         张立勋, 沈锦华, 路敦民, 等.AVR单片机实现的直流电机PWM调速控制器[J].机械与电子, 2004, 22 (4) :29-32.
                                    </a>
                                </li>
                                <li id="21">


                                    <a id="bibliography_10" title=" 历风满.数字PID控制算法的研究[J].辽宁大学学报 (自然科学版) , 2005, 32 (4) :367-370." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=LNDZ200504024&amp;v=Mjk2NjY0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3FmWnVadEZ5cmxXcjdJS1NQUGRMRzRIdFRNcTQ5SFlJUUtESDg0dlI=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[10]</b>
                                         历风满.数字PID控制算法的研究[J].辽宁大学学报 (自然科学版) , 2005, 32 (4) :367-370.
                                    </a>
                                </li>
                                <li id="23">


                                    <a id="bibliography_11" title=" CHEN X, HUANG D G, HUANG Y P, et al.Digital PID controller for brushless DC motor based on AVR microcontroller[C].IEEEInternational Conference on Mechatronics &amp;amp; Automation.IEEE, 2009:246-251." target="_blank"
                                       href="http://scholar.cnki.net/result.aspx?q=Digital PID controller for brushless DC motor based on AVR microcontroller">
                                        <b>[11]</b>
                                         CHEN X, HUANG D G, HUANG Y P, et al.Digital PID controller for brushless DC motor based on AVR microcontroller[C].IEEEInternational Conference on Mechatronics &amp;amp; Automation.IEEE, 2009:246-251.
                                    </a>
                                </li>
                                <li id="25">


                                    <a id="bibliography_12" title=" 陈新宁, 张丽梅, 刘寅桐.PID的数字化算法在自动化测试系统中的应用[J].国外电子测量技术, 2006, 25 (4) :46-47." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=GWCL200604025&amp;v=MjY2MjdmWnVadEZ5cmxXcjdJSWpySVlyRzRIdGZNcTQ5SFlZUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3E=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[12]</b>
                                         陈新宁, 张丽梅, 刘寅桐.PID的数字化算法在自动化测试系统中的应用[J].国外电子测量技术, 2006, 25 (4) :46-47.
                                    </a>
                                </li>
                                <li id="27">


                                    <a id="bibliography_13" >
                                        <b>[13]</b>
                                     李宁.Android开发权威指南[M].2版.北京:人民邮电出版社, 2013.</a>
                                </li>
                                <li id="29">


                                    <a id="bibliography_14" title=" 马获蕾, 汤海凤.Android系统中SQLite数据库的研究[J].电脑知识与技术, 2013 (28) :6243-6245." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DNZS201328001&amp;v=MDQ1ODFIODR2UjRUNmo1NE8zenFxQnRHRnJDVVI3cWZadVp0RnlybFdyN0lJU1BSZmJHNEg5TE9wNDlGWllRS0Q=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[14]</b>
                                         马获蕾, 汤海凤.Android系统中SQLite数据库的研究[J].电脑知识与技术, 2013 (28) :6243-6245.
                                    </a>
                                </li>
                                <li id="31">


                                    <a id="bibliography_15" title=" 习振华, 刘映杰, 陶维维, 等.SQLite在无线数据采集系统中的应用[J].电子测量技术, 2011, 34 (3) :117-121." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DZCL201103027&amp;v=MDUxNTN5cmxXcjdJSVRmSVlyRzRIOURNckk5SFk0UUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3FmWnVadEY=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[15]</b>
                                         习振华, 刘映杰, 陶维维, 等.SQLite在无线数据采集系统中的应用[J].电子测量技术, 2011, 34 (3) :117-121.
                                    </a>
                                </li>
                                <li id="33">


                                    <a id="bibliography_16" title=" LI X, SHEN F, LI D S.Application development of bluetooth low energy based on android system[J].Journal of Chongqing University of Science and Technology (Natural Sciences Edition) , 2014, 16 (5) :133-136." target="_blank"
                                       href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=CQSG201405037&amp;v=MDU1NjFyQ1VSN3FmWnVadEZ5cmxXcjdJSmp6WWFiRzRIOVhNcW85R1k0UUtESDg0dlI0VDZqNTRPM3pxcUJ0R0Y=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                        <b>[16]</b>
                                         LI X, SHEN F, LI D S.Application development of bluetooth low energy based on android system[J].Journal of Chongqing University of Science and Technology (Natural Sciences Edition) , 2014, 16 (5) :133-136.
                                    </a>
                                </li>
                            </ul>
                            <div style='display: none;' class="zqscroller" >
                                <h4 class="">附加材料</h4>
                                <ul></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            &nbsp;
            <!--此处有一空格符 勿删-->
        </div>

        
    <div class="content">



        <!--tips start-->
                            <div class="tips">
                    <a href="http://navi.cnki.net/KNavi/JournalDetail?pcode=CJFD&amp;pykm=DZCL" target="_blank">电子测量技术</a>
                2019,42(13),142-147 DOI:10.19651/j.cnki.emt.1902627            </div>
        <!--tips end-->
            <div class="top-title">
                <h1 class="title">
                    <span class="vm"><b>基于Android的医用振荡器设计与实现</b></span>
                                    </h1>

            </div>
                        <h2>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E8%B5%B5%E4%BC%9F%E5%85%B5&amp;code=39248928&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">赵伟兵</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E4%B8%A5%E8%8D%A3%E5%9B%BD&amp;code=15444286&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">严荣国</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%88%98%E7%8E%89%E5%BF%A0&amp;code=33406927&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">刘玉忠</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%88%98%E4%BA%9A%E8%90%8D&amp;code=38975762&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">刘亚萍</a>
                                <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=au&amp;skey=%E5%AD%99%E7%90%A6&amp;code=37296584&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">孙琦</a>
                </h2>
                    <h2>
                    <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=in&amp;skey=%E4%B8%8A%E6%B5%B7%E7%90%86%E5%B7%A5%E5%A4%A7%E5%AD%A6%E5%8C%BB%E7%96%97%E5%99%A8%E6%A2%B0%E4%B8%8E%E9%A3%9F%E5%93%81%E5%AD%A6%E9%99%A2&amp;code=0256814&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">上海理工大学医疗器械与食品学院</a>
            </h2>

        
<div class="link">
    <a id="aexport" class="icon icon-output"  onclick="" href="javascript:void(0);"><i></i>导出/参考文献</a>
    
    <span class="shareBoard" onmouseover="$('#sharedet').show();$('#this').addClass('shareBoardCUR')" onmouseout="$('#sharedet').hide();$('#this').removeClass('shareBoardCUR')">
        <a class="icon icon-share" href="#"><i></i>分享<em></em></a>
        <ul class="shareHide" id="sharedet" style="display: none;">
            <li><a title="复制链接" class="copy" onclick="" href="#"><i></i>复制链接</a></li>
            <li><a title="分享到新浪微博" class="xl" onclick="" href="javascript:common.ShareAction('xl');"><i></i>新浪微博</a></li>
            <li>
                <a title="分享到微信" class="wx" onclick="" href="#"><i></i>微信扫一扫</a>
                <div class="qrcode"><img src='' alt='' /></div>
            </li>
        </ul>

    </span>
    
    <a id="RefTrack" title="创建引文跟踪" class="icon icon-track" onclick="" href="javascript:void(0);"> <i></i>创建引文跟踪 </a>
    <a id="ashoucang" title="收藏" class="icon icon-favor" onclick="" href="javascript:void(0);"><i></i>收藏</a>
    <a class="icon icon-print" onclick="window.print();" href="javascript:void(0);"><i></i>打印</a>
    
    <!--版本切换 end-->
</div>
                            <div class="data" id="a_abstract">
                <span class="keys">摘<span style="font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;</span>要：</span>
                <p>为了辅助医护人员高效完成药物溶解过程, 提出了一种基于Android的医用振荡器系统。系统由APP客户端和振荡器2部分组成, 实现以药物性质为导向的粉剂药品快速溶解过程。APP客户端实现了界面的设计、数据库的搭建以及蓝牙的连接与通信等功能;振荡器以AVR单片机为主控制器, 采用由PID控制算法、PWM技术和测速装置所构成的闭环控制系统来驱动无刷直流电机运转。客户端存储药品信息供振荡器调用;用户查询、获取目标振荡参数, 并通过蓝牙间的通信信道将其发送至单片机, 进而控制电机完成药品振荡工作。测试结果表明, APP客户端能够存储不同药物的振荡信息;振荡器可以精确接收振荡参数, 并驱动电机实现由这些参数所决定的振荡过程。</p>
            </div>
                    <div class="data" id="a_keywords">
                <span class="keys">关键词：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Android&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Android;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=SQLite%E6%95%B0%E6%8D%AE%E5%BA%93&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">SQLite数据库;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%95%B0%E5%AD%97PID%E7%AE%97%E6%B3%95&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">数字PID算法;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=AVR%E5%8D%95%E7%89%87%E6%9C%BA&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">AVR单片机;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=%E6%8C%AF%E8%8D%A1%E5%99%A8&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">振荡器;</a>
                </p>
            </div>
        
        <!--brief start-->
        
            <div class="brief">
                    <p>
                            <b>作者简介：</b>
                                                        <span>
                                    赵伟兵, 硕士研究生, 主要研究方向为医用电子仪器的研究。;
                                </span>
                                <span>
                                    *严荣国, 工学博士, 副教授, 主要研究方向为嵌入式系统、Android和iOS在医疗器械领域中的应用。E-mail:yanrongguo@usst.edu.cn;
                                </span>
                    </p>
                                    <p><b>收稿日期：</b>2019-01</p>

                    <p>

                            <b>基金：</b>
                                                        <span>2017年度上海市教委本科重点课程项目 (2017-40-340) 资助;</span>
                    </p>
            </div>
                    <h1><b>Design and realization of medical oscillator based on Android</b></h1>
                    <h2>
                    <span>Zhao Weibing</span>
                    <span>Yan Rongguo</span>
                    <span>Liu Yuzhong</span>
                    <span>Liu Yaping</span>
                    <span>Sun Qi</span>
            </h2>
                    <h2>
                    <span>School of Medical Instrument and Food Engineering, University of Shanghai for Science and Technology</span>
            </h2>
                            <div class="data" id="a_abstractEN">
                <span class="keys">Abstract：</span>
                <p>In order to assist medical staff to efficiently complete the drug dissolution process, a medical oscillator system based on Android is proposed. The system consists of two parts: the APP client and the oscillator, which realizes the rapid dissolution process of powder medicines guided by drug properties. The APP client realizes the functions of interface design, database construction and Bluetooth connection and communication. The oscillator is based on the AVR microcontroller, and adopts the closed-loop control system composed of PID control algorithm, PWM technology and speed measuring device to drive the operation of brushless DC motor. The client stores the drug information for the oscillator call; the user queries and acquires the target oscillation parameter, and sends them to the microcontroller through the communication channel between the Bluetooth, and then controls the motor to complete the drug oscillation task. The test results show that the APP client can store the oscillation information of different drugs; the oscillator can accurately receive the oscillation parameters and drive the motor to realize the oscillation process determined by these parameters.</p>
            </div>
                    <div class="data" id="a_keywordsEN">
                <span class="keys">Keyword：</span>
                <p>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=Android&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">Android;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=SQLite%20database&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">SQLite database;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=digital%20PID%20arithmetic&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">digital PID arithmetic;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=AVR%20microcontroller&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">AVR microcontroller;</a>
                        <a href="/kcms/detail/knetsearch.aspx?dbcode=CJFD&amp;sfield=kw&amp;skey=oscillator&amp;code=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" target="_blank">oscillator;</a>
                </p>
            </div>
                    <div class="brief">
                
                    <p>
                                            </p>
                                    <p><b>Received：</b> 2019-01</p>
                                    <p>
                                            </p>
            </div>


        <!--brief start-->
                        <h3 id="35" name="35" class="anchor-tag"><b>0 引  言</b></h3>
                <div class="p1">
                    <p id="36">随着社会的不断进步, 中国的医疗行业飞速发展。在医疗卫生单位, 药物的溶解配置是医院工作中必不可少的一部分, 尤其在静脉输液方面。有资料显示, 中国患者使用静脉输注给药方式的比例高达70%, 超出国外20%～30%<citation id="103" type="reference"><link href="3" rel="bibliography" /><sup>[<a class="sup">1</a>]</sup></citation>。药物种类随着输液量的增加而不断增多, 药物间的配比与溶解配置也日渐复杂。使用注射粉剂药品时, 传统的溶解方式为向瓶内注入溶媒, 然后通过人工晃动来加速其溶解。针对青霉素和头孢等难溶性粉剂药物<citation id="104" type="reference"><link href="5" rel="bibliography" /><sup>[<a class="sup">2</a>]</sup></citation>以及一些易产生气泡的药物, 该方式不仅耗时费力, 给医护人员带来沉重的工作负荷, 也会造成药物浪费和药效不佳等问题。近年, 医院也逐渐采用药物振荡器解决上述问题, 所购买的振荡器种类多样。振荡器通常由震荡元件和驱动装置组成, 其中驱动装置直接影响着仪器功能的多少。低价振荡器的驱动装置往往结构简单, 功能单一, 通常以预置的恒定速度持续运转, 启动阶段稳定性差, 药品易脱落。外购振荡器 (SK-L330-Pro, 美国) 外观结构紧凑, 运行平稳, 驱动装置具有电子调节速度和运行时间等功能, 可调节性和可控性有所改善。但此类振荡器购买成本和维修费用都较高, 并且调整参数过程较为繁琐, 加减速时间为固定值以及并未充分考虑药物的性质, 不能有效解决传统方式所带来的弊端。</p>
                </div>
                <div class="p1">
                    <p id="37">因此, 本文采用可靠的电机驱动、高效的控制算法和稳定的APP客户端, 设计以药物性质为导向的圆周式振荡器。仪器通过嵌入式计算机技术和自动化控制理论, 利用Android平台和微处理器共同控制振荡系统平稳安全运行, 实现以药品振荡参数 (起振时间、振荡速度和振荡时间) 所决定的振荡任务, 辅助医护人员快速完成药品的溶解过程。</p>
                </div>
                <h3 id="38" name="38" class="anchor-tag"><b>1 总体方案设计</b></h3>
                <div class="p1">
                    <p id="39">基于Android的医用振荡器系统总体方案如图1所示, 系统由APP客户端 (上位机) 和振荡器 (下位机) 两部分组成。APP客户端通过Android Studio平台实现界面的设计、数据库的搭建和蓝牙通信等功能。数据库采用SQLite数据库, 存储药品信息和振荡参数。用户操作界面供用户快速调用数据库, 获取振荡参数, 并通过蓝牙将数据传输至下位机, 为药物溶解做好前期工作。振荡器以ATmega16为主控制器, 主要包括无刷直流电机的驱动、测速装置、控制面板和蓝牙模块等, 其中测速装置由光电耦合元件和码盘组成, 完成电机转速的采集;控制面板由LCD显示屏和按键开关两部分组成。</p>
                </div>
                <div class="area_img" id="40">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/DZCL201913026_040.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图1 系统结构" src="Detail/GetImg?filename=images/DZCL201913026_040.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图1 系统结构  <a class="btn-zoomin" href="Detail/GetImg?filename=images/DZCL201913026_040.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="41">在实际应用中, APP客户端首先与下位机蓝牙模块完成搜索、配对和建立连接等任务, 然后通过串口通信方式将目标参数发送至下位机, 主控制器在解析数据包后将调用各功能模块, 驱动电机按要求运转, 从而实现以药品性质为导向的振荡工作。</p>
                </div>
                <h3 id="42" name="42" class="anchor-tag"><b>2 系统硬件设计</b></h3>
                <div class="p1">
                    <p id="43">下位机电路板集成无刷直流电机驱动接口、ATmega16最小系统电路、光电耦合元件、码盘、LCD显示屏、按键开关以及蓝牙模块。单片机产生脉宽调制信号 (pulse width modulation, PWM) , 并通过闭环速度调节控制系统来驱动电机运转;利用光电耦合元件、码盘以及单片机输入捕捉功能来实现电机转速的采集;按键模块能够实现左键开启和右键紧急停止等功能, 左键能够一键实现由振荡参数所决定的电机工作状态;LCD显示屏以数字形式直观显示振荡速度和振荡时间;蓝牙模块利用串口通信以及透传模式接收APP客户端发送的数据。</p>
                </div>
                <h4 class="anchor-tag" id="44" name="44"><b>2.1 单片机最小系统</b></h4>
                <div class="p1">
                    <p id="45">单片机采用Atmel公司所推出的ATmega16芯片, 它是一款拥有先进RISC结构的8 bit低功耗微处理器。ATmega16内置资源丰富, 外设功能强大, 拥有16 KB的可编程Flash<citation id="105" type="reference"><link href="7" rel="bibliography" /><sup>[<a class="sup">3</a>]</sup></citation>。如图2所示, 系统采用振荡频率为8 MHz的内部晶振, 引脚RXD和TXD通过10 k电阻分别与蓝牙模块的TXD和RXD相连, 实现串口通信;引脚PB3 (OC0) 与电机的M_PWM接口相连, 定时器T0输出相位修正PWM脉冲驱动电机运行;PD6 (ICP) 与电机的M_Speed接口相连, 利用定时器T2的捕捉功能获得速度值;PD3～PD5、PD7分别与LCD显示屏各接口相连, 实现LCD的功能显示。</p>
                </div>
                <div class="area_img" id="46">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/DZCL201913026_046.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图2 单片机最小系统" src="Detail/GetImg?filename=images/DZCL201913026_046.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图2 单片机最小系统  <a class="btn-zoomin" href="Detail/GetImg?filename=images/DZCL201913026_046.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="47" name="47"><b>2.2 电机转速采集模块</b></h4>
                <div class="p1">
                    <p id="48">本系统采用光电耦合元件和码盘对电机进行转速检测<citation id="106" type="reference"><link href="9" rel="bibliography" /><sup>[<a class="sup">4</a>]</sup></citation>, 其工作原理为, 电机运行时会带动码盘同步转动, 码盘对侧的光电耦合元件就会产生一连串脉冲信号;将该脉冲信号接入单片机的输入捕捉引脚 (PD6) 。在定时器T2的配合下, 单片机通过算法转换就能够采集到实际转速, 实现转速的精确测量。</p>
                </div>
                <div class="p1">
                    <p id="49">脉冲测速采用测频率方式 (即M法) <citation id="107" type="reference"><link href="11" rel="bibliography" /><sup>[<a class="sup">5</a>]</sup></citation>, M法是指计算单位时间内所产生的脉冲数, 然后通过公式转换为频率。码盘均匀刻有60个大小和形状一致的缺口, 即电机每转动一圈, 光电耦合元件就产生60个脉冲信号。选定时间<i>T</i> s, 在单片机的事件捕捉中断程序中统计所检测的脉冲数, 则通过M法的计算公式为:</p>
                </div>
                <div class="p1">
                    <p id="50" class="code-formula">
                        <mathml id="50"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>S</mi><mo>=</mo><mn>6</mn><mn>0</mn><mfrac><mi>Ν</mi><mrow><mi>Τ</mi><mo>⋅</mo><mn>6</mn><mn>0</mn></mrow></mfrac><mo>=</mo><mfrac><mi>Ν</mi><mi>Τ</mi></mfrac><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>1</mn><mo stretchy="false">) </mo></mrow></math></mathml>
                    </p>
                </div>
                <div class="p1">
                    <p id="51">式中:<i>N</i>为时间<i>T</i> s内测得的脉冲数;<i>S</i>为转换后的实际转速。</p>
                </div>
                <h4 class="anchor-tag" id="52" name="52"><b>2.3 蓝牙模块</b></h4>
                <div class="p1">
                    <p id="53">蓝牙模块设计电路如图3所示, 模块B-0004是基于TI公司的CC2541F256芯片所设计的低功耗蓝牙4.0无线模块<citation id="108" type="reference"><link href="13" rel="bibliography" /><sup>[<a class="sup">6</a>]</sup></citation>。GND为接地端;VCC接3.3 V电压;BRTS设置为低电平;BCMD设置为高电平, 即透传模式;RXD和TXD分别与单片机的TXD和RXD相连, 实现串口通信;COON为高电平时, 表示蓝牙模块已连接, 可外接一个LED来指示连接状态。该模块具有功耗低, 信号强, 抗干扰能力强等特点, 能够快速同手机蓝牙相连, 稳定传输数据。</p>
                </div>
                <div class="area_img" id="54">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/DZCL201913026_054.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图3 蓝牙模块" src="Detail/GetImg?filename=images/DZCL201913026_054.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图3 蓝牙模块  <a class="btn-zoomin" href="Detail/GetImg?filename=images/DZCL201913026_054.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="55">本系统中蓝牙模块设置为从机模式<citation id="109" type="reference"><link href="15" rel="bibliography" /><sup>[<a class="sup">7</a>]</sup></citation>, 采用串口通信与手机蓝牙进行数据传输, 其中波特率为9 600 bps, 数据帧为8 bit数据位, 1 bit停止位, 没有奇偶校验。蓝牙模块主要用来接收APP客户端传输的振荡参数, 其中数据采用字节数组的格式来进行通信。</p>
                </div>
                <h3 id="56" name="56" class="anchor-tag"><b>3 系统软件设计</b></h3>
                <h4 class="anchor-tag" id="57" name="57"><b>3.1 单片机软件设计</b></h4>
                <div class="p1">
                    <p id="58">程序是在C语言编译器GCCAVR中完成的, 并在AVR Studio集成开发环境中进行仿真和调试。单片机程序流程如图4所示, 单片机先对引脚和各功能模块进行配置;随后单片机与手机的蓝牙模块完成配对并建立通信信道, 随时准备进行数据传输;当单片机检测到有数据到达时, 立即触发串口中断服务程序接收振荡数据, 并按统一协议重新解析数据为原始数据;然后不断地检测是否有按键按下, 若key1键按下, 则定时器T2立即对程序进行计时, 同时电机会根据振荡参数和测速模块所反馈的信息依次经历加速、稳定运行和停止运行3个阶段的运转工作;若key2键按下, 不管电机处于任何状态都将会紧急停止, 确保运行安全。经上述步骤, 一次完整的药品振荡过程就完成了。用户可以重新发送新数据或依然使用上次数据, 进行下一次振荡工作。</p>
                </div>
                <div class="area_img" id="59">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/DZCL201913026_059.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图4 单片机程序流程" src="Detail/GetImg?filename=images/DZCL201913026_059.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图4 单片机程序流程  <a class="btn-zoomin" href="Detail/GetImg?filename=images/DZCL201913026_059.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="60" name="60"><b>3.2 增量式PID控制算法和PWM调速设计</b></h4>
                <div class="p1">
                    <p id="61">由于振荡器的振荡速度直接影响着药瓶内溶液做圆周式旋转的程度, 故有必要采用算法使得速度控制更为精准。PID控制技术作为工业控制领域中应用广泛、技术成熟的经典控制理论之一, 完全能够满足本系统对速度稳定性和准确性的要求。如图5所示, 电机调速设计采用闭环负反馈控制方法, 通过增量式数字PID算法和PWM技术来实现对电机转速的精确控制<citation id="110" type="reference"><link href="17" rel="bibliography" /><sup>[<a class="sup">8</a>]</sup></citation>。</p>
                </div>
                <div class="area_img" id="62">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/DZCL201913026_062.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图5 增量式PID控制系统" src="Detail/GetImg?filename=images/DZCL201913026_062.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图5 增量式PID控制系统  <a class="btn-zoomin" href="Detail/GetImg?filename=images/DZCL201913026_062.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="63">在PWM技术中, 占空比<i>α</i>尤为重要, 改变占空比能够使电机两端电压的平均值发生改变, 从而实现对电机的调速控制<citation id="111" type="reference"><link href="19" rel="bibliography" /><sup>[<a class="sup">9</a>]</sup></citation>。本系统采用具有PWM功能的定时器T0输出相位修正的PWM脉冲来对电机进行调速, 其中PWM脉冲的频率设定为2 KHz。相位修正PWM模式采用双斜坡方式, 产生对称脉冲波, 这十分有利于对电机进行控制。根据定时器T0的相位修正PWM工作模式, 通过改变比较匹配寄存器OCR0值就能够得到具有不同占空比的PWM脉冲波。</p>
                </div>
                <div class="p1">
                    <p id="64">PID控制算法的控制规律<citation id="112" type="reference"><link href="21" rel="bibliography" /><link href="23" rel="bibliography" /><link href="25" rel="bibliography" /><sup>[<a class="sup">10</a>,<a class="sup">11</a>,<a class="sup">12</a>]</sup></citation>为:</p>
                </div>
                <div class="p1">
                    <p id="65" class="code-formula">
                        <mathml id="65"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>u</mi><mo stretchy="false"> (</mo><mi>t</mi><mo stretchy="false">) </mo><mo>=</mo><mi>Κ</mi><msub><mrow></mrow><mi>p</mi></msub><mo stretchy="false">[</mo><mtext>e</mtext><mo stretchy="false"> (</mo><mi>t</mi><mo stretchy="false">) </mo><mo>+</mo><mfrac><mn>1</mn><mrow><mi>Τ</mi><msub><mrow></mrow><mi>Ι</mi></msub></mrow></mfrac><mstyle displaystyle="true"><mrow><msubsup><mo>∫</mo><mn>0</mn><mi>t</mi></msubsup><mtext>e</mtext></mrow></mstyle><mo stretchy="false"> (</mo><mi>t</mi><mo stretchy="false">) </mo><mtext>d</mtext><mi>t</mi><mo stretchy="false">]</mo><mo>+</mo><mi>Κ</mi><msub><mrow></mrow><mi>Ρ</mi></msub><mfrac><mrow><mi>Τ</mi><msub><mrow></mrow><mi>D</mi></msub><mtext>d</mtext><mtext>e</mtext><mo stretchy="false"> (</mo><mi>t</mi><mo stretchy="false">) </mo></mrow><mrow><mtext>d</mtext><mo stretchy="false"> (</mo><mi>t</mi><mo stretchy="false">) </mo></mrow></mfrac><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>2</mn><mo stretchy="false">) </mo></mrow></math></mathml>
                    </p>
                </div>
                <div class="p1">
                    <p id="66">式中:e (<i>t</i>) 为设定值与实际值构成的控制偏差, e (<i>t</i>) =<i>r</i> (<i>t</i>) -<i>y</i> (<i>t</i>) ;<i>K</i><sub><i>P</i></sub>为比例增益;<i>T</i><sub><i>I</i></sub>为积分环节的时间常数;<i>T</i><sub><i>D</i></sub>为微分环节的时间常数。</p>
                </div>
                <div class="p1">
                    <p id="67">为了适应计算机控制, 需要进行离散化处理。离散化处理的方法为:以<i>T</i>作为采集周期, <i>k</i>作为采样序号, 则可作如下近似变换:</p>
                </div>
                <div class="p1">
                    <p id="68" class="code-formula">
                        <mathml id="68"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mrow><mo>{</mo><mtable columnalign="left"><mtr><mtd><mi>t</mi><mo>≈</mo><mi>k</mi><mi>Τ</mi><mo stretchy="false"> (</mo><mi>k</mi><mo>=</mo><mn>0</mn><mo>, </mo><mn>1</mn><mo>, </mo><mn>2</mn><mo>, </mo><mo>⋯</mo><mo stretchy="false">) </mo></mtd></mtr><mtr><mtd><mstyle displaystyle="true"><mrow><msubsup><mo>∫</mo><mn>0</mn><mtext>t</mtext></msubsup><mtext>e</mtext></mrow></mstyle><mo stretchy="false"> (</mo><mi>t</mi><mo stretchy="false">) </mo><mtext>d</mtext><mi>t</mi><mo>≈</mo><mi>Τ</mi><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mi>k</mi></munderover><mtext>e</mtext></mstyle><mo stretchy="false"> (</mo><mi>j</mi><mi>Τ</mi><mo stretchy="false">) </mo><mo>=</mo><mi>Τ</mi><mstyle displaystyle="true"><munderover><mo>∑</mo><mn>0</mn><mi>k</mi></munderover><mtext>e</mtext></mstyle><mo stretchy="false"> (</mo><mi>j</mi><mo stretchy="false">) </mo></mtd></mtr><mtr><mtd><mfrac><mrow><mtext>d</mtext><mi>e</mi><mo stretchy="false"> (</mo><mi>t</mi><mo stretchy="false">) </mo></mrow><mrow><mtext>d</mtext><mi>t</mi></mrow></mfrac><mo>≈</mo><mfrac><mrow><mtext>e</mtext><mo stretchy="false"> (</mo><mi>k</mi><mi>Τ</mi><mo stretchy="false">) </mo><mo>-</mo><mtext>e</mtext><mo stretchy="false">[</mo><mo stretchy="false"> (</mo><mi>k</mi><mo>-</mo><mn>1</mn><mo stretchy="false">) </mo><mi>Τ</mi><mo stretchy="false">]</mo></mrow><mi>Τ</mi></mfrac><mo>=</mo><mfrac><mrow><mtext>e</mtext><mo stretchy="false"> (</mo><mi>k</mi><mo stretchy="false">) </mo><mo>-</mo><mtext>e</mtext><mo stretchy="false"> (</mo><mi>k</mi><mo>-</mo><mn>1</mn><mo stretchy="false">) </mo></mrow><mi>Τ</mi></mfrac></mtd></mtr></mtable></mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mrow><mtext> </mtext><mtext> </mtext><mtext> </mtext></mrow><mo stretchy="false"> (</mo><mn>3</mn><mo stretchy="false">) </mo></mrow></math></mathml>
                    </p>
                </div>
                <div class="p1">
                    <p id="69">经上述过程, 得到位置式数字PID算法:</p>
                </div>
                <div class="p1">
                    <p id="70"><mathml id="71"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>u</mi><mo stretchy="false"> (</mo><mi>k</mi><mo stretchy="false">) </mo><mo>=</mo><mi>Κ</mi><msub><mrow></mrow><mi>Ρ</mi></msub><mtext>e</mtext><mo stretchy="false"> (</mo><mi>k</mi><mo stretchy="false">) </mo><mo>+</mo><mi>Κ</mi><msub><mrow></mrow><mi>Ι</mi></msub><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mi>k</mi></munderover><mtext>e</mtext></mstyle><mo stretchy="false"> (</mo><mi>j</mi><mo stretchy="false">) </mo><mo>+</mo><mi>Κ</mi><msub><mrow></mrow><mi>D</mi></msub><mo stretchy="false">[</mo><mtext>e</mtext><mo stretchy="false"> (</mo><mi>k</mi><mo stretchy="false">) </mo><mo>-</mo><mtext>e</mtext><mo stretchy="false"> (</mo><mi>k</mi><mo>-</mo><mn>1</mn><mo stretchy="false">) </mo><mo stretchy="false">]</mo></mrow></math></mathml>      (4) </p>
                </div>
                <div class="p1">
                    <p id="72">根据位置式数字PID算法, 作当前输出与上次输出的差值运算, 得到增量式数字PID算法:</p>
                </div>
                <div class="p1">
                    <p id="73"><i>Δu</i> (<i>k</i>) =<i>u</i> (<i>k</i>) -<i>u</i> (<i>k</i>-1)      (5) </p>
                </div>
                <div class="p1">
                    <p id="74"><i>Δu</i> (<i>k</i>) =<i>K</i><sub><i>P</i></sub>[e (<i>k</i>) -e (<i>k</i>-1) ]+<i>K</i><sub><i>I</i></sub>e (<i>k</i>) +<i>K</i><sub><i>D</i></sub>[e (<i>k</i>) -2e (<i>k</i>-1) +e (<i>k</i>-2) ]      (6) </p>
                </div>
                <div class="p1">
                    <p id="75">式中:<i>K</i><sub><i>I</i></sub>=<i>K</i><sub><i>P</i></sub><i>T</i>/<i>T</i><sub><i>I</i></sub>;<i>K</i><sub><i>D</i></sub>=<i>K</i><sub><i>P</i></sub><i>T</i><sub><i>D</i></sub>/<i>T</i>。</p>
                </div>
                <div class="p1">
                    <p id="76">单片机通过蓝牙模块接收手机端所设定的转速数据<i>r</i> (<i>t</i>) , 同时电机转速采集模块不断将检测到的转速值<i>y</i> (<i>t</i>) 反馈给单片机, 两者进行比较得到偏差值e (<i>t</i>) ;该偏差值作为输入量经增量式数字PID算法得到控制增量<i>Δu</i> (<i>t</i>) ;单片机根据这一控制增量对PWM脉冲进行调制, 从而改变电机两端的平均电压, 实现电机的调速过程。</p>
                </div>
                <h4 class="anchor-tag" id="77" name="77"><b>3.3 APP客户端软件设计</b></h4>
                <div class="p1">
                    <p id="78">上位机软件是基于Google公司发布的Android Studio集成开发环境, 通过常用UI控件、布局、SQLite数据库以及BLE协议架构等完成设计的。设计中所采用的控件为:按钮 (Button) 、编辑框 (EditText) 、菜单 (Menu) 、弹出框 (Dialog) 、搜索框 (SearchView) 、列表框 (ListView) 、线性布局 (LinearLayout) 和帧布局 (FrameLayout) 等<citation id="113" type="reference"><link href="27" rel="bibliography" /><sup>[<a class="sup">13</a>]</sup></citation>。</p>
                </div>
                <div class="p1">
                    <p id="79">APP客户端设计流程如图6所示, 应用软件安置在平板电脑上, 作为对话窗口完成药品参数的设定、用户操作和数据传输。数据库由工作人员将药品信息导入软件, 形成药品库供设备调用;在用户操作中, 用户输入药品名等关键信息进行检索, 就可调用数据库, 获取目标数据;将目标数据打包为十六进制字节数组的格式;当确认发送后, 数据将通过手机蓝牙与下位机配对的蓝牙以串口通信方式发送至下位机单片机, 并以此驱动电机工作。</p>
                </div>
                <div class="area_img" id="80">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/DZCL201913026_080.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图6 客户端程序流程" src="Detail/GetImg?filename=images/DZCL201913026_080.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图6 客户端程序流程  <a class="btn-zoomin" href="Detail/GetImg?filename=images/DZCL201913026_080.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="81">APP客户端设计由用户操作界面、数据库系统以及蓝牙通信组成。用户操作界面实现了用户与设备之间的数据交互, 界面包括Seach View、下拉菜单、确认按钮以及List View。Search View供用户输入药品的通用名或化学名并完成数据查询;下拉菜单显示不同厂家和规格的药品供用户选择;确认按钮用来发送数据至下位机;List View直观反馈药品信息给用户。</p>
                </div>
                <div class="p1">
                    <p id="82">本系统携带药品数据库系统, 数据库采用轻量级SQLite数据库来存储药品信息<citation id="114" type="reference"><link href="29" rel="bibliography" /><sup>[<a class="sup">14</a>]</sup></citation>。数据库中主要存储药品信息和振荡信息, 其中药品信息包括药品通用名、化学名、生产厂家和药品规格;振荡信息包括起振时间、振荡速度和振荡时间。起振时间是指电机从启动加速到指定振荡速度所用的时间;振荡速度是指电机匀速运行的指定速度;振荡时间指电机以振荡速度持续运行的时间。数据库的搭建通常遵循以下过程<citation id="115" type="reference"><link href="31" rel="bibliography" /><sup>[<a class="sup">15</a>]</sup></citation>, 1) 定义数据, 创建数据库;2) 创建对应的数据表;3) 操作数据, 实现数据的增加、删除、更新和查找。用户可以根据实际情况导入所需药品数据, 并能够进行添加、修改或删除等操作;也可以在用户操作界面输入关键字段来检索数据库, 完成目标信息的读取。</p>
                </div>
                <div class="p1">
                    <p id="83">蓝牙通信实现手机与下位机模块间的数据透传。本系统的蓝牙通信开发是基于蓝牙4.0规范, 又称低功耗蓝牙 (bluetooth low energy, BLE) 协议<citation id="116" type="reference"><link href="33" rel="bibliography" /><sup>[<a class="sup">16</a>]</sup></citation>。BLE融合了传统蓝牙、高速蓝牙、低耗能技术三者的核心, 使得该技术具有超低的待机功耗和运行功耗。应用程序使用蓝牙APIs可以按如下操作:</p>
                </div>
                <div class="p1">
                    <p id="84">1) 扫描周边其他蓝牙设备;</p>
                </div>
                <div class="p1">
                    <p id="85">2) 查询与本地蓝牙设配器配对的设备;</p>
                </div>
                <div class="p1">
                    <p id="86">3) 建立RFCOMM信道;</p>
                </div>
                <div class="p1">
                    <p id="87">4) 设备间传输数据。</p>
                </div>
                <h3 id="88" name="88" class="anchor-tag"><b>4 实验结果与分析</b></h3>
                <h4 class="anchor-tag" id="89" name="89"><b>4.1 数据库测试</b></h4>
                <div class="p1">
                    <p id="90">在药品库设定界面, 点击“导入数据”按钮, 该应用就会导入数据库文件至内存中, 其中文件为PC端第三方软件生成的数据库文件 (格式为.bd) 。如图7所示, 第三方软件的数据库表和药品库设定界面列表框所显示的5条数据是一致的。这表明, 本系统所搭建的数据库是可以满足项目需求, 能够实现药品信息的存储。</p>
                </div>
                <div class="area_img" id="91">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/DZCL201913026_091.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图7 数据库测试结果" src="Detail/GetImg?filename=images/DZCL201913026_091.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图7 数据库测试结果  <a class="btn-zoomin" href="Detail/GetImg?filename=images/DZCL201913026_091.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <h4 class="anchor-tag" id="92" name="92"><b>4.2 振荡器转速测试</b></h4>
                <div class="p1">
                    <p id="93">手机端发送振荡速度为500 r/min的药品数据至下位机。在电机稳定运行后, 设计测试程序, 在输入捕捉中断服务程序中, 一方面对脉冲数 (pulseCount) 进行自增操作, 只要检测到脉冲的下降沿, 脉冲数就会加1;同时设置全局变量计数总值 (values) 记录2个脉冲间的计数值并不断进行累加求和。当计数总值超过设定值78 125 (理论计算为10 s) 时, 单片机将会关闭定时器T0, 不再输出PWM脉冲信号, 电机停止运行。如表1所示, 在8个不同时刻分别记录脉冲数和计数总值。</p>
                </div>
                <div class="area_img" id="94">
                    <p class="img_tit"><b>表1 电机转速测试结果</b> <a class="downexcel" onclick="DownLoadReportExcel(this)">导出到EXCEL</a></p>
                    <p class="img_tit"></p>
                    <p class="img_note"></p>
                    <table id="94" border="1"><tr><td rowspan="2"><br />序号</td><td colspan="2"><br />实验值</td><td colspan="2">计算值</td></tr><tr><td><br />计数总值</td><td>脉冲数</td><td>时间/ms</td><td>转速/ (r/min) </td></tr><tr><td><br />1</td><td>78 127</td><td>4 992</td><td>10 000.26</td><td>499.19</td></tr><tr><td><br />2</td><td>78 130</td><td>4 988</td><td>10 000.64</td><td>498.87</td></tr><tr><td><br />3</td><td>78 128</td><td>5 011</td><td>10 000.38</td><td>501.08</td></tr><tr><td><br />4</td><td>78 127</td><td>4 998</td><td>10 000.26</td><td>499.79</td></tr><tr><td><br />5</td><td>78 131</td><td>4 999</td><td>10 000.77</td><td>499.86</td></tr><tr><td><br />6</td><td>78 127</td><td>5 012</td><td>10 000.26</td><td>501.19</td></tr><tr><td><br />7</td><td>78 132</td><td>4 994</td><td>10 000.90</td><td>499.36</td></tr><tr><td><br />8</td><td>78 133</td><td>4 998</td><td>10 001.02</td><td>499.75</td></tr><tr><td><br />均值</td><td>78 129.38</td><td>4 999.13</td><td>10 000.56</td><td>499.88</td></tr></table>
                    <form name="form" action="/kxreader/Detail/DownloadReportExcel" method="POST" style="display:inline">
                        <input type="hidden" name="hidTable" value="" />
                        <input type="hidden" name="hidFileName" value="" />
                    </form>
                    <p class="img_note"></p>
                    <p class="img_note"></p>
                </div>
                <div class="p1">
                    <p id="95">根据定时器计数原理, 计数值可转化为时间值, 测试中单步间隔为0.128 ms, 故计算总值为78 125可以折算为10 s。由式 (1) 可知, 在8次测试中测量转速值均在500 r/min附近, 这与APP客户端所传输的数据一致, 也进一步证明了基于PID算法和PWM技术的闭环调速控制具有较高的可靠性和准确性。</p>
                </div>
                <h4 class="anchor-tag" id="96" name="96"><b>4.3 系统整体测试</b></h4>
                <div class="p1">
                    <p id="97">硬件系统上电后, 打开手机应用软件和手机蓝牙功能, 软件立即扫描周围蓝牙设备, 连接名称为BLE的蓝牙模块, 软件跳转至主界面, 同时硬件的蓝牙模块状态指示灯点亮;在用户操作界面, 输入通用名为“头孢尼西钠”的药品, 并进行数据查询;下拉菜单显示该药品的规格和厂家供用户选择, 这里选择的规格为“1 g”, 厂家为“浙江亚太”;点击“确定”按钮, 振荡参数就会发送至下位机;下位机在接收完数据后, 立即向上位机发送“ok”字符, 同时用户操作界面弹出“接收成功”字样, 实现与用户良好交互。如图8所示, 用户操作界面所显示的信息和下位机显示屏所显示的振荡参数均符合上述测试操作。</p>
                </div>
                <div class="area_img" id="98">
                                <a class="zoom-in" href="Detail/GetImg?filename=images/DZCL201913026_098.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">
                                    <img alt="图8 系统整体测试结果" src="Detail/GetImg?filename=images/DZCL201913026_098.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
                                </a>
                                <p class="img_tit">图8 系统整体测试结果  <a class="btn-zoomin" href="Detail/GetImg?filename=images/DZCL201913026_098.jpg&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!"></a><a class="downimg">&nbsp;&nbsp;下载原图</a></p>
                            <p class="img_tit"></p>

                </div>
                <div class="p1">
                    <p id="99">按下左键, 同时使用秒表进行计时, 电机从启动到加速至指定转速所用时间为9.94 s, 电机运行119.68 s后, 下位机自动停止运行。秒表记录数据均十分接近数据库所设定的振荡参数。</p>
                </div>
                <div class="p1">
                    <p id="100">由上述测试结果可知, 通过调用客户端的数据库, 并利用蓝牙进行串口通信控制下位机系统的运行是符合项目需求和系统设计的。</p>
                </div>
                <h3 id="101" name="101" class="anchor-tag"><b>5 结  论</b></h3>
                <div class="p1">
                    <p id="102">基于Android系统所设计的医用振荡器, 分别完成了振荡器的硬件、软件电路设计和手机端应用程序设计等工作, 并对系统进行了测试。在APP客户端, SQLite数据库能够根据医院要求存储不同规格的药品信息, 所设计的界面具有布局合理、操作简单和友好交互等特点;在被控制端, 蓝牙模块通过串口通信及透传模式, 能够稳定接收控制端振荡参数;单片机能够根据振荡参数驱动电机完成不同药物的振荡工作;控制面板能够满足医护人员简单操作和人机交互。通过嵌入式计算机技术控制振荡器完成工作, 满足了不同药品的振荡要求, 避免药物浪费, 有利于减轻医护人员工作负荷并提高工作效率, 具有一定的实用价值。后续的研究可以考虑药品信息与医院的HIS系统对接, 进一步提高医院工作的效率和质量。</p>
                </div>

        <!--brief end-->
        
        <!--conten left  end-->
        <!--增强附件-->
        

        <!--reference start-->
            <div class="reference anchor-tag" id="a_bibliography">
                    <h3>参考文献</h3>
                                        <p id="3">
                            <a id="bibliography_1" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YWLC200511036&amp;v=MDgyNTJPM3pxcUJ0R0ZyQ1VSN3FmWnVadEZ5cmxXcjdJUERySGJiRzRIdFROcm85R1lvUUtESDg0dlI0VDZqNTQ=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[1]</b> 郭锡华.静脉输液用药监控的回顾性分析[J].中国药物与临床, 2005, 5 (11) :878-879.
                            </a>
                        </p>
                        <p id="5">
                            <a id="bibliography_2" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=YYXK201003020&amp;v=MDY3MjBQRFRUWmJHNEg5SE1ySTlIWklRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVI3cWZadVp0RnlybFdyN0k=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[2]</b> 林瑞来.难溶性药物溶解度的提高方法[J].中国医药指南, 2010, 8 (3) :32-33.
                            </a>
                        </p>
                        <p id="7">
                            <a id="bibliography_3" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CBBD&amp;filename=9787811242164001&amp;v=MTg3NDYzSUtWOFVYRnF6R2J1NUg5UElyWTVEWU9zUERSTTh6eFVTbURkOVNIN24zeEU5ZmJ2bktyaWZaZVp2RnlubVU3&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[3]</b> 刘海成.AVR单片机原理及测控工程应用:基于ATmega48/ATmega16[M].北京:北京航空航天大学出版社, 2008.
                            </a>
                        </p>
                        <p id="9">
                            <a id="bibliography_4" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JLJS200201012&amp;v=MjY2NzA1NE8zenFxQnRHRnJDVVI3cWZadVp0RnlybFdyN0lMeUhCZmJHNEh0UE1ybzlFWm9RS0RIODR2UjRUNmo=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[4]</b> 陈遵银, 葛银茂.基于光码盘传感器的直流电机测速[J].计量技术, 2002 (1) :29-29.
                            </a>
                        </p>
                        <p id="11">
                            <a id="bibliography_5" target="_blank" href="http://scholar.cnki.net/result.aspx?q=A realization method of rotating speed measurement based on different M/T">

                                <b>[5]</b> XU J B, YIN X Y, CUI X M, et al.A realization method of rotating speed measurement based on different M/T[C].Advances in Energy Science &amp; Environment Engineering, 2017:020015.
                            </a>
                        </p>
                        <p id="13">
                            <a id="bibliography_6" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DKJS201704004&amp;v=MTYwODZHNEg5Yk1xNDlGWUlRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVI3cWZadVp0RnlybFdyN0lJU2JCZmI=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[6]</b> 曹然彬.基于CC2541芯片的蓝牙数据采集系统的设计与实现[J].电子科学技术, 2017, 4 (4) :12-15.
                            </a>
                        </p>
                        <p id="15">
                            <a id="bibliography_7" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=WDZC201619019&amp;v=MTUwNDNVUjdxZlp1WnRGeXJsV3I3SU1pblJiYkc0SDlmTnBvOUViWVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckM=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[7]</b> 邹益民, 相惠清, 宗敏.一种基于手机蓝牙的短距无线测控技术及其应用[J].电子测试, 2016 (19) :45-47.
                            </a>
                        </p>
                        <p id="17">
                            <a id="bibliography_8" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JXKF201303028&amp;v=MTQzMzZXcjdJTHpYQWFMRzRIOUxNckk5SGJJUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0ZyQ1VSN3FmWnVadEZ5cmw=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[8]</b> 吴强, 韩震宇, 李程.基于增量式PID算法的无刷直流电机PWM调速研究[J].机电工程技术, 2013 (3) :63-65.
                            </a>
                        </p>
                        <p id="19">
                            <a id="bibliography_9" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=JXYD200404009&amp;v=MjMzNDRhckc0SHRYTXE0OUZiWVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1WnRGeXJsV3I3SUx6WFM=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[9]</b> 张立勋, 沈锦华, 路敦民, 等.AVR单片机实现的直流电机PWM调速控制器[J].机械与电子, 2004, 22 (4) :29-32.
                            </a>
                        </p>
                        <p id="21">
                            <a id="bibliography_10" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=LNDZ200504024&amp;v=MDU5MTJPM3pxcUJ0R0ZyQ1VSN3FmWnVadEZ5cmxXcjdJS1NQUGRMRzRIdFRNcTQ5SFlJUUtESDg0dlI0VDZqNTQ=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[10]</b> 历风满.数字PID控制算法的研究[J].辽宁大学学报 (自然科学版) , 2005, 32 (4) :367-370.
                            </a>
                        </p>
                        <p id="23">
                            <a id="bibliography_11" target="_blank" href="http://scholar.cnki.net/result.aspx?q=Digital PID controller for brushless DC motor based on AVR microcontroller">

                                <b>[11]</b> CHEN X, HUANG D G, HUANG Y P, et al.Digital PID controller for brushless DC motor based on AVR microcontroller[C].IEEEInternational Conference on Mechatronics &amp; Automation.IEEE, 2009:246-251.
                            </a>
                        </p>
                        <p id="25">
                            <a id="bibliography_12" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=GWCL200604025&amp;v=MjA1ODRZckc0SHRmTXE0OUhZWVFLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlp1WnRGeXJsV3I3SUlqckk=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[12]</b> 陈新宁, 张丽梅, 刘寅桐.PID的数字化算法在自动化测试系统中的应用[J].国外电子测量技术, 2006, 25 (4) :46-47.
                            </a>
                        </p>
                        <p id="27">
                            <a id="bibliography_13" >
                                    <b>[13]</b>
                                 李宁.Android开发权威指南[M].2版.北京:人民邮电出版社, 2013.
                            </a>
                        </p>
                        <p id="29">
                            <a id="bibliography_14" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DNZS201328001&amp;v=MDEzMDFyQ1VSN3FmWnVadEZ5cmxXcjdJSVNQUmZiRzRIOUxPcDQ5RlpZUUtESDg0dlI0VDZqNTRPM3pxcUJ0R0Y=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[14]</b> 马获蕾, 汤海凤.Android系统中SQLite数据库的研究[J].电脑知识与技术, 2013 (28) :6243-6245.
                            </a>
                        </p>
                        <p id="31">
                            <a id="bibliography_15" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DZCL201103027&amp;v=MDM2MjFIODR2UjRUNmo1NE8zenFxQnRHRnJDVVI3cWZadVp0RnlybFdyN0lJVGZJWXJHNEg5RE1ySTlIWTRRS0Q=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[15]</b> 习振华, 刘映杰, 陶维维, 等.SQLite在无线数据采集系统中的应用[J].电子测量技术, 2011, 34 (3) :117-121.
                            </a>
                        </p>
                        <p id="33">
                            <a id="bibliography_16" target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=CQSG201405037&amp;v=MjUzMDhadVp0RnlybFdyN0lKanpZYWJHNEg5WE1xbzlHWTRRS0RIODR2UjRUNmo1NE8zenFxQnRHRnJDVVI3cWY=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">

                                <b>[16]</b> LI X, SHEN F, LI D S.Application development of bluetooth low energy based on android system[J].Journal of Chongqing University of Science and Technology (Natural Sciences Edition) , 2014, 16 (5) :133-136.
                            </a>
                        </p>
            </div>
        <!--reference end-->
        <!--footnote start-->
        <!--footnote end-->



    </div>

        <input id="fileid" type="hidden" value="DZCL201913026" />
        <input id="dpi" type="hidden" value="600" />
    </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6e967eb120601ea41b9d312166416aa6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>


    


<input id="hid_uid" name="hid_uid" type="hidden" value="WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!" />
<input id="hid_kLogin_headerUrl" name="hid_kLogin_headerUrl" type="hidden" value="/KLogin/Request/GetKHeader.ashx%3Fcallback%3D%3F" />
<input id="hid_kLogin_footerUrl" name="hid_kLogin_footerUrl" type="hidden" value="/KLogin/Request/GetKFooter.ashx%3Fcallback%3D%3F" />
<div class="btn-link" style="display: none"><a target="_blank" href="/kcms/detail/detail.aspx?dbcode=CJFD&amp;filename=DZCL201913026&amp;v=MTE2ODl1WnRGeXJsV3I3SklUZklZckc0SDlqTnJJOUhZb1FLREg4NHZSNFQ2ajU0TzN6cXFCdEdGckNVUjdxZlo=&amp;uid=WEEvREcwSlJHSldRa1Fhb09pSnNveUxRekd3QkxsbWVobFYrZnFaTmhSdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!">知网节</a></div>
<div class="popflow" id="popupTips" style="display: none;">
    <div class="popflowArr"></div>
    <div class="popflowCot">
        <div class="hd"><a href="javascript:void(0);" onclick="$('#popupTips').hide();$('#popupmsg').html('')" class="close">X</a></div>
        <div class="bd">
            <p class="mes" id="popupmsg" name="popupmsg"></p>
          
        </div>
    </div>
</div>
<input type="hidden" id="myexport" value="//kns.cnki.net" />

<input type="hidden" id="KPCAPIPATH" value="//ishufang.cnki.net" />
<input type="hidden" id="CitedTimes" value="" />
<div class="link" id="GLSearch" style="display: none;">
    <i class="icon-trangle"></i>
    <div class="inner">
        <a class="icon" id="copytext">复制</a>
        <a class="icon" target="_blank" onclick="searchCRFD(this)">工具书搜索</a>
    </div>
</div>




<input id="hidVirtualPath" name="hidVirtualPath" type="hidden" value="/kxreader" />
<script src="/kxreader/bundles/detail?v=-ULdk-c6FkZHtJA2KAXPgHnyA8mtgyPnBde_C2VZ2BY1"></script>

<script src="/kxreader/Scripts/layer.min.js" type="text/javascript"></script>

<div id="footerBox" class="rootw footer">
</div>
<script>
    if (typeof FlushLogin == 'function') {
        FlushLogin();
    }
    modifyEcpHeader(true);
</script>

<!--图片放大功能 start-->
<script src="/kxreader/bundles/imagebox?v=W4phPu9SNkGcuPeJclikuVE3PpRyIW_gnfjm_19nynI1"></script>

<script type="text/javascript">
    $(function () {
        var j = $.noConflict();
        j(function () {
            j(".zoom-in,.btn-zoomin").imgbox({
                'alignment': 'center',
                'allowMultiple': false,
                'overlayShow': true
            });
        })
    });
</script>
<!--图片放大功能 end-->
<div class="fixedbar">
    <div class="backtop hiddenV" id="backtop">
        <a id="backTopSide" href="javascript:scroll(0,0);" title=""></a>
    </div>
</div>
<script type="text/javascript" src="/kxreader/Scripts/MathJax-2.6-latest/MathJax.js?config=MML_HTMLorMML-full"></script>


    <link href="/kxreader/Content/css/LeftDetail?v=NLcKG8I1SJUaVFrQ0iGpF2klAT0OsmHRaVSZ1rKb5xg1" rel="stylesheet"/>

</body>
</html>

